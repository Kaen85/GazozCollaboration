Directory structure:
â””â”€â”€ kaen85-gazozcollaboration/
    â”œâ”€â”€ README.md
    â”œâ”€â”€ backend/
    â”‚   â”œâ”€â”€ db.js
    â”‚   â”œâ”€â”€ index.js
    â”‚   â”œâ”€â”€ package.json
    â”‚   â”œâ”€â”€ server.js
    â”‚   â”œâ”€â”€ tempCodeRunnerFile.js
    â”‚   â”œâ”€â”€ config/
    â”‚   â”‚   â””â”€â”€ db.js
    â”‚   â”œâ”€â”€ controllers/
    â”‚   â”‚   â”œâ”€â”€ authController.js
    â”‚   â”‚   â””â”€â”€ projectController.js
    â”‚   â”œâ”€â”€ middleware/
    â”‚   â”‚   â”œâ”€â”€ auth.js
    â”‚   â”‚   â””â”€â”€ authMiddleware.js
    â”‚   â”œâ”€â”€ models/
    â”‚   â”‚   â”œâ”€â”€ Project.js
    â”‚   â”‚   â””â”€â”€ User.js
    â”‚   â””â”€â”€ routes/
    â”‚       â”œâ”€â”€ authRoutes.js
    â”‚       â”œâ”€â”€ projectRoutes.js
    â”‚       â””â”€â”€ users.js
    â””â”€â”€ frontend/
        â”œâ”€â”€ README.md
        â”œâ”€â”€ package.json
        â”œâ”€â”€ tailwind.config.js
        â”œâ”€â”€ public/
        â”‚   â”œâ”€â”€ index.html
        â”‚   â”œâ”€â”€ manifest.json
        â”‚   â””â”€â”€ robots.txt
        â””â”€â”€ src/
            â”œâ”€â”€ App.css
            â”œâ”€â”€ App.js
            â”œâ”€â”€ App.test.js
            â”œâ”€â”€ index.css
            â”œâ”€â”€ index.js
            â”œâ”€â”€ reportWebVitals.js
            â”œâ”€â”€ setupTests.js
            â”œâ”€â”€ components/
            â”‚   â”œâ”€â”€ auth/
            â”‚   â”‚   â””â”€â”€ ProtectedRoute.js
            â”‚   â”œâ”€â”€ layout/
            â”‚   â”‚   â”œâ”€â”€ Header.js
            â”‚   â”‚   â”œâ”€â”€ ProfileDropdown.js
            â”‚   â”‚   â”œâ”€â”€ RightSidebar.js
            â”‚   â”‚   â””â”€â”€ Sidebar.js
            â”‚   â””â”€â”€ projects/
            â”‚       â”œâ”€â”€ Comment.js
            â”‚       â”œâ”€â”€ CommentForm.js
            â”‚       â”œâ”€â”€ CommentList.js
            â”‚       â”œâ”€â”€ CreateProjectModal.js
            â”‚       â”œâ”€â”€ FileList.js
            â”‚       â”œâ”€â”€ IssueItem.js
            â”‚       â”œâ”€â”€ ProjectDiscussion.js
            â”‚       â”œâ”€â”€ ProjectEditPage.js
            â”‚       â”œâ”€â”€ ProjectFiles.js
            â”‚       â”œâ”€â”€ ProjectIssues.js
            â”‚       â”œâ”€â”€ ProjectList.js
            â”‚       â”œâ”€â”€ ProjectTasks.js
            â”‚       â””â”€â”€ SharedProjectCard.js
            â”œâ”€â”€ context/
            â”‚   â”œâ”€â”€ AuthContext.js
            â”‚   â”œâ”€â”€ ProjectContext.js
            â”‚   â””â”€â”€ ThemeContext.js
            â”œâ”€â”€ pages/
            â”‚   â”œâ”€â”€ DashboardLayout.js
            â”‚   â”œâ”€â”€ DashboardOverviewPage.js
            â”‚   â”œâ”€â”€ ForgotPasswordPage.js
            â”‚   â”œâ”€â”€ LandingPage.js
            â”‚   â”œâ”€â”€ LoginPage.js
            â”‚   â”œâ”€â”€ MyProjectsPage.js
            â”‚   â”œâ”€â”€ ProjectDetailPage.js
            â”‚   â”œâ”€â”€ RegisterPage.js
            â”‚   â”œâ”€â”€ ResetPasswordPage.js
            â”‚   â”œâ”€â”€ SettingsPage.js
            â”‚   â”œâ”€â”€ SharedProjectsPage.js
            â”‚   â””â”€â”€ Users.js
            â””â”€â”€ services/
                â””â”€â”€ api.js

================================================
FILE: README.md
================================================
# GazozCollaboration
ðŸŒ Project Hub
The Project Collaboration Hub (HUB) is a real-time digital workspace designed to centralize academic group project management. It eliminates the need for scattered tools by offering:

Task Management: Kanban board, task assignment, and status tracking.

Real-time Chat: Instant coordination via WebSockets.

Progress Tracking: Timeline view and automatic completion percentage.

Tech Stack: Built with React/Tailwind (Frontend) and a Node.js/Django API with PostgreSQL (Backend).

ðŸ§‘â€ðŸ’» The Team
Our team covers all key areas of the stack:

Role	Focus
Lead Backend Engineer	API, Database (PostgreSQL), and Real-time (WebSockets) setup.
Lead Frontend Developer	UI/UX, Component development (React/Tailwind), and state management.
DevOps & Integrations	Cloud deployment, File Storage (S3/Drive), and external tool integration.



================================================
FILE: backend/db.js
================================================
// backend/db.js
const { Pool } = require('pg');
require('dotenv').config(); // .env dosyasÄ±ndaki deÄŸiÅŸkenleri yÃ¼kler

// Yeni Pool yapÄ±landÄ±rmasÄ±
const pool = new Pool({
  user: process.env.PGUSER,
  host: process.env.PGHOST,
  database: process.env.PGDATABASE,
  password: process.env.PGPASSWORD,
  port: process.env.PGPORT,
  ssl: process.env.DATABASE_URL // Sadece Heroku/Render gibi servisler iÃ§in 'ssl' gerekir.
    ? { rejectUnauthorized: false } 
    : false, // Lokal 'localhost' baÄŸlantÄ±sÄ±nda ssl: false olmalÄ±
});

module.exports = {
Â  query: (text, params) => pool.query(text, params),
};


================================================
FILE: backend/index.js
================================================
const express = require('express');
const cors = require('cors');
const path = require('path');
require('dotenv').config();
const usersRouter = require("./routes/users");

const app = express();

// Middleware
app.use(cors());
app.use(express.json());

// === ROUTES ===
// Make sure this line exists and points to the file we edited:
app.use('/api/auth', require('./routes/authRoutes')); 
app.use('/api/projects', require('./routes/projectRoutes'));
app.use("/users", usersRouter);

// Serve Static Files (Uploads)
app.use('/uploads', express.static('uploads'));

const PORT = process.env.PORT || 5000;

app.listen(PORT, () => console.log(`Server started on port ${PORT}`));


================================================
FILE: backend/package.json
================================================
{
  "name": "project-collaboration-hub-backend",
  "version": "1.0.0",
  "description": "Backend API for the Project Collaboration Hub application.",
  "main": "index.js",
  "scripts": {
    "start": "node index.js",
    "dev": "nodemon index.js",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [
    "react",
    "node",
    "express",
    "postgresql",
    "collaboration"
  ],
  "author": "Kaan Kavas",
  "license": "ISC",
  "dependencies": {
    "bcryptjs": "^2.4.3",
    "cors": "^2.8.5",
    "dotenv": "^16.6.1",
    "express": "^4.18.2",
    "jsonwebtoken": "^9.0.2",
    "multer": "^2.0.2",
    "pg": "^8.16.3",
    "socket.io": "^4.6.1"
  },
  "devDependencies": {
    "nodemon": "^2.0.22"
  }
}



================================================
FILE: backend/server.js
================================================
const express = require('express');
const cors = require('cors');
const path = require('path');
require('dotenv').config();

const app = express();

app.use(cors());
app.use(express.json());

// Rotalar
app.use('/api/auth', require('./routes/authRoutes'));
app.use('/api/projects', require('./routes/projectRoutes')); // Az Ã¶nce gÃ¼ncellediÄŸimiz dosya

// Statik Dosyalar
app.use('/uploads', express.static('uploads'));

const PORT = process.env.PORT || 5000;
app.listen(PORT, () => console.log(`Server started on port ${PORT}`));


================================================
FILE: backend/tempCodeRunnerFile.js
================================================
app.listen(5000, () => console.log('Server 5000 portunda'));


================================================
FILE: backend/config/db.js
================================================
// PostgreSQL pool + schema bootstrap
import pkg from "pg";
import dotenv from "dotenv";
dotenv.config();
const { Pool } = pkg;

export const pool = new Pool({
  connectionString: process.env.DATABASE_URL || "postgresql://postgres:1234@localhost:5432/studentdb"
});

export async function ensureTables(){
  const c = await pool.connect();
  try{
    await c.query("BEGIN");
    await c.query(`CREATE TABLE IF NOT EXISTS users(
      id SERIAL PRIMARY KEY,
      name TEXT NOT NULL,
      email TEXT UNIQUE NOT NULL,
      password TEXT NOT NULL,
      created_at TIMESTAMP DEFAULT NOW()
    );`);
    await c.query(`CREATE TABLE IF NOT EXISTS projects(
      id SERIAL PRIMARY KEY,
      owner_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
      title TEXT NOT NULL,
      description TEXT,
      visibility TEXT NOT NULL DEFAULT 'private', -- 'private' or 'shared'
      created_at TIMESTAMP DEFAULT NOW()
    );`);
    await c.query("COMMIT");
  }catch(e){
    await c.query("ROLLBACK"); throw e;
  }finally{
    c.release();
  }
}



================================================
FILE: backend/controllers/authController.js
================================================
// Accept all usernames and passwords, return a dummy token
export const loginUser = (req, res) => {
  const { username, password } = req.body;

  if (!username || !password) {
    return res.status(400).json({ message: "Username and password required" });
  }

  const fakeToken = "token-" + Date.now();
  res.status(200).json({ token: fakeToken });
};



// Minimal auth to obtain a JWT for protected project routes
import bcrypt from "bcryptjs";
import jwt from "jsonwebtoken";
import { createUser, findUserByEmail } from "../models/User.js";

export async function register(req,res){
  try{
    const {name,email,password}=req.body;
    if(!name||!email||!password) return res.status(400).json({message:"Missing fields"});
    const exists = await findUserByEmail(email);
    if(exists) return res.status(400).json({message:"User already exists"});
    const hash = await bcrypt.hash(password, 10);
    const user = await createUser(name,email,hash);
    res.status(201).json({message:"Registered", user});
  }catch(e){
    res.status(500).json({message:e.message});
  }
}

export async function login(req,res){
  try{
    const {email,password}=req.body;
    const user = await findUserByEmail(email);
    if(!user) return res.status(400).json({message:"User not found"});
    const ok = await bcrypt.compare(password, user.password);
    if(!ok) return res.status(400).json({message:"Invalid credentials"});
    const token = jwt.sign({id:user.id}, process.env.JWT_SECRET || "dev_secret", {expiresIn:"2h"});
    res.json({message:"Login successful", token});
  }catch(e){
    res.status(500).json({message:e.message});
  }
}



================================================
FILE: backend/controllers/projectController.js
================================================
// Projects: create, list, details
import { createProject, listMyProjects, listSharedProjects, getProjectById } from "../models/Project.js";

// POST /api/projects  (auth required)
export async function create(req,res){
  try{
    const { title, description, visibility } = req.body;
    if(!title) return res.status(400).json({message:"Title is required"});
    const project = await createProject(req.user.id, { title, description, visibility });
    res.status(201).json({message:"Created", project});
  }catch(e){
    res.status(500).json({message:e.message});
  }
}

// GET /api/projects/mine  (auth required)
export async function mine(req,res){
  try{
    const projects = await listMyProjects(req.user.id);
    res.json({ projects });
  }catch(e){
    res.status(500).json({message:e.message});
  }
}

// GET /api/projects/shared  (public)
export async function shared(_,res){
  try{
    const projects = await listSharedProjects();
    res.json({ projects });
  }catch(e){
    res.status(500).json({message:e.message});
  }
}

// GET /api/projects/:id  (auth required; owner or shared)
export async function details(req,res){
  try{
    const project = await getProjectById(req.params.id);
    if(!project) return res.status(404).json({message:"Not found"});
    if(project.visibility !== "shared" && project.owner_id !== req.user.id){
      return res.status(403).json({message:"Forbidden"});
    }
    res.json({ project });
  }catch(e){
    res.status(500).json({message:e.message});
  }
}



================================================
FILE: backend/middleware/auth.js
================================================
const jwt = require('jsonwebtoken');
require('dotenv').config();

module.exports = function(req, res, next) {
  // 1. Header'dan token'Ä± al (Frontend x-auth-token gÃ¶nderiyor)
  const token = req.header('x-auth-token');

  // 2. Token yoksa durdur
  if (!token) {
    return res.status(401).json({ message: 'No token, authorization denied' });
  }

  // 3. Token'Ä± Ã§Ã¶z ve kullanÄ±cÄ±yÄ± tanÄ±
  try {
    const secret = process.env.JWT_SECRET || 'mysecrettoken';
    const decoded = jwt.verify(token, secret);
    
    req.user = decoded.user; // Ä°ÅŸte req.user burada oluÅŸuyor!
    next();
  } catch (err) {
    res.status(401).json({ message: 'Token is not valid' });
  }
};


================================================
FILE: backend/middleware/authMiddleware.js
================================================
// backend/middleware/authMiddleware.js
const jwt = require('jsonwebtoken');
require('dotenv').config();

// This function is our "gatekeeper"
function authMiddleware(req, res, next) {
  // Get the token from the request header
  // It's usually sent as 'Bearer <token>'
  const authHeader = req.header('Authorization');

  if (!authHeader) {
    return res.status(401).json({ message: 'No token, authorization denied' });
  }

  // Check if it starts with 'Bearer '
  const token = authHeader.split(' ')[1];
  if (!token) {
    return res.status(401).json({ message: 'Token is malformed, authorization denied' });
  }

  try {
    // Verify the token using our secret key
    const decoded = jwt.verify(token, process.env.JWT_SECRET);

    // Token is valid. Add the user's information to the request object
    // Now any protected route can access req.user
    req.user = decoded.user;
    next(); // Pass control to the next function (the actual route handler)
  } catch (err) {
    res.status(401).json({ message: 'Token is not valid' });
  }
}

module.exports = authMiddleware;


================================================
FILE: backend/models/Project.js
================================================
// Project model helpers
import { pool } from "../config/db.js";

export async function createProject(ownerId, { title, description, visibility }){
  const { rows } = await pool.query(
    "INSERT INTO projects(owner_id,title,description,visibility) VALUES($1,$2,$3,$4) RETURNING *",
    [ownerId, title, description || null, visibility || "private"]
  );
  return rows[0];
}

export async function listMyProjects(ownerId){
  const { rows } = await pool.query(
    "SELECT * FROM projects WHERE owner_id=$1 ORDER BY created_at DESC",
    [ownerId]
  );
  return rows;
}

export async function listSharedProjects(){
  const { rows } = await pool.query(
    "SELECT * FROM projects WHERE visibility='shared' ORDER BY created_at DESC"
  );
  return rows;
}

export async function getProjectById(id){
  const { rows } = await pool.query(
    "SELECT * FROM projects WHERE id=$1",
    [id]
  );
  return rows[0];
}



================================================
FILE: backend/models/User.js
================================================
import { pool } from "../config/db.js";
export async function findUserByEmail(email){
  const { rows } = await pool.query("SELECT * FROM users WHERE email=$1", [email]);
  return rows[0];
}
export async function createUser(name,email,hash){
  const { rows } = await pool.query(
    "INSERT INTO users(name,email,password) VALUES($1,$2,$3) RETURNING id,name,email,created_at",
    [name,email,hash]
  );
  return rows[0];
}



================================================
FILE: backend/routes/authRoutes.js
================================================
const express = require('express');
const router = express.Router();
const db = require('../db');
const bcrypt = require('bcryptjs');
const jwt = require('jsonwebtoken');
const auth = require('../middleware/auth'); // Token kontrolÃ¼ iÃ§in ÅŸart
require('dotenv').config();

// =========================================================
// 1. TÃœM KULLANICILARI LÄ°STELE (BU EKSÄ°KTÄ°)
// URL: /api/auth/users
// =========================================================
router.get('/users', auth, async (req, res) => {
  try {
    // Åžifre hariÃ§, en yeniden eskiye doÄŸru kullanÄ±cÄ±larÄ± Ã§ek
    const result = await db.query(
      'SELECT id, username, email, role, created_at FROM users ORDER BY created_at DESC'
    );
    res.json(result.rows);
  } catch (err) {
    console.error("Listeleme HatasÄ±:", err.message);
    res.status(500).send('Server Error');
  }
});

// =========================================================
// 2. KULLANICI KAYIT (REGISTER)
// URL: /api/auth/register
// =========================================================
router.post('/register', async (req, res) => {
  const { username, email, password, role } = req.body;

  if (!username || !email || !password) {
    return res.status(400).json({ message: 'Please enter all fields' });
  }

  try {
    const userCheck = await db.query('SELECT * FROM users WHERE username = $1 OR email = $2', [username, email]);

    if (userCheck.rows.length > 0) {
      if (userCheck.rows[0].username === username) {
        return res.status(400).json({ message: 'Username already exists' });
      }
      return res.status(400).json({ message: 'Email already in use' });
    }

    const salt = await bcrypt.genSalt(10);
    const passwordHash = await bcrypt.hash(password, salt);
    
    // Admin panelinden rol gelmezse varsayÄ±lan 'student' olsun
    const userRole = role || 'student';

    const newUser = await db.query(
      'INSERT INTO users (username, email, password_hash, role) VALUES ($1, $2, $3, $4) RETURNING id, username, email, role',
      [username, email, passwordHash, userRole]
    );

    const payload = {
      user: { id: newUser.rows[0].id, role: newUser.rows[0].role }
    };

    jwt.sign(
      payload,
      process.env.JWT_SECRET || 'mysecrettoken',
      { expiresIn: '30d' },
      (err, token) => {
        if (err) throw err;
        res.status(201).json({
          message: 'User registered successfully',
          token,
          user: newUser.rows[0]
        });
      }
    );

  } catch (err) {
    console.error("Register Error:", err.message);
    res.status(500).send('Server error');
  }
});

// =========================================================
// 3. LOGÄ°N, USER ve ÅžÄ°FRE Ä°ÅžLEMLERÄ° (MEVCUT KODLARIN)
// =========================================================
router.post('/login', async (req, res) => {
  const { username, password } = req.body;
  if (!username || !password) return res.status(400).json({ message: 'Please enter all fields' });

  try {
    const userResult = await db.query('SELECT * FROM users WHERE username = $1', [username]);
    if (userResult.rows.length === 0) return res.status(400).json({ message: 'Invalid credentials' });

    const user = userResult.rows[0];
    const isMatch = await bcrypt.compare(password, user.password_hash);
    if (!isMatch) return res.status(400).json({ message: 'Invalid credentials' });

    const payload = { user: { id: user.id, role: user.role } };
    jwt.sign(payload, process.env.JWT_SECRET || 'mysecrettoken', { expiresIn: '30d' }, (err, token) => {
      if (err) throw err;
      res.json({ token, user: { id: user.id, username: user.username, email: user.email, role: user.role } });
    });
  } catch (err) { res.status(500).send('Server error'); }
});

router.get('/user', auth, async (req, res) => {
    try {
      const user = await db.query('SELECT id, username, email, role FROM users WHERE id = $1', [req.user.id]);
      res.json(user.rows[0]);
    } catch (err) { res.status(500).send('Server Error'); }
});

router.post('/forgot-password', async (req, res) => {
  /* ... Mevcut kodunuz kalsÄ±n ... */
  res.json({ message: 'Password reset link sent' });
});

router.post('/reset-password', async (req, res) => {
  /* ... Mevcut kodunuz kalsÄ±n ... */
  res.json({ message: 'Password updated' });
});

module.exports = router;


================================================
FILE: backend/routes/projectRoutes.js
================================================
const express = require('express');
const router = express.Router();
const db = require('../db'); 
const multer = require('multer');
const path = require('path');
// Ã–NEMLÄ°: Auth middleware buraya eklendi
const auth = require('../middleware/auth'); 

// === MULTER AYARLARI ===
const storage = multer.diskStorage({
  destination: (req, file, cb) => cb(null, 'uploads/'),
  filename: (req, file, cb) => cb(null, Date.now() + '-' + file.originalname)
});
const upload = multer({ storage: storage });

// =================================
// YETKÄ° KONTROLÃœ (MIDDLEWARE)
// =================================
const checkProjectMember = async (req, res, next) => {
  try {
    const projectId = req.params.id; 
    const userId = req.user.id; 
    // Auth middleware'den gelen rolÃ¼ alÄ±yoruz
    const userRole = req.user.role; 

    // 1. Proje var mÄ± diye bak
    const projectCheck = await db.query(
      'SELECT is_public, owner_id, is_tasks_public FROM projects WHERE id = $1',
      [projectId]
    );

    if (projectCheck.rows.length === 0) {
      return res.status(404).json({ message: 'Project not found.' });
    }

    const project = projectCheck.rows[0];

    // === ADMIN KONTROLÃœ (YENÄ°) ===
    // EÄŸer kullanÄ±cÄ± Admin ise, veritabanÄ± Ã¼yeliÄŸine bakmaksÄ±zÄ±n 'owner' yetkisi ver.
    if (userRole === 'admin') {
        req.projectId = projectId;
        req.memberRole = 'owner'; // Admin her zaman 'owner' yetkisine sahiptir
        req.projectSettings = project; 
        return next(); // Direkt geÃ§iÅŸ izni
    }

    // 2. Admin deÄŸilse normal Ã¼yelik kontrolÃ¼ yap
    const memberCheck = await db.query(
      'SELECT role FROM project_members WHERE project_id = $1 AND user_id = $2',
      [projectId, userId]
    );

    const memberRole = memberCheck.rows[0]?.role; 

    if (memberRole) {
      req.projectId = projectId;
      req.memberRole = memberRole;
      req.projectSettings = project; 
      next();
    } else if (project.is_public) {
      req.projectId = projectId;
      req.memberRole = 'public_viewer';
      req.projectSettings = project;
      next();
    } else {
      return res.status(403).json({ message: 'Access Denied.' });
    }
  } catch (err) {
    console.error(err.message);
    res.status(500).send('Server Error');
  }
};

// =================================
// 1. PROJE YÃ–NETÄ°MÄ°
// =================================

// Ã–NEMLÄ°: Ã‡akÄ±ÅŸmayÄ± Ã¶nlemek iÃ§in Ã¶zel rotalarÄ± en Ã¼ste koyduk.

// @route   GET /api/projects/user/all-tasks
router.get('/user/all-tasks', auth, async (req, res) => {
  const userId = req.user.id;
  try {
    const query = `
      SELECT 
        t.id, t.title, t.status, t.due_date, t.created_at,
        p.id as project_id, p.name as project_name
      FROM project_tasks t
      JOIN projects p ON t.project_id = p.id
      JOIN project_members pm ON p.id = pm.project_id
      WHERE pm.user_id = $1
      ORDER BY t.created_at DESC
      LIMIT 10
    `;
    const result = await db.query(query, [userId]);
    res.json(result.rows);
  } catch (err) {
    console.error(err.message);
    res.status(500).send('Server Error');
  }
});

// @route   GET /api/projects/my-projects
router.get('/my-projects', auth, async (req, res) => {
  try {
    const projects = await db.query(`
      SELECT * FROM projects
      WHERE owner_id = $1
      ORDER BY last_updated_at DESC
    `, [req.user.id]);
    res.json(projects.rows);
  } catch (err) {
    res.status(500).send('Server error');
  }
});

// @route   GET /api/projects/shared-projects
router.get('/shared-projects', auth, async (req, res) => {
  try {
    // EÄžER ADMIN Ä°SE: Kendi oluÅŸturmadÄ±ÄŸÄ± TÃœM projeleri "Shared" gibi gÃ¶rsÃ¼n
    if (req.user.role === 'admin') {
      const projects = await db.query(`
        SELECT p.id, p.name, p.description, p.owner_id, p.created_at, p.last_updated_at, p.is_public,
          p.created_at as joined_at,
          u.username as owner_name
        FROM projects p
        JOIN users u ON p.owner_id = u.id
        WHERE p.owner_id != $1 -- Kendisinin olmayanlar
        ORDER BY p.last_updated_at DESC
      `, [req.user.id]);
      return res.json(projects.rows);
    }

    // NORMAL KULLANICI Ä°Ã‡Ä°N (Eski kodun aynÄ±sÄ±)
    const projects = await db.query(`
      (
        SELECT p.id, p.name, p.description, p.owner_id, p.created_at, p.last_updated_at, p.is_public,
          pm.joined_at,
          u.username as owner_name
        FROM projects p
        JOIN project_members pm ON p.id = pm.project_id
        JOIN users u ON p.owner_id = u.id
        WHERE pm.user_id = $1 AND p.owner_id != $1
      )
      UNION
      (
        SELECT p.id, p.name, p.description, p.owner_id, p.created_at, p.last_updated_at, p.is_public,
          p.created_at as joined_at,
          u.username as owner_name
        FROM projects p
        JOIN users u ON p.owner_id = u.id
        WHERE p.is_public = true AND p.owner_id != $1
      )
      ORDER BY last_updated_at DESC
    `, [req.user.id]);
    res.json(projects.rows);
  } catch (err) {
    res.status(500).send('Server error');
  }
});

// @route   POST /api/projects (Yeni Proje)
router.post('/', auth, async (req, res) => {
  const { name, description } = req.body;
  const ownerId = req.user.id; 

  try {
    const existingProject = await db.query('SELECT id FROM projects WHERE name = $1', [name]);
    if (existingProject.rows.length > 0) {
      return res.status(400).json({ message: 'A project with this name already exists.' });
    }

    await db.query('BEGIN'); 
    
    const newProject = await db.query(`
      INSERT INTO projects (name, description, owner_id)
      VALUES ($1, $2, $3)
      RETURNING * `, [name, description, ownerId]);
      
    const projectId = newProject.rows[0].id;
    
    await db.query(
      'INSERT INTO project_members (project_id, user_id, role) VALUES ($1, $2, $3)',
      [projectId, ownerId, 'owner']
    );
    
    await db.query('COMMIT'); 
    res.status(201).json(newProject.rows[0]);
  } catch (err) {
    await db.query('ROLLBACK'); 
    res.status(500).send('Server error');
  }
});

// @route   GET /api/projects (TÃ¼m projeler)
router.get('/', auth, async (req, res) => {
  try {
    let query;
    let params;

    // EÄžER ADMIN Ä°SE: VeritabanÄ±ndaki BÃœTÃœN projeleri getir
    if (req.user.role === 'admin') {
      query = `
        SELECT p.*, 'owner' as user_role 
        FROM projects p 
        ORDER BY p.last_updated_at DESC
      `;
      params = [];
    } 
    // EÄžER NORMAL KULLANICI Ä°SE: Sadece Ã¼ye olduklarÄ±nÄ± getir
    else {
      query = `
        SELECT p.*, pm.role as user_role 
        FROM projects p 
        JOIN project_members pm ON p.id = pm.project_id 
        WHERE pm.user_id = $1 
        ORDER BY p.last_updated_at DESC
      `;
      params = [req.user.id];
    }

    const projects = await db.query(query, params);
    res.json(projects.rows);
  } catch (err) { 
    console.error(err);
    res.status(500).send('Server error');
  }
});

// @route   GET /api/projects/:id (Detay)
router.get('/:id', auth, checkProjectMember, async (req, res) => {
  try {
    const project = await db.query('SELECT * FROM projects WHERE id = $1', [req.projectId]);
    const data = project.rows[0];
    data.currentUserRole = req.memberRole; 
    res.json(data);
  } catch (err) {
    res.status(500).send('Server error');
  }
});

// @route   PUT /api/projects/:id (GÃ¼ncelle)
router.put('/:id', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole !== 'owner') {
    return res.status(403).json({ message: 'Only the project owner can update details.' });
  }
  const { name, description, long_description } = req.body;
  try {
    const updatedProject = await db.query(
      'UPDATE projects SET name = $1, description = $2, long_description = $3, last_updated_at = NOW() WHERE id = $4 RETURNING *',
      [name, description, long_description, req.projectId]
    );
    const projectData = updatedProject.rows[0];
    projectData.currentUserRole = req.memberRole;
    res.json(projectData);
  } catch (err) {
    res.status(500).send('Server Error');
  }
});

// @route   DELETE /api/projects/:id
router.delete('/:id', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole !== 'owner') {
    return res.status(403).json({ message: 'Only owner can delete.' });
  }
  try {
    await db.query('DELETE FROM projects WHERE id = $1', [req.projectId]);
    res.json({ message: 'Project deleted successfully' });
  } catch (err) {
    res.status(500).send('Server Error');
  }
});

// @route   PUT /visibility
router.put('/:id/visibility', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole !== 'owner') return res.status(403).json({ message: 'Only owner.' });
  try {
    const upd = await db.query(
      'UPDATE projects SET is_public = $1 WHERE id = $2 RETURNING *',
      [req.body.is_public, req.projectId]
    );
    const data = upd.rows[0];
    data.currentUserRole = req.memberRole;
    res.json(data);
  } catch (err) { res.status(500).send('Server Error'); }
});

// =================================
// 2. TASKS (KANBAN)
// =================================

router.put('/:id/settings/tasks-visibility', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole !== 'owner') return res.status(403).json({ message: 'Only owner.' });
  try {
    const upd = await db.query('UPDATE projects SET is_tasks_public = $1 WHERE id = $2 RETURNING is_tasks_public', [req.body.is_tasks_public, req.projectId]);
    res.json(upd.rows[0]);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.get('/:id/tasks', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole === 'public_viewer' && !req.projectSettings.is_tasks_public) {
    return res.status(403).json({ message: 'Tasks are private.' });
  }
  try {
    const tasks = await db.query(
      'SELECT t.*, u.username as created_by_name FROM project_tasks t LEFT JOIN users u ON t.assignee_id = u.id WHERE t.project_id = $1 ORDER BY t.created_at ASC',
      [req.projectId]
    );
    res.json(tasks.rows);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.post('/:id/tasks', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole === 'public_viewer') return res.status(403).json({ message: 'Read-only.' });
  const { title, description, status, due_date } = req.body;
  try {
    const newTask = await db.query(
      'INSERT INTO project_tasks (project_id, title, description, status, due_date, assignee_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING *',
      [req.projectId, title, description, status || 'todo', due_date, req.user.id]
    );
    const user = await db.query('SELECT username FROM users WHERE id = $1', [req.user.id]);
    const taskObj = newTask.rows[0];
    taskObj.created_by_name = user.rows[0].username;
    res.status(201).json(taskObj);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.put('/:id/tasks/:taskId', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole === 'public_viewer') return res.status(403).json({ message: 'Read-only.' });
  const { title, status } = req.body;
  const { taskId } = req.params;
  try {
    let q, p;
    if (status) { q = 'UPDATE project_tasks SET status = $1 WHERE id = $2 RETURNING *'; p = [status, taskId]; }
    else { q = 'UPDATE project_tasks SET title = $1 WHERE id = $2 RETURNING *'; p = [title, taskId]; }
    
    const upd = await db.query(q, p);
    const taskObj = upd.rows[0];
    const user = await db.query('SELECT username FROM users WHERE id = $1', [taskObj.assignee_id]);
    taskObj.created_by_name = user.rows.length > 0 ? user.rows[0].username : 'Unknown';
    res.json(taskObj);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.delete('/:id/tasks/:taskId', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole === 'public_viewer') return res.status(403).json({ message: 'Read-only.' });
  try {
    await db.query('DELETE FROM project_tasks WHERE id = $1', [req.params.taskId]);
    res.json({ message: 'Deleted' });
  } catch (err) { res.status(500).send('Server Error'); }
});

// =================================
// 3. ISSUES
// =================================

router.get('/:id/issues', auth, checkProjectMember, async (req, res) => {
  try {
    const issues = await db.query(
      'SELECT pi.*, u.username as created_by_name FROM project_issues pi JOIN users u ON pi.created_by_id = u.id WHERE pi.project_id = $1 ORDER BY pi.created_at DESC',
      [req.projectId]
    );
    res.json(issues.rows);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.post('/:id/issues', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole === 'viewer' || req.memberRole === 'public_viewer') return res.status(403).json({ message: 'No permission.' });
  try {
    const newIssue = await db.query(
      'INSERT INTO project_issues (project_id, created_by_id, text) VALUES ($1, $2, $3) RETURNING *',
      [req.projectId, req.user.id, req.body.text]
    );
    const user = await db.query('SELECT username FROM users WHERE id = $1', [req.user.id]);
    const result = newIssue.rows[0];
    result.created_by_name = user.rows[0].username;
    res.status(201).json(result);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.put('/:id/issues/:issueId', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole !== 'owner' && req.memberRole !== 'editor') return res.status(403).json({ message: 'No permission.' });
  const { text, status } = req.body;
  try {
    let q, p;
    if (text !== undefined) { q = 'UPDATE project_issues SET text = $1 WHERE id = $2 RETURNING *'; p = [text, req.params.issueId]; }
    else { q = 'UPDATE project_issues SET status = $1 WHERE id = $2 RETURNING *'; p = [status, req.params.issueId]; }
    const upd = await db.query(q, p);
    const result = upd.rows[0];
    const userResult = await db.query('SELECT username FROM users WHERE id = $1', [result.created_by_id]);
    result.created_by_name = userResult.rows[0].username;
    res.json(result);
  } catch (err) { res.status(500).send('Server Error'); }
});

// =================================
// 4. COMMENTS
// =================================

router.get('/:id/comments', auth, checkProjectMember, async (req, res) => {
  try {
    const comments = await db.query(
      'SELECT c.*, u.username as author_name, c.likes_user_ids FROM comments c JOIN users u ON c.author_id = u.id WHERE c.project_id = $1 AND c.issue_id IS NULL ORDER BY c.created_at ASC',
      [req.projectId]
    );
    res.json(comments.rows);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.post('/:id/comments', auth, checkProjectMember, async (req, res) => {
  try {
    const newComment = await db.query(
      'INSERT INTO comments (project_id, author_id, text) VALUES ($1, $2, $3) RETURNING *',
      [req.projectId, req.user.id, req.body.text]
    );
    const user = await db.query('SELECT username FROM users WHERE id = $1', [req.user.id]);
    const result = newComment.rows[0];
    result.author_name = user.rows[0].username;
    result.likes_user_ids = [];
    res.status(201).json(result);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.get('/:id/issues/:issueId/comments', auth, checkProjectMember, async (req, res) => {
  try {
    const comments = await db.query(
      'SELECT c.*, u.username as author_name, c.likes_user_ids FROM comments c JOIN users u ON c.author_id = u.id WHERE c.issue_id = $1 ORDER BY c.created_at ASC',
      [req.params.issueId]
    );
    res.json(comments.rows);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.post('/:id/issues/:issueId/comments', auth, checkProjectMember, async (req, res) => {
  try {
    const issueCheck = await db.query('SELECT status FROM project_issues WHERE id = $1', [req.params.issueId]);
    if (issueCheck.rows[0].status === 'Closed') return res.status(403).json({ message: 'Issue is closed.' });
    
    const newComment = await db.query(
      'INSERT INTO comments (project_id, issue_id, author_id, text) VALUES ($1, $2, $3, $4) RETURNING *',
      [req.projectId, req.params.issueId, req.user.id, req.body.text]
    );
    const userResult = await db.query('SELECT username FROM users WHERE id = $1', [req.user.id]);
    const result = newComment.rows[0];
    result.author_name = userResult.rows[0].username;
    res.status(201).json(result);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.put('/:id/comments/:commentId', auth, checkProjectMember, async (req, res) => {
  try {
    let q = 'UPDATE comments SET text = $1 WHERE id = $2 AND author_id = $3 RETURNING *';
    let p = [req.body.text, req.params.commentId, req.user.id];
    if (req.memberRole === 'owner') { q = 'UPDATE comments SET text = $1 WHERE id = $2 RETURNING *'; p = [req.body.text, req.params.commentId]; }
    const upd = await db.query(q, p);
    if(upd.rows.length===0) return res.status(403).json({message:'Denied'});
    const result = upd.rows[0];
    const userResult = await db.query('SELECT username FROM users WHERE id = $1', [result.author_id]);
    result.author_name = userResult.rows[0].username;
    res.json(result);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.delete('/:id/comments/:commentId', auth, checkProjectMember, async (req, res) => {
  try {
    let q = 'DELETE FROM comments WHERE id = $1 AND author_id = $2 RETURNING *';
    let p = [req.params.commentId, req.user.id];
    if (req.memberRole === 'owner') { q = 'DELETE FROM comments WHERE id = $1 RETURNING *'; p = [req.params.commentId]; }
    const del = await db.query(q, p);
    if(del.rows.length===0) return res.status(403).json({message:'Denied'});
    res.json({message:'Deleted'});
  } catch (err) { res.status(500).send('Server Error'); }
});

router.post('/:id/comments/:commentId/like', auth, checkProjectMember, async (req, res) => {
   try {
     const c = await db.query('SELECT likes_user_ids FROM comments WHERE id = $1', [req.params.commentId]);
     if(c.rows.length===0) return res.status(404).json({message:'Not found'});
     const likes = c.rows[0].likes_user_ids || [];
     let q;
     if(likes.includes(req.user.id)) q = 'UPDATE comments SET likes_user_ids = array_remove(likes_user_ids, $1) WHERE id = $2 RETURNING likes_user_ids';
     else q = 'UPDATE comments SET likes_user_ids = array_append(likes_user_ids, $1) WHERE id = $2 RETURNING likes_user_ids';
     const upd = await db.query(q, [req.user.id, req.params.commentId]);
     res.json(upd.rows[0]);
   } catch (err) { res.status(500).send('Server Error'); }
});

// =================================
// 5. MEMBERS
// =================================
router.get('/:id/members', auth, checkProjectMember, async (req, res) => {
  try {
    const m = await db.query('SELECT u.id, u.username, pm.role FROM project_members pm LEFT JOIN users u ON pm.user_id = u.id WHERE pm.project_id = $1', [req.projectId]);
    res.json(m.rows);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.post('/:id/members', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole !== 'owner' && req.memberRole !== 'editor') return res.status(403).json({message:'Denied'});
  const { username, role } = req.body;
  try {
    const u = await db.query('SELECT id FROM users WHERE username = $1', [username]);
    if(u.rows.length===0) return res.status(404).json({message:'User not found'});
    const uid = u.rows[0].id;
    const check = await db.query('SELECT * FROM project_members WHERE project_id=$1 AND user_id=$2', [req.projectId, uid]);
    if(check.rows.length>0) return res.status(400).json({message:'Already member'});
    const nm = await db.query('INSERT INTO project_members (project_id, user_id, role) VALUES ($1, $2, $3) RETURNING role', [req.projectId, uid, role]);
    res.status(201).json({id: uid, username, role: nm.rows[0].role});
  } catch (err) { res.status(500).send('Server Error'); }
});

router.delete('/:id/members/:userId', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole !== 'owner') return res.status(403).json({message:'Denied'});
  if (req.params.userId === req.user.id) return res.status(400).json({message:'Cannot remove owner'});
  try {
    const del = await db.query('DELETE FROM project_members WHERE project_id=$1 AND user_id=$2 RETURNING *', [req.projectId, req.params.userId]);
    if(del.rows.length===0) return res.status(404).json({message:'Not found'});
    res.json({message:'Removed'});
  } catch (err) { res.status(500).send('Server Error'); }
});

// =================================
// 6. FILES
// =================================
router.get('/:id/files', auth, checkProjectMember, async (req, res) => {
  try {
    const f = await db.query('SELECT pf.*, u.username as uploader_name FROM project_files pf JOIN users u ON pf.uploader_id = u.id WHERE pf.project_id = $1 ORDER BY pf.created_at DESC', [req.projectId]);
    res.json(f.rows);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.post('/:id/files', auth, checkProjectMember, upload.single('file'), async (req, res) => {
  if(req.memberRole!=='owner' && req.memberRole!=='editor') return res.status(403).json({message:'Denied'});
  if(!req.file) return res.status(400).json({message:'No file'});
  try {
    const nf = await db.query('INSERT INTO project_files (project_id, uploader_id, filename, file_path, file_type) VALUES ($1, $2, $3, $4, $5) RETURNING *', [req.projectId, req.user.id, req.file.originalname, req.file.path, req.file.mimetype]);
    const u = await db.query('SELECT username FROM users WHERE id=$1', [req.user.id]);
    const r = nf.rows[0];
    r.uploader_name = u.rows[0].username;
    res.status(201).json(r);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.delete('/:id/files/:fileId', auth, checkProjectMember, async (req, res) => {
  if(req.memberRole!=='owner' && req.memberRole!=='editor') return res.status(403).json({message:'Denied'});
  try {
    await db.query('DELETE FROM project_files WHERE id=$1', [req.params.fileId]);
    res.json({message:'Deleted'});
  } catch (err) { res.status(500).send('Server Error'); }
});

module.exports = router;


================================================
FILE: backend/routes/users.js
================================================
const router = require("express").Router();
const pool = require("../db"); // VeritabanÄ± baÄŸlantÄ± dosyanÄ±zÄ±n yolu (db.js veya index.js olabilir)
//const authorization = require("../middleware/auth"); // Varsa yetki kontrolÃ¼

// GET /users - TÃ¼m kullanÄ±cÄ±larÄ± getir
router.get("/", async (req, res) => {
  try {
    // VeritabanÄ±ndaki 'users' tablosundan verileri Ã§ekiyoruz
    // Åžifreyi (user_password) gÃ¼venlik iÃ§in Ã§ekmiyoruz
    const allUsers = await pool.query(
      "SELECT id, username, email as email, role, created_at FROM users"
    );
    
    // Frontend'e JSON olarak gÃ¶nderiyoruz
    res.json(allUsers.rows);
  } catch (err) {
    console.error(err.message);
    res.status(500).send("Server Error");
  }
});

module.exports = router;


================================================
FILE: frontend/README.md
================================================
# Getting Started with Create React App

This project was bootstrapped with [Create React App](https://github.com/facebook/create-react-app).

## Available Scripts

In the project directory, you can run:

### `npm start`

Runs the app in the development mode.\
Open [http://localhost:3000](http://localhost:3000) to view it in your browser.

The page will reload when you make changes.\
You may also see any lint errors in the console.

### `npm test`

Launches the test runner in the interactive watch mode.\
See the section about [running tests](https://facebook.github.io/create-react-app/docs/running-tests) for more information.

### `npm run build`

Builds the app for production to the `build` folder.\
It correctly bundles React in production mode and optimizes the build for the best performance.

The build is minified and the filenames include the hashes.\
Your app is ready to be deployed!

See the section about [deployment](https://facebook.github.io/create-react-app/docs/deployment) for more information.

### `npm run eject`

**Note: this is a one-way operation. Once you `eject`, you can't go back!**

If you aren't satisfied with the build tool and configuration choices, you can `eject` at any time. This command will remove the single build dependency from your project.

Instead, it will copy all the configuration files and the transitive dependencies (webpack, Babel, ESLint, etc) right into your project so you have full control over them. All of the commands except `eject` will still work, but they will point to the copied scripts so you can tweak them. At this point you're on your own.

You don't have to ever use `eject`. The curated feature set is suitable for small and middle deployments, and you shouldn't feel obligated to use this feature. However we understand that this tool wouldn't be useful if you couldn't customize it when you are ready for it.

## Learn More

You can learn more in the [Create React App documentation](https://facebook.github.io/create-react-app/docs/getting-started).

To learn React, check out the [React documentation](https://reactjs.org/).

### Code Splitting

This section has moved here: [https://facebook.github.io/create-react-app/docs/code-splitting](https://facebook.github.io/create-react-app/docs/code-splitting)

### Analyzing the Bundle Size

This section has moved here: [https://facebook.github.io/create-react-app/docs/analyzing-the-bundle-size](https://facebook.github.io/create-react-app/docs/analyzing-the-bundle-size)

### Making a Progressive Web App

This section has moved here: [https://facebook.github.io/create-react-app/docs/making-a-progressive-web-app](https://facebook.github.io/create-react-app/docs/making-a-progressive-web-app)

### Advanced Configuration

This section has moved here: [https://facebook.github.io/create-react-app/docs/advanced-configuration](https://facebook.github.io/create-react-app/docs/advanced-configuration)

### Deployment

This section has moved here: [https://facebook.github.io/create-react-app/docs/deployment](https://facebook.github.io/create-react-app/docs/deployment)

### `npm run build` fails to minify

This section has moved here: [https://facebook.github.io/create-react-app/docs/troubleshooting#npm-run-build-fails-to-minify](https://facebook.github.io/create-react-app/docs/troubleshooting#npm-run-build-fails-to-minify)



================================================
FILE: frontend/package.json
================================================
{
  "name": "frontend",
  "version": "0.1.0",
  "private": true,
  "dependencies": {
    "@testing-library/dom": "^10.4.1",
    "@testing-library/jest-dom": "^6.9.1",
    "@testing-library/react": "^16.3.0",
    "@testing-library/user-event": "^13.5.0",
    "axios": "^1.12.2",
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "react-icons": "^5.5.0",
    "react-router-dom": "^7.11.0",
    "react-scripts": "5.0.1",
    "web-vitals": "^2.1.4"
  },
  "scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test",
    "eject": "react-scripts eject"
  },
  "eslintConfig": {
    "extends": [
      "react-app",
      "react-app/jest"
    ]
  },
  "browserslist": {
    "production": [
      ">0.2%",
      "not dead",
      "not op_mini all"
    ],
    "development": [
      "last 1 chrome version",
      "last 1 firefox version",
      "last 1 safari version"
    ]
  },
  "devDependencies": {
    "autoprefixer": "^10.4.21",
    "postcss": "^8.5.6",
    "tailwindcss": "^3.3.3"
  }
}



================================================
FILE: frontend/tailwind.config.js
================================================
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    "./src/**/*.{js,jsx,ts,tsx}",
  ],
  theme: {
    extend: {},
  },
  plugins: [],
}


================================================
FILE: frontend/public/index.html
================================================
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <title>
     
      GazozHub</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
  </body>
</html>



================================================
FILE: frontend/public/manifest.json
================================================
{
  "short_name": "React App",
  "name": "Create React App Sample",
  "icons": [
    {
      "src": "favicon.ico",
      "sizes": "64x64 32x32 24x24 16x16",
      "type": "image/x-icon"
    },
    {
      "src": "logo192.png",
      "type": "image/png",
      "sizes": "192x192"
    },
    {
      "src": "logo512.png",
      "type": "image/png",
      "sizes": "512x512"
    }
  ],
  "start_url": ".",
  "display": "standalone",
  "theme_color": "#000000",
  "background_color": "#ffffff"
}



================================================
FILE: frontend/public/robots.txt
================================================
# https://www.robotstxt.org/robotstxt.html
User-agent: *
Disallow:



================================================
FILE: frontend/src/App.css
================================================
.App {
  text-align: center;
}

.App-logo {
  height: 40vmin;
  pointer-events: none;
}

@media (prefers-reduced-motion: no-preference) {
  .App-logo {
    animation: App-logo-spin infinite 20s linear;
  }
}

.App-header {
  background-color: #282c34;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  font-size: calc(10px + 2vmin);
  color: white;
}

.App-link {
  color: #61dafb;
}

@keyframes App-logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}



================================================
FILE: frontend/src/App.js
================================================
import React from 'react';
import { Routes, Route, Navigate } from 'react-router-dom';

// Context Providers
import { AuthProvider } from './context/AuthContext';
import { ProjectProvider } from './context/ProjectContext';
import { ThemeProvider } from './context/ThemeContext';

// Auth Components
import ProtectedRoute from './components/auth/ProtectedRoute';

// Pages - Public
import LandingPage from './pages/LandingPage';
import LoginPage from './pages/LoginPage';
import RegisterPage from './pages/RegisterPage';
import ForgotPasswordPage from './pages/ForgotPasswordPage';
import ResetPasswordPage from './pages/ResetPasswordPage';

// Pages - Dashboard & Layout
import DashboardLayout from './pages/DashboardLayout';
import DashboardOverviewPage from './pages/DashboardOverviewPage';
import MyProjectsPage from './pages/MyProjectsPage';
import SharedProjectsPage from './pages/SharedProjectsPage';
import SettingsPage from './pages/SettingsPage';
import Users from './pages/Users';

// Pages - Project Details & Tabs
import ProjectDetailPage from './pages/ProjectDetailPage';
import ProjectFiles from './components/projects/ProjectFiles';
import ProjectTasks from './components/projects/ProjectTasks';
import ProjectIssues from './components/projects/ProjectIssues';
import ProjectDiscussion from './components/projects/ProjectDiscussion';
import ProjectEditPage from './components/projects/ProjectEditPage';

function App() {
  return (
    <ThemeProvider>
      <AuthProvider>
        <ProjectProvider>
          
          <Routes>
            {/* === DEÄžÄ°ÅžÄ°KLÄ°K BURADA BAÅžLIYOR === */}
            
            {/* 1. EÄŸer kullanÄ±cÄ± kÃ¶k dizine (localhost:3000/) gelirse, /home'a yÃ¶nlendir */}
            <Route path="/" element={<Navigate to="/home" replace />} />

            {/* 2. LandingPage artÄ±k /home adresinde Ã§alÄ±ÅŸÄ±yor */}
            <Route path="/home" element={<LandingPage />} />

            {/* === DEÄžÄ°ÅžÄ°KLÄ°K BURADA BÄ°TÄ°YOR === */}

            <Route path="/login" element={<LoginPage />} />
            <Route path="/register" element={<RegisterPage />} />
            <Route path="/forgot-password" element={<ForgotPasswordPage />} />
            <Route path="/reset-password" element={<ResetPasswordPage />} />

            {/* === PROTECTED ROUTES (GiriÅŸ yapÄ±lmasÄ± zorunlu) === */}
            <Route 
              path="/*" 
              element={
                <ProtectedRoute>
                  <DashboardLayout />
                </ProtectedRoute>
              }
            >
              <Route path="dashboard" element={<DashboardOverviewPage />} />
              <Route path="my-projects" element={<MyProjectsPage />} />
              <Route path="shared-projects" element={<SharedProjectsPage />} />
              <Route path="settings" element={<SettingsPage />} />
              

              {/* Project Detail Routes */}
              <Route path="project/:id" element={<ProjectDetailPage />}>
                <Route index element={<ProjectFiles />} /> 
                <Route path="tasks" element={<ProjectTasks />} />
                <Route path="issues" element={<ProjectIssues />} />
                <Route path="discussions" element={<ProjectDiscussion />} />
                <Route path="edit" element={<ProjectEditPage />} />
              </Route>
              <Route path="users" element={<Users />} />
              
              {/* TanÄ±msÄ±z bir rota girilirse dashboard'a yÃ¶nlendir */}
              <Route path="*" element={<Navigate to="/dashboard" replace />} />
            </Route>

          </Routes>

        </ProjectProvider>
      </AuthProvider>
    </ThemeProvider>
  );
}

export default App;


================================================
FILE: frontend/src/App.test.js
================================================
import { render, screen } from '@testing-library/react';
import App from './App';

test('renders learn react link', () => {
  render(<App />);
  const linkElement = screen.getByText(/learn react/i);
  expect(linkElement).toBeInTheDocument();
});



================================================
FILE: frontend/src/index.css
================================================
@tailwind base;
@tailwind components;
@tailwind utilities;





================================================
FILE: frontend/src/index.js
================================================
import React from 'react';
import ReactDOM from 'react-dom/client';
import './index.css';
import App from './App';
import reportWebVitals from './reportWebVitals';
// Router'Ä± import ediyoruz
import { BrowserRouter } from 'react-router-dom'; 

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <React.StrictMode>
    {/* UygulamayÄ± Router ile sarmalÄ±yoruz */}
    <BrowserRouter>
      <App />
    </BrowserRouter>
  </React.StrictMode>
);

reportWebVitals();


================================================
FILE: frontend/src/reportWebVitals.js
================================================
const reportWebVitals = onPerfEntry => {
  if (onPerfEntry && onPerfEntry instanceof Function) {
    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {
      getCLS(onPerfEntry);
      getFID(onPerfEntry);
      getFCP(onPerfEntry);
      getLCP(onPerfEntry);
      getTTFB(onPerfEntry);
    });
  }
};

export default reportWebVitals;



================================================
FILE: frontend/src/setupTests.js
================================================
// jest-dom adds custom jest matchers for asserting on DOM nodes.
// allows you to do things like:
// expect(element).toHaveTextContent(/react/i)
// learn more: https://github.com/testing-library/jest-dom
import '@testing-library/jest-dom';



================================================
FILE: frontend/src/components/auth/ProtectedRoute.js
================================================
// src/components/auth/ProtectedRoute.js

import React from 'react';
import { useAuth } from '../../context/AuthContext';
import { Navigate } from 'react-router-dom';

// Bu component, App.js'te iÃ§ine sardÄ±ÄŸÄ±mÄ±z
// <ProjectProvider> ve <DashboardLayout> elementlerini 'children' prop'u olarak alÄ±r.
const ProtectedRoute = ({ children }) => {
  
  // AuthContext'ten token'Ä± (giriÅŸ durumunu) al
  const { token } = useAuth(); 

  // 1. EÄžER TOKEN YOKSA (KullanÄ±cÄ± giriÅŸ yapmamÄ±ÅŸsa):
  if (!token) {
    // KullanÄ±cÄ±yÄ± '/login' sayfasÄ±na yÃ¶nlendir.
    // 'replace', tarayÄ±cÄ± geÃ§miÅŸinde 'geri' tuÅŸunun Ã§alÄ±ÅŸmamasÄ±nÄ± saÄŸlar.
    // "Beyaz ekran" sorununuzun Ã§Ã¶zÃ¼mÃ¼ bu satÄ±rdÄ±r.
    return <Navigate to="/login" replace />;
  }

  // 2. EÄžER TOKEN VARSA (KullanÄ±cÄ± giriÅŸ yapmÄ±ÅŸsa):
  // Gitmek istediÄŸi sayfayÄ± (children) gÃ¶ster.
  // (Bu, <ProjectProvider><DashboardLayout /></ProjectProvider> olur)
  return children;
};

export default ProtectedRoute;


================================================
FILE: frontend/src/components/layout/Header.js
================================================
// src/components/layout/Header.js
import api from '../../services/api';
import React, { useState, useEffect, useRef } from 'react';
// FiInfo ikonunu ekledik
import { FiBell, FiChevronDown, FiInfo } from 'react-icons/fi'; 
import { Link } from 'react-router-dom';
import ProfileDropdown from './ProfileDropdown';
import { useAuth } from '../../context/AuthContext';
import LogoImage from '../../assets/logo.png';

// Props'a onToggleRightSidebar eklendi
function Header({ onToggleRightSidebar }) {
  const [isDropdownOpen, setDropdownOpen] = useState(false);
  const dropdownRef = useRef(null);
  const { user, logout } = useAuth();

  useEffect(() => {
    function handleClickOutside(event) {
      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {
        setDropdownOpen(false);
      }
    }
    document.addEventListener("mousedown", handleClickOutside);
    return () => {
      document.removeEventListener("mousedown", handleClickOutside);
    };
  }, [dropdownRef]);

  return (
    <header className="bg-black bg-opacity-40 backdrop-blur-md text-white shadow-sm border-b border-white/10 z-30 relative">
      <div className="px-6 py-3 flex justify-between items-center">
        
        {/* Logo ve Marka AlanÄ± */}
        <Link to="/dashboard" className="flex items-center hover:text-gray-300 transition-colors group">
          <img 
            src={LogoImage} 
            alt="Logo" 
            className="h-12 w-12 object-contain mr-3" 
          />
          <div className="flex items-baseline">
            <span className="text-xl font-bold tracking-wide">GazozHub</span>
            
          </div>
        </Link>

        <div className="flex items-center space-x-4">
          
         
          <button 
            onClick={onToggleRightSidebar}
            className="p-2 rounded-full hover:bg-white/10 transition text-gray-300 hover:text-white"
            title="Toggle Info Panel"
          >
            <FiInfo size={22} />
          </button>
        

          <button className="p-2 rounded-full hover:bg-white/10 transition">
            <FiBell size={20} />
          </button>
          
          <div className="relative" ref={dropdownRef}>
            <button 
              onClick={() => setDropdownOpen(!isDropdownOpen)} 
              className="flex items-center space-x-2 p-2 rounded-full hover:bg-white/10 transition"
            >
              <span className="font-medium">{user ? user.username : 'Guest'}
                {user.role === 'admin' && (
                <span className="bg-red-600 text-white text-xs font-bold px-2 py-1 rounded border border-red-400">
                  ADMIN
                </span>
              )}
              </span>
              <FiChevronDown size={16} />
            </button>
            
            <ProfileDropdown isOpen={isDropdownOpen} />
          </div>
        </div>
      </div>
    </header>
  );
}

export default Header;


================================================
FILE: frontend/src/components/layout/ProfileDropdown.js
================================================
// src/components/layout/ProfileDropdown.js

import React from 'react';
import { FiUser, FiSettings, FiLogOut } from 'react-icons/fi';
// --- 1. IMPORT useNavigate AND useAuth ---
import { useNavigate } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext';

function ProfileDropdown({ isOpen }) {
  const { logout } = useAuth();
  // --- 2. GET THE NAVIGATE FUNCTION ---
  const navigate = useNavigate();

  if (!isOpen) {
    return null;
  }

  const handleLogout = () => {
    // --- 3. PERFORM BOTH ACTIONS HERE ---
    logout();      // First, clear the user state
    navigate('/'); // Then, immediately navigate to the login page
  };

  return (
    <div className="absolute top-full right-0 mt-2 w-48 bg-gray-800 rounded-md shadow-lg border border-gray-700 z-50">
      <div className="py-1">
        <a href="#profile" className="flex items-center px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">
          <FiUser className="mr-3" />
          Profile
        </a>
        <a href="#settings" className="flex items-center px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">
          <FiSettings className="mr-3" />
          Settings
        </a>
        <button
          onClick={handleLogout}
          className="flex items-center w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-gray-700"
        >
          <FiLogOut className="mr-3" />
          Logout
        </button>
      </div>
    </div>
  );
}

export default ProfileDropdown;


================================================
FILE: frontend/src/components/layout/RightSidebar.js
================================================
// src/components/layout/RightSidebar.js

import React, { useEffect, useState } from 'react';
import { useLocation } from 'react-router-dom';
import { useProjectContext } from '../../context/ProjectContext';
import api from '../../services/api'; // Veri Ã§ekmek iÃ§in api servisi
import { 
  FiX, FiCalendar, FiClock, FiUser, FiUsers, 
  FiChevronsRight, FiTarget, FiActivity, FiTrendingUp, 
  FiShield, FiUserPlus, FiDownload
} from 'react-icons/fi';

function RightSidebar({ isOpen, toggleSidebar }) {
  const location = useLocation();
  const { currentProject, currentMembers, fetchMembers } = useProjectContext();

  // --- SAYFA KONTROLLERÄ° ---
  const isProjectPage = location.pathname.startsWith('/project/');
  const isUsersPage = location.pathname === '/users'; // Users sayfasÄ± kontrolÃ¼
  const showProjectDetails = isProjectPage && currentProject;

  // --- STATELER ---
  // Users sayfasÄ± iÃ§in istatistik state'i
  const [stats, setStats] = useState({ total: 0, admins: 0, users: 0, newThisMonth: 0, loading: false });

  // --- EFFECT: PROJE VERÄ°LERÄ° ---
  useEffect(() => {
    if (showProjectDetails && currentProject?.id) {
        fetchMembers(currentProject.id);
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [currentProject?.id]);

  // --- EFFECT: USERS Ä°STATÄ°STÄ°KLERÄ° ---
  useEffect(() => {
    // Sadece Users sayfasÄ±ndaysak ve Sidebar aÃ§Ä±ksa veri Ã§ek
    if (isUsersPage && isOpen) {
        const fetchStats = async () => {
            setStats(prev => ({ ...prev, loading: true }));
            try {
                const res = await api.get('/users');
                const usersList = res.data;
                
                const total = usersList.length;
                const admins = usersList.filter(u => u.role === 'admin').length;
                
                // Bu ay kayÄ±t olanlarÄ± hesapla
                const now = new Date();
                const newUsers = usersList.filter(u => {
                    const d = new Date(u.created_at);
                    return d.getMonth() === now.getMonth() && d.getFullYear() === now.getFullYear();
                }).length;

                setStats({
                    total,
                    admins,
                    users: total - admins,
                    newThisMonth: newUsers,
                    loading: false
                });
            } catch (err) {
                console.error("Ä°statistik hatasÄ±:", err);
                setStats(prev => ({ ...prev, loading: false }));
            }
        };
        fetchStats();
    }
  }, [isUsersPage, isOpen]);


  // --- YARDIMCI FONKSÄ°YONLAR ---
  const projectOwner = currentMembers ? currentMembers.find(m => m.role === 'owner') : null;
  const otherMembers = currentMembers ? currentMembers.filter(m => m.role !== 'owner') : [];

  const formatDate = (dateString) => {
    if (!dateString) return 'N/A';
    return new Date(dateString).toLocaleDateString('en-US', {
      day: 'numeric', month: 'short', year: 'numeric'
    });
  };

  // --- RENDER: PROJE DETAYLARI (Eski Kod) ---
  const renderProjectContent = () => (
    <div className="animate-fade-in flex flex-col h-full">
        {/* 1. BaÅŸlÄ±k */}
        <div className="mt-1 mb-8">
            <h2 className="text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-400 leading-tight">
                {currentProject.name}
            </h2>
        </div>

        {/* 2. AÃ§Ä±klama */}
        <div className="mb-8">
            {currentProject.description ? (
                <p className="text-sm text-gray-300 leading-relaxed font-light">
                {currentProject.description}
                </p>
            ) : (
                <p className="text-sm text-gray-500 italic">No description added.</p>
            )}
        </div>

        {/* 3. Proje Sahibi */}
        <div className="mb-8">
            <h4 className="text-xs font-bold text-gray-500 uppercase tracking-wider mb-3 flex items-center">
                Led By
            </h4>
            <div className="flex items-center p-3 bg-gray-800/50 border border-gray-700 rounded-xl hover:border-blue-500/30 transition-colors group">
                <div className="w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-indigo-600 flex items-center justify-center text-white font-bold text-sm shadow-md mr-3 group-hover:scale-105 transition-transform">
                    {projectOwner?.username?.charAt(0).toUpperCase() || <FiUser />}
                </div>
                <div>
                    <p className="text-white font-semibold text-sm">
                        {projectOwner?.username || 'Loading...'}
                    </p>
                    <p className="text-xs text-blue-400 font-medium">Project Owner</p>
                </div>
            </div>
        </div>

        {/* 4. TakÄ±m Ãœyeleri */}
        <div className="mb-8 flex-1">
            <div className="flex justify-between items-end mb-3">
                <h4 className="text-xs font-bold text-gray-500 uppercase tracking-wider">Team</h4>
                <span className="text-xs text-gray-600 bg-gray-800 px-2 py-0.5 rounded-full">
                    {otherMembers.length} members
                </span>
            </div>
            {otherMembers.length > 0 ? (
                <div className="space-y-2">
                    {otherMembers.map(member => (
                        <div key={member.id} className="flex items-center justify-between p-2 hover:bg-gray-800 rounded-lg transition-colors cursor-default">
                            <div className="flex items-center">
                                <div className="w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center text-gray-300 text-xs font-bold mr-3 border border-gray-600">
                                    {member.username.charAt(0).toUpperCase()}
                                </div>
                                <span className="text-gray-300 text-sm">{member.username}</span>
                            </div>
                            <span className="text-[10px] text-gray-500 uppercase font-semibold border border-gray-700 px-1.5 py-0.5 rounded">
                                {member.role}
                            </span>
                        </div>
                    ))}
                </div>
            ) : (
                <div className="p-4 border border-dashed border-gray-700 rounded-xl text-center">
                    <FiUsers className="mx-auto text-gray-600 mb-2" />
                    <p className="text-xs text-gray-500">Solo project for now.</p>
                </div>
            )}
        </div>

        {/* 5. Footer Meta */}
        <div className="mt-auto pt-6 border-t border-gray-800 grid grid-cols-2 gap-4">
            <div>
                <div className="flex items-center text-gray-500 mb-1">
                    <FiCalendar className="mr-1.5 text-xs"/> <span className="text-[10px] uppercase font-bold tracking-wide">Created</span>
                </div>
                <span className="text-gray-300 text-xs font-mono">
                {formatDate(currentProject.created_at)}
                </span>
            </div>
            <div>
                <div className="flex items-center text-gray-500 mb-1">
                    <FiClock className="mr-1.5 text-xs"/> <span className="text-[10px] uppercase font-bold tracking-wide">Updated</span>
                </div>
                <span className="text-gray-300 text-xs font-mono">
                {formatDate(currentProject.last_updated_at || currentProject.created_at)}
                </span>
            </div>
        </div>
    </div>
  );

  
  const renderUsersContent = () => (
    <div className="animate-fade-in flex flex-col h-full">
        
        {/* BaÅŸlÄ±k */}
        <div className="mt-2 mb-8">
            <h2 className="text-2xl font-bold text-white flex items-center">
                <FiActivity className="mr-3 text-blue-500" />
                System Overview
            </h2>
          
        </div>

        {stats.loading ? (
            <div className="flex justify-center py-10"><div className="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"></div></div>
        ) : (
            <>
                {/* Kart: Toplam KullanÄ±cÄ± */}
                <div className="bg-gradient-to-br from-gray-800 to-gray-900 p-5 rounded-2xl border border-gray-700 mb-8 relative overflow-hidden group shadow-lg">
                    <div className="absolute -right-4 -top-4 text-gray-700 opacity-20 group-hover:opacity-30 transition-opacity transform group-hover:scale-110 duration-500">
                        <FiUsers size={100} />
                    </div>
                    <h3 className="text-gray-400 text-xs uppercase font-bold tracking-wider mb-1">Total Users</h3>
                    <p className="text-5xl font-extrabold text-white tracking-tight">{stats.total}</p>
                    
                </div>

                {/* Rol DaÄŸÄ±lÄ±mÄ± */}
                <div className="mb-10 space-y-5">
                    <h4 className="text-sm font-semibold text-gray-300 flex items-center uppercase tracking-wide">
                        <FiShield className="mr-2 text-blue-500" /> Role Distribution
                    </h4>
                    
                    {/* Admin Bar */}
                    <div className="group">
                        <div className="flex justify-between text-xs text-gray-400 mb-1.5">
                            <span className="group-hover:text-red-400 transition-colors">Admins</span>
                            <span className="font-mono">{stats.admins}</span>
                        </div>
                        <div className="w-full bg-gray-800 rounded-full h-2.5 overflow-hidden">
                            <div 
                                className="bg-gradient-to-r from-red-600 to-red-400 h-full rounded-full transition-all duration-1000 ease-out shadow-[0_0_10px_rgba(239,68,68,0.5)]" 
                                style={{ width: stats.total > 0 ? `${(stats.admins / stats.total) * 100}%` : '0%' }}
                            />
                        </div>
                    </div>

                    {/* User Bar */}
                    <div className="group">
                        <div className="flex justify-between text-xs text-gray-400 mb-1.5">
                            <span className="group-hover:text-blue-400 transition-colors">Students</span>
                            <span className="font-mono">{stats.users}</span>
                        </div>
                        <div className="w-full bg-gray-800 rounded-full h-2.5 overflow-hidden">
                            <div 
                                className="bg-gradient-to-r from-blue-600 to-blue-400 h-full rounded-full transition-all duration-1000 ease-out shadow-[0_0_10px_rgba(59,130,246,0.5)]" 
                                style={{ width: stats.total > 0 ? `${(stats.users / stats.total) * 100}%` : '0%' }}
                            />
                        </div>
                    </div>
                </div>

               
                
            </>
        )}
    </div>
  );

  // --- ANA RENDER ---
  return (
    <div 
      className={`${
        isOpen ? 'w-80 translate-x-0' : 'w-0 translate-x-full'
      } bg-gray-900 border-l border-gray-800 flex flex-col transition-all duration-300 ease-in-out absolute right-0 top-0 h-full z-30 shadow-2xl`}
    >
      
      {/* Arka plan gradient */}
      <div className="absolute inset-0 bg-gradient-to-b from-gray-800/50 to-gray-900 pointer-events-none" />
      

      {/* --- Ä°Ã‡ERÄ°K ALANI --- */}
      <div className="relative z-10 flex-1 overflow-y-auto px-6 pb-20 custom-scrollbar">
        
        {/* Duruma gÃ¶re iÃ§erik gÃ¶ster */}
        {isUsersPage ? (
            renderUsersContent()
        ) : showProjectDetails ? (
            renderProjectContent()
        ) : (
          // BOÅž DURUM
          <div className="flex flex-col items-center justify-center h-full text-center pb-20">
            <div className="w-20 h-20 bg-gray-800 rounded-full flex items-center justify-center mb-6 animate-pulse-slow">
               <FiTarget size={32} className="text-gray-600" />
            </div>
            <h3 className="text-white font-bold text-lg mb-2">Ready to Focus?</h3>
            <p className="text-gray-500 text-sm max-w-[200px] leading-relaxed">
              Select a project to see details here.
            </p>
          </div>
        )}

      </div>

      {/* --- ALT KAPATMA BAR --- */}
      <div className="absolute bottom-0 left-0 w-full h-12 border-t border-gray-800 bg-gray-900/90 backdrop-blur-sm z-20 flex items-center justify-center">
        <button
          onClick={toggleSidebar}
          className="text-gray-500 hover:text-white transition-colors p-2 rounded-full hover:bg-gray-800 group"
        >
          <FiChevronsRight size={20} className="group-hover:translate-x-1 transition-transform" />
        </button>
      </div>

    </div>
  );
}

export default RightSidebar;


================================================
FILE: frontend/src/components/layout/Sidebar.js
================================================
// src/components/layout/Sidebar.js

import React from 'react';
import { NavLink } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext'; // 1. AuthContext eklendi
import { 
  FiHome, FiBox, FiUsers, 
  FiChevronsLeft, FiChevronsRight,
  FiUserCheck // 2. Yeni ikon eklendi (Admin Users iÃ§in)
} from 'react-icons/fi';

function Sidebar({ isCollapsed, toggleSidebar }) {
  
  // 3. KullanÄ±cÄ± rolÃ¼nÃ¼ kontrol etmek iÃ§in user bilgisini Ã§ekiyoruz
  const { user } = useAuth();

  const navItems = [
    { name: 'Dashboard', icon: <FiHome size={20} />, path: '/dashboard' },
    { name: 'My Projects', icon: <FiBox size={20} />, path: '/my-projects' },
    { name: 'Shared', icon: <FiUsers size={20} />, path: '/shared-projects' },
  ];

  return (
    <div 
      className={`${
        isCollapsed ? 'w-20' : 'w-64'
      } bg-gray-800 border-r border-gray-700 flex flex-col transition-all duration-300 relative shadow-xl pt-4`}
    >
      
      {/* MENU LÄ°STESÄ° */}
      <nav className="flex-1 space-y-2 overflow-y-auto overflow-x-hidden mt-2">
        {navItems.map((item) => (
          <NavLink
            key={item.name}
            to={item.path}
            className={({ isActive }) =>
              `flex items-center px-4 py-3 mx-2 rounded-lg transition-colors group relative ${
                isActive
                  ? 'bg-blue-600 text-white'
                  : 'text-gray-400 hover:bg-gray-700 hover:text-white'
              } ${isCollapsed ? 'justify-center' : ''}`
            }
          >
            <span className="flex-shrink-0">{item.icon}</span>

            {!isCollapsed && (
              <span className="ml-3 font-medium whitespace-nowrap">{item.name}</span>
            )}
            
            {isCollapsed && (
              <div className="absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none">
                {item.name}
              </div>
            )}
          </NavLink>
        ))}

        {/* --- 4. ADMIN USERS BUTONU --- */}
        {/* Sadece user varsa ve rolÃ¼ 'admin' ise bu bloÄŸu gÃ¶ster */}
        {user && user.role === 'admin' && (
          <>
            {/* AyÄ±rÄ±cÄ± Ã‡izgi (Ä°steÄŸe baÄŸlÄ±, gÃ¶rsel ayrÄ±m iÃ§in) */}
            <div className="my-2 border-t border-gray-700 mx-4 opacity-50" />

            <NavLink
              to="/users" 
              className={({ isActive }) =>
                `flex items-center px-4 py-3 mx-2 rounded-lg transition-colors group relative ${
                  isActive
                    ? 'bg-red-600/80 text-white'
                    : 'text-gray-400 hover:bg-gray-700 hover:text-white'
                } ${isCollapsed ? 'justify-center' : ''}`
              }
            >
              {/* Ä°kon */}
              <span className="flex-shrink-0">
                <FiUserCheck size={20} />
              </span>

              {/* Metin */}
              {!isCollapsed && (
                <span className="ml-3 font-medium whitespace-nowrap">Users</span>
              )}

              {/* Tooltip */}
              {isCollapsed && (
                <div className="absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none">
                  Users Management
                </div>
              )}
            </NavLink>
          </>
        )}
      </nav>

      {/* ALT KISIM */}
      <div className="p-4 border-t border-gray-700">
        <button
          onClick={toggleSidebar}
          className="w-full flex items-center justify-center py-2 text-gray-500 hover:text-white hover:bg-gray-700 rounded-lg transition-colors"
        >
          {isCollapsed ? <FiChevronsRight size={24} /> : <FiChevronsLeft size={24} />}
        </button>
      </div>
    </div>
  );
}

export default Sidebar;


================================================
FILE: frontend/src/components/projects/Comment.js
================================================
// src/components/projects/Comment.js

import React, { useState, useRef, useEffect } from 'react';
import { useAuth } from '../../context/AuthContext';
import { useProjectContext } from '../../context/ProjectContext';
import { 
  FiUser, FiHeart, FiCopy, FiMoreVertical, FiEdit, FiTrash, 
    FiLoader, FiCheck,
} from 'react-icons/fi';

// Yeni proplar alÄ±yoruz: projectId, onCommentUpdated, onCommentDeleted
function Comment({ comment, projectId, onCommentUpdated, onCommentDeleted }) {
  
  const { user } = useAuth(); // Mevcut giriÅŸ yapmÄ±ÅŸ kullanÄ±cÄ± (artÄ±k {id, username} iÃ§eriyor)
  const { 
    likeComment, 
    editComment, 
    deleteComment, 
    currentProject // Proje sahibini kontrol etmek iÃ§in
  } = useProjectContext();

  // 'comment' prop'unu yerel state'e alÄ±yoruz, bÃ¶ylece "BeÄŸen" sayÄ±sÄ± anÄ±nda gÃ¼ncellenir
  const [localComment, setLocalComment] = useState(comment);

  // Yorumu dÃ¼zenleme (edit) modu iÃ§in state'ler
  const [isEditing, setIsEditing] = useState(false);
  const [editText, setEditText] = useState(comment.text);
  const [isSaving, setIsSaving] = useState(false);

  // 3-nokta menÃ¼ state'i
  const [isMenuOpen, setMenuOpen] = useState(false);
  const menuRef = useRef(null);

  // Kopyalama state'i
  const [copied, setCopied] = useState(false);
  // BeÄŸenme (like) state'i
  const [isLiking, setIsLiking] = useState(false);

  // === GÃœVENLÄ°K KONTROLLERÄ° ===
  const authorId = localComment?.author_id;
  const currentUserId = user?.id;
  const projectOwnerId = currentProject?.owner_id;

  // KullanÄ±cÄ± bu yorumun sahibi mi?
  const isOwner = currentUserId === authorId;
  // KullanÄ±cÄ± proje sahibi mi?
  const isProjectOwner = currentUserId === projectOwnerId;
  // KullanÄ±cÄ± bu yorumu beÄŸenmiÅŸ mi?
  const hasLiked = localComment?.likes_user_ids?.includes(currentUserId);
  // BeÄŸeni sayÄ±sÄ±
  const likeCount = localComment?.likes_user_ids?.length || 0;

  // Ebeveynden 'comment' prop'u deÄŸiÅŸirse, yerel state'i gÃ¼ncelle
  useEffect(() => {
    setLocalComment(comment);
  }, [comment]);

  // --- KOPYALA FONKSÄ°YONU ---
  const handleCopy = () => {
    const el = document.createElement('textarea');
    el.value = localComment.text;
    document.body.appendChild(el);
    el.select();
    document.execCommand('copy');
    document.body.removeChild(el);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000); 
  };

  // --- BEÄžEN (LIKE) FONKSÄ°YONU ---
  const handleLike = async () => {
    if (isLiking) return; 
    setIsLiking(true);
    try {
      const updatedLikes = await likeComment(projectId, localComment.id);
      // === "BEÄžEN" DÃœZELTMESÄ°: Yerel state'i gÃ¼ncelle ===
      setLocalComment(prev => ({ ...prev, likes_user_ids: updatedLikes.likes_user_ids }));
    } catch (error) {
      console.error("Failed to like comment:", error);
    } finally {
      setIsLiking(false);
    }
  };

  // --- DÃœZENLE (EDIT) FONKSÄ°YONLARI ---
  const handleEdit = () => {
    setIsEditing(true);
    setMenuOpen(false);
  };
  const handleCancelEdit = () => {
    setIsEditing(false);
    setEditText(localComment.text); // DeÄŸiÅŸiklikleri iptal et
  };
  const handleSaveEdit = async () => {
    if (editText.trim() === '' || editText === localComment.text) {
      return handleCancelEdit();
    }
    setIsSaving(true);
    try {
      const updatedComment = await editComment(projectId, localComment.id, editText);
      // === "EDIT" DÃœZELTMESÄ°: Yerel state'i ve ebeveyni gÃ¼ncelle ===
      setLocalComment(updatedComment); // Yerel state'i gÃ¼ncelle
      setIsEditing(false);
      if (onCommentUpdated) {
        onCommentUpdated(updatedComment); // Ebeveyni (CommentList/IssueItem) uyar
      }
    } catch (error) {
      console.error("Failed to save edit:", error);
      alert("Hata: " + error.message); // Backend'den gelen hatayÄ± gÃ¶ster
    } finally {
      setIsSaving(false);
    }
  };

  // --- SÄ°L (DELETE) FONKSÄ°YONU ---
  const handleDelete = async () => {
    if (window.confirm('Are you sure you want to delete this comment?')) {
      try {
        await deleteComment(projectId, localComment.id);
        // === "DELETE" DÃœZELTMESÄ°: Ebeveyni uyar ===
        if (onCommentDeleted) {
          onCommentDeleted(localComment.id);
        }
      } catch (error) {
        console.error("Failed to delete comment:", error);
        alert("Hata: " + error.message); // Backend'den gelen hatayÄ± gÃ¶ster
      }
    }
    setMenuOpen(false);
  };
  
  // 3-nokta menÃ¼sÃ¼ dÄ±ÅŸÄ±na tÄ±klamayÄ± dinle
  useEffect(() => {
    function handleClickOutside(event) {
      if (menuRef.current && !menuRef.current.contains(event.target)) {
        setMenuOpen(false);
      }
    }
    document.addEventListener("mousedown", handleClickOutside);
    return () => {
      document.removeEventListener("mousedown", handleClickOutside);
    };
  }, [menuRef]);


  return (
    // YorumlarÄ± ayÄ±rmak iÃ§in Ã¼st Ã§izgi
    <div className="flex space-x-3 pt-4 border-t border-gray-600">
      {/* Avatar/Ä°kon */}
      <div className="flex-shrink-0">
        <FiUser className="w-8 h-8 text-gray-400 bg-gray-700 rounded-full p-1" />
      </div>
      
      {/* Yorum Ä°Ã§eriÄŸi */}
      <div className="flex-1">
        
        {isEditing ? (
          // --- DÃœZENLEME MODU ---
          <div className="space-y-2">
            <textarea
              value={editText}
              onChange={(e) => setEditText(e.target.value)}
              className="w-full py-2 px-3 text-gray-200 bg-gray-600 border border-blue-500 rounded-lg focus:outline-none"
              rows="3"
            />
            <div className="flex justify-end space-x-2">
              <button onClick={handleCancelEdit} className="text-gray-400 hover:text-white text-sm">Cancel</button>
              <button 
                onClick={handleSaveEdit} 
                disabled={isSaving}
                className="flex items-center bg-blue-600 hover:bg-blue-700 text-white font-semibold py-1 px-3 rounded-lg text-sm"
              >
                {isSaving ? <FiLoader className="animate-spin" /> : 'Save'}
              </button>
            </div>
          </div>
        ) : (
          // --- NORMAL GÃ–RÃœNÃœM MODU ---
          <div className="bg-gray-700 rounded-lg p-3">
            <div className="flex items-center justify-between mb-1">
              <span className="font-semibold text-white text-sm">
                {localComment.author_name || 'User'} 
              </span>
              <span className="text-xs text-gray-500">
                {new Date(localComment.created_at).toLocaleString()}
              </span>
            </div>
            <p className="text-gray-300 text-sm break-words">
              {localComment.text}
            </p>
            
            {/* YORUM ALTINDAKÄ° BUTONLAR (BEÄžEN, KOPYALA, 3-NOKTA) */}
            <div className="flex items-center space-x-3 mt-3">
              
              {/* BEÄžEN BUTONU */}
              <button 
                onClick={handleLike} 
                disabled={isLiking}
                className={`flex items-center text-xs ${hasLiked ? 'text-red-500' : 'text-gray-400 hover:text-white'}`}
              >
                <FiHeart fill={hasLiked ? 'currentColor' : 'none'} size={14} className="mr-1" />
                {likeCount}
              </button>
              
              {/* KOPYALA BUTONU */}
              <button onClick={handleCopy} className="text-xs text-gray-400 hover:text-white">
                {copied ? <FiCheck size={14} className="text-green-500" /> : <FiCopy size={14} />}
              </button>
              
              {/* 3-NOKTA MENÃœ (SADECE YORUMUN SAHÄ°BÄ° VEYA PROJE SAHÄ°BÄ° GÃ–RÃœR) */}
              {(isOwner || isProjectOwner) && (
                <div className="relative" ref={menuRef}>
                  <button onClick={() => setMenuOpen(p => !p)} className="text-xs text-gray-400 hover:text-white">
                    <FiMoreVertical size={14} />
                  </button>
                  
                  {isMenuOpen && (
                    <div className="absolute right-0 top-6 w-36 bg-gray-800 border border-gray-600 rounded-md shadow-lg z-10">
                      <ul className="py-1">
                        {/* Sadece YORUM SAHÄ°BÄ° dÃ¼zenleyebilir */}
                        {isOwner && (
                          <li>
                            <button
                              onClick={handleEdit}
                              className="w-full text-left flex items-center px-4 py-2 text-sm text-gray-300 hover:bg-gray-700"
                            >
                              <FiEdit size={14} className="mr-2" />
                              Edit
                            </button>
                          </li>
                        )}
                        {/* Yorum sahibi VEYA Proje sahibi silebilir */}
                        <li>
                          <button
                            onClick={handleDelete}
                            className="w-full text-left flex items-center px-4 py-2 text-sm text-red-500 hover:bg-gray-700"
                          >
                            <FiTrash size={14} className="mr-2" />
                            Delete
                          </button>
                        </li>
                      </ul>
                    </div>
                  )}
                </div>
              )}
            </div>
          </div>
        )}
      </div>
    </div>
  );
}

export default Comment;


================================================
FILE: frontend/src/components/projects/CommentForm.js
================================================
// src/components/projects/CommentForm.js

import React, { useState } from 'react';
// 1. Context import'larÄ± kaldÄ±rÄ±ldÄ±
// import { useProjectContext } from '../../context/ProjectContext';
import { FiSend, FiLoader } from 'react-icons/fi';

// 2. Component artÄ±k 'projectId' veya 'onCommentAdded' yerine
//    'onSubmit' (bir fonksiyon) ve 'loading' (bir durum) proplarÄ±nÄ± alÄ±yor.
function CommentForm({ onSubmit, loading }) {
  const [text, setText] = useState('');
  
  // 3. 'addComment' ve 'loading' state'i context'ten kaldÄ±rÄ±ldÄ±.

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (!text.trim()) return;

    try {
      // 4. ArtÄ±k 'addComment'i DEÄžÄ°L, dÄ±ÅŸarÄ±dan gelen 'onSubmit' fonksiyonunu
      //    mevcut 'text' (metin) ile Ã§aÄŸÄ±rÄ±yoruz.
      await onSubmit(text);
      
      // 5. BaÅŸarÄ±lÄ± olursa formu temizle
      setText(''); 
    } catch (error) {
      // Hata yÃ¶netimi artÄ±k bu fonksiyonu Ã§aÄŸÄ±ran
      // parent component (IssueItem veya ProjectDiscussion) tarafÄ±ndan yapÄ±lacak.
      console.error("CommentForm Error:", error);
    }
  };

  return (
    <form onSubmit={handleSubmit} className="flex">
      <input 
        type="text"
        value={text}
        onChange={(e) => setText(e.target.value)}
        className="flex-grow py-2 px-3 text-gray-200 bg-gray-700 border border-gray-600 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
        placeholder="Add a comment..."
      />
      <button 
        type="submit" 
        // 6. 'loading' durumunu dÄ±ÅŸarÄ±dan (prop) al
        disabled={loading}
        className="flex items-center justify-center w-12 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-3 rounded-r-lg transition-colors disabled:opacity-50"
      >
        {loading ? <FiLoader className="animate-spin" /> : <FiSend size={18} />}
      </button>
    </form>
  );
}

export default CommentForm;


================================================
FILE: frontend/src/components/projects/CommentList.js
================================================
// src/components/projects/CommentList.js

import React, { useState, useEffect } from 'react';
import { useProjectContext } from '../../context/ProjectContext';
import { FiLoader } from 'react-icons/fi';
import Comment from './Comment'; 

// 'refreshKey', yeni yorum eklendiÄŸinde (ProjectDiscussion'dan) tetiklenir
function CommentList({ projectId, refreshKey }) {
  const [comments, setComments] = useState([]);
  const { fetchComments, loading } = useProjectContext();

  // YorumlarÄ± Ã§eken fonksiyon
  const loadComments = async () => {
    try {
      const fetchedComments = await fetchComments(projectId);
      setComments(fetchedComments || []);
    } catch (error) {
      console.error("Failed to fetch comments:", error);
    }
  };

  // 1. Sayfa yÃ¼klendiÄŸinde VEYA 'refreshKey' deÄŸiÅŸtiÄŸinde yorumlarÄ± Ã§ek
  useEffect(() => {
    if (projectId) {
      loadComments();
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [projectId, refreshKey]); // refreshKey'e baÄŸÄ±mlÄ±

  // === YENÄ°: Yorum DÃ¼zenlendiÄŸinde veya SilindiÄŸinde Listeyi GÃ¼ncelle ===
  const handleCommentUpdated = (updatedComment) => {
    setComments(prev => 
      prev.map(c => c.id === updatedComment.id ? updatedComment : c)
    );
  };
  const handleCommentDeleted = (deletedCommentId) => {
    setComments(prev => 
      prev.filter(c => c.id !== deletedCommentId)
    );
  };

  return (
    <div className="space-y-4 mt-4">
      {loading && comments.length === 0 ? (
        <FiLoader className="animate-spin text-blue-500 mx-auto" size={24} />
      ) : comments.length === 0 ? (
        <p className="text-gray-500 text-sm text-center">Be the first to comment.</p>
      ) : (
        comments.map(comment => (
          <Comment 
            key={comment.id} 
            comment={comment}
            projectId={projectId} // 'like/edit/delete' iÃ§in gerekli
            onCommentUpdated={handleCommentUpdated} // Yeni prop
            onCommentDeleted={handleCommentDeleted} // Yeni prop
          />
        ))
      )}
    </div>
  );
}

export default CommentList;


================================================
FILE: frontend/src/components/projects/CreateProjectModal.js
================================================
import React, { useState } from 'react';
import { useProjectContext } from '../../context/ProjectContext'; // 1. Context'i import et
import { FiX, FiLoader } from 'react-icons/fi';

// Component, 'isOpen' (aÃ§Ä±k mÄ±?) ve 'onClose' (kapatma fonksiyonu) proplarÄ±nÄ± alÄ±r
function CreateProjectModal({ isOpen, onClose }) {
  
  // 2. Context'ten 'createProject' fonksiyonunu ve 'loading' durumunu al
  const { createProject, loading } = useProjectContext();

  // 3. Form alanlarÄ± iÃ§in state'ler
  const [name, setName] = useState('');
  const [description, setDescription] = useState('');
  const [error, setError] = useState(null);

  // Form gÃ¶nderildiÄŸinde Ã§alÄ±ÅŸacak fonksiyon
  const handleSubmit = async (e) => {
    e.preventDefault();
    setError(null); // Eski hatayÄ± temizle

    if (!name) {
      setError('Project name is required.');
      return;
    }

    try {
      // 4. Context'teki 'createProject' fonksiyonunu Ã§aÄŸÄ±r
      // Bu fonksiyon backend'e API isteÄŸi atacak
      await createProject(name, description);
      
      // BaÅŸarÄ±lÄ± olursa, formu temizle ve modal'Ä± kapat
      setName('');
      setDescription('');
      onClose(); 
    } catch (err) {
      // BaÅŸarÄ±sÄ±z olursa (Ã¶rn: sunucu hatasÄ±), hatayÄ± gÃ¶ster
      setError(err.message);
    }
  };

  // EÄŸer modal 'isOpen' false ise, hiÃ§bir ÅŸey gÃ¶sterme
  if (!isOpen) {
    return null;
  }

  // Modal aÃ§Ä±ksa, bu JSX'i gÃ¶ster
  return (
    // Arka planÄ± karartan overlay
    <div className="fixed inset-0 bg-black bg-opacity-75 flex justify-center items-center z-50">
      
      {/* AsÄ±l Modal Penceresi */}
      <div className="bg-gray-800 rounded-lg shadow-2xl w-full max-w-lg p-6">
        
        {/* BaÅŸlÄ±k ve Kapatma Butonu */}
        <div className="flex justify-between items-center mb-4">
          <h2 className="text-2xl font-bold text-white">Create New Project</h2>
          <button 
            onClick={onClose} 
            className="text-gray-400 hover:text-white"
          >
            <FiX size={24} />
          </button>
        </div>
        
        {/* Proje OluÅŸturma Formu */}
        <form onSubmit={handleSubmit}>
          <div className="space-y-4">
            
            {/* Proje AdÄ± */}
            <div>
              <label htmlFor="projectName" className="block text-sm font-medium text-gray-300 mb-1">
                Project Name
              </label>
              <input 
                type="text"
                id="projectName"
                value={name}
                onChange={(e) => setName(e.target.value)}
                className="w-full py-2 px-3 text-gray-200 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                placeholder="My New Awesome Project"
              />
            </div>
            
            {/* Proje AÃ§Ä±klamasÄ± */}
            <div>
              <label htmlFor="projectDescription" className="block text-sm font-medium text-gray-300 mb-1">
                Description (Optional)
              </label>
              <textarea
                id="projectDescription"
                rows="3"
                value={description}
                onChange={(e) => setDescription(e.target.value)}
                className="w-full py-2 px-3 text-gray-200 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                placeholder="What is this project about?"
              />
            </div>
          </div>
          
          {/* Hata MesajÄ± AlanÄ± */}
          {error && (
            <p className="text-sm text-red-400 text-center mt-4">
              {error}
            </p>
          )}

          {/* Butonlar */}
          <div className="flex justify-end space-x-3 mt-6">
            <button
              type="button"
              onClick={onClose}
              disabled={loading}
              className="py-2 px-4 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors disabled:opacity-50"
            >
              Cancel
            </button>
            <button
              type="submit"
              disabled={loading}
              className="flex items-center justify-center py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors disabled:opacity-50"
            >
              {loading ? (
                <FiLoader className="animate-spin mr-2" />
              ) : (
                'Create Project'
              )}
            </button>
          </div>
        </form>
      </div>
    </div>
  );
}

export default CreateProjectModal;


================================================
FILE: frontend/src/components/projects/FileList.js
================================================
// src/components/projects/FileList.js
import React from 'react';
import { FiFileText, FiFile, FiImage } from 'react-icons/fi'; // Icons for file types

// A simple function to get an icon based on file type
const getFileIcon = (fileName) => {
  if (fileName.endsWith('.pdf')) return <FiFileText className="text-red-400" />;
  if (fileName.endsWith('.docx') || fileName.endsWith('.doc')) return <FiFileText className="text-blue-40Ã¡00" />;
  if (fileName.endsWith('.png') || fileName.endsWith('.jpg')) return <FiImage className="text-green-400" />;
  return <FiFile className="text-gray-400" />;
};

function FileList({ files, loading }) {
  return (
    <div className="mt-12">
      <h2 className="text-2xl font-bold text-white border-b border-gray-700 pb-2 mb-4">
        Project Files
      </h2>
      {loading ? (
        <p>Loading files...</p>
      ) : (
        <div className="space-y-2">
          {files.map(file => (
            <div key={file.id} className="flex items-center bg-gray-800 p-3 rounded-md">
              <span className="mr-3">{getFileIcon(file.name)}</span>
              <div className="flex-1">
                <p className="text-white font-medium">{file.name}</p>
                <p className="text-xs text-gray-500">Uploaded by {file.uploadedBy}</p>
              </div>
            </div>
          ))}
        </div>
      )}
    </div>
  );
}
export default FileList;


================================================
FILE: frontend/src/components/projects/IssueItem.js
================================================
// src/components/projects/IssueItem.js

import React, { useState, useRef, useEffect } from 'react';
import { 
  FiMessageSquare, FiChevronDown, FiChevronRight, FiLoader, 
  FiMoreVertical, FiEdit, FiCheckCircle, FiCircle, FiSave, FiX, FiAlertTriangle
} from 'react-icons/fi';
import { useProjectContext } from '../../context/ProjectContext';
import { useAuth } from '../../context/AuthContext';
import Comment from './Comment'; 
import CommentForm from './CommentForm';

function IssueItem({ issue, projectId, onIssueUpdated }) {
  
  // === 1. STATE (DURUM) TANIMLAMALARI ===
  const [localIssue, setLocalIssue] = useState(issue);
  const [isOpen, setIsOpen] = useState(false); 
  const [comments, setComments] = useState([]); 
  const [loadingComments, setLoadingComments] = useState(false);
  const [isMenuOpen, setMenuOpen] = useState(false);
  const [isEditing, setIsEditing] = useState(false); 
  const [editText, setEditText] = useState(issue.text); 
  const [isSaving, setIsSaving] = useState(false);
  const [editError, setEditError] = useState(null);
  const menuRef = useRef(null);
  
  // Context'ten gerekli fonksiyonlarÄ± al
  const { 
    currentProject, 
    fetchIssueComments, 
    addIssueComment, 
    updateIssue, 
    loading: contextLoading 
  } = useProjectContext();
  
  const { user } = useAuth(); 
  const userRole = currentProject?.currentUserRole;

  // === 2. EFFECT'LER ===
  
  // 'issue' prop'u deÄŸiÅŸtiÄŸinde yerel state'i gÃ¼ncelle
  useEffect(() => {
    setLocalIssue(issue);
  }, [issue]); 

  // MenÃ¼ dÄ±ÅŸÄ±na tÄ±klamayÄ± dinle
  useEffect(() => {
    function handleClickOutside(event) {
      if (menuRef.current && !menuRef.current.contains(event.target)) {
        setMenuOpen(false);
      }
    }
    document.addEventListener("mousedown", handleClickOutside);
    return () => {
      document.removeEventListener("mousedown", handleClickOutside);
    };
  }, [menuRef]);
  
  // === 3. FONKSÄ°YONLAR ===

  // YorumlarÄ± aÃ§/kapat
  const toggleComments = async () => {
    if (isOpen) {
      setIsOpen(false);
      return;
    }
    setIsOpen(true);
    setLoadingComments(true);
    try {
      const fetchedComments = await fetchIssueComments(projectId, localIssue.id);
      setComments(fetchedComments || []);
    } catch (error) {
      console.error("Failed to fetch issue comments:", error);
    } finally {
      setLoadingComments(false);
    }
  };

  // Yorum ekle
  const handleCommentAdded = async (text) => {
    try {
      const newComment = await addIssueComment(projectId, localIssue.id, text);
      setComments([...comments, newComment]); // Listeyi anÄ±nda gÃ¼ncelle
    } catch (error) {
      console.error("Failed to add issue comment:", error);
    }
  };

  // Issue durumunu DeÄŸiÅŸtir (Done/Open)
  const handleToggleStatus = async () => {
    const isDone = localIssue.status === 'Closed';
    const newStatus = isDone ? 'Open' : 'Closed'; 
    try {
      const updatedIssue = await updateIssue(projectId, localIssue.id, { status: newStatus });
      setLocalIssue(updatedIssue); 
      onIssueUpdated(updatedIssue); 
    } catch (error) {
      console.error("Failed to update issue status:", error);
    } finally {
      setMenuOpen(false);
    }
  };
  
  // "Edit" (DÃ¼zenleme) Modu FonksiyonlarÄ±
  const handleEditClick = () => {
    setEditText(localIssue.text); 
    setIsEditing(true); 
    setMenuOpen(false); 
    setEditError(null); 
  };

  const handleCancelEdit = () => {
    setIsEditing(false); 
    setEditError(null); 
  };

  const handleSaveEdit = async () => {
    if (editText.trim() === '' || editText === localIssue.text) {
      setIsEditing(false); 
      return;
    }
    setIsSaving(true); 
    setEditError(null);
    try {
      const updatedIssue = await updateIssue(projectId, localIssue.id, { text: editText });
      setLocalIssue(updatedIssue); 
      onIssueUpdated(updatedIssue); 
      setIsEditing(false); 
    } catch (error) {
      console.error("Failed to save issue edit:", error);
      setEditError("Failed to save. Please try again."); 
    } finally {
      setIsSaving(false); 
    }
  };
  
  // Yorum listesi iÃ§in gÃ¼ncelleme fonksiyonlarÄ±
  const handleCommentUpdated = (updatedComment) => {
    setComments(prev => 
      prev.map(c => c.id === updatedComment.id ? updatedComment : c)
    );
  };
  const handleCommentDeleted = (deletedCommentId) => {
    setComments(prev => 
      prev.filter(c => c.id !== deletedCommentId)
    );
  };

  // === 4. RENDER (GÃ–RÃœNÃœM) ===
  const isDone = localIssue.status === 'Closed';
  const issueTextStyle = isDone ? "text-gray-500 line-through" : "text-white";
  const issueAuthorStyle = isDone ? "text-gray-600" : "text-gray-400";

  return (
    <div className={`bg-gray-700 rounded-md ${isDone ? 'bg-opacity-70' : ''}`}>
      <div className="flex justify-between items-center p-3">
        
        {isEditing ? (
          // --- DÃœZENLEME MODU ---
          <div className="flex-1 flex flex-col">
            <div className="flex-1 flex items-center space-x-2">
              <input
                type="text"
                value={editText}
                autoFocus
                onChange={(e) => setEditText(e.target.value)}
                className="flex-grow py-1 px-2 text-white bg-gray-600 border border-blue-500 rounded-md focus:outline-none"
              />
              <button 
                onClick={handleSaveEdit} 
                disabled={isSaving} 
                className="p-2 text-green-400 hover:text-green-300 disabled:opacity-50"
              >
                {isSaving ? <FiLoader className="animate-spin" /> : <FiSave size={18} />}
              </button>
              <button onClick={handleCancelEdit} className="p-2 text-red-400 hover:text-red-300">
                <FiX size={18} />
              </button>
            </div>
            {editError && (
              <p className="text-xs text-red-400 mt-1 ml-1 flex items-center">
                <FiAlertTriangle size={14} className="mr-1" />
                {editError}
              </p>
            )}
          </div>

        ) : (
          // --- NORMAL MOD ---
          <>
            <button 
              onClick={toggleComments}
              className="flex-1 flex items-center text-left"
            >
              {isOpen ? <FiChevronDown size={20} className="mr-2" /> : <FiChevronRight size={20} className="mr-2" />}
              <div className="flex-1">
                <p className={`font-medium ${issueTextStyle}`}>{localIssue.text}</p>
                <span className={`text-xs ${issueAuthorStyle}`}>
                  Opened by {localIssue.created_by_name || '...'}
                  {isDone && (
                    <span className="italic">
                      : Closed by {user?.username || '...'}
                    </span>
                  )}
                </span>
              </div>
            </button>
            
            <div className="flex items-center">
              <FiMessageSquare size={16} className={`mr-3 ${issueAuthorStyle}`} />
              
              {/* 3-NOKTA MENÃœ (SADECE 'viewer' veya 'public_viewer' DEÄžÄ°LSE GÃ–STER) */}
              {(userRole === 'owner' || userRole === 'editor') && (
                <div className="relative" ref={menuRef}>
                  <button 
                    onClick={(e) => {
                      e.stopPropagation(); // DÃ¼zeltme: TÄ±klamanÄ±n yayÄ±lmasÄ±nÄ± engelle
                      setMenuOpen(prev => !prev);
                    }}
                    className="p-1 text-gray-400 hover:text-white rounded-full"
                  >
                    <FiMoreVertical size={18} />
                  </button>
                  
                  {isMenuOpen && (
                    // DÃ¼zeltme: z-index 50 yapÄ±ldÄ±
                    <div className="absolute right-0 top-8 w-48 bg-gray-800 border border-gray-600 rounded-md shadow-lg z-50">
                      <ul className="py-1">
                        <li>
                          <button
                            onClick={(e) => {
                              e.stopPropagation();
                              handleEditClick();
                            }}
                            className="w-full text-left flex items-center px-4 py-2 text-sm text-gray-300 hover:bg-gray-700"
                          >
                            <FiEdit size={14} className="mr-2" />
                            Edit Issue
                          </button>
                        </li>
                        <li>
                          <button
                            onClick={(e) => {
                              e.stopPropagation();
                              handleToggleStatus();
                            }}
                            className="w-full text-left flex items-center px-4 py-2 text-sm text-gray-300 hover:bg-gray-700"
                          >
                            {isDone ? (
                              <><FiCircle size={14} className="mr-2 text-yellow-500" />Mark as Open</>
                            ) : (
                              <><FiCheckCircle size={14} className="mr-2 text-green-500" />Mark as Done</>
                            )}
                          </button>
                        </li>
                      </ul>
                    </div>
                  )}
                </div>
              )}
            </div>
          </>
        )}
      </div>

      {/* Yorum BÃ¶lÃ¼mÃ¼ */}
      {isOpen && !isEditing && (
        <div className="p-4 border-t border-gray-600">
          
          {/* Yorum Listesi */}
          {loadingComments ? (
            <div className="flex justify-center p-3">
              <FiLoader className="animate-spin text-blue-400" />
            </div>
          ) : (
            <div className="space-y-4 mb-4">
              {comments.length === 0 ? (
                <p className="text-gray-500 text-sm text-center">No comments yet.</p>
              ) : (
                comments.map(comment => (
                  <Comment 
                    key={comment.id} 
                    comment={comment}
                    projectId={projectId}
                    onCommentUpdated={handleCommentUpdated} 
                    onCommentDeleted={handleCommentDeleted} 
                  />
                ))
              )}
            </div>
          )}
          
          {/* Yorum Formu veya KapalÄ± MesajÄ± */}
          {isDone ? (
            <div className="p-3 bg-gray-800 rounded-md text-center">
              <p className="text-sm text-gray-400">
                This issue is closed. No new comments can be added.
              </p>
            </div>
          ) : (
            // Herkes (public_viewer dahil) yorum yapabilir
            <CommentForm 
              onSubmit={handleCommentAdded}
              loading={contextLoading} 
            />
          )}
        </div>
      )}
    </div>
  );
}

export default IssueItem;


================================================
FILE: frontend/src/components/projects/ProjectDiscussion.js
================================================
// src/components/projects/ProjectDiscussion.js

import React, { useState, useEffect, useRef } from 'react';
import { useProjectContext } from '../../context/ProjectContext';
import { useAuth } from '../../context/AuthContext';
import { FiSend, FiLoader, FiLock, FiUser } from 'react-icons/fi';

export default function ProjectDiscussion() {
  
  const { currentProject, fetchComments, addComment, loading: contextLoading } = useProjectContext();
  const { user } = useAuth();

  const [messages, setMessages] = useState([]);
  const [newMessage, setNewMessage] = useState('');
  const [isLoading, setIsLoading] = useState(true);
  const [isSending, setIsSending] = useState(false);
  const chatEndRef = useRef(null);

  const userRole = currentProject?.currentUserRole;

  useEffect(() => {
    if (userRole === 'public_viewer' || !currentProject?.id) {
      setIsLoading(false);
      return;
    }
    const loadMessages = async () => {
      setIsLoading(true);
      try {
        const fetchedMessages = await fetchComments(currentProject.id);
        setMessages(fetchedMessages || []);
      } catch (error) {
        console.error("Error loading messages:", error);
      } finally {
        setIsLoading(false);
      }
    };
    loadMessages();
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [currentProject?.id, userRole]);

  useEffect(() => {
    if (messages.length > 0) {
      chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });
    }
  }, [messages]);

  const handleSendMessage = async (e) => {
    e.preventDefault();
    if (!newMessage.trim() || isSending) return;
    const text = newMessage;
    setNewMessage('');
    setIsSending(true);
    try {
      const newComment = await addComment(currentProject.id, text);
      setMessages(prev => [...prev, newComment]);
    } catch (error) {
      console.error("Error sending:", error);
      setNewMessage(text);
    } finally {
      setIsSending(false);
    }
  };

  if (userRole === 'public_viewer') {
    return (
      <div className="flex flex-col items-center justify-center p-10 bg-gray-800 rounded-lg h-64 border border-gray-700">
        <FiLock size={40} className="text-yellow-500 mb-4" />
        <h3 className="text-xl font-semibold text-white">Members Only Chat</h3>
        <p className="text-gray-400 mt-2">This chat room is only visible to project members.</p>
      </div>
    );
  }

  return (
    // === GÃœNCELLEME: h-[65vh] ile yÃ¼ksekliÄŸi ekranÄ±n %65'ine sabitledik ===
    // Bu sayede kesinlikle daha kÄ±sa olacak ve taÅŸma yapmayacak.
    <div className="flex flex-col h-[55vh] bg-gray-800 rounded-lg shadow-lg border border-gray-700">
      
      {/* Mesaj Listesi */}
      <div className="flex-1 p-3 space-y-3 overflow-y-auto custom-scrollbar">
        {isLoading ? (
          <div className="flex justify-center items-center h-full">
            <FiLoader className="animate-spin text-blue-500" size={24} />
          </div>
        ) : messages.length === 0 ? (
          <div className="flex justify-center items-center h-full flex-col opacity-50">
             <div className="w-12 h-12 bg-gray-700 rounded-full flex items-center justify-center mb-2">
                <FiSend size={20} className="text-gray-400" />
             </div>
            <p className="text-gray-400 text-sm">No messages yet.</p>
          </div>
        ) : (
          messages.map(msg => {
            const isMine = msg.author_id === user.id;
            return (
              <div key={msg.id} className={`flex items-start ${isMine ? 'justify-end' : 'justify-start'} animate-fade-in`}>
                {!isMine && (
                  <div className="flex-shrink-0 mr-2 mt-1">
                    <div className="w-6 h-6 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-full flex items-center justify-center text-white text-[10px] font-bold shadow-sm">
                        {msg.author_name?.charAt(0).toUpperCase() || <FiUser />}
                    </div>
                  </div>
                )}
                
                {/* Mesaj Balonu (Daha kompakt padding: p-2) */}
                <div className={`max-w-[80%] lg:max-w-[70%] p-2 rounded-2xl shadow-sm ${
                    isMine 
                      ? 'bg-blue-600 text-white rounded-tr-none' 
                      : 'bg-gray-700 text-gray-200 rounded-tl-none'
                  }`}
                >
                  {!isMine && (
                    <p className="text-[10px] font-bold text-blue-300 mb-0.5 opacity-90">
                      {msg.author_name}
                    </p>
                  )}
                  <p className="text-sm break-words leading-snug">{msg.text}</p>
                  <p className={`text-[9px] mt-1 text-right ${isMine ? 'text-blue-200' : 'text-gray-400'}`}>
                    {new Date(msg.created_at).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}
                  </p>
                </div>
              </div>
            );
          })
        )}
        <div ref={chatEndRef} />
      </div>

      {/* Mesaj Yazma Kutusu */}
      <div className="p-3 border-t border-gray-700 bg-gray-800/50 rounded-b-lg">
        <form onSubmit={handleSendMessage} className="flex space-x-2">
          <input
            type="text"
            value={newMessage}
            onChange={(e) => setNewMessage(e.target.value)}
            className="flex-grow py-2 px-3 text-sm text-gray-200 bg-gray-900 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all placeholder-gray-500"
            placeholder="Type your message..."
            disabled={isSending || contextLoading}
          />
          <button
            type="submit"
            disabled={isSending || contextLoading}
            className="flex items-center justify-center w-10 h-auto bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all disabled:opacity-50"
          >
            {isSending ? <FiLoader className="animate-spin text-xs" /> : <FiSend size={16} />}
          </button>
        </form>
      </div>
    </div>
  );
}


================================================
FILE: frontend/src/components/projects/ProjectEditPage.js
================================================
// src/components/projects/ProjectEditPage.js

import React, { useState, useEffect } from 'react';
import { useProjectContext } from '../../context/ProjectContext';
import { useAuth } from '../../context/AuthContext'; 
import { useNavigate } from 'react-router-dom';
// === DÃœZELTME BURADA: 'FiFileText' EKLENDÄ° ===
import { 
  FiUserPlus, FiLoader, FiCheck, FiAlertTriangle, FiSave,
  FiUsers, FiTrash2, FiUser, FiGlobe, FiLock, FiSettings, FiShield, FiLayout, FiFileText
} from 'react-icons/fi';

export default function ProjectEditPage() {
  const { user } = useAuth(); 
  const navigate = useNavigate(); 
  
  const { 
    currentProject, 
    addMember, 
    removeMember,       
    currentMembers,   
    fetchMembers,
    updateProjectVisibility,
    updateTasksVisibility,
    updateProjectDetails, 
    deleteProject         
  } = useProjectContext();

  // --- 1. STATE TANIMLAMALARI ---

  // Genel Ayarlar Formu
  const [name, setName] = useState('');
  const [description, setDescription] = useState('');
  const [longDescription, setLongDescription] = useState(''); // Uzun aÃ§Ä±klama state'i
  const [isSavingDetails, setIsSavingDetails] = useState(false);
  const [saveMessage, setSaveMessage] = useState(null);

  // Invite Form
  const [usernameToAdd, setUsernameToAdd] = useState('');
  const [roleToAdd, setRoleToAdd] = useState('viewer'); 
  const [isAdding, setIsAdding] = useState(false);
  const [addError, setAddError] = useState(null);
  const [addSuccess, setAddSuccess] = useState(null);

  // Visibility
  const [isPublic, setIsPublic] = useState(false);
  const [updatingVisibility, setUpdatingVisibility] = useState(false);
  const [tasksPublic, setTasksPublic] = useState(false);
  const [updatingTasks, setUpdatingTasks] = useState(false);

  // Member Remove
  const [removingId, setRemovingId] = useState(null); 
  const [isDeletingProject, setIsDeletingProject] = useState(false);

  // --- 2. VERÄ° YÃœKLEME ---
  useEffect(() => {
    if (currentProject) {
      setName(currentProject.name);
      setDescription(currentProject.description || '');
      setLongDescription(currentProject.long_description || ''); // Uzun aÃ§Ä±klamayÄ± yÃ¼kle
      setIsPublic(currentProject.is_public); 
      setTasksPublic(currentProject.is_tasks_public);
      fetchMembers(currentProject.id);
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [currentProject]);

  if (!currentProject) return <div className="p-10 text-center"><FiLoader className="animate-spin text-blue-500" /></div>;

  // --- 3. FONKSÄ°YONLAR ---

  // Proje AdÄ±/AÃ§Ä±klama GÃ¼ncelleme
  const handleDetailsSubmit = async (e) => {
    e.preventDefault();
    setIsSavingDetails(true);
    setSaveMessage(null);
    try {
      // updateProjectDetails fonksiyonunun 'longDescription'Ä± aldÄ±ÄŸÄ±ndan emin olun
      await updateProjectDetails(currentProject.id, name, description, longDescription);
      setSaveMessage({ type: 'success', text: 'Project details updated successfully!' });
    } catch (err) {
      console.error(err);
      // Backend'den gelen gerÃ§ek hata mesajÄ±nÄ± gÃ¶ster
      const errorMsg = err.response?.data?.message || err.message || 'Failed to update.';
      setSaveMessage({ type: 'error', text: errorMsg });
    } finally {
      setIsSavingDetails(false);
    }
  };

  // GÃ¶rÃ¼nÃ¼rlÃ¼k DeÄŸiÅŸtirme
  const handleVisibilityToggle = async () => {
    setUpdatingVisibility(true);
    try {
      const newVisibility = !isPublic; 
      await updateProjectVisibility(currentProject.id, newVisibility);
      setIsPublic(newVisibility); 
    } catch (error) {
      alert("Error: " + error.message);
    } finally {
      setUpdatingVisibility(false);
    }
  };

  const handleTasksVisibilityToggle = async () => {
    setUpdatingTasks(true);
    try {
      const newVisibility = !tasksPublic;
      await updateTasksVisibility(currentProject.id, newVisibility);
      setTasksPublic(newVisibility);
    } catch (error) {
      alert("Error: " + error.message);
    } finally {
      setUpdatingTasks(false);
    }
  };

  // Ãœye Ekleme
  const handleMemberSubmit = async (e) => {
    e.preventDefault();
    if (!usernameToAdd) return;
    setIsAdding(true);
    setAddError(null);
    setAddSuccess(null);
    try {
      const addedMember = await addMember(currentProject.id, usernameToAdd, roleToAdd);
      setAddSuccess(`Added ${addedMember.username} as ${addedMember.role}.`);
      setUsernameToAdd(''); 
    } catch (err) {
      setAddError(err.message);
    } finally {
      setIsAdding(false);
    }
  };

  // Ãœye Ã‡Ä±karma
  const handleRemoveMember = async (memberId, memberUsername) => {
    if (window.confirm(`Remove ${memberUsername}?`)) {
      setRemovingId(memberId); 
      try {
        await removeMember(currentProject.id, memberId);
      } catch (err) {
        alert("Error: " + err.message); 
      } finally {
        setRemovingId(null); 
      }
    }
  };

  // Proje Silme
  const handleDeleteProject = async () => {
    const confirmName = window.prompt(`To delete this project, type its name: "${currentProject.name}"`);
    if (confirmName === currentProject.name) {
      setIsDeletingProject(true);
      try {
        await deleteProject(currentProject.id);
        navigate('/dashboard'); // Ana sayfaya yÃ¶nlendir
      } catch (err) {
        alert("Failed to delete project: " + err.message);
        setIsDeletingProject(false);
      }
    } else if (confirmName !== null) {
      alert("Project name did not match.");
    }
  };

  // --- 4. RENDER ---
  return (
    <div className="max-w-4xl mx-auto space-y-8 pb-20">
      
      {/* BAÅžLIK */}
      <div className="border-b border-gray-700 pb-4">
        <h2 className="text-3xl font-bold text-white flex items-center">
          <FiSettings className="mr-3 text-gray-400" />
          Project Settings
        </h2>
      </div>
      
      {/* 1. GENEL AYARLAR (AD & AÃ‡IKLAMA) */}
      <div className="bg-gray-800 rounded-xl border border-gray-700 p-6">
        <h3 className="text-xl font-semibold text-white mb-4">General Settings</h3>
        <form onSubmit={handleDetailsSubmit} className="space-y-4">
          
          {/* Ä°sim */}
          <div>
            <label className="block text-sm font-medium text-gray-400 mb-1">Project Name</label>
            <input 
              type="text" 
              value={name}
              onChange={(e) => setName(e.target.value)}
              className="w-full bg-gray-900 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-blue-500 outline-none"
            />
          </div>
          
          {/* KÄ±sa AÃ§Ä±klama */}
          <div>
            <label className="block text-sm font-medium text-gray-400 mb-1">Short Description (Header)</label>
            <textarea 
              rows="2"
              value={description}
              onChange={(e) => setDescription(e.target.value)}
              className="w-full bg-gray-900 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-blue-500 outline-none"
            />
          </div>

          {/* Uzun AÃ§Ä±klama (Readme) */}
          <div>
            <label className="block text-sm font-medium text-gray-400 mb-1 flex items-center">
              <FiFileText className="mr-1"/> Long Description (Readme / Files Tab)
            </label>
            <textarea 
              rows="6"
              value={longDescription}
              onChange={(e) => setLongDescription(e.target.value)}
              className="w-full bg-gray-900 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-blue-500 outline-none font-mono text-sm"
              placeholder="Detailed project documentation, instructions, or readme content..."
            />
          </div>

          <div className="flex items-center justify-between">
            <button 
              type="submit" 
              disabled={isSavingDetails}
              className="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold flex items-center disabled:opacity-50"
            >
              {isSavingDetails ? <FiLoader className="animate-spin mr-2"/> : <FiSave className="mr-2"/>}
              Save Changes
            </button>
            {saveMessage && (
              <span className={`text-sm ${saveMessage.type === 'success' ? 'text-green-400' : 'text-red-400'}`}>
                {saveMessage.text}
              </span>
            )}
          </div>
        </form>
      </div>

      {/* 2. GÃ–RÃœNÃœRLÃœK AYARLARI */}
      <div className="bg-gray-800 rounded-xl border border-gray-700 overflow-hidden">
        {/* Proje GÃ¶rÃ¼nÃ¼rlÃ¼ÄŸÃ¼ */}
        <div className="p-6 border-b border-gray-700 flex justify-between items-center">
          <div>
            <h3 className="text-xl font-semibold text-white flex items-center">
              {isPublic ? <FiGlobe className="mr-2 text-green-400"/> : <FiLock className="mr-2 text-red-400"/>}
              Project Visibility
            </h3>
            <p className="text-gray-400 text-sm mt-1">
              {isPublic ? "Visible to everyone." : "Private. Only members can access."}
            </p>
          </div>
          <button onClick={handleVisibilityToggle} disabled={updatingVisibility} className={`px-4 py-2 rounded-lg font-medium border transition-colors ${isPublic ? 'border-red-500 text-red-400 hover:bg-red-900/20' : 'border-green-500 text-green-400 hover:bg-green-900/20'}`}>
            {updatingVisibility ? <FiLoader className="animate-spin"/> : (isPublic ? "Make Private" : "Make Public")}
          </button>
        </div>

        {/* GÃ¶rev GÃ¶rÃ¼nÃ¼rlÃ¼ÄŸÃ¼ */}
        <div className="p-6 flex justify-between items-center">
          <div>
            <h3 className="text-xl font-semibold text-white flex items-center">
              <FiLayout className="mr-2 text-blue-400"/>
              Tasks Visibility
            </h3>
            <p className="text-gray-400 text-sm mt-1">
              {tasksPublic ? "Tasks are visible to public visitors." : "Tasks are hidden from public visitors."}
            </p>
          </div>
          <button onClick={handleTasksVisibilityToggle} disabled={updatingTasks} className={`px-4 py-2 rounded-lg font-medium border transition-colors ${tasksPublic ? 'border-red-500 text-red-400 hover:bg-red-900/20' : 'border-green-500 text-green-400 hover:bg-green-900/20'}`}>
            {updatingTasks ? <FiLoader className="animate-spin"/> : (tasksPublic ? "Hide Tasks" : "Show Tasks")}
          </button>
        </div>
      </div>

      {/* 3. ÃœYE YÃ–NETÄ°MÄ° */}
      <div className="bg-gray-800 rounded-xl border border-gray-700 p-6">
        <h3 className="text-xl font-semibold text-white mb-4 flex items-center">
          <FiUsers className="mr-2" /> Manage Team
        </h3>
        
        {/* Ãœye Ekleme Formu */}
        <form onSubmit={handleMemberSubmit} className="bg-gray-900 p-4 rounded-lg mb-6 flex flex-col md:flex-row gap-3 items-end">
          <div className="flex-grow w-full">
            <label className="text-xs text-gray-500 uppercase font-bold">Username</label>
            <input 
              type="text" 
              value={usernameToAdd} 
              onChange={(e) => setUsernameToAdd(e.target.value)}
              className="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white outline-none focus:border-blue-500"
              placeholder="username"
            />
          </div>
          <div className="w-full md:w-40">
            <label className="text-xs text-gray-500 uppercase font-bold">Role</label>
            <select 
              value={roleToAdd} 
              onChange={(e) => setRoleToAdd(e.target.value)}
              className="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white outline-none focus:border-blue-500"
            >
              <option value="viewer">Viewer</option>
              <option value="editor">Editor</option>
            </select>
          </div>
          <button disabled={isAdding} type="submit" className="w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded font-semibold flex items-center justify-center disabled:opacity-50">
            {isAdding ? <FiLoader className="animate-spin"/> : <FiUserPlus />}
          </button>
        </form>
        
        {/* Hata/BaÅŸarÄ± MesajlarÄ± */}
        {(addSuccess || addError) && (
          <div className={`mb-4 p-2 rounded text-sm flex items-center ${addSuccess ? 'text-green-400 bg-green-900/20' : 'text-red-400 bg-red-900/20'}`}>
            {addSuccess ? <FiCheck className="mr-2"/> : <FiAlertTriangle className="mr-2"/>}
            {addSuccess || addError}
          </div>
        )}

        {/* Ãœye Listesi */}
        <div className="space-y-2">
          {currentMembers.length > 0 ? (
            currentMembers.map(member => (
              <div key={member.id} className="flex justify-between items-center p-3 bg-gray-750 border border-gray-600 rounded hover:bg-gray-700 transition">
                <div className="flex items-center">
                  <div className="w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center text-white font-bold mr-3">
                    {member.username.charAt(0).toUpperCase()}
                  </div>
                  <div>
                    <p className="text-white font-medium text-sm">{member.username}</p>
                    <span className="text-xs text-gray-400 bg-gray-800 px-2 py-0.5 rounded border border-gray-600 capitalize">
                      {member.role}
                    </span>
                  </div>
                </div>
                {member.role !== 'owner' && (
                  <button 
                    onClick={() => handleRemoveMember(member.id, member.username)}
                    disabled={removingId === member.id}
                    className="text-gray-500 hover:text-red-500 p-2"
                  >
                    {removingId === member.id ? <FiLoader className="animate-spin"/> : <FiTrash2 />}
                  </button>
                )}
              </div>
            ))
          ) : (
            <p className="text-gray-500 text-center py-4">No members yet.</p>
          )}
        </div>
      </div>

      {/* 4. TEHLÄ°KE BÃ–LGESÄ° */}
      <div className="bg-red-900/10 border border-red-900/50 rounded-xl p-6 mt-10">
        <h3 className="text-xl font-bold text-red-500 flex items-center mb-2">
          <FiShield className="mr-2" /> Danger Zone
        </h3>
        <p className="text-gray-400 text-sm mb-6">
          Deleting this project will permanently remove all issues, comments, files, and member associations. This action cannot be undone.
        </p>
        <div className="flex justify-end">
          <button
            onClick={handleDeleteProject}
            disabled={isDeletingProject}
            className="px-5 py-2.5 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg shadow-lg transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50 flex items-center"
          >
            {isDeletingProject ? <FiLoader className="animate-spin mr-2"/> : <FiTrash2 className="mr-2"/>}
            Delete Project
          </button>
        </div>
      </div>

    </div>
  );
}


================================================
FILE: frontend/src/components/projects/ProjectFiles.js
================================================
// src/components/projects/ProjectFiles.js

import React, { useState, useEffect } from 'react';
import { useProjectContext } from '../../context/ProjectContext';
import { FiFile, FiDownload, FiTrash2, FiUpload, FiLoader, FiFileText } from 'react-icons/fi';

export default function ProjectFiles() {
  const { currentProject, fetchFiles, uploadFile, deleteFile } = useProjectContext();
  
  const [files, setFiles] = useState([]);
  const [loading, setLoading] = useState(false);
  const [uploading, setUploading] = useState(false);
  
  const userRole = currentProject?.currentUserRole;
  const canEdit = userRole === 'owner' || userRole === 'editor';

  // DosyalarÄ± YÃ¼kle
  useEffect(() => {
    if (currentProject) {
      setLoading(true);
      fetchFiles(currentProject.id)
        .then(data => setFiles(data || []))
        .finally(() => setLoading(false));
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [currentProject]);

  const handleFileUpload = async (e) => {
    const file = e.target.files[0];
    if (!file) return;

    setUploading(true);
    try {
      const newFile = await uploadFile(currentProject.id, file);
      setFiles([newFile, ...files]); 
    } catch (error) {
      console.error("Upload failed", error);
      alert("Failed to upload file.");
    } finally {
      setUploading(false);
      e.target.value = null; 
    }
  };

  const handleDelete = async (fileId) => {
    if (window.confirm("Delete this file?")) {
      await deleteFile(currentProject.id, fileId);
      setFiles(files.filter(f => f.id !== fileId));
    }
  };

  const getFileUrl = (filePath) => {
    const cleanPath = filePath.replace(/\\/g, '/');
    return `http://localhost:5000/${cleanPath}`;
  };

  return (
    <div className="space-y-8">
      {/* 1. BÃ–LÃœM: DOSYALAR LÄ°STESÄ° */}
      <div>
        <div className="flex justify-between items-center mb-6">
          <h2 className="text-2xl font-semibold text-white">Project Files</h2>
          
          {canEdit && (
            <div className="relative">
              <input 
                type="file" 
                onChange={handleFileUpload}
                className="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
                disabled={uploading}
              />
              <button className="flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors">
                {uploading ? <FiLoader className="animate-spin mr-2" /> : <FiUpload className="mr-2" />}
                Upload File
              </button>
            </div>
          )}
        </div>

        <div className="bg-gray-800 rounded-lg overflow-hidden shadow-sm border border-gray-700">
          {loading ? (
            <div className="p-8 flex justify-center"><FiLoader className="animate-spin text-blue-500" size={30} /></div>
          ) : files.length === 0 ? (
            <div className="p-8 text-center text-gray-400">No files uploaded yet.</div>
          ) : (
            <ul className="divide-y divide-gray-700">
              {files.map(file => (
                <li key={file.id} className="p-4 flex items-center justify-between hover:bg-gray-750 transition-colors">
                  <div className="flex items-center overflow-hidden">
                    <div className="p-3 bg-gray-700 rounded-lg mr-4">
                      <FiFile className="text-blue-400" size={24} />
                    </div>
                    <div>
                      <a 
                        href={getFileUrl(file.file_path)} 
                        target="_blank" 
                        rel="noopener noreferrer"
                        className="text-white font-medium hover:underline truncate block"
                      >
                        {file.filename}
                      </a>
                      <p className="text-xs text-gray-500 mt-1">
                        Uploaded by {file.uploader_name} on {new Date(file.created_at).toLocaleDateString()}
                      </p>
                    </div>
                  </div>
                  
                  <div className="flex items-center space-x-2">
                    <a 
                      href={getFileUrl(file.file_path)} 
                      download
                      target="_blank"
                      rel="noopener noreferrer"
                      className="p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-full"
                      title="Download"
                    >
                      <FiDownload size={18} />
                    </a>
                    {canEdit && (
                      <button 
                        onClick={() => handleDelete(file.id)}
                        className="p-2 text-gray-400 hover:text-red-500 hover:bg-gray-700 rounded-full"
                        title="Delete"
                      >
                        <FiTrash2 size={18} />
                      </button>
                    )}
                  </div>
                </li>
              ))}
            </ul>
          )}
        </div>
      </div>

      {/* 2. BÃ–LÃœM: UZUN AÃ‡IKLAMA (README) */}
      {/* Sadece doluysa gÃ¶ster */}
      {currentProject?.long_description && (
        <div className="bg-gray-800 rounded-lg p-6 border border-gray-700">
          <h3 className="text-xl font-bold text-white mb-4 flex items-center border-b border-gray-700 pb-2">
            <FiFileText className="mr-2 text-gray-400" />
            Project Readme / Details
          </h3>
          <div className="text-gray-300 text-sm whitespace-pre-wrap leading-relaxed">
            {/* 'whitespace-pre-wrap': SatÄ±r sonlarÄ±nÄ± ve boÅŸluklarÄ± korur */}
            {currentProject.long_description}
          </div>
        </div>
      )}
    </div>
  );
}


================================================
FILE: frontend/src/components/projects/ProjectIssues.js
================================================
// src/components/projects/ProjectIssues.js

import React, { useState, useEffect } from 'react';
import { useProjectContext } from '../../context/ProjectContext';
import { useAuth } from '../../context/AuthContext';
import { FiLoader, FiPlus, FiSearch } from 'react-icons/fi'; // Search ikonu eklendi
import IssueItem from './IssueItem'; 

function ProjectIssues() {
  const [issues, setIssues] = useState([]);
  const [newIssueText, setNewIssueText] = useState('');
  
  // === YENÄ° STATE: Arama Kelimesi ===
  const [searchTerm, setSearchTerm] = useState('');
  
  const { currentProject, fetchIssues, createIssue, loading } = useProjectContext();
  const { user } = useAuth(); 

  const projectId = currentProject?.id; 
  const userRole = currentProject?.currentUserRole;

  // Issue'larÄ± Ã§ek
  useEffect(() => {
    const loadIssues = async () => {
      try {
        const fetchedIssues = await fetchIssues(projectId);
        setIssues(fetchedIssues || []);
      } catch (error) {
        console.error("Failed to fetch issues:", error);
      }
    };
    if (projectId) loadIssues();
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [projectId]); 

  // Issue Ekle
  const handleSubmit = async (e) => {
    e.preventDefault();
    if (!newIssueText.trim()) return; 
    try {
      const newIssue = await createIssue(projectId, newIssueText);
      // Yeni ekleneni listeye (baÅŸa) ekle
      setIssues([newIssue, ...issues]); 
      setNewIssueText(''); 
    } catch (error) {
      console.error("Failed to create issue:", error);
    }
  };

  const handleIssueUpdate = (updatedIssue) => {
    setIssues(prevIssues => 
      prevIssues.map(issue => 
        issue.id === updatedIssue.id ? updatedIssue : issue
      )
    );
  };

  // === FÄ°LTRELEME MANTIÄžI ===
  // Arama kutusuna yazÄ±lan kelimeye gÃ¶re issue'larÄ± filtrele
  const filteredIssues = issues.filter(issue => 
    issue.text.toLowerCase().includes(searchTerm.toLowerCase())
  );

  return (
    <div className="bg-gray-800 p-4 rounded-lg shadow-lg">
      <div className="flex justify-between items-center mb-4">
        <h3 className="text-xl font-semibold text-white">Project Issues</h3>
        <span className="text-xs bg-gray-700 text-gray-300 px-2 py-1 rounded-full">
          {issues.length} Total
        </span>
      </div>
      
      {/* === YENÄ°: ARAMA KUTUSU === */}
      <div className="relative mb-6">
        <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
          <FiSearch className="text-gray-500" />
        </div>
        <input 
          type="text"
          placeholder="Search issues..."
          value={searchTerm}
          onChange={(e) => setSearchTerm(e.target.value)}
          className="w-full bg-gray-900 text-gray-200 border border-gray-700 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block pl-10 p-2.5 placeholder-gray-500 transition-colors"
        />
      </div>

      {/* Issue Ekleme Formu */}
      {(userRole === 'owner' || userRole === 'editor') && (
        <form onSubmit={handleSubmit} className="flex mb-4">
          <input 
            type="text"
            value={newIssueText}
            onChange={(e) => setNewIssueText(e.target.value)}
            className="flex-grow py-2 px-3 text-gray-200 bg-gray-700 border border-gray-600 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            placeholder="New issue title..."
          />
          <button 
            type="submit" 
            disabled={loading}
            className="flex items-center bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-3 rounded-r-lg transition-colors disabled:opacity-50"
          >
            {loading ? <FiLoader className="animate-spin" /> : <FiPlus />}
          </button>
        </form>
      )}

      {/* Issue Listesi (FiltrelenmiÅŸ listeyi kullanÄ±yoruz) */}
      <div className="space-y-3">
        {loading && issues.length === 0 ? (
          <p className="text-gray-400 text-center py-4">Loading issues...</p>
        ) : issues.length === 0 ? (
          <p className="text-gray-400 text-center py-4">No issues found for this project.</p>
        ) : filteredIssues.length === 0 ? (
          // Arama sonucu boÅŸsa
          <p className="text-gray-400 text-center py-4">No issues match your search.</p>
        ) : (
          filteredIssues.map(issue => (
            <IssueItem 
              key={issue.id} 
              issue={issue} 
              projectId={projectId} 
              onIssueUpdated={handleIssueUpdate} 
            />
          ))
        )}
      </div>
    </div>
  );
}

export default ProjectIssues;


================================================
FILE: frontend/src/components/projects/ProjectList.js
================================================
// src/components/projects/ProjectList.js

import React from 'react';
import { Link } from 'react-router-dom';
import { FiLoader, FiArrowRight } from 'react-icons/fi'; // Ä°konlar

// 1. Component artÄ±k 'projects', 'loading', 'title' gibi verileri
//    prop (parametre) olarak dÄ±ÅŸarÄ±dan alÄ±r.
function ProjectList({ title, projects, loading, viewAllLink }) {

  // 2. YÃ¼kleniyorsa (Loading)
  if (loading) {
    return (
      <div className="bg-gray-800 p-6 rounded-lg flex justify-center items-center">
        <FiLoader className="animate-spin text-blue-500" size={30} />
      </div>
    );
  }

  // 3. YÃ¼kleme bitti ve proje yoksa (Empty State)
  if (projects.length === 0) {
    return (
      <div className="bg-gray-800 p-6 rounded-lg">
        <h2 className="text-xl font-semibold text-white mb-2">{title}</h2>
        <p className="text-gray-400">HenÃ¼z bu kategoriye ait bir projeniz yok.</p>
        <p className="text-gray-500 text-sm mt-4">
          BaÅŸlamak iÃ§in "Create New Project" butonunu kullanÄ±n.
        </p>
      </div>
    );
  }

  // 4. YÃ¼kleme bitti ve projeler varsa (Project List)
  return (
    <div className="bg-gray-800 p-6 rounded-lg">
      {/* BaÅŸlÄ±k ve 'View All' Linki */}
      <div className="flex justify-between items-center mb-4">
        <h2 className="text-xl font-semibold text-white">{title}</h2>
        {viewAllLink && (
          <Link to={viewAllLink} className="text-sm text-blue-400 hover:text-blue-300 flex items-center">
            View All
            <FiArrowRight className="ml-1" size={14} />
          </Link>
        )}
      </div>

      {/* Proje KartlarÄ± */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {projects.map(project => (
          <Link 
            to={`/project/${project.id}`} // Proje detay sayfasÄ±na yÃ¶nlendir
            key={project.id} 
            className="block bg-gray-700 p-4 rounded-lg shadow hover:bg-gray-600 transition-colors"
          >
            <h3 className="font-bold text-lg text-white mb-1">{project.name}</h3>
            <p className="text-gray-400 text-sm truncate">{project.description}</p>
            <span className="text-xs text-gray-500 mt-2 block">
              Last updated: {new Date(project.last_updated_at).toLocaleDateString()}
            </span>
          </Link>
        ))}
      </div>
    </div>
  );
}

export default ProjectList;


================================================
FILE: frontend/src/components/projects/ProjectTasks.js
================================================
// src/components/projects/ProjectTasks.js

import React, { useState, useEffect, useRef } from 'react';
import { useProjectContext } from '../../context/ProjectContext';
import api from '../../services/api'; // <--- BU SATIR EKLENDÄ° (Ã–NEMLÄ°)
import { 
  FiPlus, FiCheckCircle, FiLoader, FiClock, FiLock, 
  FiMoreVertical, FiEdit, FiTrash2, FiSave, FiX, FiUser 
} from 'react-icons/fi';

export default function ProjectTasks() {
  // Context'ten sadece create ve delete fonksiyonlarÄ±nÄ± alÄ±yoruz
  const { currentProject, fetchTasks, createTask, deleteTask, updateTask } = useProjectContext();
  
  const [tasks, setTasks] = useState([]);
  const [loading, setLoading] = useState(true);
  const [accessDenied, setAccessDenied] = useState(false);
  const [newTaskTitle, setNewTaskTitle] = useState('');
  
  const projectId = currentProject?.id;
  const userRole = currentProject?.currentUserRole;
  const canEdit = userRole !== 'public_viewer'; 

  // GÃ¶revleri YÃ¼kle
  useEffect(() => {
    if (projectId) {
      setLoading(true);
      fetchTasks(projectId).then(data => {
        if (data === null) {
          setAccessDenied(true); 
        } else {
          setTasks(data);
          setAccessDenied(false);
        }
        setLoading(false);
      });
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [projectId]);

  // Yeni GÃ¶rev Ekle
  const handleAddTask = async (e) => {
    e.preventDefault();
    if (!newTaskTitle.trim()) return;
    
    try {
      const newTask = await createTask(projectId, { 
        title: newTaskTitle, 
        status: 'todo',
        due_date: new Date().toISOString() 
      });
      
      if (newTask) {
        setTasks([...tasks, newTask]);
        setNewTaskTitle('');
      }
    } catch (error) {
      console.error("Failed to create task:", error);
    }
  };

  // === DÃœZELTME BURADA: GÃ¶rev TaÅŸÄ±ma ve API Ä°steÄŸi ===
 const moveTask = async (task, newStatus) => {
    // 1. DIAGNOSTIC: Check if Token exists in Browser Storage
    const savedToken = localStorage.getItem('token');
    
    if (!savedToken) {
      alert("CRITICAL ERROR: You are NOT logged in!\n\nReason: 'token' is missing from localStorage.\n\nSolution: Please Log Out and Log In again.");
      console.error("Local Storage is empty!", localStorage);
      return; 
    }

    // 2. Optimistic Update
    const previousTasks = [...tasks];
    const updatedList = tasks.map(t => t.id === task.id ? { ...t, status: newStatus } : t);
    setTasks(updatedList);

    // 3. Send Request
    try {
        console.log(`ðŸ“¡ Sending Request with Token: ${savedToken.substring(0, 10)}...`);
        
        await api.put(`/api/projects/${projectId}/tasks/${task.id}`, {
            status: newStatus
        });

        console.log("âœ… Success!");

    } catch (error) {
      console.error("âŒ Error:", error);
      setTasks(previousTasks); // Rollback

      if (error.response && error.response.status === 401) {
         alert("ERROR 401: The token exists but is invalid or expired.\n\nPlease Log Out and Log In again.");
      } else if (error.response) {
         alert(`SERVER ERROR (${error.response.status}): ${JSON.stringify(error.response.data)}`);
      } else {
         alert(`ERROR: ${error.message}`);
      }
    }
  };

  // GÃ¶rev Silme
  const handleDeleteTask = async (taskId) => {
    if (window.confirm("Are you sure you want to delete this task?")) {
      try {
        await deleteTask(projectId, taskId); 
        setTasks(tasks.filter(t => t.id !== taskId));
      } catch (error) {
        console.error("Failed to delete task:", error);
      }
    }
  };

  // GÃ¶rev BaÅŸlÄ±ÄŸÄ± GÃ¼ncelleme
  const handleUpdateTaskTitle = async (taskId, newTitle) => {
    try {
      const updatedTask = await updateTask(projectId, taskId, { title: newTitle });
      setTasks(tasks.map(t => t.id === taskId ? updatedTask : t));
    } catch (error) {
      console.error("Failed to update task:", error);
    }
  };

  // === DRAG AND DROP HANDLERS ===
  const handleDragStart = (e, taskId) => {
    e.dataTransfer.setData("taskId", taskId);
  };

  const handleDragOver = (e) => {
    e.preventDefault(); // Allow drop
  };

  const handleDrop = (e, newStatus) => {
    e.preventDefault();
    const taskId = e.dataTransfer.getData("taskId");
    const task = tasks.find(t => t.id === Number(taskId) || t.id === taskId); // ID tip dÃ¶nÃ¼ÅŸÃ¼mÃ¼ kontrolÃ¼
    
    if (task && task.status !== newStatus) {
      moveTask(task, newStatus);
    }
  };

  // === Ä°LERLEME DURUMU HESAPLA ===
  const totalTasks = tasks.length;
  const doneCount = tasks.filter(t => t.status === 'done').length;
  const inProgressCount = tasks.filter(t => t.status === 'in_progress').length;
  const weightedScore = doneCount + (inProgressCount * 0.5);
  const progressPercentage = totalTasks === 0 ? 0 : Math.round((weightedScore / totalTasks) * 100);

  if (loading) return <div className="p-10 flex justify-center"><FiLoader className="animate-spin text-blue-500" size={30}/></div>;

  if (accessDenied) {
    return (
      <div className="flex flex-col items-center justify-center p-10 bg-gray-800 rounded-lg border border-gray-700">
        <FiLock size={40} className="text-red-500 mb-4" />
        <h3 className="text-xl font-bold text-white">Tasks are Private</h3>
        <p className="text-gray-400 mt-2">Only project members can see the task board.</p>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      
      {/* 1. PROGRESS BAR */}
      <div className="bg-gray-800 p-4 rounded-lg border border-gray-700">
        <div className="flex justify-between items-center mb-2">
          <h3 className="text-white font-semibold flex items-center">
            <FiCheckCircle className="mr-2 text-purple-400" /> Project Progress
          </h3>
          <span className="text-blue-400 font-bold">{progressPercentage}% Completed</span>
        </div>
        <div className="w-full bg-gray-700 rounded-full h-2.5">
          <div 
            className="bg-gradient-to-r from-blue-600 to-purple-400 h-2.5 rounded-full transition-all duration-500" 
            style={{ width: `${progressPercentage}%` }}
          ></div>
        </div>
      </div>

      {/* 2. GÃ–REV EKLEME FORMU */}
      {canEdit && (
        <form onSubmit={handleAddTask} className="flex gap-2">
          <input 
            type="text" 
            value={newTaskTitle}
            onChange={(e) => setNewTaskTitle(e.target.value)}
            className="flex-grow bg-gray-800 text-white border border-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 outline-none"
            placeholder="Add a new task..."
          />
          <button type="submit" className="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-semibold flex items-center">
            <FiPlus className="mr-2" /> Add Task
          </button>
        </form>
      )}

      {/* 3. KANBAN BOARD */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-6 h-[600px]">
        <KanbanColumn 
          title="To Do" 
          status="todo" 
          tasks={tasks} 
          borderColor="border-indigo-500"
          badgeColor="bg-indigo-500/20 text-indigo-300"
          canEdit={canEdit}
          onMove={moveTask}
          onDelete={handleDeleteTask}
          onUpdate={handleUpdateTaskTitle}
          onDragOver={handleDragOver}
          onDrop={handleDrop}
          onDragStart={handleDragStart}
        />
        <KanbanColumn 
          title="In Progress" 
          status="in_progress" 
          tasks={tasks} 
          borderColor="border-blue-500" 
          badgeColor="bg-blue-500/20 text-blue-300"
          canEdit={canEdit}
          onMove={moveTask}
          onDelete={handleDeleteTask}
          onUpdate={handleUpdateTaskTitle}
          onDragOver={handleDragOver}
          onDrop={handleDrop}
          onDragStart={handleDragStart}
        />
        <KanbanColumn 
          title="Done" 
          status="done" 
          tasks={tasks} 
          borderColor="border-purple-500" 
          badgeColor="bg-purple-500/20 text-purple-300"
          canEdit={canEdit}
          onMove={moveTask}
          onDelete={handleDeleteTask}
          onUpdate={handleUpdateTaskTitle}
          onDragOver={handleDragOver}
          onDrop={handleDrop}
          onDragStart={handleDragStart}
        />
      </div>
    </div>
  );
}

// Kanban Kolonu ve TaskItem bileÅŸenleri aynÄ± kalacak...
// Sadece TaskItem iÃ§inde Draggable Ã¶zelliÄŸi iÃ§in onDragStart prop'unu doÄŸru geÃ§irdiÄŸimizden emin oluyoruz.

function KanbanColumn({ title, status, tasks, borderColor, badgeColor, canEdit, onMove, onDelete, onUpdate, onDragOver, onDrop, onDragStart }) {
  const columnTasks = tasks.filter(t => t.status === status);

  return (
    <div 
      className={`bg-gray-800 rounded-xl border-t-4 ${borderColor} p-4 flex flex-col h-full shadow-lg`}
      onDragOver={onDragOver}
      onDrop={(e) => onDrop(e, status)}
    >
      <h4 className="text-white font-bold mb-4 flex justify-between items-center">
        {title} 
        <span className={`px-2 py-0.5 rounded-full text-xs font-semibold ${badgeColor}`}>
          {columnTasks.length}
        </span>
      </h4>
      
      <div className="flex-1 overflow-y-auto space-y-3 custom-scrollbar pr-1 pb-10">
        {columnTasks.map(task => (
          <TaskItem 
            key={task.id} 
            task={task} 
            canEdit={canEdit} 
            status={status}
            onMove={onMove}
            onDelete={onDelete}
            onUpdate={onUpdate}
            onDragStart={onDragStart}
          />
        ))}
      </div>
    </div>
  );
}

function TaskItem({ task, canEdit, status, onMove, onDelete, onUpdate, onDragStart }) {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [isEditing, setIsEditing] = useState(false);
  const [editTitle, setEditTitle] = useState(task.title);
  const menuRef = useRef(null);

  useEffect(() => {
    function handleClickOutside(event) {
      if (menuRef.current && !menuRef.current.contains(event.target)) {
        setIsMenuOpen(false);
      }
    }
    document.addEventListener("mousedown", handleClickOutside);
    return () => document.removeEventListener("mousedown", handleClickOutside);
  }, []);

  const handleSaveEdit = () => {
    if (editTitle.trim() && editTitle !== task.title) {
      onUpdate(task.id, editTitle);
    }
    setIsEditing(false);
  };

  return (
    <div 
      className={`bg-gray-700/50 p-3 rounded-lg border border-gray-600 hover:border-gray-500 hover:bg-gray-700 transition-all group relative ${canEdit ? 'cursor-move' : ''}`}
      draggable={canEdit}
      onDragStart={(e) => canEdit && onDragStart(e, task.id)}
    >
      
      {/* DÃ¼zenleme Modu */}
      {isEditing ? (
        <div className="flex flex-col gap-2">
          <input 
            type="text" 
            value={editTitle} 
            onChange={(e) => setEditTitle(e.target.value)}
            className="w-full bg-gray-800 text-white text-sm p-1 rounded border border-blue-500 focus:outline-none"
            autoFocus
          />
          <div className="flex justify-end gap-2">
            <button onClick={() => setIsEditing(false)} className="text-red-400 hover:text-red-300"><FiX size={16}/></button>
            <button onClick={handleSaveEdit} className="text-green-400 hover:text-green-300"><FiSave size={16}/></button>
          </div>
        </div>
      ) : (
        <>
          <div className="flex justify-between items-start">
            <p className="text-white text-sm font-medium mb-2 break-words flex-1 pr-6">{task.title}</p>
            
            {/* 3 Nokta MenÃ¼ */}
            {canEdit && (
              <div className="relative" ref={menuRef}>
                <button 
                  onClick={() => setIsMenuOpen(!isMenuOpen)} 
                  className="text-gray-400 hover:text-white p-1 rounded-full hover:bg-gray-600 transition-colors"
                >
                  <FiMoreVertical size={16} />
                </button>

                {isMenuOpen && (
                  <div className="absolute right-0 top-6 w-32 bg-gray-800 border border-gray-600 rounded-md shadow-xl z-10 overflow-hidden">
                    <button 
                      onClick={() => { setIsEditing(true); setIsMenuOpen(false); }}
                      className="w-full text-left px-3 py-2 text-xs text-gray-300 hover:bg-gray-700 flex items-center"
                    >
                      <FiEdit className="mr-2" /> Edit
                    </button>
                    <button 
                      onClick={() => { onDelete(task.id); setIsMenuOpen(false); }}
                      className="w-full text-left px-3 py-2 text-xs text-red-400 hover:bg-gray-700 flex items-center"
                    >
                      <FiTrash2 className="mr-2" /> Delete
                    </button>
                  </div>
                )}
              </div>
            )}
          </div>
          
          <div className="flex flex-col gap-1 mt-2">
             <div className="flex items-center text-xs text-gray-400">
               <FiUser className="mr-1.5 w-3 h-3" />
               <span>Created by: <span className="text-gray-300">{task.created_by_name || 'Unknown'}</span></span>
             </div>
             
             <div className="flex items-center text-xs text-gray-500">
                <FiClock className="mr-1.5 w-3 h-3"/> 
                {new Date(task.created_at).toLocaleDateString()}
             </div>
          </div>

          {/* Hareket ButonlarÄ± */}
          {canEdit && (
            <div className="mt-3 pt-2 border-t border-gray-600/50 flex justify-end space-x-2 opacity-0 group-hover:opacity-100 transition-opacity">
              {status !== 'todo' && (
                <button onClick={() => onMove(task, 'todo')} className="text-xs bg-gray-600 hover:bg-indigo-600 text-white px-2 py-1 rounded transition-colors">To Do</button>
              )}
              {status !== 'in_progress' && (
                <button onClick={() => onMove(task, 'in_progress')} className="text-xs bg-gray-600 hover:bg-blue-600 text-white px-2 py-1 rounded transition-colors">Progress</button>
              )}
              {status !== 'done' && (
                <button onClick={() => onMove(task, 'done')} className="text-xs bg-gray-600 hover:bg-purple-600 text-white px-2 py-1 rounded transition-colors">Done</button>
              )}
            </div>
          )}
        </>
      )}
    </div>
  );
}


================================================
FILE: frontend/src/components/projects/SharedProjectCard.js
================================================
// src/components/projects/SharedProjectCard.js

import React from 'react';
import { Link } from 'react-router-dom';
import { FiUser, FiCalendar, FiShare2, FiGlobe } from 'react-icons/fi'; 

// Tarih formatlama helper fonksiyonu
const formatDate = (dateString) => {
  if (!dateString) return 'N/A';
  return new Date(dateString).toLocaleDateString('en-US', {
    day: 'numeric',
    month: 'short',
    year: 'numeric'
  });
};

function SharedProjectCard({ project, viewMode = 'grid' }) {
  
  if (!project) {
    return null;
  }

  const ownerName = project.owner_name || 'Unknown';
  const createdDate = project.created_at; 
  const sharedDate = project.joined_at; // Public projeler iÃ§in null'dÄ±r

  // === LISTE GÃ–RÃœNÃœMÃœ (Tarihler Eklendi) ===
  if (viewMode === 'list') {
    return (
      <Link to={`/project/${project.id}`} className="block">
        <div className="bg-gray-800 p-4 rounded-lg border border-gray-700 hover:border-purple-500 transition-all flex flex-col md:flex-row md:items-center justify-between group gap-4">
          
          {/* Sol KÄ±sÄ±m: BaÅŸlÄ±k ve Bilgiler */}
          <div className="flex-1 min-w-0">
            <div className="flex items-center mb-2">
               <h3 className="text-lg font-bold text-white group-hover:text-purple-400 transition-colors truncate mr-3">
                {project.name}
              </h3>
            </div>
            
            {/* Bilgi SatÄ±rÄ± (Owner, Created, Shared) */}
            <div className="flex flex-wrap items-center text-xs text-gray-400 gap-x-6 gap-y-2">
               
               {/* 1. Sahip */}
               <span className="flex items-center" title="Project Owner">
                 <FiUser className="mr-1.5 w-3 h-3 text-gray-500" />
                 <span className="font-semibold text-gray-300">{ownerName}</span>
               </span>

               {/* 2. OluÅŸturulma Tarihi (BURASI EKLENDÄ°) */}
               <span className="flex items-center" title="Created Date">
                 <FiCalendar className="mr-1.5 w-3 h-3 text-gray-500" />
                 Created: {formatDate(createdDate)}
               </span>

               {/* 3. PaylaÅŸÄ±lma Durumu */}
               {sharedDate ? (
                 <span className="flex items-center" title="Shared Date">
                   <FiShare2 className="mr-1.5 w-3 h-3 text-gray-500" />
                   Shared: {formatDate(sharedDate)}
                 </span>
               ) : (
                 <span className="flex items-center text-green-400 font-medium">
                   <FiGlobe className="mr-1.5 w-3 h-3" />
                   Public Project
                 </span>
               )}
            </div>
          </div>
          
          {/* SaÄŸ KÄ±sÄ±m: AÃ§Ä±klama (MasaÃ¼stÃ¼nde gÃ¶rÃ¼nÃ¼r) */}
          <div className="flex-shrink-0 text-gray-500 text-sm max-w-md truncate hidden md:block">
            {project.description}
          </div>

        </div>
      </Link>
    );
  }

  // === GRID GÃ–RÃœNÃœMÃœ (VarsayÄ±lan) ===
  return (
    <Link to={`/project/${project.id}`} className="block h-full">
      <div className="bg-gray-800 p-6 rounded-lg shadow-md hover:shadow-xl hover:border-blue-500 border-2 border-transparent transition-all duration-300 h-full flex flex-col justify-between">
        
        {/* Ãœst KÄ±sÄ±m */}
        <div>
          <h3 className="text-xl font-bold text-white mb-2 truncate" title={project.name}>
            {project.name}
          </h3>
          <p className="text-gray-400 text-sm line-clamp-2">
            {project.description}
          </p>
        </div>
        
        {/* Alt KÄ±sÄ±m */}
        <div>
          <div className="border-t border-gray-700 my-4"></div>
          
          <div className="space-y-2">
            {/* 1. Sahip */}
            <div className="flex items-center">
              <FiUser className="w-4 h-4 text-gray-500 mr-2 flex-shrink-0" />
              <span className="text-xs text-gray-400 truncate">
                Owner: <span className="font-semibold text-gray-300">{ownerName}</span>
              </span>
            </div>

            {/* 2. OluÅŸturulma Tarihi */}
            <div className="flex items-center">
              <FiCalendar className="w-4 h-4 text-gray-500 mr-2 flex-shrink-0" />
              <span className="text-xs text-gray-400">
                Created: {formatDate(createdDate)}
              </span>
            </div>

             {/* 3. PaylaÅŸÄ±lma Durumu */}
             <div className="flex items-center">
              {sharedDate ? (
                <>
                  <FiShare2 className="w-4 h-4 text-gray-500 mr-2 flex-shrink-0" />
                  <span className="text-xs text-gray-400">
                    Shared: {formatDate(sharedDate)}
                  </span>
                </>
              ) : (
                <>
                  <FiGlobe className="w-4 h-4 text-green-500 mr-2 flex-shrink-0" />
                  <span className="text-xs font-semibold text-green-400">
                    Public Project
                  </span>
                </>
              )}
            </div>
          </div>

        </div>
      </div>
    </Link>
  );
}

export default SharedProjectCard;


================================================
FILE: frontend/src/context/AuthContext.js
================================================
[Binary file]


================================================
FILE: frontend/src/context/ProjectContext.js
================================================
import React, { createContext, useState, useContext } from 'react';
import axios from 'axios';
import { useAuth } from './AuthContext';

// Backend adresi
const API_URL = 'http://localhost:5000/api/projects';

export const ProjectContext = createContext();
export const useProjectContext = () => useContext(ProjectContext);

export const ProjectProvider = ({ children }) => {
  const [projects, setProjects] = useState([]);
  const [currentProject, setCurrentProject] = useState(null);
  const [myProjects, setMyProjects] = useState([]);
  const [sharedProjects, setSharedProjects] = useState([]);
  const [currentMembers, setCurrentMembers] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [dashboardTasks, setDashboardTasks] = useState([]);
  
  // Token'Ä± AuthContext'ten alÄ±yoruz
  const { token, logout } = useAuth();

  // --- ESKÄ° USUL: HEADER'I ELLE EKLEME ---
  const getAuthHeaders = () => {
    const storedToken = localStorage.getItem('token'); // Token'Ä± direkt depodan alalÄ±m, daha garanti.
    if (!storedToken) return {}; 
    return { 
        headers: { 
            'x-auth-token': storedToken // Backend x-auth-token bekliyor
        } 
    };
  };

  const handleError = (err) => {
    const message = err.response?.data?.message || 'Bir hata oluÅŸtu.';
    setError(message);
    if (err.response?.status === 401) {
        logout();
    }
  };
  
  // --- PROJE FONKSÄ°YONLARI ---

  const fetchProjects = async () => {
    setLoading(true);
    try {
      const response = await axios.get(API_URL, getAuthHeaders());
      setProjects(response.data);
    } catch (err) { handleError(err); } 
    finally { setLoading(false); }
  };

  const fetchMyProjects = async () => {
    setLoading(true);
    try {
      const response = await axios.get(`${API_URL}/my-projects`, getAuthHeaders());
      setMyProjects(response.data); 
    } catch (err) { handleError(err); } 
    finally { setLoading(false); }
  };

  const fetchSharedProjects = async () => {
    setLoading(true);
    try {
      const response = await axios.get(`${API_URL}/shared-projects`, getAuthHeaders());
      setSharedProjects(response.data);
    } catch (err) { handleError(err); } 
    finally { setLoading(false); }
  };

  const createProject = async (name, description) => {
    setLoading(true);
    try {
      const response = await axios.post(API_URL, { name, description }, getAuthHeaders());
      setProjects(prev => [response.data, ...prev]);
      setMyProjects(prev => [response.data, ...prev]);
      return response.data;
    } catch (err) { handleError(err); throw err; } 
    finally { setLoading(false); }
  };

  const fetchProjectById = async (projectId) => {
    setLoading(true);
    try {
      const response = await axios.get(`${API_URL}/${projectId}`, getAuthHeaders());
      setCurrentProject(response.data);
    } catch (err) { handleError(err); } 
    finally { setLoading(false); }
  };

  const updateProjectVisibility = async (projectId, isPublic) => {
    try {
      const response = await axios.put(`${API_URL}/${projectId}/visibility`, { is_public: isPublic }, getAuthHeaders());
      setCurrentProject(response.data);
      return response.data; 
    } catch (err) { handleError(err); throw err; }
  };

  // --- TASK FONKSÄ°YONLARI ---

  const fetchDashboardTasks = async () => {
    setLoading(true);
    try {
      const response = await axios.get(`${API_URL}/user/all-tasks`, getAuthHeaders());
      setDashboardTasks(response.data);
    } catch (err) { handleError(err); } 
    finally { setLoading(false); }
  };

  const fetchTasks = async (projectId) => {
    try {
      const response = await axios.get(`${API_URL}/${projectId}/tasks`, getAuthHeaders());
      return response.data;
    } catch (err) { if(err.response?.status !== 403) handleError(err); }
  };

  const createTask = async (projectId, taskData) => {
    try {
      const response = await axios.post(`${API_URL}/${projectId}/tasks`, taskData, getAuthHeaders());
      return response.data;
    } catch (err) { handleError(err); }
  };

  const updateTaskStatus = async (projectId, taskId, newStatus) => {
    try {
      const response = await axios.put(`${API_URL}/${projectId}/tasks/${taskId}`, { status: newStatus }, getAuthHeaders());
      return response.data;
    } catch (err) { handleError(err); }
  };

  const updateTask = async (projectId, taskId, data) => {
    try {
      const response = await axios.put(`${API_URL}/${projectId}/tasks/${taskId}`, data, getAuthHeaders());
      return response.data;
    } catch (err) { handleError(err); throw err; }
  };

  const deleteTask = async (projectId, taskId) => {
    try {
      await axios.delete(`${API_URL}/${projectId}/tasks/${taskId}`, getAuthHeaders());
      return true;
    } catch (err) { handleError(err); throw err; }
  };

  // --- DÄ°ÄžER (Members, Files, Issues vs.) ---

  const fetchMembers = async (projectId) => {
    try {
        const response = await axios.get(`${API_URL}/${projectId}/members`, getAuthHeaders());
        setCurrentMembers(response.data);
        return response.data;
    } catch (err) { handleError(err); }
  };

  const addMember = async (projectId, username, role) => {
    try {
        const response = await axios.post(`${API_URL}/${projectId}/members`, { username, role }, getAuthHeaders());
        setCurrentMembers(prev => [...prev, response.data]);
        return response.data;
    } catch (err) { handleError(err); throw err; }
  };

  const removeMember = async (projectId, userId) => {
    try {
        await axios.delete(`${API_URL}/${projectId}/members/${userId}`, getAuthHeaders());
        setCurrentMembers(prev => prev.filter(m => m.id !== userId));
        return true;
    } catch (err) { handleError(err); throw err; }
  };

  const updateProjectDetails = async (projectId, name, description, longDescription) => {
    try {
        const response = await axios.put(`${API_URL}/${projectId}`, { name, description, long_description: longDescription }, getAuthHeaders());
        setCurrentProject(response.data);
        return response.data;
    } catch (err) { handleError(err); throw err; }
  };

  const updateTasksVisibility = async (projectId, isPublic) => {
    try {
        const response = await axios.put(`${API_URL}/${projectId}/settings/tasks-visibility`, { is_tasks_public: isPublic }, getAuthHeaders());
        setCurrentProject(prev => ({...prev, is_tasks_public: response.data.is_tasks_public}));
    } catch (err) { handleError(err); }
  };

  const fetchIssues = async (projectId) => {
    try { return (await axios.get(`${API_URL}/${projectId}/issues`, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const createIssue = async (projectId, text) => {
    try { return (await axios.post(`${API_URL}/${projectId}/issues`, {text}, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const updateIssue = async (projectId, issueId, data) => {
    try { return (await axios.put(`${API_URL}/${projectId}/issues/${issueId}`, data, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const fetchComments = async (projectId) => {
    try { return (await axios.get(`${API_URL}/${projectId}/comments`, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const addComment = async (projectId, text) => {
    try { return (await axios.post(`${API_URL}/${projectId}/comments`, {text}, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const likeComment = async (projectId, commentId) => {
    try { return (await axios.post(`${API_URL}/${projectId}/comments/${commentId}/like`, {}, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const deleteComment = async (projectId, commentId) => {
    try { await axios.delete(`${API_URL}/${projectId}/comments/${commentId}`, getAuthHeaders()); return true; } catch (e) { handleError(e); }
  };
  const editComment = async (projectId, commentId, text) => {
    try { return (await axios.put(`${API_URL}/${projectId}/comments/${commentId}`, {text}, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const fetchIssueComments = async (projectId, issueId) => {
    try { return (await axios.get(`${API_URL}/${projectId}/issues/${issueId}/comments`, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const addIssueComment = async (projectId, issueId, text) => {
    try { return (await axios.post(`${API_URL}/${projectId}/issues/${issueId}/comments`, {text}, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const fetchFiles = async (projectId) => {
    try { return (await axios.get(`${API_URL}/${projectId}/files`, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const uploadFile = async (projectId, file) => {
    try { 
        const fd = new FormData(); fd.append('file', file);
        return (await axios.post(`${API_URL}/${projectId}/files`, fd, { headers: { ...getAuthHeaders().headers, 'Content-Type': 'multipart/form-data'} })).data; 
    } catch (e) { handleError(e); }
  };
  const deleteFile = async (projectId, fileId) => {
    try { await axios.delete(`${API_URL}/${projectId}/files/${fileId}`, getAuthHeaders()); return true; } catch (e) { handleError(e); }
  };

  const value = {
    projects, currentProject, myProjects, sharedProjects, loading, error, dashboardTasks, currentMembers,
    fetchProjects, fetchMyProjects, fetchSharedProjects, createProject, fetchProjectById, updateProjectVisibility,
    fetchDashboardTasks, fetchTasks, createTask, updateTaskStatus, updateTask, deleteTask,
    fetchMembers, addMember, removeMember, updateProjectDetails, updateTasksVisibility,
    fetchIssues, createIssue, updateIssue, fetchComments, addComment, likeComment, deleteComment, editComment,
    fetchIssueComments, addIssueComment, fetchFiles, uploadFile, deleteFile
  };

  return (
    <ProjectContext.Provider value={value}>{children}</ProjectContext.Provider>
  );
};


================================================
FILE: frontend/src/context/ThemeContext.js
================================================
// src/context/ThemeContext.js

import React, { createContext, useState, useEffect, useContext } from 'react';

const ThemeContext = createContext();

export const useTheme = () => useContext(ThemeContext);

export const ThemeProvider = ({ children }) => {
  // VarsayÄ±lan olarak localStorage'a bak, yoksa 'dark' yap
  const [theme, setTheme] = useState(() => {
    return localStorage.getItem('theme') || 'dark';
  });

  // Tema deÄŸiÅŸtiÄŸinde HTML etiketini gÃ¼ncelle
  useEffect(() => {
    const root = window.document.documentElement;
    
    // Ã–nce eski class'Ä± sil
    root.classList.remove('light', 'dark');
    
    // Yeni class'Ä± ekle
    root.classList.add(theme);
    
    // HafÄ±zaya kaydet
    localStorage.setItem('theme', theme);
  }, [theme]);

  const toggleTheme = (newTheme) => {
    setTheme(newTheme);
  };

  return (
    <ThemeContext.Provider value={{ theme, toggleTheme }}>
      {children}
    </ThemeContext.Provider>
  );
};


================================================
FILE: frontend/src/pages/DashboardLayout.js
================================================
// src/pages/DashboardLayout.js

import React, { useState } from 'react';
import { Outlet } from 'react-router-dom';
import Sidebar from '../components/layout/Sidebar';
import Header from '../components/layout/Header';
import RightSidebar from '../components/layout/RightSidebar';
import { FiChevronsLeft } from 'react-icons/fi';

function DashboardLayout() {
  // Sol Sidebar: VarsayÄ±lan aÃ§Ä±k
  const [isLeftCollapsed, setIsLeftCollapsed] = useState(false);
  
  // SaÄŸ Sidebar: VarsayÄ±lan aÃ§Ä±k
  const [isRightOpen, setIsRightOpen] = useState(false);

  return (
    // 1. ANA KAPSAYICI: flex-col yaparak alt alta dizilim saÄŸladÄ±k (Header Ã¼stte, gÃ¶vde altta)
    <div className="flex h-screen flex-col bg-gray-900 text-gray-100 overflow-hidden font-sans">
      
      {/* 2. HEADER: En tepede, tam geniÅŸlikte */}
      <div className="z-50 shadow-md">
        <Header />
      </div>

      {/* 3. GÃ–VDE KAPSAYICISI: flex-row yaparak Sidebar, Ä°Ã§erik ve SaÄŸ Sidebar'Ä± yan yana dizdik */}
      <div className="flex flex-1 overflow-hidden relative">
        
        {/* SOL SIDEBAR */}
        <Sidebar 
          isCollapsed={isLeftCollapsed} 
          toggleSidebar={() => setIsLeftCollapsed(!isLeftCollapsed)} 
        />

        {/* ORTA Ä°Ã‡ERÄ°K ALANI (MAIN) */}
        <main className="flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-transparent relative">
          <Outlet />

          {/* SAÄž SIDEBAR KAPALIYSA GERÄ° AÃ‡MA BUTONU */}
          {!isRightOpen && (
            <button
              onClick={() => setIsRightOpen(true)}
              className="fixed bottom-6 right-6 z-40 p-3 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-500 transition-all animate-bounce-slow"
              title="Open Right Panel"
            >
              <FiChevronsLeft size={24} />
            </button>
          )}
        </main>

        {/* SAÄž SIDEBAR */}
        <RightSidebar 
          isOpen={isRightOpen} 
          toggleSidebar={() => setIsRightOpen(!isRightOpen)} 
        />
        
      </div>

    </div>
  );
}

export default DashboardLayout;


================================================
FILE: frontend/src/pages/DashboardOverviewPage.js
================================================
// src/pages/DashboardOverviewPage.js

import React, { useEffect } from 'react';
import { useProjectContext } from '../context/ProjectContext';
import { Link } from 'react-router-dom';
import { 
  FiFolder, FiShare2, FiLayers, FiCheckSquare, 
  FiClock, FiArrowRight, FiActivity, FiBriefcase, FiAlertCircle 
} from 'react-icons/fi';

function DashboardOverviewPage() {
  const { 
    myProjects, sharedProjects, 
    dashboardTasks, fetchDashboardTasks, 
    fetchMyProjects, fetchSharedProjects,
    loading 
  } = useProjectContext();

  useEffect(() => {
    // TÃ¼m gerekli verileri Ã§ek
    fetchMyProjects();
    fetchSharedProjects();
    fetchDashboardTasks(); 
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, []);

  // --- FÄ°LTRELEME VE LÄ°MÄ°TLEME MANTIÄžI ---
  // 1. AdÄ±m: TamamlanmÄ±ÅŸ (done) gÃ¶revleri filtrele
  const activeTasks = dashboardTasks ? dashboardTasks.filter(task => task.status !== 'done') : [];

  // 2. AdÄ±m: Sadece ilk 10 tanesini gÃ¶ster
  const visibleTasks = activeTasks.slice(0, 10);

  // 3. AdÄ±m: Gizlenen gÃ¶rev sayÄ±sÄ±nÄ± hesapla
  const hiddenCount = activeTasks.length - visibleTasks.length;

  // Ä°statistik KartlarÄ±
  const stats = [
    {
      title: "My Projects",
      count: myProjects?.length || 0,
      icon: <FiBriefcase size={24} />,
      color: "bg-blue-600",
      desc: "Owned by you"
    },
    {
      title: "Shared With Me",
      count: sharedProjects?.length || 0,
      icon: <FiShare2 size={24} />,
      color: "bg-purple-600",
      desc: "Collaboration"
    },
    {
      title: "Active Tasks",
      count: activeTasks.length, // Toplam aktif gÃ¶rev sayÄ±sÄ± (gizliler dahil)
      icon: <FiCheckSquare size={24} />,
      color: "bg-green-600",
      desc: "Pending items"
    }
  ];

  // GÃ¶rev Durumu iÃ§in Renk ve Ä°kon Helper'Ä±
  const getStatusBadge = (status) => {
    switch (status) {
      case 'done':
        // Filtreleme yapÄ±ldÄ±ÄŸÄ± iÃ§in bu teorik olarak gÃ¶rÃ¼nmeyecek ama kod gÃ¼venliÄŸi iÃ§in kalsÄ±n
        return <span className="px-2 py-1 bg-green-900/30 text-green-400 rounded text-xs font-semibold border border-green-900/50">Done</span>;
      case 'in_progress':
        return <span className="px-2 py-1 bg-blue-900/30 text-blue-400 rounded text-xs font-semibold border border-blue-900/50">In Progress</span>;
      default: // todo
        return <span className="px-2 py-1 bg-gray-700 text-gray-300 rounded text-xs font-semibold border border-gray-600">To Do</span>;
    }
  };

  return (
    <div className="transition-colors duration-300">
      <div className="flex justify-between items-center mb-8">
        <h1 className="text-3xl font-bold text-gray-900 dark:text-white transition-colors duration-300">Dashboard</h1>
      </div>
      
      {/* Ä°STATÄ°STÄ°K KARTLARI */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
        {stats.map((stat, index) => (
          <div key={index} className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 flex items-center transition-all duration-300 hover:shadow-lg">
            <div className={`p-4 rounded-lg ${stat.color} text-white mr-4 shadow-md`}>
              {stat.icon}
            </div>
            <div>
              <p className="text-gray-500 dark:text-gray-400 text-sm font-medium">{stat.title}</p>
              <h3 className="text-2xl font-bold text-gray-900 dark:text-white">{stat.count}</h3>
              <p className="text-xs text-gray-400 dark:text-gray-500 mt-1">{stat.desc}</p>
            </div>
          </div>
        ))}
      </div>

      <div className="space-y-8">
        
        {/* === GÃ–REV Ã–ZETÄ° (Task Summary) === */}
        <div className="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm">
          <div className="p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
            <h2 className="text-xl font-bold text-gray-900 dark:text-white flex items-center">
              <FiActivity className="mr-2 text-blue-500" />
              Active Priority Tasks
            </h2>
          </div>

          <div className="p-0">
            {loading ? (
              <div className="p-8 text-center text-gray-500">Loading tasks...</div>
            ) : activeTasks.length === 0 ? (
              <div className="p-12 text-center flex flex-col items-center">
                <div className="w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4 text-gray-400">
                  <FiCheckSquare size={32} />
                </div>
                <h3 className="text-lg font-medium text-gray-900 dark:text-white">All caught up!</h3>
                <p className="text-gray-500 dark:text-gray-400 mt-1 max-w-sm">
                  You have no active tasks. Completed tasks are hidden from this view.
                </p>
              </div>
            ) : (
              <div className="overflow-x-auto">
                <table className="w-full text-left border-collapse">
                  <thead>
                    <tr className="bg-gray-50 dark:bg-gray-900/50 text-gray-500 dark:text-gray-400 text-xs uppercase tracking-wider border-b border-gray-200 dark:border-gray-700">
                      <th className="p-4 font-medium">Task Name</th>
                      <th className="p-4 font-medium">Project</th>
                      <th className="p-4 font-medium">Status</th>
                      <th className="p-4 font-medium text-right">Created</th>
                      <th className="p-4 font-medium text-right">Action</th>
                    </tr>
                  </thead>
                  <tbody className="divide-y divide-gray-200 dark:divide-gray-700">
                    {visibleTasks.map(task => (
                      <tr key={task.id} className="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                        <td className="p-4">
                          <div className="font-medium text-gray-900 dark:text-white">{task.title}</div>
                        </td>
                        <td className="p-4">
                          <div className="flex items-center">
                            <FiFolder className="mr-2 text-blue-500" size={14} />
                            <span className="text-gray-600 dark:text-gray-300 text-sm">{task.project_name}</span>
                          </div>
                        </td>
                        <td className="p-4">
                          {getStatusBadge(task.status)}
                        </td>
                        <td className="p-4 text-right text-sm text-gray-500 dark:text-gray-400">
                          <div className="flex items-center justify-end">
                            <FiClock className="mr-1.5 w-3 h-3" />
                            {new Date(task.created_at).toLocaleDateString()}
                          </div>
                        </td>
                        <td className="p-4 text-right">
                          <Link 
                            to={`/project/${task.project_id}/tasks`}
                            className="inline-flex items-center text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors"
                          >
                            View Board <FiArrowRight className="ml-1" />
                          </Link>
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            )}
          </div>
          
          {/* Footer Info: Toplam gÃ¶sterilen ve gizlenen sayÄ±sÄ± */}
          <div className="p-4 bg-gray-50 dark:bg-gray-900/30 border-t border-gray-200 dark:border-gray-700 flex justify-center items-center gap-2 text-xs text-gray-500 dark:text-gray-400">
             <span>Showing top {visibleTasks.length} active tasks.</span>
             {hiddenCount > 0 && (
               <span className="flex items-center text-amber-600 dark:text-amber-500 font-medium ml-2">
                 <FiAlertCircle className="mr-1" />
                 {hiddenCount} more tasks are waiting in queue.
               </span>
             )}
          </div>
        </div>

      </div>
    </div>
  );
}

export default DashboardOverviewPage;


================================================
FILE: frontend/src/pages/ForgotPasswordPage.js
================================================
// src/pages/ForgotPasswordPage.js

import React, { useState } from 'react';
import { useAuth } from '../context/AuthContext';
import { Link } from 'react-router-dom';
// 1. FiArrowLeft ikonunu ekle
import { FiMail, FiLoader, FiArrowLeft } from 'react-icons/fi';
// 2. Arka plan resmini import et (GÃ¶rsel bÃ¼tÃ¼nlÃ¼k iÃ§in buraya da ekleyelim)
import BackgroundImage from '../assets/background.jpg';

export default function ForgotPasswordPage() {
  const [email, setEmail] = useState('');
  const [message, setMessage] = useState('');
  const { forgotPassword, loading, error } = useAuth();

  const handleSubmit = async (e) => {
    // ... kodlar aynÄ± ...
    e.preventDefault();
    try {
      await forgotPassword(email);
      setMessage('Check the backend console/terminal for the reset link!');
    } catch (err) {
      setMessage('');
    }
  };

  return (
    // 3. Arka planÄ± LoginPage ile aynÄ± yapÄ±yoruz
    <div 
      className="relative flex items-center justify-center min-h-screen bg-cover bg-center"
      style={{ backgroundImage: `url(${BackgroundImage})` }}
    >
      <div className="absolute inset-0 bg-black bg-opacity-60"></div>

      {/* 4. BURAYA EKLE: Geri DÃ¶n Butonu */}
      <Link 
        to="/home" 
        className="absolute top-8 left-8 z-20 flex items-center text-gray-300 hover:text-white transition-colors"
      >
        <FiArrowLeft className="mr-2" size={24} />
        <span className="font-semibold text-lg">Back to Home</span>
      </Link>

      <div className="relative z-10 w-full max-w-md p-8 bg-gray-800 bg-opacity-90 rounded-xl shadow-2xl backdrop-blur-sm">
        <h2 className="text-2xl font-bold text-white text-center mb-4">Reset Password</h2>
        <p className="text-gray-400 text-center mb-6">Enter your email to receive a reset link.</p>
        
        {message && <div className="bg-green-600 text-white p-3 rounded mb-4 text-sm">{message}</div>}
        {error && <div className="bg-red-600 text-white p-3 rounded mb-4 text-sm">{error}</div>}

        <form onSubmit={handleSubmit} className="space-y-4">
          <div className="relative">
            <FiMail className="absolute top-3 left-3 text-gray-500" />
            <input
              type="email"
              required
              placeholder="Enter your email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              className="w-full py-2 pl-10 pr-4 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none"
            />
          </div>
          <button disabled={loading} className="w-full py-2 bg-blue-600 hover:bg-blue-700 text-white rounded font-bold flex justify-center">
            {loading ? <FiLoader className="animate-spin" /> : 'Send Reset Link'}
          </button>
        </form>
        <div className="mt-4 text-center">
          <Link to="/login" className="text-blue-400 hover:text-blue-300 text-sm">Back to Login</Link>
        </div>
      </div>
    </div>
  );
}


================================================
FILE: frontend/src/pages/LandingPage.js
================================================
// src/pages/LandingPage.js
import React from 'react';
import { Link } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';
import { FiArrowRight, FiCheckCircle, FiUsers, FiLayout, FiLayers, FiShield } from 'react-icons/fi';
import BackgroundImage from '../assets/background.jpg';
import LogoImage from '../assets/logo.png';

const LandingPage = () => {
  const { user } = useAuth();

  return (
    <div className="min-h-screen font-sans text-white relative">
      {/* Background Image with Overlay */}
      <div 
        className="absolute inset-0 bg-cover bg-center z-0"
        style={{ backgroundImage: `url(${BackgroundImage})` }}
      >
        {/* Daha modern bir gradient overlay */}
        <div className="absolute inset-0 bg-gradient-to-br from-gray-900 via-gray-900/90 to-black/80"></div>
      </div>

      {/* Content Wrapper */}
      <div className="relative z-10 flex flex-col min-h-screen">
        
        {/* --- HEADER --- */}
        <header className="container mx-auto px-6 py-6 flex justify-between items-center">
          <div className="flex items-center gap-3">
             {/* Logo BÃ¼yÃ¼tÃ¼ldÃ¼: h-12 -> h-20 */}
             <img src={LogoImage} alt="GazozHub Logo" className="h-20 w-20 object-contain drop-shadow-lg" />
             <span className="text-3xl font-extrabold tracking-tight text-white">GazozHub</span>
          </div>
          
          <div className="hidden md:flex items-center gap-4">
            {user ? (
              <Link 
                to="/dashboard" 
                className="px-6 py-2.5 bg-blue-600 hover:bg-blue-500 text-white font-semibold rounded-full transition-all shadow-lg hover:shadow-blue-500/30 flex items-center"
              >
                Go to Dashboard <FiArrowRight className="ml-2" />
              </Link>
            ) : (
              <>
                <Link 
                  to="/login" 
                  className="px-4 py-2 text-gray-300 hover:text-white font-medium transition-colors"
                >
                  Sign In
                </Link>
                <Link 
                  to="/register" 
                  className="px-6 py-2.5 bg-white text-gray-900 hover:bg-gray-100 font-bold rounded-full transition-all shadow-lg transform hover:-translate-y-0.5"
                >
                  Get Started
                </Link>
              </>
            )}
          </div>
        </header>

        {/* --- HERO SECTION --- */}
        <main className="flex-grow flex flex-col justify-center items-center text-center px-4 py-20">
          <div className="max-w-5xl mx-auto space-y-8">
           
            
            <h1 className="text-6xl md:text-8xl font-black tracking-tight leading-none mb-6 drop-shadow-2xl">
              Collaboration <br />
              <span className="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400">
                Reimagined.
              </span>
            </h1>
            
            <p className="text-xl md:text-2xl text-gray-400 max-w-3xl mx-auto leading-relaxed font-light mb-10">
              GazozHub connects students, teams, and advisors in one seamless workspace. 
              Manage tasks, track issues, and build amazing things together.
            </p>

            <div className="flex flex-col sm:flex-row justify-center gap-5">
              {user ? (
                <Link 
                  to="/dashboard" 
                  className="px-10 py-4 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 text-white text-xl font-bold rounded-2xl transition-all transform hover:scale-105 shadow-xl shadow-blue-900/20 flex items-center justify-center"
                >
                  Launch Dashboard <FiArrowRight className="ml-3" />
                </Link>
              ) : (
                <>
                  <Link 
                    to="/register" 
                    className="px-10 py-4 bg-white text-gray-900 hover:bg-gray-50 text-xl font-bold rounded-2xl transition-all transform hover:scale-105 shadow-xl flex items-center justify-center"
                  >
                    Get Started <FiArrowRight className="ml-3" size={24} />
                  </Link>
                  <Link 
                    to="/login" 
                    className="px-10 py-4 bg-gray-800/50 hover:bg-gray-800 border border-gray-700 text-white text-xl font-bold rounded-2xl transition-all flex items-center justify-center backdrop-blur-sm"
                  >
                    Login
                  </Link>
                </>
              )}
            </div>
          </div>

          {/* --- FEATURES GRID --- */}
          <div className="mt-[40vh] grid grid-cols-1 md:grid-cols-3 gap-8 max-w-7xl w-full px-4">
            <FeatureCard 
              icon={<FiLayout className="w-8 h-8" />} 
              title="Kanban Boards" 
              desc="Visualise work with drag-and-drop boards. Move tasks from To Do to Done with ease."
              color="bg-blue-500"
            />
            <FeatureCard 
              icon={<FiUsers className="w-8 h-8" />} 
              title="Team Sync" 
              desc="Real-time collaboration with role-based access control for Editors and Viewers."
              color="bg-purple-500"
            />
            <FeatureCard 
              icon={<FiCheckCircle className="w-8 h-8" />} 
              title="Issue Tracking" 
              desc="Advanced issue tracking system to squash bugs and manage feature requests efficiently."
              color="bg-green-500"
            />
            <FeatureCard 
              icon={<FiLayers className="w-8 h-8" />} 
              title="Project Hub" 
              desc="Centralize all your project files, discussions, and milestones in one place."
              color="bg-pink-500"
            />
            <FeatureCard 
              icon={<FiShield className="w-8 h-8" />} 
              title="Secure & Private" 
              desc="Keep your projects private or share them publicly with granular visibility settings."
              color="bg-yellow-500"
            />
             <div className="p-8 rounded-3xl border border-gray-800 bg-gray-900/40 backdrop-blur-md flex flex-col justify-center items-center text-center">
                <h3 className="text-2xl font-bold text-white mb-2">And much more...</h3>
                <p className="text-gray-400">Join GazozHub today to explore all features.</p>
             </div>
          </div>
        </main>

        {/* --- FOOTER --- */}
        <footer className="py-8 text-center border-t border-gray-800/50 bg-gray-900/50 backdrop-blur-sm mt-auto">
           <div className="flex items-center justify-center gap-2 mb-2">
             <img src={LogoImage} alt="Logo" className="h-6 w-6 opacity-50" />
             <span className="text-gray-500 font-semibold">GazozHub</span>
           </div>
           <p className="text-gray-600 text-sm">
             &copy; {new Date().getFullYear()} GazozHub. Designed for modern teams.
           </p>
        </footer>
      </div>
    </div>
  );
};

// Alt BileÅŸen: Ã–zellik KartÄ±
const FeatureCard = ({ icon, title, desc, color }) => (
  <div className="group p-8 rounded-3xl border border-gray-800 bg-gray-900/60 backdrop-blur-md hover:bg-gray-800/80 hover:border-gray-700 transition-all duration-300">
    <div className={`w-14 h-14 rounded-2xl ${color} bg-opacity-20 flex items-center justify-center text-${color.split('-')[1]}-400 mb-6 group-hover:scale-110 transition-transform duration-300`}>
      {icon}
    </div>
    <h3 className="text-2xl font-bold text-white mb-3">{title}</h3>
    <p className="text-gray-400 leading-relaxed">{desc}</p>
  </div>
);

export default LandingPage;


================================================
FILE: frontend/src/pages/LoginPage.js
================================================
// src/pages/LoginPage.js

import React, { useState, useEffect } from 'react';
import { useNavigate, Link } from 'react-router-dom';
// 1. FiArrowLeft ikonunu ekle
import { FiUser, FiLock, FiArrowLeft } from 'react-icons/fi'; 
import { useAuth } from '../context/AuthContext';
import BackgroundImage from '../assets/background.jpg';

function LoginPage() {
  const [username, setUsername] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState(null);
  const navigate = useNavigate();
  const { login, user, loading } = useAuth();

  const handleSubmit = async (event) => { 
    event.preventDefault(); 
    setError(null);
    if (!username || !password) {
        setError("Please enter all fields.");
        return;
    }
    
    try {
      await login(username, password);
    } catch (err) {
      setError(err.message);
    }
  };

  useEffect(() => {
    if (user) {
      navigate('/dashboard');
    }
  }, [user, navigate]);

  return (
    <div 
      className="relative flex items-center justify-center min-h-screen bg-cover bg-center"
      style={{ backgroundImage: `url(${BackgroundImage})` }}
    >
      <div className="absolute inset-0 bg-black bg-opacity-60"></div>

      {/* 2. BURAYA EKLE: Sol Ãœst KÃ¶ÅŸe Ä°Ã§in Geri DÃ¶n Butonu */}
      <Link 
        to="/home" 
        className="absolute top-8 left-8 z-20 flex items-center text-gray-300 hover:text-white transition-colors"
      >
        <FiArrowLeft className="mr-2" size={24} />
        <span className="font-semibold text-lg">Back to Home</span>
      </Link>

      <div className="relative z-10 w-full max-w-md p-8 space-y-8 bg-gray-800 bg-opacity-90 rounded-2xl shadow-2xl backdrop-blur-sm">
        {/* ... Form KodlarÄ± AynÄ± Kalacak ... */}
        <div className="text-center">
          <h2 className="text-3xl font-bold text-white">Sign In</h2>
          <p className="mt-2 text-sm text-gray-400">Welcome to the Project Hub</p>
        </div>
        <form className="space-y-6" onSubmit={handleSubmit}>
            {/* ... Inputlar vs. ... */}
             <div className="relative">
                <div className="absolute top-0 left-0 flex items-center h-full pl-3 pointer-events-none">
                  <FiUser className="w-5 h-5 text-gray-500" />
                </div>
                <input
                  id="username"
                  name="username"
                  type="text"
                  required
                  className="w-full py-3 pl-10 pr-4 text-gray-200 bg-gray-700 border border-gray-600 rounded-lg placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
                  placeholder="Username"
                  value={username}
                  onChange={(e) => setUsername(e.target.value)}
                />
              </div>
              
              <div className="relative">
                <div className="absolute top-0 left-0 flex items-center h-full pl-3 pointer-events-none">
                  <FiLock className="w-5 h-5 text-gray-500" />
                </div>
                <input
                  id="password"
                  name="password"
                  type="password"
                  required
                  className="w-full py-3 pl-10 pr-4 text-gray-200 bg-gray-700 border border-gray-600 rounded-lg placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
                  placeholder="Password"
                  value={password}
                  onChange={(e) => setPassword(e.target.value)}
                />
              </div>

              {error && (
                <p className="text-sm text-red-400 text-center">{error}</p>
              )}

              <div>
                <button
                  type="submit"
                  disabled={loading}
                  className="w-full px-4 py-3 font-semibold text-white bg-blue-600 rounded-lg shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-blue-500 transition-all duration-300 disabled:opacity-50"
                >
                  {loading ? 'Signing In...' : 'Sign In'}
                </button>
                <div className="flex justify-end mb-4">
                <Link to="/forgot-password" className="text-sm text-blue-400 hover:text-blue-300">
                  Forgot Password?
                </Link>
              </div>
              </div>
        </form>
        
        <div className="text-center mt-4">
          <p className="text-sm text-gray-400">
            Don't have an account?{' '}
            <Link to="/register" className="font-semibold text-blue-500 hover:text-blue-400">
              Sign Up
            </Link>
          </p>
        </div>
      </div>
    </div>
  );
}

export default LoginPage;


================================================
FILE: frontend/src/pages/MyProjectsPage.js
================================================
// src/pages/MyProjectsPage.js

import React, { useState, useEffect } from 'react';
import CreateProjectModal from '../components/projects/CreateProjectModal';
import { Link } from 'react-router-dom';
import { useProjectContext } from '../context/ProjectContext';

// Ä°konlar
import { 
  FiLoader, FiPlus, FiGrid, FiList, FiClock, FiGlobe, 
  FiChevronLeft, FiChevronRight 
} from 'react-icons/fi'; 

function MyProjectsPage() {
  const [isModalOpen, setIsModalOpen] = useState(false); 
  const [viewMode, setViewMode] = useState('grid'); 
  
  // --- PAGINATION STATE ---
  const [currentPage, setCurrentPage] = useState(1);

  // Grid ise 6, Liste ise 5 proje
  const projectsPerPage = viewMode === 'grid' ? 6 : 5;

  const { myProjects, loading, fetchMyProjects } = useProjectContext();

  useEffect(() => {
    fetchMyProjects();
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, []);

  useEffect(() => {
    setCurrentPage(1);
  }, [viewMode, myProjects]);

  // --- PAGINATION HESAPLAMALARI ---
  const indexOfLastProject = currentPage * projectsPerPage;
  const indexOfFirstProject = indexOfLastProject - projectsPerPage;
  const currentProjects = myProjects.slice(indexOfFirstProject, indexOfLastProject);
  const totalPages = Math.ceil(myProjects.length / projectsPerPage);

  const paginate = (pageNumber) => setCurrentPage(pageNumber);

  const nextPage = () => {
    if (currentPage < totalPages) setCurrentPage(currentPage + 1);
  };

  const prevPage = () => {
    if (currentPage > 1) setCurrentPage(currentPage - 1);
  };

  return (
    <div>
      {/* --- HEADER --- */}
      <div className="flex flex-col md:flex-row justify-between items-center mb-8 gap-4">
        <h1 className="text-3xl font-bold text-white">My Projects</h1>
        
        <div className="flex items-center gap-4">
          <div className="bg-gray-800 p-1 rounded-lg border border-gray-700 flex">
            <button
              onClick={() => setViewMode('grid')}
              className={`p-2 rounded-md transition-all ${
                viewMode === 'grid' 
                  ? 'bg-blue-600 text-white shadow' 
                  : 'text-gray-400 hover:text-white'
              }`}
              title="Grid View"
            >
              <FiGrid size={18} />
            </button>
            <button
              onClick={() => setViewMode('list')}
              className={`p-2 rounded-md transition-all ${
                viewMode === 'list' 
                  ? 'bg-blue-600 text-white shadow' 
                  : 'text-gray-400 hover:text-white'
              }`}
              title="List View"
            >
              <FiList size={18} />
            </button>
          </div>

          <button 
            onClick={() => setIsModalOpen(true)}
            className="flex items-center bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg shadow-lg transition-colors"
          >
            <FiPlus className="mr-2" />
            Create New Project
          </button>
        </div>
      </div>

      {/* --- CONTENT --- */}
      {loading ? (
        <div className="flex justify-center items-center p-20">
          <FiLoader className="animate-spin text-blue-500" size={40} />
          <span className="ml-4 text-xl text-gray-300">Loading projects...</span>
        </div>
      ) : myProjects.length === 0 ? (
        <p className="text-gray-400">You haven't created any projects yet.</p>
      ) : (
        // GÃœNCELLEME: min-h-[600px] -> min-h-[480px] yapÄ±ldÄ±. Daha kompakt.
        <div className="flex flex-col min-h-[480px]">
          
          <div className="flex-grow">
            {/* === GRID MODU === */}
            {viewMode === 'grid' && (
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                {currentProjects.map(project => (
                  <Link to={`/project/${project.id}`} key={project.id}>
                    <div className="bg-gray-800 p-6 rounded-lg shadow-md hover:shadow-xl hover:border-blue-500 border-2 border-transparent transition-all duration-300 h-full flex flex-col justify-between">
                      <div>
                        <div className="flex justify-between items-start mb-2">
                          <h3 className="text-xl font-bold text-white truncate pr-2" title={project.name}>{project.name}</h3>
                          {project.is_public && (
                            <div title="Public Project" className="text-green-400 bg-green-400/10 p-1 rounded-full">
                              <FiGlobe size={16} />
                            </div>
                          )}
                        </div>
                        <p className="text-gray-400 text-sm line-clamp-3">{project.description}</p>
                      </div>
                      <div className="mt-4 pt-4 border-t border-gray-700 flex items-center justify-between text-xs text-gray-500">
                        <div className="flex items-center">
                          <FiClock className="mr-2" />
                          Updated: {new Date(project.last_updated_at).toLocaleDateString()}
                        </div>
                        {project.is_public && <span className="text-green-500 font-semibold">Public</span>}
                      </div>
                    </div>
                  </Link>
                ))}
              </div>
            )}

            {/* === LIST MODU === */}
            {viewMode === 'list' && (
              <div className="flex flex-col space-y-3">
                {currentProjects.map(project => (
                  <Link to={`/project/${project.id}`} key={project.id}>
                    <div className="bg-gray-800 p-4 rounded-lg border border-gray-700 hover:border-blue-500 transition-all flex items-center justify-between group">
                      <div className="flex-1 min-w-0 mr-4">
                        <div className="flex items-center">
                          <h3 className="text-lg font-bold text-white group-hover:text-blue-400 transition-colors truncate mr-3">
                            {project.name}
                          </h3>
                          {project.is_public && (
                            <span className="flex items-center text-xs text-green-500 bg-green-900/20 px-2 py-0.5 rounded border border-green-900/30">
                              <FiGlobe className="mr-1 w-3 h-3" /> Public
                            </span>
                          )}
                        </div>
                        <p className="text-gray-400 text-sm truncate mt-1">
                          {project.description || "No description provided."}
                        </p>
                      </div>
                      <div className="flex-shrink-0 text-right">
                        <span className="text-xs text-gray-500 flex items-center bg-gray-900 px-3 py-1 rounded-full">
                          <FiClock className="mr-2" />
                          {new Date(project.last_updated_at).toLocaleDateString()}
                        </span>
                      </div>
                    </div>
                  </Link>
                ))}
              </div>
            )}
          </div>

          {/* === PAGINATION BAR === */}
          {/* GÃœNCELLEME: mt-6 yerine mt-2 yapÄ±ldÄ±. Ã‡izgiye daha yakÄ±n. */}
          {myProjects.length > projectsPerPage && (
            <div className="flex justify-center items-center mt-2 pt-4 border-t border-gray-800">
              <button
                onClick={prevPage}
                disabled={currentPage === 1}
                className={`p-2 rounded-md border border-gray-700 ${
                  currentPage === 1 
                    ? 'text-gray-600 cursor-not-allowed bg-gray-800/50' 
                    : 'text-white bg-gray-800 hover:bg-gray-700 hover:border-blue-500'
                }`}
              >
                <FiChevronLeft size={20} />
              </button>

              <div className="flex space-x-1 mx-2">
                {Array.from({ length: totalPages }, (_, i) => i + 1).map((number) => (
                  <button
                    key={number}
                    onClick={() => paginate(number)}
                    className={`px-3 py-1 rounded-md text-sm font-medium transition-colors ${
                      currentPage === number
                        ? 'bg-blue-600 text-white shadow-lg'
                        : 'bg-gray-800 text-gray-400 border border-gray-700 hover:bg-gray-700 hover:text-white'
                    }`}
                  >
                    {number}
                  </button>
                ))}
              </div>

              <button
                onClick={nextPage}
                disabled={currentPage === totalPages}
                className={`p-2 rounded-md border border-gray-700 ${
                  currentPage === totalPages 
                    ? 'text-gray-600 cursor-not-allowed bg-gray-800/50' 
                    : 'text-white bg-gray-800 hover:bg-gray-700 hover:border-blue-500'
                }`}
              >
                <FiChevronRight size={20} />
              </button>
            </div>
          )}
        </div>
      )}

      <CreateProjectModal 
        isOpen={isModalOpen}
        onClose={() => setIsModalOpen(false)} 
      />
    </div>
  );
}

export default MyProjectsPage;


================================================
FILE: frontend/src/pages/ProjectDetailPage.js
================================================
// src/pages/ProjectDetailPage.js

import React, { useEffect } from 'react';
import { useParams, NavLink, Outlet } from 'react-router-dom';
import { useProjectContext } from '../context/ProjectContext';
import { 
  FiLoader, FiAlertTriangle, FiCheckSquare, 
  FiMessageSquare, FiFile, FiEdit, FiLayout 
} from 'react-icons/fi';

function ProjectDetailPage() {
  const { id } = useParams();
  const { currentProject, loading, error, fetchProjectById } = useProjectContext();

  useEffect(() => {
    if (id) {
      fetchProjectById(id);
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [id]);

  if (loading || (!currentProject && !error)) {
    return (
      <div className="p-20 flex justify-center">
        <FiLoader className="animate-spin text-blue-500" size={40} />
      </div>
    );
  }

  if (error && !currentProject) {
    return (
      <div className="p-20 flex justify-center text-red-400">
        <FiAlertTriangle size={40} />
        <span className="ml-4">Error: {error}</span>
      </div>
    );
  }

  const userRole = currentProject?.currentUserRole;
  const isTasksPublic = currentProject?.is_tasks_public;
  
  const showTasksTab = userRole !== 'public_viewer' || isTasksPublic;
  const showDiscussionsTab = userRole !== 'public_viewer';
  const showEditTab = userRole === 'owner';

  // === DÃœZELTME BURADA ===
  // Eski "grid hesaplama" kodlarÄ±nÄ± sildik.
  // Yerine Flexbox kullanÄ±yoruz.

  const navLinkStyle = ({ isActive }) =>
    // 'flex-1': TÃ¼m sekmeler eÅŸit geniÅŸlikte olsun ve yan yana dolsun
    `flex-1 flex items-center justify-center px-4 py-3 font-semibold border-b-2 transition-colors ` +
    (isActive 
      ? 'text-white border-blue-500' 
      : 'text-gray-400 border-transparent hover:text-gray-200 hover:bg-gray-800');

  return (
    <div className="p-4 text-white">
      <h1 className="text-4xl font-bold mb-2">{currentProject.name}</h1>
      <p className="text-lg text-gray-400 mb-6">{currentProject.description}</p>
      
      {/* <nav> kÄ±smÄ±nÄ± 'grid' yerine 'flex' yaptÄ±k */}
      <nav className="flex border-b border-gray-700 mb-6">
        
        <NavLink to="" end className={navLinkStyle}> 
          <FiFile className="mr-2" />
          Files
        </NavLink>

        {showTasksTab && (
          <NavLink to="tasks" className={navLinkStyle}>
            <FiLayout className="mr-2" />
            Tasks
          </NavLink>
        )}
        
        <NavLink to="issues" className={navLinkStyle}>
          <FiCheckSquare className="mr-2" />
          Issues
        </NavLink>
        
        {showDiscussionsTab && (
          <NavLink to="discussions" className={navLinkStyle}>
            <FiMessageSquare className="mr-2" />
            Discussions
          </NavLink>
        )}
        
        {showEditTab && (
          <NavLink to="edit" className={navLinkStyle}>
            <FiEdit className="mr-2" />
            Edit
          </NavLink>
        )}
      </nav>

      <Outlet />
    </div>
  );
}

export default ProjectDetailPage;


================================================
FILE: frontend/src/pages/RegisterPage.js
================================================
// src/pages/RegisterPage.js

import React, { useState } from 'react';
import { useNavigate, Link } from 'react-router-dom';
// 1. FiArrowLeft'i ekle
import { FiUser, FiLock, FiMail, FiArrowLeft } from 'react-icons/fi';
import { useAuth } from '../context/AuthContext';
import BackgroundImage from '../assets/background.jpg';

function RegisterPage() {
  const [username, setUsername] = useState('');
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState(null);
  const [success, setSuccess] = useState(null);
  const { register, loading } = useAuth(); 
  const navigate = useNavigate();

  const handleSubmit = async (e) => {
    // ... submit kodlarÄ± aynÄ± ...
    e.preventDefault();
    setError(null);
    setSuccess(null);
    if (!username || !email || !password) {
      setError("Please enter all fields.");
      return;
    }

    try {
      await register(username, email, password);
      setSuccess("Account created successfully! Redirecting to login...");
      setTimeout(() => {
        navigate('/login');
      }, 2000);
    } catch (err) {
      setError(err.message);
    }
  };

  return (
    <div 
      className="relative flex items-center justify-center min-h-screen bg-cover bg-center"
      style={{ backgroundImage: `url(${BackgroundImage})` }}
    >
      <div className="absolute inset-0 bg-black bg-opacity-60"></div>

      {/* 2. BURAYA EKLE: Geri DÃ¶n Butonu */}
      <Link 
        to="/home" 
        className="absolute top-8 left-8 z-20 flex items-center text-gray-300 hover:text-white transition-colors"
      >
        <FiArrowLeft className="mr-2" size={24} />
        <span className="font-semibold text-lg">Back to Home</span>
      </Link>

      <div className="relative z-10 w-full max-w-md p-8 space-y-8 bg-gray-800 bg-opacity-90 rounded-2xl shadow-2xl backdrop-blur-sm">
         {/* ... Form KodlarÄ± AynÄ± ... */}
         <div className="text-center">
          <h2 className="text-3xl font-bold text-white">Create Account</h2>
          <p className="mt-2 text-sm text-gray-400">Join the Project Hub</p>
        </div>
        <form className="space-y-6" onSubmit={handleSubmit}>
          
          <div className="relative">
            <div className="absolute top-0 left-0 flex items-center h-full pl-3 pointer-events-none">
              <FiUser className="w-5 h-5 text-gray-500" />
            </div>
            <input
              id="username"
              type="text"
              required
              className="w-full py-3 pl-10 pr-4 text-gray-200 bg-gray-700 border border-gray-600 rounded-lg placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
              placeholder="Username"
              value={username}
              onChange={(e) => setUsername(e.target.value)}
            />
          </div>

          <div className="relative">
            <div className="absolute top-0 left-0 flex items-center h-full pl-3 pointer-events-none">
              <FiMail className="w-5 h-5 text-gray-500" />
            </div>
            <input
              id="email"
              type="email"
              required
              className="w-full py-3 pl-10 pr-4 text-gray-200 bg-gray-700 border border-gray-600 rounded-lg placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
              placeholder="Email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
            />
          </div>
          
          <div className="relative">
            <div className="absolute top-0 left-0 flex items-center h-full pl-3 pointer-events-none">
              <FiLock className="w-5 h-5 text-gray-500" />
            </div>
            <input
              id="password"
              type="password"
              required
              className="w-full py-3 pl-10 pr-4 text-gray-200 bg-gray-700 border border-gray-600 rounded-lg placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
              placeholder="Password"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
            />
          </div>

          {error && <p className="text-sm text-red-400 text-center">{error}</p>}
          {success && <p className="text-sm text-green-400 text-center">{success}</p>}

          <div>
            <button
              type="submit"
              disabled={loading}
              className="w-full px-4 py-3 font-semibold text-white bg-blue-600 rounded-lg shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-blue-500 transition-all duration-300 disabled:opacity-50"
            >
              {loading ? 'Creating Account...' : 'Sign Up'}
            </button>
          </div>
        </form>
        
        <div className="text-center mt-4">
          <p className="text-sm text-gray-400">
            Already have an account?{' '}
            <Link to="/login" className="font-semibold text-blue-500 hover:text-blue-400">
              Sign In
            </Link>
          </p>
        </div>
      </div>
    </div>
  );
}

export default RegisterPage;


================================================
FILE: frontend/src/pages/ResetPasswordPage.js
================================================
// src/pages/ResetPasswordPage.js
import React, { useState } from 'react';
import { useAuth } from '../context/AuthContext';
import { useNavigate, useSearchParams } from 'react-router-dom';
import { FiLock, FiLoader } from 'react-icons/fi';

export default function ResetPasswordPage() {
  const [newPassword, setNewPassword] = useState('');
  const [searchParams] = useSearchParams();
  const token = searchParams.get('token'); // URL'den token'Ä± al
  
  const { resetPassword, loading, error } = useAuth();
  const navigate = useNavigate();

  const handleSubmit = async (e) => {
    e.preventDefault();
    try {
      await resetPassword(token, newPassword);
      alert('Password reset successful! You can now login.');
      navigate('/login');
    } catch (err) {
      // Error context'te iÅŸlenir
    }
  };

  if (!token) return <div className="text-white text-center mt-20">Invalid Link</div>;

  return (
    <div className="flex items-center justify-center min-h-screen bg-gray-900">
      <div className="w-full max-w-md p-8 bg-gray-800 rounded-xl shadow-2xl">
        <h2 className="text-2xl font-bold text-white text-center mb-4">Set New Password</h2>
        
        {error && <div className="bg-red-600 text-white p-3 rounded mb-4 text-sm">{error}</div>}

        <form onSubmit={handleSubmit} className="space-y-4">
          <div className="relative">
            <FiLock className="absolute top-3 left-3 text-gray-500" />
            <input
              type="password"
              required
              placeholder="New Password"
              value={newPassword}
              onChange={(e) => setNewPassword(e.target.value)}
              className="w-full py-2 pl-10 pr-4 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none"
            />
          </div>
          <button disabled={loading} className="w-full py-2 bg-green-600 hover:bg-green-700 text-white rounded font-bold flex justify-center">
            {loading ? <FiLoader className="animate-spin" /> : 'Update Password'}
          </button>
        </form>
      </div>
    </div>
  );
}


================================================
FILE: frontend/src/pages/SettingsPage.js
================================================
// src/pages/SettingsPage.js

import React, { useState } from 'react';
import { useAuth } from '../context/AuthContext';
// 1. Theme hook'unu import et
import { useTheme } from '../context/ThemeContext';
import { FiUser, FiMail, FiLock, FiSettings, FiGlobe, FiBell, FiShield, FiMoon, FiSun } from 'react-icons/fi';

export default function SettingsPage() {
  const { user } = useAuth();
  
  // 2. Tema verisini al
  const { theme, toggleTheme } = useTheme();
  
  const [activeTab, setActiveTab] = useState('profile');

  // Ortak stil sÄ±nÄ±flarÄ± (Dark/Light uyumlu)
  const cardClass = "bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 transition-colors duration-300";
  const textPrimary = "text-gray-900 dark:text-white";
  const textSecondary = "text-gray-500 dark:text-gray-400";
  const inputClass = "bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 w-full";

  return (
    <div className="max-w-5xl mx-auto pb-10 px-4 md:px-0">
      
      {/* BaÅŸlÄ±k */}
      <div className="border-b border-gray-200 dark:border-gray-700 pb-4 mb-8">
        <h2 className={`text-3xl font-bold flex items-center ${textPrimary}`}>
          <FiSettings className="mr-3 text-gray-400" />
          Settings
        </h2>
        <p className={`${textSecondary} mt-1`}>Manage your account and preferences.</p>
      </div>

      <div className="flex flex-col md:flex-row gap-8">
        
        {/* SOL MENÃœ */}
        <div className="w-full md:w-64 flex-shrink-0">
          <nav className="flex flex-row md:flex-col space-x-2 md:space-x-0 md:space-y-2 overflow-x-auto md:overflow-visible pb-2 md:pb-0">
            {/* ... (Butonlar aynÄ±, sadece renk sÄ±nÄ±flarÄ± gÃ¼ncellenebilir) ... */}
            <button
              onClick={() => setActiveTab('profile')}
              className={`flex items-center px-4 py-3 rounded-lg text-sm font-medium transition-colors w-full ${
                activeTab === 'profile'
                  ? 'bg-blue-600 text-white shadow-lg'
                  : `${textSecondary} hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-white`
              }`}
            >
              <FiUser className="mr-3 text-lg" /> Profile
            </button>

            <button
              onClick={() => setActiveTab('general')}
              className={`flex items-center px-4 py-3 rounded-lg text-sm font-medium transition-colors w-full ${
                activeTab === 'general'
                  ? 'bg-blue-600 text-white shadow-lg'
                  : `${textSecondary} hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-white`
              }`}
            >
              <FiSettings className="mr-3 text-lg" /> General
            </button>
          </nav>
        </div>

        {/* Ä°Ã‡ERÄ°K ALANI */}
        <div className="flex-1">
          
          {/* --- 1. PROFIL AYARLARI --- */}
          {activeTab === 'profile' && (
            <div className="space-y-6 animate-fade-in-up">
              <div className={cardClass}>
                <h3 className={`text-xl font-bold mb-6 flex items-center border-b border-gray-200 dark:border-gray-700 pb-4 ${textPrimary}`}>
                  Profile Information
                </h3>
                {/* ... (Profil iÃ§eriÄŸi aynÄ±, sadece renkler textPrimary/Secondary ile gÃ¼ncellendi) ... */}
                 <div className="space-y-6">
                   <div>
                    <label className={`block text-sm font-medium mb-1 ${textSecondary}`}>Username</label>
                    <div className="flex items-center bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-3">
                      <FiUser className="text-gray-400 mr-3" />
                      <span className={textPrimary}>{user?.username}</span>
                    </div>
                  </div>
                 </div>
              </div>
            </div>
          )}

          {/* --- 2. GENEL (GENERAL) AYARLAR --- */}
          {activeTab === 'general' && (
            <div className="space-y-6 animate-fade-in-up">
              <div className={cardClass}>
                <h3 className={`text-xl font-bold mb-6 flex items-center border-b border-gray-200 dark:border-gray-700 pb-4 ${textPrimary}`}>
                  App Preferences
                </h3>
                
                <div className="space-y-6">
                  
                  {/* === TEMA AYARI (BURASI EKLENDÄ°) === */}
                  <div className="flex items-center justify-between">
                    <div className="flex items-center">
                      {theme === 'dark' ? <FiMoon className="text-purple-400 mr-3" size={24}/> : <FiSun className="text-yellow-500 mr-3" size={24}/>}
                      <div>
                        <h4 className={`${textPrimary} font-medium`}>Appearance</h4>
                        <p className={`text-sm ${textSecondary}`}>Switch between Dark and Light mode.</p>
                      </div>
                    </div>
                    
                    <select 
                      value={theme}
                      onChange={(e) => toggleTheme(e.target.value)}
                      className={inputClass.replace('w-full', 'w-40')}
                    >
                      <option value="dark">Dark Mode</option>
                      <option value="light">Light Mode</option>
                    </select>
                  </div>

                  <hr className="border-gray-200 dark:border-gray-700" />

                 
                </div>
              </div>
            </div>
          )}

        </div>
      </div>
    </div>
  );
}


================================================
FILE: frontend/src/pages/SharedProjectsPage.js
================================================
// src/pages/SharedProjectsPage.js

import React, { useState, useEffect, useMemo } from 'react';
import { useProjectContext } from '../context/ProjectContext';
import { FiLoader, FiGrid, FiList, FiChevronLeft, FiChevronRight } from 'react-icons/fi'; 
import SharedProjectCard from '../components/projects/SharedProjectCard';

function SharedProjectsPage() {
  const { sharedProjects, loading, fetchSharedProjects } = useProjectContext();
  
  // === GÃ–RÃœNÃœM MODU ===
  const [viewMode, setViewMode] = useState(() => {
    return localStorage.getItem('sharedProjectsViewMode') || 'grid';
  });

  // --- PAGINATION STATE ---
  const [currentPage, setCurrentPage] = useState(1);
  
  // !!! DÃœZELTME BURADA !!!
  // Liste gÃ¶rÃ¼nÃ¼mÃ¼nde butonlarÄ±n oynamamasÄ± iÃ§in sayÄ±yÄ± 5'ten 4'e indirdik.
  // Grid: 6 adet, List: 4 adet. (YÃ¼kseklikleri birbirine daha yakÄ±n olur)
  const projectsPerPage = viewMode === 'grid' ? 6 : 4;

  const changeViewMode = (mode) => {
    setViewMode(mode);
    localStorage.setItem('sharedProjectsViewMode', mode);
  };

  useEffect(() => {
    fetchSharedProjects();
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, []);

  // === PROJELERÄ° TEKÄ°LLEÅžTÄ°RME ===
  const uniqueProjects = useMemo(() => {
    const projectMap = new Map();
    sharedProjects.forEach(project => {
      const existing = projectMap.get(project.id);
      if (!existing) {
        projectMap.set(project.id, project);
      } else {
        if (project.joined_at && !existing.joined_at) {
          projectMap.set(project.id, project);
        }
      }
    });
    return Array.from(projectMap.values());
  }, [sharedProjects]);

  // GÃ¶rÃ¼nÃ¼m veya veri deÄŸiÅŸirse 1. sayfaya dÃ¶n
  useEffect(() => {
    setCurrentPage(1);
  }, [uniqueProjects, viewMode]);

  // --- PAGINATION HESAPLAMALARI ---
  const indexOfLastProject = currentPage * projectsPerPage;
  const indexOfFirstProject = indexOfLastProject - projectsPerPage;
  const currentProjects = uniqueProjects.slice(indexOfFirstProject, indexOfLastProject);
  const totalPages = Math.ceil(uniqueProjects.length / projectsPerPage);

  const paginate = (pageNumber) => setCurrentPage(pageNumber);

  const nextPage = () => {
    if (currentPage < totalPages) setCurrentPage(currentPage + 1);
  };

  const prevPage = () => {
    if (currentPage > 1) setCurrentPage(currentPage - 1);
  };

  return (
    <div>
      {/* --- HEADER --- */}
      <div className="flex justify-between items-end mb-8">
        <div>
          <h1 className="text-3xl font-bold text-white">Shared by Others</h1>
          <p className="text-gray-400 mt-2 text-sm">
            Projects shared with you or available publicly.
          </p>
        </div>

        <div className="bg-gray-800 p-1 rounded-lg border border-gray-700 flex">
          <button
            onClick={() => changeViewMode('grid')}
            className={`p-2 rounded-md transition-all ${
              viewMode === 'grid' ? 'bg-purple-600 text-white shadow' : 'text-gray-400 hover:text-white'
            }`}
            title="Grid View"
          >
            <FiGrid size={18} />
          </button>
          <button
            onClick={() => changeViewMode('list')}
            className={`p-2 rounded-md transition-all ${
              viewMode === 'list' ? 'bg-purple-600 text-white shadow' : 'text-gray-400 hover:text-white'
            }`}
            title="List View"
          >
            <FiList size={18} />
          </button>
        </div>
      </div>

      {/* --- CONTENT --- */}
      {loading ? (
        <div className="flex justify-center items-center p-20">
          <FiLoader className="animate-spin text-purple-500" size={40} />
          <span className="ml-4 text-xl text-gray-300">Loading Shared Projects...</span>
        </div>
      ) : uniqueProjects.length === 0 ? (
        <p className="text-gray-400">No projects have been shared with you yet.</p>
      ) : (
        // !!! SABÄ°T YÃœKSEKLÄ°K GÃœNCELLEMESÄ° !!!
        // min-h-[500px]: 4 liste elemanÄ± iÃ§in tam ideal yÃ¼kseklik.
        // Bu sayede butonlar ne yukarÄ± zÄ±plar ne de ekranÄ± taÅŸÄ±rÄ±r.
        <div className="flex flex-col min-h-[500px]">
          
          <div className="flex-grow">
            {/* GRID MODU (6 tane) */}
            {viewMode === 'grid' && (
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                {currentProjects.map(project => (
                  <SharedProjectCard 
                    key={project.id} 
                    project={project} 
                    viewMode="grid" 
                  />
                ))}
              </div>
            )}

            {/* LIST MODU (4 tane) */}
            {viewMode === 'list' && (
              <div className="flex flex-col space-y-3">
                {currentProjects.map(project => (
                  <SharedProjectCard 
                    key={project.id} 
                    project={project} 
                    viewMode="list" 
                  />
                ))}
              </div>
            )}
          </div>

          {/* === PAGINATION BAR === */}
          {uniqueProjects.length > projectsPerPage && (
            <div className="flex justify-center items-center mt-2 pt-4 border-t border-gray-800">
              <button
                onClick={prevPage}
                disabled={currentPage === 1}
                className={`p-2 rounded-md border border-gray-700 ${
                  currentPage === 1 
                    ? 'text-gray-600 cursor-not-allowed bg-gray-800/50' 
                    : 'text-white bg-gray-800 hover:bg-gray-700 hover:border-purple-500'
                }`}
              >
                <FiChevronLeft size={20} />
              </button>

              <div className="flex space-x-1 mx-2">
                {Array.from({ length: totalPages }, (_, i) => i + 1).map((number) => (
                  <button
                    key={number}
                    onClick={() => paginate(number)}
                    className={`px-3 py-1 rounded-md text-sm font-medium transition-colors ${
                      currentPage === number
                        ? 'bg-purple-600 text-white shadow-lg'
                        : 'bg-gray-800 text-gray-400 border border-gray-700 hover:bg-gray-700 hover:text-white'
                    }`}
                  >
                    {number}
                  </button>
                ))}
              </div>

              <button
                onClick={nextPage}
                disabled={currentPage === totalPages}
                className={`p-2 rounded-md border border-gray-700 ${
                  currentPage === totalPages 
                    ? 'text-gray-600 cursor-not-allowed bg-gray-800/50' 
                    : 'text-white bg-gray-800 hover:bg-gray-700 hover:border-purple-500'
                }`}
              >
                <FiChevronRight size={20} />
              </button>
            </div>
          )}
        </div>
      )}
    </div>
  );
}

export default SharedProjectsPage;


================================================
FILE: frontend/src/pages/Users.js
================================================
// src/pages/Users.js

import React, { useState, useEffect, useRef } from 'react';
import api from '../services/api';
import { 
  FiMail, FiUserPlus, FiMoreVertical, FiEdit2, FiTrash2, 
  FiEye, FiChevronLeft, FiChevronRight, FiX, FiUser, FiCheck, FiSearch, FiLock
} from 'react-icons/fi';

function Users() {
  const [users, setUsers] = useState([]);
  const [loading, setLoading] = useState(true);
  const [currentPage, setCurrentPage] = useState(1);
  const [usersPerPage] = useState(6); 
  const [searchTerm, setSearchTerm] = useState(""); 
  const [openMenuUserId, setOpenMenuUserId] = useState(null);
  const [showModal, setShowModal] = useState(false);
  const [isSubmitting, setIsSubmitting] = useState(false);
  
  const [formData, setFormData] = useState({
    username: '',
    email: '',
    password: ''
  });

  const menuRef = useRef(null);

  // --- 1. VERÄ° Ã‡EKME ---
  useEffect(() => {
    fetchUsers();
  }, []);

  const fetchUsers = async () => {
    try {
      // DÃœZELTME: DoÄŸru adres '/api/auth/users'
      // api.js zaten localhost:5000'i ekliyor ve token'Ä± koyuyor.
      const response = await api.get('/api/auth/users');
      
      if (Array.isArray(response.data)) {
         const sortedUsers = response.data.sort((a, b) => new Date(b.created_at || Date.now()) - new Date(a.created_at || Date.now()));
         setUsers(sortedUsers);
      } else {
         setUsers([]);
      }
    } catch (err) {
      console.error("KullanÄ±cÄ±lar Ã§ekilemedi:", err);
      // Yetki hatasÄ± varsa (401) belki login sayfasÄ±na atmak gerekebilir ama ÅŸimdilik boÅŸ liste gÃ¶sterelim
      setUsers([]);
    } finally {
      setLoading(false);
    }
  };

  // --- 2. FÄ°LTRELEME & SAYFALAMA ---
  const filteredUsers = users.filter(user => 
    (user.username && user.username.toLowerCase().includes(searchTerm.toLowerCase())) ||
    (user.email && user.email.toLowerCase().includes(searchTerm.toLowerCase()))
  );

  const indexOfLastUser = currentPage * usersPerPage;
  const indexOfFirstUser = indexOfLastUser - usersPerPage;
  const currentUsers = filteredUsers.slice(indexOfFirstUser, indexOfLastUser);
  const totalPages = Math.ceil(filteredUsers.length / usersPerPage);
  
  const paginate = (pageNumber) => setCurrentPage(pageNumber);
  const handleSearch = (e) => { setSearchTerm(e.target.value); setCurrentPage(1); };

  // --- 3. KULLANICI EKLEME ---
  const handleInputChange = (e) => {
      setFormData({ ...formData, [e.target.name]: e.target.value });
  };

  const handleAddUser = async (e) => {
    e.preventDefault();
    setIsSubmitting(true);

    if (!formData.username || !formData.email || !formData.password) {
        alert("Please enter all fields.");
        setIsSubmitting(false);
        return;
    }

    try {
        const payload = {
            username: formData.username,
            email: formData.email,
            password: formData.password
        };

        // DÃœZELTME: DoÄŸru kayÄ±t adresi '/api/auth/register'
        const response = await api.post('/api/auth/register', payload);
        
        const newUser = response.data.user || response.data; 
        const userWithDate = { ...newUser, created_at: new Date().toISOString() };
        
        setUsers([userWithDate, ...users]);
        setShowModal(false);
        setFormData({ username: '', email: '', password: '' });
        
        alert(`User created successfully: ${newUser.username}`);

    } catch (err) {
        console.error(err);
        const msg = err.response?.data?.message || "Error creating user.";
        alert(msg);
    } finally {
        setIsSubmitting(false);
    }
  };

  // MenÃ¼ ve DÄ±ÅŸ TÄ±klama
  useEffect(() => {
    function handleClickOutside(event) {
      if (menuRef.current && !menuRef.current.contains(event.target)) {
        setOpenMenuUserId(null);
      }
    }
    document.addEventListener("mousedown", handleClickOutside);
    return () => { document.removeEventListener("mousedown", handleClickOutside); };
  }, [menuRef]);

  const toggleMenu = (id, e) => { 
      e.stopPropagation(); 
      setOpenMenuUserId(openMenuUserId === id ? null : id); 
  };

  if (loading) return <div className="p-10 text-center text-gray-400">Loading...</div>;

  return (
    <div className="flex flex-col h-[calc(100vh-100px)] container mx-auto max-w-6xl px-4 py-6">
      <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
        <div>
            <h1 className="text-2xl font-bold text-white">User Management</h1>
            <p className="text-sm text-gray-400 mt-1">Total <span className="text-white">{filteredUsers.length}</span> records.</p>
        </div>
        <div className="flex items-center gap-3 w-full md:w-auto">
            <div className="relative flex-1 md:w-64">
                <FiSearch className="absolute left-3 top-3 text-gray-500" />
                <input type="text" placeholder="Search users..." value={searchTerm} onChange={handleSearch} className="w-full bg-gray-800 border border-gray-700 text-gray-300 text-sm rounded-lg pl-10 pr-4 py-2.5 focus:border-blue-500 outline-none" />
            </div>
            <button onClick={() => setShowModal(true)} className="flex items-center px-4 py-2.5 bg-blue-600 hover:bg-blue-500 text-white rounded-lg shadow-lg font-medium whitespace-nowrap">
                <FiUserPlus className="mr-2" size={18} /> Add User
            </button>
        </div>
      </div>

      <div className="flex-1 bg-gray-800 rounded-xl border border-gray-700 shadow-xl overflow-hidden flex flex-col relative" ref={menuRef}>
        <div className="overflow-x-auto flex-1 custom-scrollbar">
          <table className="w-full text-left text-gray-300">
            <thead className="bg-gray-900/50 text-xs uppercase text-gray-400 font-semibold sticky top-0 z-10 backdrop-blur-sm">
              <tr>
                <th className="px-6 py-4">User</th>
                <th className="px-6 py-4">Email</th>
                <th className="px-6 py-4">Role</th>
                <th className="px-6 py-4 text-right">Date</th>
                <th className="px-6 py-4 w-10"></th>
              </tr>
            </thead>
            <tbody className="divide-y divide-gray-700/50">
              {currentUsers.length > 0 ? (
                  currentUsers.map((user) => (
                    <tr key={user.id} className="hover:bg-gray-700/30 transition-colors">
                      <td className="px-6 py-4">
                        <div className="flex items-center">
                          <div className="w-9 h-9 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold mr-3 text-sm">
                            {user.username?.charAt(0).toUpperCase()}
                          </div>
                          <span className="font-medium text-white">{user.username}</span>
                        </div>
                      </td>
                      <td className="px-6 py-4 text-sm text-gray-400 flex items-center">
                        <FiMail className="mr-2 opacity-50" /> {user.email}
                      </td>
                      <td className="px-6 py-4">
                        <span className={`text-[11px] font-bold px-2.5 py-1 rounded-full border ${user.role === 'admin' ? 'border-red-500/30 text-red-400 bg-red-500/10' : 'border-blue-500/30 text-blue-400 bg-blue-500/10'}`}>
                            {user.role ? user.role.toUpperCase() : 'STUDENT'}
                        </span>
                      </td>
                      <td className="px-6 py-4 text-right text-xs text-gray-500 font-mono">
                        {new Date(user.created_at || Date.now()).toLocaleDateString('en-US')}
                      </td>
                      <td className="px-6 py-4 relative">
                        <button onClick={(e) => toggleMenu(user.id, e)} className="p-2 rounded-full hover:bg-gray-600 text-gray-500">
                            <FiMoreVertical size={18} />
                        </button>
                        {openMenuUserId === user.id && (
                            <div className="absolute right-8 top-8 w-40 bg-gray-800 border border-gray-600 rounded-lg shadow-2xl z-50 animate-fade-in z-50">
                                <button className="w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 flex items-center"><FiEye className="mr-2"/> Details</button>
                                <button className="w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 flex items-center"><FiEdit2 className="mr-2"/> Edit</button>
                                <button className="w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-red-500/10 flex items-center"><FiTrash2 className="mr-2"/> Delete</button>
                            </div>
                        )}
                      </td>
                    </tr>
                  ))
              ) : (
                  <tr><td colSpan="5" className="p-10 text-center text-gray-500">No users found.</td></tr>
              )}
            </tbody>
          </table>
        </div>
        
        <div className="bg-gray-900/50 border-t border-gray-700 p-4 flex items-center justify-between">
            <span className="text-xs text-gray-500">Page {currentPage} of {totalPages || 1}</span>
            <div className="flex space-x-2">
                <button onClick={() => paginate(currentPage - 1)} disabled={currentPage === 1} className="p-2 rounded bg-gray-700 hover:bg-gray-600 disabled:opacity-50"><FiChevronLeft/></button>
                <button onClick={() => paginate(currentPage + 1)} disabled={currentPage === totalPages || totalPages === 0} className="p-2 rounded bg-gray-700 hover:bg-gray-600 disabled:opacity-50"><FiChevronRight/></button>
            </div>
        </div>
      </div>

      {showModal && (
        <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm animate-fade-in">
            <div className="bg-gray-800 border border-gray-700 rounded-2xl w-full max-w-md shadow-2xl p-6 relative">
                <button onClick={() => setShowModal(false)} className="absolute top-4 right-4 text-gray-400 hover:text-white"><FiX size={24} /></button>
                <h2 className="text-2xl font-bold text-white mb-2 flex items-center"><FiUserPlus className="mr-3 text-blue-500" /> New User</h2>
                <p className="text-sm text-gray-400 mb-6">Create a new student account.</p>
                <form onSubmit={handleAddUser} className="space-y-4">
                    <div className="relative"><div className="absolute top-0 left-0 flex items-center h-full pl-3 pointer-events-none"><FiUser className="w-5 h-5 text-gray-500" /></div><input type="text" name="username" required value={formData.username} onChange={handleInputChange} className="w-full py-2.5 pl-10 pr-4 text-gray-200 bg-gray-900 border border-gray-700 rounded-lg placeholder:text-gray-500 focus:outline-none focus:border-blue-500" placeholder="Username"/></div>
                    <div className="relative"><div className="absolute top-0 left-0 flex items-center h-full pl-3 pointer-events-none"><FiMail className="w-5 h-5 text-gray-500" /></div><input type="email" name="email" required value={formData.email} onChange={handleInputChange} className="w-full py-2.5 pl-10 pr-4 text-gray-200 bg-gray-900 border border-gray-700 rounded-lg placeholder:text-gray-500 focus:outline-none focus:border-blue-500" placeholder="Email"/></div>
                    <div className="relative"><div className="absolute top-0 left-0 flex items-center h-full pl-3 pointer-events-none"><FiLock className="w-5 h-5 text-gray-500" /></div><input type="password" name="password" required value={formData.password} onChange={handleInputChange} className="w-full py-2.5 pl-10 pr-4 text-gray-200 bg-gray-900 border border-gray-700 rounded-lg placeholder:text-gray-500 focus:outline-none focus:border-blue-500" placeholder="Password"/></div>
                    <button type="submit" disabled={isSubmitting} className="w-full bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg text-sm px-5 py-3 mt-4 flex justify-center items-center transition-colors">{isSubmitting ? 'Creating...' : <><FiCheck className="mr-2"/> Create User</>}</button>
                </form>
            </div>
        </div>
      )}
    </div>
  );
}

export default Users;


================================================
FILE: frontend/src/services/api.js
================================================
// frontend/src/services/api.js
import axios from 'axios';

const api = axios.create({
  baseURL: 'http://localhost:5000', // Backend adresiniz
  headers: {
    'Content-Type': 'application/json'
  }
});

// HER Ä°STEKTE TOKEN'I OTOMATÄ°K EKLE
api.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem('token'); // Login olurken kaydettiÄŸimiz token
    if (token) {
      config.headers['x-auth-token'] = token; // Backend bu baÅŸlÄ±ÄŸÄ± bekliyor
    }
    return config;
  },
  (error) => Promise.reject(error)
);

export default api;

