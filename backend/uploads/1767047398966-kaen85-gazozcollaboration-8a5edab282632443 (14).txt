Directory structure:
â””â”€â”€ kaen85-gazozcollaboration/
    â”œâ”€â”€ README.md
    â”œâ”€â”€ backend/
    â”‚   â”œâ”€â”€ db.js
    â”‚   â”œâ”€â”€ index.js
    â”‚   â”œâ”€â”€ package.json
    â”‚   â”œâ”€â”€ server.js
    â”‚   â”œâ”€â”€ tempCodeRunnerFile.js
    â”‚   â”œâ”€â”€ config/
    â”‚   â”‚   â””â”€â”€ db.js
    â”‚   â”œâ”€â”€ controllers/
    â”‚   â”‚   â”œâ”€â”€ authController.js
    â”‚   â”‚   â””â”€â”€ projectController.js
    â”‚   â”œâ”€â”€ middleware/
    â”‚   â”‚   â”œâ”€â”€ auth.js
    â”‚   â”‚   â””â”€â”€ authMiddleware.js
    â”‚   â”œâ”€â”€ models/
    â”‚   â”‚   â”œâ”€â”€ Project.js
    â”‚   â”‚   â””â”€â”€ User.js
    â”‚   â”œâ”€â”€ routes/
    â”‚   â”‚   â”œâ”€â”€ authRoutes.js
    â”‚   â”‚   â”œâ”€â”€ projectRoutes.js
    â”‚   â”‚   â””â”€â”€ users.js
    â”‚   â””â”€â”€ uploads/
    â”‚       â””â”€â”€ 1766483210992-Gazoz Collaboration Ã¢Â€Â“ Database Documentation.docx
    â””â”€â”€ frontend/
        â”œâ”€â”€ README.md
        â”œâ”€â”€ package.json
        â”œâ”€â”€ tailwind.config.js
        â”œâ”€â”€ public/
        â”‚   â”œâ”€â”€ index.html
        â”‚   â”œâ”€â”€ manifest.json
        â”‚   â””â”€â”€ robots.txt
        â””â”€â”€ src/
            â”œâ”€â”€ App.css
            â”œâ”€â”€ App.js
            â”œâ”€â”€ App.test.js
            â”œâ”€â”€ index.css
            â”œâ”€â”€ index.js
            â”œâ”€â”€ reportWebVitals.js
            â”œâ”€â”€ setupTests.js
            â”œâ”€â”€ components/
            â”‚   â”œâ”€â”€ auth/
            â”‚   â”‚   â””â”€â”€ ProtectedRoute.js
            â”‚   â”œâ”€â”€ layout/
            â”‚   â”‚   â”œâ”€â”€ Header.js
            â”‚   â”‚   â”œâ”€â”€ ProfileDropdown.js
            â”‚   â”‚   â”œâ”€â”€ RightSidebar.js
            â”‚   â”‚   â””â”€â”€ Sidebar.js
            â”‚   â””â”€â”€ projects/
            â”‚       â”œâ”€â”€ Comment.js
            â”‚       â”œâ”€â”€ CommentForm.js
            â”‚       â”œâ”€â”€ CommentList.js
            â”‚       â”œâ”€â”€ CreateProjectModal.js
            â”‚       â”œâ”€â”€ FileList.js
            â”‚       â”œâ”€â”€ IssueItem.js
            â”‚       â”œâ”€â”€ ProjectDiscussion.js
            â”‚       â”œâ”€â”€ ProjectEditPage.js
            â”‚       â”œâ”€â”€ ProjectFiles.js
            â”‚       â”œâ”€â”€ ProjectIssues.js
            â”‚       â”œâ”€â”€ ProjectList.js
            â”‚       â”œâ”€â”€ ProjectTasks.js
            â”‚       â””â”€â”€ SharedProjectCard.js
            â”œâ”€â”€ context/
            â”‚   â”œâ”€â”€ AuthContext.js
            â”‚   â”œâ”€â”€ ProjectContext.js
            â”‚   â””â”€â”€ ThemeContext.js
            â”œâ”€â”€ pages/
            â”‚   â”œâ”€â”€ DashboardLayout.js
            â”‚   â”œâ”€â”€ DashboardOverviewPage.js
            â”‚   â”œâ”€â”€ ForgotPasswordPage.js
            â”‚   â”œâ”€â”€ LandingPage.js
            â”‚   â”œâ”€â”€ LoginPage.js
            â”‚   â”œâ”€â”€ MyProjectsPage.js
            â”‚   â”œâ”€â”€ ProjectDetailPage.js
            â”‚   â”œâ”€â”€ RegisterPage.js
            â”‚   â”œâ”€â”€ ResetPasswordPage.js
            â”‚   â”œâ”€â”€ SettingsPage.js
            â”‚   â”œâ”€â”€ SharedProjectsPage.js
            â”‚   â””â”€â”€ Users.js
            â””â”€â”€ services/
                â””â”€â”€ api.js

================================================
FILE: README.md
================================================
# GazozCollaboration
ðŸŒ Project Hub
The Project Collaboration Hub (HUB) is a real-time digital workspace designed to centralize academic group project management. It eliminates the need for scattered tools by offering:

Task Management: Kanban board, task assignment, and status tracking.

Real-time Chat: Instant coordination via WebSockets.

Progress Tracking: Timeline view and automatic completion percentage.

Tech Stack: Built with React/Tailwind (Frontend) and a Node.js/Django API with PostgreSQL (Backend).

ðŸ§‘â€ðŸ’» The Team
Our team covers all key areas of the stack:

Role	Focus
Lead Backend Engineer	API, Database (PostgreSQL), and Real-time (WebSockets) setup.
Lead Frontend Developer	UI/UX, Component development (React/Tailwind), and state management.
DevOps & Integrations	Cloud deployment, File Storage (S3/Drive), and external tool integration.



================================================
FILE: backend/db.js
================================================
// backend/db.js
const { Pool } = require('pg');
require('dotenv').config(); // .env dosyasÄ±ndaki deÄŸiÅŸkenleri yÃ¼kler

// Yeni Pool yapÄ±landÄ±rmasÄ±
const pool = new Pool({
  user: process.env.PGUSER,
  host: process.env.PGHOST,
  database: process.env.PGDATABASE,
  password: process.env.PGPASSWORD,
  port: process.env.PGPORT,
  ssl: process.env.DATABASE_URL // Sadece Heroku/Render gibi servisler iÃ§in 'ssl' gerekir.
    ? { rejectUnauthorized: false } 
    : false, // Lokal 'localhost' baÄŸlantÄ±sÄ±nda ssl: false olmalÄ±
});

module.exports = {
Â  query: (text, params) => pool.query(text, params),
};


================================================
FILE: backend/index.js
================================================
const express = require('express');
const cors = require('cors');
const path = require('path');
require('dotenv').config();
const usersRouter = require("./routes/users");
const authRoutes = require('./routes/authRoutes');

const app = express();

// Middleware
app.use(cors());
app.use(express.json());

// === ROUTES ===
// Make sure this line exists and points to the file we edited:
app.use('/api/auth', require('./routes/authRoutes')); 
app.use('/api/projects', require('./routes/projectRoutes'));
app.use("/users", usersRouter);

// Serve Static Files (Uploads)
app.use('/uploads', express.static('uploads'));

const PORT = process.env.PORT || 5000;

app.listen(PORT, () => console.log(`Server started on port ${PORT}`));


================================================
FILE: backend/package.json
================================================
{
  "name": "project-collaboration-hub-backend",
  "version": "1.0.0",
  "description": "Backend API for the Project Collaboration Hub application.",
  "main": "index.js",
  "scripts": {
    "start": "node index.js",
    "dev": "nodemon index.js",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [
    "react",
    "node",
    "express",
    "postgresql",
    "collaboration"
  ],
  "author": "Kaan Kavas",
  "license": "ISC",
  "dependencies": {
    "bcryptjs": "^2.4.3",
    "cors": "^2.8.5",
    "dotenv": "^16.6.1",
    "express": "^4.18.2",
    "jsonwebtoken": "^9.0.2",
    "multer": "^2.0.2",
    "pg": "^8.16.3",
    "socket.io": "^4.6.1"
  },
  "devDependencies": {
    "nodemon": "^2.0.22"
  }
}



================================================
FILE: backend/server.js
================================================
const express = require('express');
const cors = require('cors');
const path = require('path');
require('dotenv').config();

const app = express();

app.use(cors());
app.use(express.json());

// Rotalar
app.use('/api/auth', require('./routes/authRoutes'));
app.use('/api/projects', require('./routes/projectRoutes')); // Az Ã¶nce gÃ¼ncellediÄŸimiz dosya

// Statik Dosyalar
app.use('/uploads', express.static('uploads'));

const PORT = process.env.PORT || 5000;
app.listen(PORT, () => console.log(`Server started on port ${PORT}`));


================================================
FILE: backend/tempCodeRunnerFile.js
================================================
app.listen(5000, () => console.log('Server 5000 portunda'));


================================================
FILE: backend/config/db.js
================================================
// PostgreSQL pool + schema bootstrap
import pkg from "pg";
import dotenv from "dotenv";
dotenv.config();
const { Pool } = pkg;

export const pool = new Pool({
  connectionString: process.env.DATABASE_URL || "postgresql://postgres:1234@localhost:5432/studentdb"
});

export async function ensureTables(){
  const c = await pool.connect();
  try{
    await c.query("BEGIN");
    await c.query(`CREATE TABLE IF NOT EXISTS users(
      id SERIAL PRIMARY KEY,
      name TEXT NOT NULL,
      email TEXT UNIQUE NOT NULL,
      password TEXT NOT NULL,
      created_at TIMESTAMP DEFAULT NOW()
    );`);
    await c.query(`CREATE TABLE IF NOT EXISTS projects(
      id SERIAL PRIMARY KEY,
      owner_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
      title TEXT NOT NULL,
      description TEXT,
      visibility TEXT NOT NULL DEFAULT 'private', -- 'private' or 'shared'
      created_at TIMESTAMP DEFAULT NOW()
    );`);
    await c.query("COMMIT");
  }catch(e){
    await c.query("ROLLBACK"); throw e;
  }finally{
    c.release();
  }
}



================================================
FILE: backend/controllers/authController.js
================================================
// backend/controllers/authController.js
const db = require('../db'); 
const crypto = require('crypto');
const bcrypt = require('bcryptjs'); 

// FORGOT PASSWORD
exports.forgotPassword = async (req, res) => {
    const { email } = req.body;
    if (!email) return res.status(400).json({ message: 'Please provide email.' });

    try {
        const userResult = await db.query('SELECT * FROM users WHERE email = $1', [email]);
        if (userResult.rowCount === 0) return res.status(404).json({ message: 'User not found.' });

        const resetToken = crypto.randomBytes(20).toString('hex');

        // SAVE THE TOKEN TO THE USER RECORD
        await db.query('UPDATE users SET reset_token = $1 WHERE email = $2', [resetToken, email]);

        const resetUrl = `http://localhost:3000/reset-password/${resetToken}`;
        console.log(`ðŸ”‘ LINK: ${resetUrl}`);

        return res.status(200).json({ message: 'Link generated. Check terminal.' });
    } catch (error) {
        res.status(500).json({ message: 'Server error.' });
    }
};

// RESET PASSWORD
exports.resetPassword = async (req, res) => {
    const { token, newPassword } = req.body;

    if (!token || !newPassword) {
        return res.status(400).json({ message: 'Token and new password are required.' });
    }

    try {
        const salt = await bcrypt.genSalt(10);
        const passwordHash = await bcrypt.hash(newPassword, salt);

        // FIND USER BY TOKEN AND UPDATE PASSWORD
        const updateQuery = `
            UPDATE users 
            SET password_hash = $1, reset_token = NULL 
            WHERE reset_token = $2 
            RETURNING id
        `;
        const result = await db.query(updateQuery, [passwordHash, token]); 

        if (result.rowCount === 0) {
            return res.status(404).json({ message: 'Invalid or expired token.' });
        }

        return res.status(200).json({ message: 'Your password has been successfully updated.' });
    } catch (error) {
        console.error(error);
        return res.status(500).json({ message: 'Error resetting password.' });
    }
};


================================================
FILE: backend/controllers/projectController.js
================================================
// Projects: create, list, details
import { createProject, listMyProjects, listSharedProjects, getProjectById } from "../models/Project.js";

// POST /api/projects  (auth required)
export async function create(req,res){
  try{
    const { title, description, visibility } = req.body;
    if(!title) return res.status(400).json({message:"Title is required"});
    const project = await createProject(req.user.id, { title, description, visibility });
    res.status(201).json({message:"Created", project});
  }catch(e){
    res.status(500).json({message:e.message});
  }
}

// GET /api/projects/mine  (auth required)
export async function mine(req,res){
  try{
    const projects = await listMyProjects(req.user.id);
    res.json({ projects });
  }catch(e){
    res.status(500).json({message:e.message});
  }
}

// GET /api/projects/shared  (public)
export async function shared(req, res) {
  try {
    // Ã–NEMLÄ°: listSharedProjects fonksiyonuna giriÅŸ yapan kullanÄ±cÄ±nÄ±n ID'sini gÃ¶nderiyoruz
    const projects = await listSharedProjects(req.user.id); 
    res.json({ projects });
  } catch (e) {
    res.status(500).json({ message: e.message });
  }
}

// GET /api/projects/:id  (auth required; owner or shared)
export async function details(req,res){
  try{
    const project = await getProjectById(req.params.id);
    if(!project) return res.status(404).json({message:"Not found"});
    if(project.visibility !== "shared" && project.owner_id !== req.user.id){
      return res.status(403).json({message:"Forbidden"});
    }
    res.json({ project });
  }catch(e){
    res.status(500).json({message:e.message});
  }
}




================================================
FILE: backend/middleware/auth.js
================================================
const jwt = require('jsonwebtoken');
require('dotenv').config();

module.exports = function(req, res, next) {
  const token = req.header('x-auth-token');

  if (!token) {
    return res.status(401).json({ message: 'No token, authorization denied' });
  }

  try {
    const secret = process.env.JWT_SECRET || 'mysecrettoken';
    const decoded = jwt.verify(token, secret);
    req.user = decoded.user;
    next();
  } catch (err) {
    res.status(401).json({ message: 'Token is not valid' });
  }
};


================================================
FILE: backend/middleware/authMiddleware.js
================================================
// backend/middleware/authMiddleware.js
const jwt = require('jsonwebtoken');
require('dotenv').config();

// This function is our "gatekeeper"
function authMiddleware(req, res, next) {
  // Get the token from the request header
  // It's usually sent as 'Bearer <token>'
  const authHeader = req.header('Authorization');

  if (!authHeader) {
    return res.status(401).json({ message: 'No token, authorization denied' });
  }

  // Check if it starts with 'Bearer '
  const token = authHeader.split(' ')[1];
  if (!token) {
    return res.status(401).json({ message: 'Token is malformed, authorization denied' });
  }

  try {
    // Verify the token using our secret key
    const decoded = jwt.verify(token, process.env.JWT_SECRET);

    // Token is valid. Add the user's information to the request object
    // Now any protected route can access req.user
    req.user = decoded.user;
    next(); // Pass control to the next function (the actual route handler)
  } catch (err) {
    res.status(401).json({ message: 'Token is not valid' });
  }
}

module.exports = authMiddleware;


================================================
FILE: backend/models/Project.js
================================================
// backend/models/Project.js
import { pool } from "../config/db.js";

/**
 * 1. SAHÄ°BÄ° OLDUÄžUNUZ PROJELER
 * Sadece sizin oluÅŸturduÄŸunuz projeleri getirir.
 */
export async function listMyProjects(ownerId) {
  const { rows } = await pool.query(
    "SELECT * FROM projects WHERE owner_id = $1 ORDER BY created_at DESC",
    [ownerId]
  );
  return rows;
}

/**
 * 2. ÃœYESÄ° OLDUÄžUNUZ PROJELER (Shared listesi iÃ§in)
 * Sahibi olmadÄ±ÄŸÄ±nÄ±z ama project_members tablosunda kaydÄ±nÄ±zÄ±n olduÄŸu projeleri getirir.
 * Bu sayede Ã¼yesi olmadÄ±ÄŸÄ±nÄ±z hiÃ§bir proje "My Projects" havuzuna sÄ±zamaz.
 */
export async function listSharedProjects(userId) {
  const { rows } = await pool.query(
    `SELECT p.*, pm.role as user_role 
     FROM projects p 
     INNER JOIN project_members pm ON p.id = pm.project_id 
     WHERE pm.user_id = $1 AND p.owner_id != $1 
     ORDER BY p.created_at DESC`,
    [userId]
  );
  return rows;
}

/**
 * 3. SADECE GENEL (PUBLIC) PROJELER
 * SharedProjectsPage (Public Explorer) iÃ§in kullanÄ±lÄ±r.
 * Sadece is_public = true olanlarÄ± getirir.
 */
export async function listPublicProjects() {
  const { rows } = await pool.query(
    "SELECT * FROM projects WHERE is_public = true ORDER BY created_at DESC"
  );
  return rows;
}

/**
 * PROJE OLUÅžTURMA
 */
export async function createProject(ownerId, { title, description, visibility }) {
  const { rows } = await pool.query(
    "INSERT INTO projects(owner_id, title, description, visibility) VALUES($1, $2, $3, $4) RETURNING *",
    [ownerId, title, description || null, visibility || "private"]
  );
  return rows[0];
}

/**
 * PROJE DETAYI
 */
export async function getProjectById(id) {
  const { rows } = await pool.query(
    "SELECT * FROM projects WHERE id = $1",
    [id]
  );
  return rows[0];
}


================================================
FILE: backend/models/User.js
================================================
import { pool } from "../config/db.js";
export async function findUserByEmail(email){
  const { rows } = await pool.query("SELECT * FROM users WHERE email=$1", [email]);
  return rows[0];
}
export async function createUser(name,email,hash){
  const { rows } = await pool.query(
    "INSERT INTO users(name,email,password) VALUES($1,$2,$3) RETURNING id,name,email,created_at",
    [name,email,hash]
  );
  return rows[0];
}



================================================
FILE: backend/routes/authRoutes.js
================================================
// backend/routes/authRoutes.js

const express = require('express');
const router = express.Router();
const db = require('../db'); 
const bcrypt = require('bcryptjs');
const jwt = require('jsonwebtoken');
const auth = require('../middleware/auth');
require('dotenv').config();
const authController = require('../controllers/authController');

// =========================================================
// 1. KULLANICI LÄ°STELEME
// URL: /api/auth/users
// =========================================================
router.get('/users', auth, async (req, res) => {
  try {
    const result = await db.query(
      'SELECT id, username, email, role, created_at FROM users ORDER BY created_at DESC'
    );
    res.json(result.rows);
  } catch (err) {
    console.error("Listeleme HatasÄ±:", err.message);
    res.status(500).send('Server Error');
  }
});

// =========================================================
// 2. KULLANICI KAYIT (REGISTER)
// URL: /api/auth/register
// =========================================================
router.post('/register', async (req, res) => {
  const { username, email, password, role } = req.body;

  if (!username || !email || !password) {
    return res.status(400).json({ message: 'Please enter all fields' });
  }

  try {
    const userCheck = await db.query('SELECT * FROM users WHERE username = $1 OR email = $2', [username, email]);
    if (userCheck.rows.length > 0) {
       return res.status(400).json({ message: 'Username or Email already exists' });
    }

    const salt = await bcrypt.genSalt(10);
    const passwordHash = await bcrypt.hash(password, salt);
    const userRole = role || 'student';

    const newUser = await db.query(
      'INSERT INTO users (username, email, password_hash, role) VALUES ($1, $2, $3, $4) RETURNING id, username, email, role',
      [username, email, passwordHash, userRole]
    );

    const payload = { user: { id: newUser.rows[0].id, role: newUser.rows[0].role } };

    jwt.sign(payload, process.env.JWT_SECRET || 'mysecrettoken', { expiresIn: '30d' }, (err, token) => {
        if (err) throw err;
        res.status(201).json({ message: 'User registered successfully', token, user: newUser.rows[0] });
    });
  } catch (err) {
    console.error("Register HatasÄ±:", err.message);
    res.status(500).send('Server error');
  }
});

// =========================================================
// 3. KULLANICI GÃœNCELLEME (UPDATE) - YENÄ° EKLENDÄ°
// URL: /api/auth/users/:id
// =========================================================
router.put('/users/:id', auth, async (req, res) => {
  const { id } = req.params;
  const { username, email, role, password } = req.body;

  console.log(`Update isteÄŸi geldi: ID=${id}, User=${username}, Role=${role}`);

  try {
    // 1. KullanÄ±cÄ± var mÄ±?
    const userCheck = await db.query('SELECT * FROM users WHERE id = $1', [id]);
    if (userCheck.rows.length === 0) {
      return res.status(404).json({ message: 'User not found' });
    }

    // 2. Sorguyu HazÄ±rla
    let query = 'UPDATE users SET username = $1, email = $2, role = $3';
    let values = [username, email, role];
    let counter = 4;

    // Åžifre varsa gÃ¼ncelle, yoksa dokunma
    if (password && password.trim() !== '') {
      const salt = await bcrypt.genSalt(10);
      const passwordHash = await bcrypt.hash(password, salt);
      query += `, password_hash = $${counter}`;
      values.push(passwordHash);
      counter++;
    }

    query += ` WHERE id = $${counter} RETURNING id, username, email, role`;
    values.push(id);

    // 3. VeritabanÄ±nÄ± GÃ¼ncelle
    const updatedUser = await db.query(query, values);
    
    console.log("KullanÄ±cÄ± gÃ¼ncellendi:", updatedUser.rows[0]);
    res.json(updatedUser.rows[0]);

  } catch (err) {
    console.error("Update Error:", err.message);
    res.status(500).send('Server Error');
  }
});

// =========================================================
// 4. GÄ°RÄ°Åž (LOGIN)
// =========================================================
router.post('/login', async (req, res) => {
  const { username, password } = req.body;
  if (!username || !password) return res.status(400).json({ message: 'Please enter all fields' });

  try {
    const userResult = await db.query('SELECT * FROM users WHERE username = $1', [username]);
    if (userResult.rows.length === 0) return res.status(400).json({ message: 'Invalid credentials' });

    const user = userResult.rows[0];
    const isMatch = await bcrypt.compare(password, user.password_hash);
    if (!isMatch) return res.status(400).json({ message: 'Invalid credentials' });

    const payload = { user: { id: user.id, role: user.role } };
    jwt.sign(payload, process.env.JWT_SECRET || 'mysecrettoken', { expiresIn: '30d' }, (err, token) => {
      if (err) throw err;
      res.json({ token, user: { id: user.id, username: user.username, email: user.email, role: user.role } });
    });
  } catch (err) { res.status(500).send('Server error'); }
});

// =========================================================
// 5. USER INFO, FORGOT & RESET PASSWORD
// =========================================================
router.get('/user', auth, async (req, res) => {
    try {
      const user = await db.query('SELECT id, username, email, role FROM users WHERE id = $1', [req.user.id]);
      res.json(user.rows[0]);
    } catch (err) { res.status(500).send('Server Error'); }
});

router.delete('/users/:id', auth, async (req, res) => {
  const { id } = req.params;

  try {
    // 1. KullanÄ±cÄ± var mÄ± kontrol et
    const userCheck = await db.query('SELECT * FROM users WHERE id = $1', [id]);
    if (userCheck.rows.length === 0) {
      return res.status(404).json({ message: 'User not found' });
    }

    // 2. Kendi hesabÄ±nÄ± silmesini engellemek isteyebilirsiniz (Opsiyonel)
    if (req.user.id === parseInt(id)) {
      return res.status(400).json({ message: 'You cannot delete your own admin account.' });
    }

    // 3. KullanÄ±cÄ±yÄ± sil
    await db.query('DELETE FROM users WHERE id = $1', [id]);
    
    console.log(`User with ID ${id} has been deleted.`);
    res.json({ message: 'User deleted successfully' });

  } catch (err) {
    console.error("Delete Error:", err.message);
    res.status(500).send('Server Error');
  }
});

router.post('/forgot-password', authController.forgotPassword);
router.post('/reset-password', authController.resetPassword);

module.exports = router;


================================================
FILE: backend/routes/projectRoutes.js
================================================
const express = require('express');
const router = express.Router();
const db = require('../db'); 
const multer = require('multer');
const path = require('path');
const auth = require('../middleware/auth'); 

// === MULTER AYARLARI ===
const storage = multer.diskStorage({
  destination: (req, file, cb) => cb(null, 'uploads/'),
  filename: (req, file, cb) => cb(null, Date.now() + '-' + file.originalname)
});
const upload = multer({ storage: storage });

// =================================
// YETKÄ° KONTROLÃœ (MIDDLEWARE)
// =================================
const checkProjectMember = async (req, res, next) => {
  try {
    const projectId = req.params.id; 
    const userId = req.user.id; 
    const userRole = req.user.role; 

    const projectCheck = await db.query(
      'SELECT is_public, owner_id, is_tasks_public FROM projects WHERE id = $1',
      [projectId]
    );

    if (projectCheck.rows.length === 0) {
      return res.status(404).json({ message: 'Project not found.' });
    }

    const project = projectCheck.rows[0];

    if (userRole === 'admin') {
        req.projectId = projectId;
        req.memberRole = 'owner'; 
        req.projectSettings = project; 
        return next();
    }

    const memberCheck = await db.query(
      'SELECT role FROM project_members WHERE project_id = $1 AND user_id = $2',
      [projectId, userId]
    );

    const memberRole = memberCheck.rows[0]?.role; 

    if (memberRole) {
      req.projectId = projectId;
      req.memberRole = memberRole;
      req.projectSettings = project; 
      next();
    } else if (project.is_public) {
      req.projectId = projectId;
      req.memberRole = 'public_viewer';
      req.projectSettings = project;
      next();
    } else {
      return res.status(403).json({ message: 'Access Denied.' });
    }
  } catch (err) {
    console.error(err.message);
    res.status(500).send('Server Error');
  }
};

// =================================
// 1. PROJE LÄ°STELEME (GÃœVENLÄ° ROTALAR)
// =================================

// @route   GET /api/projects/my-projects (SAHÄ°BÄ° OLDUKLARIN)
router.get('/my-projects', auth, async (req, res) => {
  try {
    const projects = await db.query(`
      SELECT * FROM projects
      WHERE owner_id = $1
      ORDER BY last_updated_at DESC
    `, [req.user.id]);
    
    // Log atarak terminalden kontrol et: console.log("Owned Projects:", projects.rows);
    res.json(projects.rows);
  } catch (err) {
    res.status(500).send('Server error');
  }
});

// @route   GET /api/projects/shared-projects (ÃœYESÄ° OLDUKLARIN - KESÄ°N KONTROL)
router.get('/shared-projects', auth, async (req, res) => {
  try {
    // Sadece project_members tablosunda kaydÄ± olanlarÄ± getirir. 
    // Ãœye olmadÄ±ÄŸÄ±n public projeler bu sorguya asla giremez.
    const projects = await db.query(`
      SELECT p.*, pm.role as user_role, pm.joined_at, u.username as owner_name
      FROM projects p
      INNER JOIN project_members pm ON p.id = pm.project_id
      INNER JOIN users u ON p.owner_id = u.id
      WHERE pm.user_id = $1 AND p.owner_id != $1
      ORDER BY p.last_updated_at DESC
    `, [req.user.id]);
    res.json(projects.rows);
  } catch (err) {
    res.status(500).send('Server error');
  }
});

// @route   GET /api/projects/public-explorer (SADECE TÃœM PUBLIC PROJELER)
router.get('/public-explorer', auth, async (req, res) => {
  try {
    const projects = await db.query(`
      SELECT p.*, u.username as owner_name
      FROM projects p
      JOIN users u ON p.owner_id = u.id
      WHERE p.is_public = true
      ORDER BY p.created_at DESC
    `);
    res.json(projects.rows);
  } catch (err) {
    console.error(err.message);
    res.status(500).send('Server Error');
  }
});

// @route   GET /api/projects/user/all-tasks
router.get('/user/all-tasks', auth, async (req, res) => {
  const userId = req.user.id;
  try {
    const query = `
      SELECT t.id, t.title, t.status, t.due_date, t.created_at, p.id as project_id, p.name as project_name
      FROM project_tasks t
      JOIN projects p ON t.project_id = p.id
      JOIN project_members pm ON p.id = pm.project_id
      WHERE pm.user_id = $1
      ORDER BY t.created_at DESC
      LIMIT 10
    `;
    const result = await db.query(query, [userId]);
    res.json(result.rows);
  } catch (err) {
    res.status(500).send('Server Error');
  }
});

// =================================
// 2. PROJE TEMEL Ä°ÅžLEMLERÄ°
// =================================

router.post('/', auth, async (req, res) => {
  const { name, description } = req.body;
  const ownerId = req.user.id; 
  try {
    const existingProject = await db.query('SELECT id FROM projects WHERE name = $1', [name]);
    if (existingProject.rows.length > 0) return res.status(400).json({ message: 'A project with this name already exists.' });
    await db.query('BEGIN'); 
    const newProject = await db.query('INSERT INTO projects (name, description, owner_id) VALUES ($1, $2, $3) RETURNING * ', [name, description, ownerId]);
    const projectId = newProject.rows[0].id;
    await db.query('INSERT INTO project_members (project_id, user_id, role) VALUES ($1, $2, $3)', [projectId, ownerId, 'owner']);
    await db.query('COMMIT'); 
    res.status(201).json(newProject.rows[0]);
  } catch (err) {
    await db.query('ROLLBACK'); 
    res.status(500).send('Server error');
  }
});

router.get('/:id', auth, checkProjectMember, async (req, res) => {
  try {
    const project = await db.query('SELECT * FROM projects WHERE id = $1', [req.projectId]);
    const data = project.rows[0];
    data.currentUserRole = req.memberRole; 
    res.json(data);
  } catch (err) { res.status(500).send('Server error'); }
});

router.put('/:id', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole !== 'owner') return res.status(403).json({ message: 'Only owner can edit.' });
  const { name, description, long_description } = req.body;
  try {
    const updatedProject = await db.query('UPDATE projects SET name = $1, description = $2, long_description = $3, last_updated_at = NOW() WHERE id = $4 RETURNING *', [name, description, long_description, req.projectId]);
    const projectData = updatedProject.rows[0];
    projectData.currentUserRole = req.memberRole;
    res.json(projectData);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.delete('/:id', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole !== 'owner') return res.status(403).json({ message: 'Only owner can delete.' });
  try {
    await db.query('DELETE FROM projects WHERE id = $1', [req.projectId]);
    res.json({ message: 'Project deleted successfully' });
  } catch (err) { res.status(500).send('Server Error'); }
});

router.put('/:id/visibility', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole !== 'owner') return res.status(403).json({ message: 'Only owner.' });
  try {
    const upd = await db.query('UPDATE projects SET is_public = $1 WHERE id = $2 RETURNING *', [req.body.is_public, req.projectId]);
    const data = upd.rows[0];
    data.currentUserRole = req.memberRole;
    res.json(data);
  } catch (err) { res.status(500).send('Server Error'); }
});

// =================================
// 3. TASKS
// =================================

router.get('/:id/tasks', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole === 'public_viewer' && !req.projectSettings.is_tasks_public) return res.status(403).json({ message: 'Tasks are private.' });
  try {
    const tasks = await db.query('SELECT t.*, u.username as created_by_name FROM project_tasks t LEFT JOIN users u ON t.assignee_id = u.id WHERE t.project_id = $1 ORDER BY t.created_at ASC', [req.projectId]);
    res.json(tasks.rows);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.post('/:id/tasks', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole === 'public_viewer') return res.status(403).json({ message: 'Read-only.' });
  const { title, description, status, due_date } = req.body;
  try {
    const newTask = await db.query('INSERT INTO project_tasks (project_id, title, description, status, due_date, assignee_id) VALUES ($1, $2, $3, $4, $5, $6) RETURNING *', [req.projectId, title, description, status || 'todo', due_date, req.user.id]);
    const user = await db.query('SELECT username FROM users WHERE id = $1', [req.user.id]);
    const taskObj = newTask.rows[0];
    taskObj.created_by_name = user.rows[0].username;
    res.status(201).json(taskObj);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.put('/:id/tasks/:taskId', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole === 'public_viewer') return res.status(403).json({ message: 'Read-only.' });
  const { title, status } = req.body;
  const { taskId } = req.params;
  try {
    let q, p;
    if (status) { q = 'UPDATE project_tasks SET status = $1 WHERE id = $2 RETURNING *'; p = [status, taskId]; }
    else { q = 'UPDATE project_tasks SET title = $1 WHERE id = $2 RETURNING *'; p = [title, taskId]; }
    const upd = await db.query(q, p);
    const taskObj = upd.rows[0];
    const user = await db.query('SELECT username FROM users WHERE id = $1', [taskObj.assignee_id]);
    taskObj.created_by_name = user.rows.length > 0 ? user.rows[0].username : 'Unknown';
    res.json(taskObj);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.delete('/:id/tasks/:taskId', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole === 'public_viewer') return res.status(403).json({ message: 'Read-only.' });
  try {
    await db.query('DELETE FROM project_tasks WHERE id = $1', [req.params.taskId]);
    res.json({ message: 'Deleted' });
  } catch (err) { res.status(500).send('Server Error'); }
});

// =================================
// 4. ISSUES
// =================================

router.get('/:id/issues', auth, checkProjectMember, async (req, res) => {
  try {
    const issues = await db.query('SELECT pi.*, u.username as created_by_name FROM project_issues pi JOIN users u ON pi.created_by_id = u.id WHERE pi.project_id = $1 ORDER BY pi.created_at DESC', [req.projectId]);
    res.json(issues.rows);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.post('/:id/issues', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole === 'viewer' || req.memberRole === 'public_viewer') return res.status(403).json({ message: 'No permission.' });
  try {
    const newIssue = await db.query('INSERT INTO project_issues (project_id, created_by_id, text) VALUES ($1, $2, $3) RETURNING *', [req.projectId, req.user.id, req.body.text]);
    const user = await db.query('SELECT username FROM users WHERE id = $1', [req.user.id]);
    const result = newIssue.rows[0];
    result.created_by_name = user.rows[0].username;
    res.status(201).json(result);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.put('/:id/issues/:issueId', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole !== 'owner' && req.memberRole !== 'editor') return res.status(403).json({ message: 'No permission.' });
  const { text, status } = req.body;
  try {
    let q, p;
    if (text !== undefined) { q = 'UPDATE project_issues SET text = $1 WHERE id = $2 RETURNING *'; p = [text, req.params.issueId]; }
    else { q = 'UPDATE project_issues SET status = $1 WHERE id = $2 RETURNING *'; p = [status, req.params.issueId]; }
    const upd = await db.query(q, p);
    const result = upd.rows[0];
    const userResult = await db.query('SELECT username FROM users WHERE id = $1', [result.created_by_id]);
    result.created_by_name = userResult.rows[0].username;
    res.json(result);
  } catch (err) { res.status(500).send('Server Error'); }
});

// =================================
// 5. COMMENTS & MEMBERS & FILES
// =================================

router.get('/:id/comments', auth, checkProjectMember, async (req, res) => {
  try {
    const comments = await db.query('SELECT c.*, u.username as author_name, c.likes_user_ids FROM comments c JOIN users u ON c.author_id = u.id WHERE c.project_id = $1 AND c.issue_id IS NULL ORDER BY c.created_at ASC', [req.projectId]);
    res.json(comments.rows);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.post('/:id/comments', auth, checkProjectMember, async (req, res) => {
  try {
    const newComment = await db.query('INSERT INTO comments (project_id, author_id, text) VALUES ($1, $2, $3) RETURNING *', [req.projectId, req.user.id, req.body.text]);
    const user = await db.query('SELECT username FROM users WHERE id = $1', [req.user.id]);
    const result = newComment.rows[0];
    result.author_name = user.rows[0].username;
    result.likes_user_ids = [];
    res.status(201).json(result);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.get('/:id/members', auth, checkProjectMember, async (req, res) => {
  try {
    const m = await db.query('SELECT u.id, u.username, pm.role FROM project_members pm LEFT JOIN users u ON pm.user_id = u.id WHERE pm.project_id = $1', [req.projectId]);
    res.json(m.rows);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.post('/:id/members', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole !== 'owner' && req.memberRole !== 'editor') return res.status(403).json({message:'Denied'});
  const { username, role } = req.body;
  try {
    const u = await db.query('SELECT id FROM users WHERE username = $1', [username]);
    if(u.rows.length===0) return res.status(404).json({message:'User not found'});
    const uid = u.rows[0].id;
    const check = await db.query('SELECT * FROM project_members WHERE project_id=$1 AND user_id=$2', [req.projectId, uid]);
    if(check.rows.length>0) return res.status(400).json({message:'Already member'});
    const nm = await db.query('INSERT INTO project_members (project_id, user_id, role) VALUES ($1, $2, $3) RETURNING role', [req.projectId, uid, role]);
    res.status(201).json({id: uid, username, role: nm.rows[0].role});
  } catch (err) { res.status(500).send('Server Error'); }
});

router.delete('/:id/members/:userId', auth, checkProjectMember, async (req, res) => {
  if (req.memberRole !== 'owner') return res.status(403).json({message:'Denied'});
  if (req.params.userId === req.user.id) return res.status(400).json({message:'Cannot remove owner'});
  try {
    const del = await db.query('DELETE FROM project_members WHERE project_id=$1 AND user_id=$2 RETURNING *', [req.projectId, req.params.userId]);
    if(del.rows.length===0) return res.status(404).json({message:'Not found'});
    res.json({message:'Removed'});
  } catch (err) { res.status(500).send('Server Error'); }
});

router.get('/:id/files', auth, checkProjectMember, async (req, res) => {
  try {
    const f = await db.query('SELECT pf.*, u.username as uploader_name FROM project_files pf JOIN users u ON pf.uploader_id = u.id WHERE pf.project_id = $1 ORDER BY pf.created_at DESC', [req.projectId]);
    res.json(f.rows);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.post('/:id/files', auth, checkProjectMember, upload.single('file'), async (req, res) => {
  if(req.memberRole!=='owner' && req.memberRole!=='editor') return res.status(403).json({message:'Denied'});
  if(!req.file) return res.status(400).json({message:'No file'});
  try {
    const nf = await db.query('INSERT INTO project_files (project_id, uploader_id, filename, file_path, file_type) VALUES ($1, $2, $3, $4, $5) RETURNING *', [req.projectId, req.user.id, req.file.originalname, req.file.path, req.file.mimetype]);
    const u = await db.query('SELECT username FROM users WHERE id=$1', [req.user.id]);
    const r = nf.rows[0];
    r.uploader_name = u.rows[0].username;
    res.status(201).json(r);
  } catch (err) { res.status(500).send('Server Error'); }
});

router.delete('/:id/files/:fileId', auth, checkProjectMember, async (req, res) => {
  if(req.memberRole!=='owner' && req.memberRole!=='editor') return res.status(403).json({message:'Denied'});
  try {
    await db.query('DELETE FROM project_files WHERE id=$1', [req.params.fileId]);
    res.json({message:'Deleted'});
  } catch (err) { res.status(500).send('Server Error'); }
});

// backend/routes/projectRoutes.js
// TÃ¼m projeleri getiren admin listesi
router.get('/admin/all-projects', auth, async (req, res) => {
  try {
    const [projects] = await db.execute(`
      SELECT 
        p.id, 
        p.name, 
        u.username as owner_name 
      FROM projects p 
      LEFT JOIN users u ON p.owner_id = u.id 
      ORDER BY p.updated_at DESC
    `);
    res.json(projects);
  } catch (err) {
    console.error("Database Error:", err);
    res.status(500).json({ message: "Internal server error" });
  }
});

module.exports = router;


================================================
FILE: backend/routes/users.js
================================================
const router = require("express").Router();
const pool = require("../db"); // VeritabanÄ± baÄŸlantÄ± dosyanÄ±zÄ±n yolu (db.js veya index.js olabilir)
//const authorization = require("../middleware/auth"); // Varsa yetki kontrolÃ¼

// GET /users - TÃ¼m kullanÄ±cÄ±larÄ± getir
router.get("/", async (req, res) => {
  try {
    // VeritabanÄ±ndaki 'users' tablosundan verileri Ã§ekiyoruz
    // Åžifreyi (user_password) gÃ¼venlik iÃ§in Ã§ekmiyoruz
    const allUsers = await pool.query(
      "SELECT id, username, email as email, role, created_at FROM users"
    );
    
    // Frontend'e JSON olarak gÃ¶nderiyoruz
    res.json(allUsers.rows);
  } catch (err) {
    console.error(err.message);
    res.status(500).send("Server Error");
  }
});

module.exports = router;


================================================
FILE: backend/uploads/1766483210992-Gazoz Collaboration Ã¢Â€Â“ Database Documentation.docx
================================================
[Binary file]


================================================
FILE: frontend/README.md
================================================
# Getting Started with Create React App

This project was bootstrapped with [Create React App](https://github.com/facebook/create-react-app).

## Available Scripts

In the project directory, you can run:

### `npm start`

Runs the app in the development mode.\
Open [http://localhost:3000](http://localhost:3000) to view it in your browser.

The page will reload when you make changes.\
You may also see any lint errors in the console.

### `npm test`

Launches the test runner in the interactive watch mode.\
See the section about [running tests](https://facebook.github.io/create-react-app/docs/running-tests) for more information.

### `npm run build`

Builds the app for production to the `build` folder.\
It correctly bundles React in production mode and optimizes the build for the best performance.

The build is minified and the filenames include the hashes.\
Your app is ready to be deployed!

See the section about [deployment](https://facebook.github.io/create-react-app/docs/deployment) for more information.

### `npm run eject`

**Note: this is a one-way operation. Once you `eject`, you can't go back!**

If you aren't satisfied with the build tool and configuration choices, you can `eject` at any time. This command will remove the single build dependency from your project.

Instead, it will copy all the configuration files and the transitive dependencies (webpack, Babel, ESLint, etc) right into your project so you have full control over them. All of the commands except `eject` will still work, but they will point to the copied scripts so you can tweak them. At this point you're on your own.

You don't have to ever use `eject`. The curated feature set is suitable for small and middle deployments, and you shouldn't feel obligated to use this feature. However we understand that this tool wouldn't be useful if you couldn't customize it when you are ready for it.

## Learn More

You can learn more in the [Create React App documentation](https://facebook.github.io/create-react-app/docs/getting-started).

To learn React, check out the [React documentation](https://reactjs.org/).

### Code Splitting

This section has moved here: [https://facebook.github.io/create-react-app/docs/code-splitting](https://facebook.github.io/create-react-app/docs/code-splitting)

### Analyzing the Bundle Size

This section has moved here: [https://facebook.github.io/create-react-app/docs/analyzing-the-bundle-size](https://facebook.github.io/create-react-app/docs/analyzing-the-bundle-size)

### Making a Progressive Web App

This section has moved here: [https://facebook.github.io/create-react-app/docs/making-a-progressive-web-app](https://facebook.github.io/create-react-app/docs/making-a-progressive-web-app)

### Advanced Configuration

This section has moved here: [https://facebook.github.io/create-react-app/docs/advanced-configuration](https://facebook.github.io/create-react-app/docs/advanced-configuration)

### Deployment

This section has moved here: [https://facebook.github.io/create-react-app/docs/deployment](https://facebook.github.io/create-react-app/docs/deployment)

### `npm run build` fails to minify

This section has moved here: [https://facebook.github.io/create-react-app/docs/troubleshooting#npm-run-build-fails-to-minify](https://facebook.github.io/create-react-app/docs/troubleshooting#npm-run-build-fails-to-minify)



================================================
FILE: frontend/package.json
================================================
{
  "name": "frontend",
  "version": "0.1.0",
  "private": true,
  "dependencies": {
    "@testing-library/dom": "^10.4.1",
    "@testing-library/jest-dom": "^6.9.1",
    "@testing-library/react": "^16.3.0",
    "@testing-library/user-event": "^13.5.0",
    "axios": "^1.12.2",
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "react-icons": "^5.5.0",
    "react-router-dom": "^7.11.0",
    "react-scripts": "5.0.1",
    "web-vitals": "^2.1.4"
  },
  "scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test",
    "eject": "react-scripts eject"
  },
  "eslintConfig": {
    "extends": [
      "react-app",
      "react-app/jest"
    ]
  },
  "browserslist": {
    "production": [
      ">0.2%",
      "not dead",
      "not op_mini all"
    ],
    "development": [
      "last 1 chrome version",
      "last 1 firefox version",
      "last 1 safari version"
    ]
  },
  "devDependencies": {
    "autoprefixer": "^10.4.21",
    "postcss": "^8.5.6",
    "tailwindcss": "^3.3.3"
  }
}



================================================
FILE: frontend/tailwind.config.js
================================================
/** @type {import('tailwindcss').Config} */
module.exports = {
  // Dark mode'u 'class' stratejisine Ã§ekiyoruz (ThemeContext ile uyumlu olmasÄ± iÃ§in)
  darkMode: 'class', 
  content: [
    "./src/**/*.{js,jsx,ts,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        // Kendi semantik renklerimizi ekliyoruz
        // ArtÄ±k bg-gray-900 yerine bg-app kullanacaÄŸÄ±z
        app: 'var(--bg-app)',
        surface: 'var(--bg-surface)',
        'surface-hover': 'var(--bg-surface-hover)',
        
        // Metinler
        'text-main': 'var(--text-main)',
        'text-secondary': 'var(--text-secondary)',
        'text-inverted': 'var(--text-inverted)',

        // Ã‡izgiler
        border: 'var(--border-color)',

        // Ana Renk (Primary) - Mevcut blue/indigo yerine bunu kullan
        primary: {
          DEFAULT: 'var(--primary)',
          hover: 'var(--primary-hover)',
        }
      },
    },
  },
  plugins: [],
}


================================================
FILE: frontend/public/index.html
================================================
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/logo192.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <title>
     
      GazozHub</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
  </body>
</html>



================================================
FILE: frontend/public/manifest.json
================================================
{
  "short_name": "React App",
  "name": "Create React App Sample",
  "icons": [
    {
      "src": "favicon.ico",
      "sizes": "64x64 32x32 24x24 16x16",
      "type": "image/x-icon"
    },
    {
      "src": "logo192.png",
      "type": "image/png",
      "sizes": "192x192"
    },
    {
      "src": "logo512.png",
      "type": "image/png",
      "sizes": "512x512"
    }
  ],
  "start_url": ".",
  "display": "standalone",
  "theme_color": "#000000",
  "background_color": "#ffffff"
}



================================================
FILE: frontend/public/robots.txt
================================================
# https://www.robotstxt.org/robotstxt.html
User-agent: *
Disallow:



================================================
FILE: frontend/src/App.css
================================================
/* â˜€ï¸ VarsayÄ±lan (LIGHT MODE) */
:root {
  /* Arka Planlar */
  --bg-app: #F8FAFC;        /* Soft Slate */
  --bg-surface: #FFFFFF;    /* Beyaz */
  
  /* Metinler */
  --text-main: #1E293B;     /* Koyu Gri/Mavi */
  --text-secondary: #64748B; /* Orta Gri */
  
  /* Marka Rengi */
  --primary: #4F46E5;       /* Ä°ndigo */
  --primary-text: #FFFFFF;  /* Buton yazÄ± rengi */
  
  /* Ã‡izgiler */
  --border-color: #E2E8F0;  /* AÃ§Ä±k Gri */
}

/* ðŸŒ™ KaranlÄ±k Mod (DARK MODE) */
body.dark-mode {
  /* Arka Planlar - Light'Ä±n tam tersi koyu tonlar */
  --bg-app: #0F172A;        /* Ã‡ok koyu lacivert (Slate 900) */
  --bg-surface: #1E293B;    /* Kartlar iÃ§in biraz daha aÃ§Ä±k (Slate 800) */
  
  /* Metinler - Koyu zemin Ã¼zerinde aÃ§Ä±k renkler */
  --text-main: #F1F5F9;     /* KÄ±rÄ±k Beyaz */
  --text-secondary: #94A3B8; /* AÃ§Ä±k Gri (Slate 400) */
  
  /* Marka Rengi */
  --primary: #6366F1;       /* Ä°ndigo'nun bir tÄ±k parlaÄŸÄ± (KaranlÄ±kta daha iyi okunur) */
  --primary-text: #FFFFFF;
  
  /* Ã‡izgiler */
  --border-color: #334155;  /* Koyu Gri Ã§izgi */
}

/* GENEL AYARLAR ve GEÃ‡Ä°Åž EFEKTÄ° */
body {
  background-color: var(--bg-app);
  color: var(--text-main);
  font-family: 'Inter', sans-serif;
  margin: 0;
  
  /* Renk deÄŸiÅŸiminde yumuÅŸak geÃ§iÅŸ (Animasyon) */
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Kartlar ve Kutular iÃ§in genel sÄ±nÄ±f */
.card, .box, .navbar {
  background-color: var(--bg-surface);
  border: 1px solid var(--border-color);
  transition: background-color 0.3s ease, border-color 0.3s ease;
}

.App {
  text-align: center;
}

.App-logo {
  height: 40vmin;
  pointer-events: none;
}

@media (prefers-reduced-motion: no-preference) {
  .App-logo {
    animation: App-logo-spin infinite 20s linear;
  }
}

.App-header {
  background-color: #282c34;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  font-size: calc(10px + 2vmin);
  color: white;
}

.App-link {
  color: #61dafb;
}

@keyframes App-logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}



================================================
FILE: frontend/src/App.js
================================================
import React from 'react';
import { Routes, Route, Navigate } from 'react-router-dom';

// Context Providers
import { AuthProvider } from './context/AuthContext';
import { ProjectProvider } from './context/ProjectContext';
import { ThemeProvider } from './context/ThemeContext';

// Auth Components
import ProtectedRoute from './components/auth/ProtectedRoute';

// Pages - Public
import LandingPage from './pages/LandingPage';
import LoginPage from './pages/LoginPage';
import RegisterPage from './pages/RegisterPage';
import ForgotPasswordPage from './pages/ForgotPasswordPage';
import ResetPasswordPage from './pages/ResetPasswordPage';

// Pages - Dashboard & Layout
import DashboardLayout from './pages/DashboardLayout';
import DashboardOverviewPage from './pages/DashboardOverviewPage';
import MyProjectsPage from './pages/MyProjectsPage';
import SharedProjectsPage from './pages/SharedProjectsPage';
import SettingsPage from './pages/SettingsPage';
import Users from './pages/Users';

// Pages - Project Details & Tabs
import ProjectDetailPage from './pages/ProjectDetailPage';
import ProjectFiles from './components/projects/ProjectFiles';
import ProjectTasks from './components/projects/ProjectTasks';
import ProjectIssues from './components/projects/ProjectIssues';
import ProjectDiscussion from './components/projects/ProjectDiscussion';
import ProjectEditPage from './components/projects/ProjectEditPage';

function App() {
  return (
    <ThemeProvider>
      <AuthProvider>
        <ProjectProvider>
          
          <Routes>
            {/* === DEÄžÄ°ÅžÄ°KLÄ°K BURADA BAÅžLIYOR === */}
            
            {/* 1. EÄŸer kullanÄ±cÄ± kÃ¶k dizine (localhost:3000/) gelirse, /home'a yÃ¶nlendir */}
            <Route path="/" element={<Navigate to="/home" replace />} />

            {/* 2. LandingPage artÄ±k /home adresinde Ã§alÄ±ÅŸÄ±yor */}
            <Route path="/home" element={<LandingPage />} />

            {/* === DEÄžÄ°ÅžÄ°KLÄ°K BURADA BÄ°TÄ°YOR === */}

            <Route path="/login" element={<LoginPage />} />
            <Route path="/register" element={<RegisterPage />} />
            <Route path="/forgot-password" element={<ForgotPasswordPage />} />
            <Route path="/reset-password/:token" element={<ResetPasswordPage />} />

            {/* === PROTECTED ROUTES (GiriÅŸ yapÄ±lmasÄ± zorunlu) === */}
            <Route 
              path="/*" 
              element={
                <ProtectedRoute>
                  <DashboardLayout />
                </ProtectedRoute>
              }
            >
              <Route path="dashboard" element={<DashboardOverviewPage />} />
              <Route path="my-projects" element={<MyProjectsPage />} />
              <Route path="shared-projects" element={<SharedProjectsPage />} />
              <Route path="settings" element={<SettingsPage />} />
              

              {/* Project Detail Routes */}
              <Route path="project/:id" element={<ProjectDetailPage />}>
                <Route index element={<ProjectFiles />} /> 
                <Route path="tasks" element={<ProjectTasks />} />
                <Route path="issues" element={<ProjectIssues />} />
                <Route path="discussions" element={<ProjectDiscussion />} />
                <Route path="edit" element={<ProjectEditPage />} />
              </Route>
              <Route path="users" element={<Users />} />
              
              {/* TanÄ±msÄ±z bir rota girilirse dashboard'a yÃ¶nlendir */}
              <Route path="*" element={<Navigate to="/dashboard" replace />} />
            </Route>

          </Routes>

        </ProjectProvider>
      </AuthProvider>
    </ThemeProvider>
  );
}

export default App;


================================================
FILE: frontend/src/App.test.js
================================================
import { render, screen } from '@testing-library/react';
import App from './App';

test('renders learn react link', () => {
  render(<App />);
  const linkElement = screen.getByText(/learn react/i);
  expect(linkElement).toBeInTheDocument();
});



================================================
FILE: frontend/src/index.css
================================================
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ðŸŽ¨ TEMA SÄ°STEMÄ° 
  Light Mode (VarsayÄ±lan): Modern Indigo
  Dark Mode (.dark class'Ä± gelince): Senin Mevcut Teman
*/

@layer base {
  :root {
    /* --- LIGHT MODE (Modern Indigo) --- */
    --bg-app: #F8FAFC;        /* Slate-50: Ferah arka plan */
    --bg-surface: #FFFFFF;    /* Beyaz kartlar */
    --bg-surface-hover: #F1F5F9; 
    
    --text-main: #1E293B;     /* Koyu Gri/Lacivert Metin */
    --text-secondary: #64748B; /* Orta Gri Metin */
    --text-inverted: #FFFFFF;  /* Buton iÃ§i yazÄ± vb. */

    --border-color: #E2E8F0;  /* Ä°nce Ã§izgiler */
    
    --primary: #4F46E5;       /* Indigo-600 */
    --primary-hover: #4338CA; /* Indigo-700 */
  }

  /* --- DARK MODE (Mevcut Teman) --- */
  /* ThemeContext 'dark' class'Ä±nÄ± eklediÄŸinde burasÄ± devreye girer */
  .dark {
    --bg-app: #111827;        /* Gray-900 (Mevcut body rengin) */
    --bg-surface: #1F2937;    /* Gray-800 (Mevcut kart rengin) */
    --bg-surface-hover: #374151; /* Gray-700 */

    --text-main: #F9FAFB;     /* Gray-50 (BeyazÄ±msÄ±) */
    --text-secondary: #9CA3AF; /* Gray-400 */
    --text-inverted: #FFFFFF;

    --border-color: #374151;  /* Gray-700 */

    --primary: #6366F1;       /* Indigo-500 (KaranlÄ±kta daha parlak durur) */
    --primary-hover: #4F46E5;
  }

  body {
    @apply bg-app text-text-main transition-colors duration-300;
  }
}


================================================
FILE: frontend/src/index.js
================================================
import React from 'react';
import ReactDOM from 'react-dom/client';
import './index.css';
import App from './App';
import reportWebVitals from './reportWebVitals';
// Router'Ä± import ediyoruz
import { BrowserRouter } from 'react-router-dom'; 

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <React.StrictMode>
    {/* UygulamayÄ± Router ile sarmalÄ±yoruz */}
    <BrowserRouter>
      <App />
    </BrowserRouter>
  </React.StrictMode>
);

reportWebVitals();


================================================
FILE: frontend/src/reportWebVitals.js
================================================
const reportWebVitals = onPerfEntry => {
  if (onPerfEntry && onPerfEntry instanceof Function) {
    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {
      getCLS(onPerfEntry);
      getFID(onPerfEntry);
      getFCP(onPerfEntry);
      getLCP(onPerfEntry);
      getTTFB(onPerfEntry);
    });
  }
};

export default reportWebVitals;



================================================
FILE: frontend/src/setupTests.js
================================================
// jest-dom adds custom jest matchers for asserting on DOM nodes.
// allows you to do things like:
// expect(element).toHaveTextContent(/react/i)
// learn more: https://github.com/testing-library/jest-dom
import '@testing-library/jest-dom';



================================================
FILE: frontend/src/components/auth/ProtectedRoute.js
================================================
// src/components/auth/ProtectedRoute.js

import React from 'react';
import { useAuth } from '../../context/AuthContext';
import { Navigate } from 'react-router-dom';

// Bu component, App.js'te iÃ§ine sardÄ±ÄŸÄ±mÄ±z
// <ProjectProvider> ve <DashboardLayout> elementlerini 'children' prop'u olarak alÄ±r.
const ProtectedRoute = ({ children }) => {
  
  // AuthContext'ten token'Ä± (giriÅŸ durumunu) al
  const { token } = useAuth(); 

  // 1. EÄžER TOKEN YOKSA (KullanÄ±cÄ± giriÅŸ yapmamÄ±ÅŸsa):
  if (!token) {
    // KullanÄ±cÄ±yÄ± '/login' sayfasÄ±na yÃ¶nlendir.
    // 'replace', tarayÄ±cÄ± geÃ§miÅŸinde 'geri' tuÅŸunun Ã§alÄ±ÅŸmamasÄ±nÄ± saÄŸlar.
    // "Beyaz ekran" sorununuzun Ã§Ã¶zÃ¼mÃ¼ bu satÄ±rdÄ±r.
    return <Navigate to="/login" replace />;
  }

  // 2. EÄžER TOKEN VARSA (KullanÄ±cÄ± giriÅŸ yapmÄ±ÅŸsa):
  // Gitmek istediÄŸi sayfayÄ± (children) gÃ¶ster.
  // (Bu, <ProjectProvider><DashboardLayout /></ProjectProvider> olur)
  return children;
};

export default ProtectedRoute;


================================================
FILE: frontend/src/components/layout/Header.js
================================================
// src/components/layout/Header.js

import React, { useState, useEffect, useRef } from 'react';
import { FiBell, FiChevronDown, FiInfo, FiSun, FiMoon } from 'react-icons/fi'; // Ä°konlar gÃ¼ncellendi
import { Link } from 'react-router-dom';
import ProfileDropdown from './ProfileDropdown';
import { useAuth } from '../../context/AuthContext';
import { useTheme } from '../../context/ThemeContext'; // Tema hook'u eklendi
import LogoImage from '../../assets/logo.png';

function Header({ onToggleRightSidebar }) {
  const [isDropdownOpen, setDropdownOpen] = useState(false);
  const dropdownRef = useRef(null);
  const { user } = useAuth();
  const { theme, toggleTheme } = useTheme(); // Tema durumu ve deÄŸiÅŸtirme fonksiyonu

  // Dropdown dÄ±ÅŸÄ±na tÄ±klanÄ±nca kapatma mantÄ±ÄŸÄ±
  useEffect(() => {
    function handleClickOutside(event) {
      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {
        setDropdownOpen(false);
      }
    }
    document.addEventListener("mousedown", handleClickOutside);
    return () => {
      document.removeEventListener("mousedown", handleClickOutside);
    };
  }, [dropdownRef]);

  return (
    // bg-surface/80 ve backdrop-blur-md: Buzlu cam efekti verir.
    <header className="sticky top-0 z-40 w-full border-b border-border bg-surface/80 backdrop-blur-md transition-colors duration-300">
      
      <div className="px-6 py-3 flex justify-between items-center">
        
        {/* SOL: LOGO VE MARKA */}
        <Link to="/dashboard" className="flex items-center group gap-1.5">
          <img 
            src={LogoImage} 
            alt="Logo" 
            className="h-16 w-16 object-contain drop-shadow-lg brightness-0 dark:brightness-100 transition-all duration-300" 
          />
          <div className="flex flex-col">
            <span className="text-xl font-bold tracking-wide text-text-main group-hover:text-primary transition-colors">
              GazozHub
            </span>
          </div>
        </Link>

        {/* SAÄž: BUTONLAR VE PROFÄ°L */}
        <div className="flex items-center space-x-3 md:space-x-5">
          
          {/* --- TEMA DEÄžÄ°ÅžTÄ°RME BUTONU (YENÄ°) --- */}
          <button
            onClick={() => toggleTheme(theme === 'dark' ? 'light' : 'dark')}
            className="relative flex items-center justify-between w-14 h-7 p-1 rounded-full bg-gray-200 dark:bg-gray-700 transition-colors duration-300 focus:outline-none shadow-inner"
            aria-label="Toggle Theme"
          >
            <div
              className={`absolute w-5 h-5 rounded-full shadow-md transform transition-transform duration-300 flex items-center justify-center ${
                theme === 'dark' ? 'translate-x-7 bg-indigo-500' : 'translate-x-0 bg-amber-400'
              }`}
            >
              {theme === 'dark' ? (
                <FiMoon className="text-white w-3 h-3" />
              ) : (
                <FiSun className="text-white w-3 h-3" />
              )}
            </div>
            <FiSun className={`ml-1 w-3.5 h-3.5 ${theme === 'dark' ? 'text-gray-500' : 'opacity-0'}`} />
            <FiMoon className={`mr-1 w-3.5 h-3.5 ${theme === 'light' ? 'text-gray-400' : 'opacity-0'}`} />
          </button>
          
          {/* Profil Dropdown */}
          <div className="relative" ref={dropdownRef}>
            <button 
              onClick={() => setDropdownOpen(!isDropdownOpen)} 
              className="flex items-center space-x-2 p-1.5 pr-3 rounded-full hover:bg-surface-hover border border-transparent hover:border-border transition-all group"
            >
              <div className="w-8 h-8 rounded-full bg-gradient-to-tr from-blue-600 to-indigo-600 flex items-center justify-center text-white text-sm font-bold shadow-sm">
                 {user?.username?.charAt(0).toUpperCase() || 'U'}
              </div>

              <span className="font-medium text-sm text-text-main hidden md:block">
                {user ? user.username : 'Guest'}
              </span>
              
              {user?.role === 'admin' && (
                <span className="hidden md:inline-block bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-[10px] font-bold px-1.5 py-0.5 rounded border border-red-200 dark:border-red-800 ml-1">
                  ADMIN
                </span>
              )}
              
              <FiChevronDown size={16} className="text-text-secondary group-hover:text-text-main transition-colors" />
            </button>
            
            {/* Dropdown BileÅŸeni */}
            <ProfileDropdown isOpen={isDropdownOpen} />
          </div>
        </div>
      </div>
    </header>
  );
}

export default Header;


================================================
FILE: frontend/src/components/layout/ProfileDropdown.js
================================================
// src/components/layout/ProfileDropdown.js

import React from 'react';
import { FiUser, FiSettings, FiLogOut } from 'react-icons/fi';
import { useNavigate } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext';

function ProfileDropdown({ isOpen }) {
  const { logout } = useAuth();
  const navigate = useNavigate();

  if (!isOpen) {
    return null;
  }

  const handleLogout = () => {
    logout();
    navigate('/'); 
  };

  const handleNavigate = (path) => {
    navigate(path);
  };

  return (
    // DROPDOWN KUTUSU
    // bg-surface: Temaya gÃ¶re Beyaz veya Koyu Gri
    // border-border: Temaya gÃ¶re kenarlÄ±k rengi
    <div className="absolute top-full right-0 mt-2 w-56 bg-surface rounded-xl shadow-xl border border-border z-50 overflow-hidden animate-fade-in-up origin-top-right">
      
      <div className="py-1">
        {/* Profil Linki */}
        <button 
          onClick={() => handleNavigate('/settings')} 
          className="w-full text-left flex items-center px-4 py-3 text-sm text-text-main hover:bg-surface-hover transition-colors group"
        >
          <FiUser className="mr-3 text-text-secondary group-hover:text-primary transition-colors" />
          Profile
        </button>
        
        {/* Ayarlar Linki */}
        <button 
          onClick={() => handleNavigate('/settings')} 
          className="w-full text-left flex items-center px-4 py-3 text-sm text-text-main hover:bg-surface-hover transition-colors group"
        >
          <FiSettings className="mr-3 text-text-secondary group-hover:text-primary transition-colors" />
          Settings
        </button>

        {/* AyÄ±rÄ±cÄ± Ã‡izgi */}
        <div className="border-t border-border my-1 mx-2"></div>
        
        {/* Ã‡Ä±kÄ±ÅŸ Yap Butonu */}
        <button
          onClick={handleLogout}
          className="w-full text-left flex items-center px-4 py-3 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"
        >
          <FiLogOut className="mr-3" />
          Logout
        </button>
      </div>
    </div>
  );
}

export default ProfileDropdown;


================================================
FILE: frontend/src/components/layout/RightSidebar.js
================================================
// src/components/layout/RightSidebar.js

import React, { useEffect, useState } from 'react';
import { useLocation } from 'react-router-dom';
import { useProjectContext } from '../../context/ProjectContext';
import api from '../../services/api';
import { 
  FiX, FiCalendar, FiClock, FiUser, FiUsers, 
  FiChevronsRight, FiTarget, FiActivity, FiTrendingUp, 
  FiShield, FiUserPlus, FiDownload, FiInfo
} from 'react-icons/fi';

function RightSidebar({ isOpen, toggleSidebar }) {
  const location = useLocation();
  const { currentProject, currentMembers, fetchMembers } = useProjectContext();

  // --- SAYFA KONTROLLERÄ° ---
  const isProjectPage = location.pathname.startsWith('/project/');
  const isUsersPage = location.pathname === '/users';
  const showProjectDetails = isProjectPage && currentProject;

  // --- STATELER ---
  const [stats, setStats] = useState({ total: 0, admins: 0, users: 0, newThisMonth: 0, loading: false });

  // --- EFFECT: PROJE VERÄ°LERÄ° ---
  useEffect(() => {
    if (showProjectDetails && currentProject?.id) {
        fetchMembers(currentProject.id);
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [currentProject?.id]);

  // --- EFFECT: USERS Ä°STATÄ°STÄ°KLERÄ° ---
  useEffect(() => {
    if (isUsersPage && isOpen) {
        const fetchStats = async () => {
            setStats(prev => ({ ...prev, loading: true }));
            try {
                const res = await api.get('/api/auth/users'); // API endpoint dÃ¼zeltildi
                const usersList = res.data;
                
                const total = usersList.length;
                const admins = usersList.filter(u => u.role === 'admin').length;
                
                // Bu ay kayÄ±t olanlarÄ± hesapla
                const now = new Date();
                const newUsers = usersList.filter(u => {
                    const d = new Date(u.created_at);
                    return d.getMonth() === now.getMonth() && d.getFullYear() === now.getFullYear();
                }).length;

                setStats({
                    total,
                    admins,
                    users: total - admins,
                    newThisMonth: newUsers,
                    loading: false
                });
            } catch (err) {
                console.error("Ä°statistik hatasÄ±:", err);
                setStats(prev => ({ ...prev, loading: false }));
            }
        };
        fetchStats();
    }
  }, [isUsersPage, isOpen]);

  // --- YARDIMCI FONKSÄ°YONLAR ---
  const projectOwner = currentMembers ? currentMembers.find(m => m.role === 'owner') : null;
  const otherMembers = currentMembers ? currentMembers.filter(m => m.role !== 'owner') : [];

  const formatDate = (dateString) => {
    if (!dateString) return 'N/A';
    return new Date(dateString).toLocaleDateString('en-US', {
      day: 'numeric', month: 'short', year: 'numeric'
    });
  };

  // --- RENDER: PROJE DETAYLARI ---
  const renderProjectContent = () => (
    <div className="animate-fade-in flex flex-col h-full">
        {/* 1. BaÅŸlÄ±k */}
        <div className="mt-1 mb-8">
            <h2 className="text-3xl font-extrabold text-text-main leading-tight">
                {currentProject.name}
            </h2>
        </div>

        {/* 2. AÃ§Ä±klama */}
        <div className="mb-8">
            {currentProject.description ? (
                <p className="text-sm text-text-secondary leading-relaxed font-light">
                {currentProject.description}
                </p>
            ) : (
                <p className="text-sm text-text-secondary italic">No description added.</p>
            )}
        </div>

        {/* 3. Proje Sahibi */}
        <div className="mb-8">
            <h4 className="text-xs font-bold text-text-secondary uppercase tracking-wider mb-3 flex items-center">
                Led By
            </h4>
            {/* Kart Arka PlanÄ±: Light'ta aÃ§Ä±k gri, Dark'ta koyu gri */}
            <div className="flex items-center p-3 bg-app border border-border rounded-xl hover:border-primary/50 transition-colors group">
                <div className="w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-indigo-600 flex items-center justify-center text-white font-bold text-sm shadow-md mr-3 group-hover:scale-105 transition-transform">
                    {projectOwner?.username?.charAt(0).toUpperCase() || <FiUser />}
                </div>
                <div>
                    <p className="text-text-main font-semibold text-sm">
                        {projectOwner?.username || 'Loading...'}
                    </p>
                    <p className="text-xs text-primary font-medium">Project Owner</p>
                </div>
            </div>
        </div>

        {/* 4. TakÄ±m Ãœyeleri */}
        <div className="mb-8 flex-1">
            <div className="flex justify-between items-end mb-3">
                <h4 className="text-xs font-bold text-text-secondary uppercase tracking-wider">Team</h4>
                <span className="text-xs text-text-secondary bg-app px-2 py-0.5 rounded-full border border-border">
                    {otherMembers.length} members
                </span>
            </div>
            {otherMembers.length > 0 ? (
                <div className="space-y-2">
                    {otherMembers.map(member => (
                        <div key={member.id} className="flex items-center justify-between p-2 hover:bg-app rounded-lg transition-colors cursor-default border border-transparent hover:border-border">
                            <div className="flex items-center">
                                <div className="w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-text-main text-xs font-bold mr-3 border border-border">
                                    {member.username.charAt(0).toUpperCase()}
                                </div>
                                <span className="text-text-main text-sm">{member.username}</span>
                            </div>
                            <span className="text-[10px] text-text-secondary uppercase font-semibold border border-border px-1.5 py-0.5 rounded bg-app">
                                {member.role}
                            </span>
                        </div>
                    ))}
                </div>
            ) : (
                <div className="p-4 border border-dashed border-border rounded-xl text-center">
                    <FiUsers className="mx-auto text-text-secondary mb-2" />
                    <p className="text-xs text-text-secondary">Solo project for now.</p>
                </div>
            )}
        </div>

        {/* 5. Footer Meta */}
        <div className="mt-auto pt-6 border-t border-border grid grid-cols-2 gap-4">
            <div>
                <div className="flex items-center text-text-secondary mb-1">
                    <FiCalendar className="mr-1.5 text-xs"/> <span className="text-[10px] uppercase font-bold tracking-wide">Created</span>
                </div>
                <span className="text-text-main text-xs font-mono">
                {formatDate(currentProject.created_at)}
                </span>
            </div>
            <div>
                <div className="flex items-center text-text-secondary mb-1">
                    <FiClock className="mr-1.5 text-xs"/> <span className="text-[10px] uppercase font-bold tracking-wide">Updated</span>
                </div>
                <span className="text-text-main text-xs font-mono">
                {formatDate(currentProject.last_updated_at || currentProject.created_at)}
                </span>
            </div>
        </div>
    </div>
  );

  // --- RENDER: USERS (Admin) Ä°STATÄ°STÄ°KLERÄ° ---
  const renderUsersContent = () => (
    <div className="animate-fade-in flex flex-col h-full">
        
        {/* BaÅŸlÄ±k */}
        <div className="mt-2 mb-8">
            <h2 className="text-2xl font-bold text-text-main flex items-center">
                <FiActivity className="mr-3 text-primary" />
                System Overview
            </h2>
        </div>

        {stats.loading ? (
            <div className="flex justify-center py-10"><div className="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div>
        ) : (
            <>
                {/* Kart: Toplam KullanÄ±cÄ± */}
                <div className="bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 p-5 rounded-2xl border border-border mb-8 relative overflow-hidden group shadow-sm">
                    <div className="absolute -right-4 -top-4 text-text-secondary opacity-10 group-hover:opacity-20 transition-opacity transform group-hover:scale-110 duration-500">
                        <FiUsers size={100} />
                    </div>
                    <h3 className="text-text-secondary text-xs uppercase font-bold tracking-wider mb-1">Total Users</h3>
                    <p className="text-5xl font-extrabold text-text-main tracking-tight">{stats.total}</p>
                </div>

                {/* Rol DaÄŸÄ±lÄ±mÄ± */}
                <div className="mb-10 space-y-5">
                    <h4 className="text-sm font-semibold text-text-main flex items-center uppercase tracking-wide">
                        <FiShield className="mr-2 text-primary" /> Role Distribution
                    </h4>
                    
                    {/* Admin Bar */}
                    <div className="group">
                        <div className="flex justify-between text-xs text-text-secondary mb-1.5">
                            <span className="group-hover:text-red-400 transition-colors">Admins</span>
                            <span className="font-mono">{stats.admins}</span>
                        </div>
                        <div className="w-full bg-app rounded-full h-2.5 overflow-hidden border border-border">
                            <div 
                                className="bg-gradient-to-r from-red-600 to-red-400 h-full rounded-full transition-all duration-1000 ease-out" 
                                style={{ width: stats.total > 0 ? `${(stats.admins / stats.total) * 100}%` : '0%' }}
                            />
                        </div>
                    </div>

                    {/* User Bar */}
                    <div className="group">
                        <div className="flex justify-between text-xs text-text-secondary mb-1.5">
                            <span className="group-hover:text-blue-400 transition-colors">Students</span>
                            <span className="font-mono">{stats.users}</span>
                        </div>
                        <div className="w-full bg-app rounded-full h-2.5 overflow-hidden border border-border">
                            <div 
                                className="bg-gradient-to-r from-blue-600 to-blue-400 h-full rounded-full transition-all duration-1000 ease-out" 
                                style={{ width: stats.total > 0 ? `${(stats.users / stats.total) * 100}%` : '0%' }}
                            />
                        </div>
                    </div>
                </div>
            </>
        )}
    </div>
  );

  // --- ANA RENDER ---
  return (
    <div 
      className={`${
        isOpen ? 'w-80 translate-x-0' : 'w-0 translate-x-full'
      } bg-surface border-l border-border flex flex-col transition-all duration-300 ease-in-out absolute right-0 top-0 h-full z-30 shadow-2xl`}
    >
      
      {/* Ä°Ã‡ERÄ°K ALANI */}
      <div className="relative z-10 flex-1 overflow-y-auto px-6 pb-20 custom-scrollbar pt-6">
        
        {isUsersPage ? (
            renderUsersContent()
        ) : showProjectDetails ? (
            renderProjectContent()
        ) : (
          // BOÅž DURUM
          <div className="flex flex-col items-center justify-center h-full text-center pb-20">
            <div className="w-20 h-20 bg-app rounded-full flex items-center justify-center mb-6 animate-pulse-slow border border-border">
               <FiTarget size={32} className="text-text-secondary" />
            </div>
            <h3 className="text-text-main font-bold text-lg mb-2">Ready to Focus?</h3>
            <p className="text-text-secondary text-sm max-w-[200px] leading-relaxed">
              Select a project to see details here.
            </p>
          </div>
        )}

      </div>

      
      <div className="absolute bottom-0 left-0 w-full h-12 border-t border-border bg-surface/90 backdrop-blur-sm z-20 flex items-center justify-center">
        <button
          onClick={toggleSidebar}
          className="text-text-secondary hover:text-text-main transition-colors p-2 rounded-full hover:bg-app group"
        >
          <FiChevronsRight size={20} className="group-hover:translate-x-1 transition-transform" />
        </button>
      </div>

    </div>
  );
}

export default RightSidebar;


================================================
FILE: frontend/src/components/layout/Sidebar.js
================================================
// src/components/layout/Sidebar.js

import React from 'react';
import { NavLink } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext'; // 1. AuthContext eklendi
import { 
  FiHome, FiBox, FiUsers, 
  FiChevronsLeft, FiChevronsRight,
  FiUserCheck // 2. Yeni ikon eklendi (Admin Users iÃ§in)
} from 'react-icons/fi';

function Sidebar({ isCollapsed, toggleSidebar }) {
  
  // 3. KullanÄ±cÄ± rolÃ¼nÃ¼ kontrol etmek iÃ§in user bilgisini Ã§ekiyoruz
  const { user } = useAuth();

  const navItems = [
    { name: 'Dashboard', icon: <FiHome size={20} />, path: '/dashboard' },
    { name: 'My Projects', icon: <FiBox size={20} />, path: '/my-projects' },
    { name: 'Shared', icon: <FiUsers size={20} />, path: '/shared-projects' },
  ];

  return (
    <div 
      className={`${
        isCollapsed ? 'w-20' : 'w-64'
      } bg-surface border-border flex flex-col transition-all duration-300 relative shadow-xl pt-4`}
    >
      
      {/* MENU LÄ°STESÄ° */}
      <nav className="flex-1 space-y-2 overflow-y-auto overflow-x-hidden mt-2">
        {navItems.map((item) => (
          <NavLink
            key={item.name}
            to={item.path}
            className={({ isActive }) =>
              `flex items-center px-4 py-3 mx-2 rounded-lg transition-colors group relative ${
                isActive
                  ? 'bg-blue-600 text-white'
                  : 'text-gray-400 hover:bg-gray-700 hover:text-white'
              } ${isCollapsed ? 'justify-center' : ''}`
            }
          >
            <span className="flex-shrink-0">{item.icon}</span>

            {!isCollapsed && (
              <span className="ml-3 font-medium whitespace-nowrap">{item.name}</span>
            )}
            
            {isCollapsed && (
              <div className="absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none">
                {item.name}
              </div>
            )}
          </NavLink>
        ))}

        {/* --- 4. ADMIN USERS BUTONU --- */}
        {/* Sadece user varsa ve rolÃ¼ 'admin' ise bu bloÄŸu gÃ¶ster */}
        {user && user.role === 'admin' && (
          <>
            {/* AyÄ±rÄ±cÄ± Ã‡izgi (Ä°steÄŸe baÄŸlÄ±, gÃ¶rsel ayrÄ±m iÃ§in) */}
            <div className="my-2 border-t border-gray-700 mx-4 opacity-50" />

            <NavLink
              to="/users" 
              className={({ isActive }) =>
                `flex items-center px-4 py-3 mx-2 rounded-lg transition-colors group relative ${
                  isActive
                    ? 'bg-red-600/80 text-white'
                    : 'text-gray-400 hover:bg-gray-700 hover:text-white'
                } ${isCollapsed ? 'justify-center' : ''}`
              }
            >
              {/* Ä°kon */}
              <span className="flex-shrink-0">
                <FiUserCheck size={20} />
              </span>

              {/* Metin */}
              {!isCollapsed && (
                <span className="ml-3 font-medium whitespace-nowrap">Users</span>
              )}

              {/* Tooltip */}
              {isCollapsed && (
                <div className="absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none">
                  Users Management
                </div>
              )}
            </NavLink>
          </>
        )}
      </nav>

      {/* ALT KISIM */}
      <div className="p-4 border-t border-gray-700">
        <button
          onClick={toggleSidebar}
          className="w-full flex items-center justify-center py-2 text-gray-500 hover:text-white hover:bg-gray-700 rounded-lg transition-colors"
        >
          {isCollapsed ? <FiChevronsRight size={24} /> : <FiChevronsLeft size={24} />}
        </button>
      </div>
    </div>
  );
}

export default Sidebar;


================================================
FILE: frontend/src/components/projects/Comment.js
================================================
// src/components/projects/Comment.js

import React, { useState, useRef, useEffect } from 'react';
import { useAuth } from '../../context/AuthContext';
import { useProjectContext } from '../../context/ProjectContext';
import { 
  FiUser, FiHeart, FiCopy, FiMoreVertical, FiEdit, FiTrash, 
    FiLoader, FiCheck,
} from 'react-icons/fi';

// Yeni proplar alÄ±yoruz: projectId, onCommentUpdated, onCommentDeleted
function Comment({ comment, projectId, onCommentUpdated, onCommentDeleted }) {
  
  const { user } = useAuth();
  // Mevcut giriÅŸ yapmÄ±ÅŸ kullanÄ±cÄ±
  const { 
    likeComment, 
    editComment, 
    deleteComment, 
    currentProject // Proje sahibini kontrol etmek iÃ§in
  } = useProjectContext();

  // 'comment' prop'unu yerel state'e alÄ±yoruz
  const [localComment, setLocalComment] = useState(comment);
  
  // State'ler
  const [isEditing, setIsEditing] = useState(false);
  const [editText, setEditText] = useState(comment.text);
  const [isSaving, setIsSaving] = useState(false);

  // 3-nokta menÃ¼ state'i
  const [isMenuOpen, setMenuOpen] = useState(false);
  const menuRef = useRef(null);
  
  // DiÄŸer state'ler
  const [copied, setCopied] = useState(false);
  const [isLiking, setIsLiking] = useState(false);

  // === GÃœVENLÄ°K KONTROLLERÄ° ===
  const authorId = localComment?.author_id;
  const currentUserId = user?.id;
  const projectOwnerId = currentProject?.owner_id;

  const isOwner = currentUserId === authorId;
  const isProjectOwner = currentUserId === projectOwnerId;
  const hasLiked = localComment?.likes_user_ids?.includes(currentUserId);
  const likeCount = localComment?.likes_user_ids?.length || 0;

  // Prop deÄŸiÅŸirse state gÃ¼ncelle
  useEffect(() => {
    setLocalComment(comment);
  }, [comment]);

  // --- KOPYALA FONKSÄ°YONU ---
  const handleCopy = () => {
    const el = document.createElement('textarea');
    el.value = localComment.text;
    document.body.appendChild(el);
    el.select();
    document.execCommand('copy');
    document.body.removeChild(el);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000); 
  };

  // --- BEÄžEN (LIKE) FONKSÄ°YONU ---
  const handleLike = async () => {
    if (isLiking) return;
    setIsLiking(true);
    try {
      const updatedLikes = await likeComment(projectId, localComment.id);
      setLocalComment(prev => ({ ...prev, likes_user_ids: updatedLikes.likes_user_ids }));
    } catch (error) {
      console.error("Failed to like comment:", error);
    } finally {
      setIsLiking(false);
    }
  };

  // --- DÃœZENLE (EDIT) FONKSÄ°YONLARI ---
  const handleEdit = () => {
    setIsEditing(true);
    setMenuOpen(false);
  };

  const handleCancelEdit = () => {
    setIsEditing(false);
    setEditText(localComment.text); // DeÄŸiÅŸiklikleri iptal et
  };

  const handleSaveEdit = async () => {
    if (editText.trim() === '' || editText === localComment.text) {
      return handleCancelEdit();
    }
    setIsSaving(true);
    try {
      const updatedComment = await editComment(projectId, localComment.id, editText);
      setLocalComment(updatedComment);
      setIsEditing(false);
      if (onCommentUpdated) {
        onCommentUpdated(updatedComment);
      }
    } catch (error) {
      console.error("Failed to save edit:", error);
      alert("Hata: " + error.message);
    } finally {
      setIsSaving(false);
    }
  };

  // --- SÄ°L (DELETE) FONKSÄ°YONU ---
  const handleDelete = async () => {
    if (window.confirm('Are you sure you want to delete this comment?')) {
      try {
        await deleteComment(projectId, localComment.id);
        if (onCommentDeleted) {
          onCommentDeleted(localComment.id);
        }
      } catch (error) {
        console.error("Failed to delete comment:", error);
        alert("Hata: " + error.message);
      }
    }
    setMenuOpen(false);
  };
  
  // MenÃ¼ dÄ±ÅŸÄ±na tÄ±klamayÄ± dinle
  useEffect(() => {
    function handleClickOutside(event) {
      if (menuRef.current && !menuRef.current.contains(event.target)) {
        setMenuOpen(false);
      }
    }
    document.addEventListener("mousedown", handleClickOutside);
    return () => {
      document.removeEventListener("mousedown", handleClickOutside);
    };
  }, [menuRef]);

  return (
    // YorumlarÄ± ayÄ±rmak iÃ§in Ã¼st Ã§izgi: border-gray-600 -> border-border
    <div className="flex space-x-3 pt-4 border-t border-border/50 first:pt-0 first:border-0">
      {/* Avatar/Ä°kon */}
      <div className="flex-shrink-0">
        {/* bg-gray-700 -> bg-app, text-gray-400 -> text-text-secondary */}
        <div className="w-8 h-8 rounded-full bg-app flex items-center justify-center border border-border">
            <FiUser className="w-5 h-5 text-text-secondary" />
        </div>
      </div>
      
      {/* Yorum Ä°Ã§eriÄŸi */}
      <div className="flex-1">
        
        {isEditing ? (
          // --- DÃœZENLEME MODU ---
          <div className="space-y-2">
            <textarea
              value={editText}
              onChange={(e) => setEditText(e.target.value)}
              className="w-full py-2 px-3 text-text-main bg-surface border border-primary rounded-lg focus:outline-none focus:ring-1 focus:ring-primary shadow-sm"
              rows="3"
            />
            <div className="flex justify-end space-x-2">
              <button onClick={handleCancelEdit} className="text-text-secondary hover:text-text-main text-sm transition-colors">Cancel</button>
              <button 
                onClick={handleSaveEdit} 
                disabled={isSaving}
                className="flex items-center bg-primary hover:bg-primary-hover text-white font-semibold py-1 px-3 rounded-lg text-sm transition-colors disabled:opacity-50"
              >
                {isSaving ? <FiLoader className="animate-spin" /> : 'Save'}
              </button>
            </div>
          </div>
        ) : (
          // --- NORMAL GÃ–RÃœNÃœM MODU ---
          // bg-gray-700 -> bg-surface, border ekledik
          <div className="bg-surface border border-border rounded-lg p-3 shadow-sm hover:shadow-md transition-shadow">
            <div className="flex items-center justify-between mb-1">
              <span className="font-semibold text-text-main text-sm">
                {localComment.author_name || 'User'} 
              </span>
              <span className="text-xs text-text-secondary">
                {new Date(localComment.created_at).toLocaleString()}
              </span>
            </div>
            <p className="text-text-main text-sm break-words leading-relaxed">
              {localComment.text}
            </p>
            
            {/* YORUM ALTINDAKÄ° BUTONLAR */}
            <div className="flex items-center space-x-3 mt-3">
              
              {/* BEÄžEN BUTONU */}
              <button 
                onClick={handleLike} 
                disabled={isLiking}
                className={`flex items-center text-xs transition-colors ${hasLiked ? 'text-red-500' : 'text-text-secondary hover:text-red-500'}`}
              >
                <FiHeart fill={hasLiked ? 'currentColor' : 'none'} size={14} className="mr-1" />
                {likeCount}
              </button>
              
              {/* KOPYALA BUTONU */}
              <button onClick={handleCopy} className="text-xs text-text-secondary hover:text-text-main transition-colors">
                {copied ? <FiCheck size={14} className="text-green-500" /> : <FiCopy size={14} />}
              </button>
              
              {/* 3-NOKTA MENÃœ */}
              {(isOwner || isProjectOwner) && (
                <div className="relative" ref={menuRef}>
                  <button onClick={() => setMenuOpen(p => !p)} className="text-xs text-text-secondary hover:text-text-main transition-colors">
                    <FiMoreVertical size={14} />
                  </button>
                  
                  {isMenuOpen && (
                    <div className="absolute right-0 top-6 w-36 bg-surface border border-border rounded-md shadow-xl z-20 overflow-hidden">
                      <ul className="py-1">
                        {/* EDIT */}
                        {isOwner && (
                          <li>
                            <button
                              onClick={handleEdit}
                              className="w-full text-left flex items-center px-4 py-2 text-sm text-text-main hover:bg-surface-hover transition-colors"
                            >
                              <FiEdit size={14} className="mr-2 text-text-secondary" />
                              Edit
                            </button>
                          </li>
                        )}
                        {/* DELETE */}
                        <li>
                          <button
                            onClick={handleDelete}
                            className="w-full text-left flex items-center px-4 py-2 text-sm text-red-500 hover:bg-surface-hover transition-colors"
                          >
                            <FiTrash size={14} className="mr-2" />
                            Delete
                          </button>
                        </li>
                      </ul>
                    </div>
                  )}
                </div>
              )}
            </div>
          </div>
        )}
      </div>
    </div>
  );
}

export default Comment;


================================================
FILE: frontend/src/components/projects/CommentForm.js
================================================
// src/components/projects/CommentForm.js

import React, { useState } from 'react';
import { FiSend, FiLoader } from 'react-icons/fi';

function CommentForm({ onSubmit, loading }) {
  const [text, setText] = useState('');
  
  const handleSubmit = async (e) => {
    e.preventDefault();
    if (!text.trim()) return;
    try {
      await onSubmit(text);
      setText('');
    } catch (error) {
      console.error("CommentForm Error:", error);
    }
  };

  return (
    <form onSubmit={handleSubmit} className="flex">
      {/* Input: bg-surface, border-border, text-text-main */}
      <input 
        type="text"
        value={text}
        onChange={(e) => setText(e.target.value)}
        className="flex-grow py-2 px-4 text-text-main bg-surface border border-border rounded-l-lg focus:outline-none focus:ring-2 focus:ring-primary placeholder-text-secondary transition-colors"
        placeholder="Add a comment..."
      />
      {/* Button: bg-primary */}
      <button 
        type="submit" 
        disabled={loading}
        className="flex items-center justify-center w-12 bg-primary hover:bg-primary-hover text-white font-semibold py-2 px-3 rounded-r-lg transition-colors disabled:opacity-50"
      >
        {loading ? <FiLoader className="animate-spin" /> : <FiSend size={18} />}
      </button>
    </form>
  );
}

export default CommentForm;


================================================
FILE: frontend/src/components/projects/CommentList.js
================================================
// src/components/projects/CommentList.js

import React, { useState, useEffect } from 'react';
import { useProjectContext } from '../../context/ProjectContext';
import { FiLoader } from 'react-icons/fi';
import Comment from './Comment';

function CommentList({ projectId, refreshKey }) {
  const [comments, setComments] = useState([]);
  const { fetchComments, loading } = useProjectContext();

  const loadComments = async () => {
    try {
      const fetchedComments = await fetchComments(projectId);
      setComments(fetchedComments || []);
    } catch (error) {
      console.error("Failed to fetch comments:", error);
    }
  };

  useEffect(() => {
    if (projectId) {
      loadComments();
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [projectId, refreshKey]);

  const handleCommentUpdated = (updatedComment) => {
    setComments(prev => 
      prev.map(c => c.id === updatedComment.id ? updatedComment : c)
    );
  };
  const handleCommentDeleted = (deletedCommentId) => {
    setComments(prev => 
      prev.filter(c => c.id !== deletedCommentId)
    );
  };

  return (
    <div className="space-y-4 mt-4">
      {loading && comments.length === 0 ? (
        <div className="flex justify-center py-4">
            <FiLoader className="animate-spin text-primary" size={24} />
        </div>
      ) : comments.length === 0 ? (
        <p className="text-text-secondary text-sm text-center py-2">Be the first to comment.</p>
      ) : (
        comments.map(comment => (
          <Comment 
            key={comment.id} 
            comment={comment}
            projectId={projectId} 
            onCommentUpdated={handleCommentUpdated} 
            onCommentDeleted={handleCommentDeleted} 
          />
        ))
      )}
    </div>
  );
}

export default CommentList;


================================================
FILE: frontend/src/components/projects/CreateProjectModal.js
================================================
import React, { useState } from 'react';
import { useProjectContext } from '../../context/ProjectContext'; // 1. Context'i import et
import { FiX, FiLoader } from 'react-icons/fi';

// Component, 'isOpen' (aÃ§Ä±k mÄ±?) ve 'onClose' (kapatma fonksiyonu) proplarÄ±nÄ± alÄ±r
function CreateProjectModal({ isOpen, onClose }) {
  
  // 2. Context'ten 'createProject' fonksiyonunu ve 'loading' durumunu al
  const { createProject, loading } = useProjectContext();

  // 3. Form alanlarÄ± iÃ§in state'ler
  const [name, setName] = useState('');
  const [description, setDescription] = useState('');
  const [error, setError] = useState(null);

  // Form gÃ¶nderildiÄŸinde Ã§alÄ±ÅŸacak fonksiyon
  const handleSubmit = async (e) => {
    e.preventDefault();
    setError(null); // Eski hatayÄ± temizle

    if (!name) {
      setError('Project name is required.');
      return;
    }

    try {
      // 4. Context'teki 'createProject' fonksiyonunu Ã§aÄŸÄ±r
      // Bu fonksiyon backend'e API isteÄŸi atacak
      await createProject(name, description);
      
      // BaÅŸarÄ±lÄ± olursa, formu temizle ve modal'Ä± kapat
      setName('');
      setDescription('');
      onClose(); 
    } catch (err) {
      // BaÅŸarÄ±sÄ±z olursa (Ã¶rn: sunucu hatasÄ±), hatayÄ± gÃ¶ster
      setError(err.message);
    }
  };

  // EÄŸer modal 'isOpen' false ise, hiÃ§bir ÅŸey gÃ¶sterme
  if (!isOpen) {
    return null;
  }

  // Modal aÃ§Ä±ksa, bu JSX'i gÃ¶ster
  return (
    // Arka planÄ± karartan overlay
    <div className="fixed inset-0 bg-black bg-opacity-75 flex justify-center items-center z-50">
      
      {/* AsÄ±l Modal Penceresi */}
      <div className="bg-gray-800 rounded-lg shadow-2xl w-full max-w-lg p-6">
        
        {/* BaÅŸlÄ±k ve Kapatma Butonu */}
        <div className="flex justify-between items-center mb-4">
          <h2 className="text-2xl font-bold text-white">Create New Project</h2>
          <button 
            onClick={onClose} 
            className="text-gray-400 hover:text-white"
          >
            <FiX size={24} />
          </button>
        </div>
        
        {/* Proje OluÅŸturma Formu */}
        <form onSubmit={handleSubmit}>
          <div className="space-y-4">
            
           
            <div>
              <label htmlFor="projectName" className="block text-sm font-medium text-gray-300 mb-1">
                Project Name
              </label>
              <input 
                type="text"
                id="projectName"
                value={name}
                onChange={(e) => setName(e.target.value)}
                className="w-full py-2 px-3 text-gray-200 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                placeholder="My New Awesome Project"
              />
            </div>
            
            
            <div>
              <label htmlFor="projectDescription" className="block text-sm font-medium text-gray-300 mb-1">
                Description (Optional)
              </label>
              <textarea
                id="projectDescription"
                rows="3"
                value={description}
                onChange={(e) => setDescription(e.target.value)}
                className="w-full py-2 px-3 text-gray-200 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                placeholder="What is this project about?"
              />
            </div>
          </div>
          
         
          {error && (
            <p className="text-sm text-red-400 text-center mt-4">
              {error}
            </p>
          )}

          
          <div className="flex justify-end space-x-3 mt-6">
            <button
              type="button"
              onClick={onClose}
              disabled={loading}
              className="py-2 px-4 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors disabled:opacity-50"
            >
              Cancel
            </button>
            <button
              type="submit"
              disabled={loading}
              className="flex items-center justify-center py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors disabled:opacity-50"
            >
              {loading ? (
                <FiLoader className="animate-spin mr-2" />
              ) : (
                'Create Project'
              )}
            </button>
          </div>
        </form>
      </div>
    </div>
  );
}

export default CreateProjectModal;


================================================
FILE: frontend/src/components/projects/FileList.js
================================================
/*// src/components/projects/FileList.js
import React from 'react';
import { FiFileText, FiFile, FiImage } from 'react-icons/fi'; // Icons for file types

// A simple function to get an icon based on file type
const getFileIcon = (fileName) => {
  if (fileName.endsWith('.pdf')) return <FiFileText className="text-red-400" />;
  if (fileName.endsWith('.docx') || fileName.endsWith('.doc')) return <FiFileText className="text-blue-40Ã¡00" />;
  if (fileName.endsWith('.png') || fileName.endsWith('.jpg')) return <FiImage className="text-green-400" />;
  return <FiFile className="text-gray-400" />;
};

function FileList({ files, loading }) {
  return (
    <div className="mt-12">
      <h2 className="text-2xl font-bold text-white border-b border-gray-700 pb-2 mb-4">
        Project Files
      </h2>
      {loading ? (
        <p>Loading files...</p>
      ) : (
        <div className="space-y-2">
          {files.map(file => (
            <div key={file.id} className="flex items-center bg-gray-800 p-3 rounded-md">
              <span className="mr-3">{getFileIcon(file.name)}</span>
              <div className="flex-1">
                <p className="text-white font-medium">{file.name}</p>
                <p className="text-xs text-gray-500">Uploaded by {file.uploadedBy}</p>
              </div>
            </div>
          ))}
        </div>
      )}
    </div>
  );
}
export default FileList;*/


================================================
FILE: frontend/src/components/projects/IssueItem.js
================================================
// src/components/projects/IssueItem.js

import React, { useState, useRef, useEffect } from 'react';
import { 
  FiMessageSquare, FiChevronDown, FiChevronRight, FiLoader, 
  FiMoreVertical, FiEdit, FiCheckCircle, FiCircle, FiSave, FiX, FiAlertTriangle
} from 'react-icons/fi';
import { useProjectContext } from '../../context/ProjectContext';
import { useAuth } from '../../context/AuthContext';
import Comment from './Comment'; 
import CommentForm from './CommentForm';

function IssueItem({ issue, projectId, onIssueUpdated }) {
  
  // === 1. STATE (DURUM) TANIMLAMALARI ===
  const [localIssue, setLocalIssue] = useState(issue);
  const [isOpen, setIsOpen] = useState(false); 
  const [comments, setComments] = useState([]); 
  const [loadingComments, setLoadingComments] = useState(false);
  const [isMenuOpen, setMenuOpen] = useState(false);
  const [isEditing, setIsEditing] = useState(false); 
  const [editText, setEditText] = useState(issue.text); 
  const [isSaving, setIsSaving] = useState(false);
  const [editError, setEditError] = useState(null);
  const menuRef = useRef(null);
  
  // Context'ten gerekli fonksiyonlarÄ± al
  const { 
    currentProject, 
    fetchIssueComments, 
    addIssueComment, 
    updateIssue, 
    loading: contextLoading 
  } = useProjectContext();
  
  const { user } = useAuth(); 
  const userRole = currentProject?.currentUserRole;

  // === 2. EFFECT'LER ===
  
  // 'issue' prop'u deÄŸiÅŸtiÄŸinde yerel state'i gÃ¼ncelle
  useEffect(() => {
    setLocalIssue(issue);
  }, [issue]);

  // MenÃ¼ dÄ±ÅŸÄ±na tÄ±klamayÄ± dinle
  useEffect(() => {
    function handleClickOutside(event) {
      if (menuRef.current && !menuRef.current.contains(event.target)) {
        setMenuOpen(false);
      }
    }
    document.addEventListener("mousedown", handleClickOutside);
    return () => {
      document.removeEventListener("mousedown", handleClickOutside);
    };
  }, [menuRef]);

  // === 3. FONKSÄ°YONLAR ===

  // YorumlarÄ± aÃ§/kapat
  const toggleComments = async () => {
    if (isOpen) {
      setIsOpen(false);
      return;
    }
    setIsOpen(true);
    setLoadingComments(true);
    try {
      const fetchedComments = await fetchIssueComments(projectId, localIssue.id);
      setComments(fetchedComments || []);
    } catch (error) {
      console.error("Failed to fetch issue comments:", error);
    } finally {
      setLoadingComments(false);
    }
  };

  // Yorum ekle
  const handleCommentAdded = async (text) => {
    try {
      const newComment = await addIssueComment(projectId, localIssue.id, text);
      setComments([...comments, newComment]); // Listeyi anÄ±nda gÃ¼ncelle
    } catch (error) {
      console.error("Failed to add issue comment:", error);
    }
  };

  // Issue durumunu DeÄŸiÅŸtir (Done/Open)
  const handleToggleStatus = async () => {
    const isDone = localIssue.status === 'Closed';
    const newStatus = isDone ? 'Open' : 'Closed'; 
    try {
      const updatedIssue = await updateIssue(projectId, localIssue.id, { status: newStatus });
      setLocalIssue(updatedIssue); 
      onIssueUpdated(updatedIssue); 
    } catch (error) {
      console.error("Failed to update issue status:", error);
    } finally {
      setMenuOpen(false);
    }
  };

  // "Edit" (DÃ¼zenleme) Modu FonksiyonlarÄ±
  const handleEditClick = () => {
    setEditText(localIssue.text); 
    setIsEditing(true); 
    setMenuOpen(false); 
    setEditError(null); 
  };

  const handleCancelEdit = () => {
    setIsEditing(false); 
    setEditError(null); 
  };

  const handleSaveEdit = async () => {
    if (editText.trim() === '' || editText === localIssue.text) {
      setIsEditing(false);
      return;
    }
    setIsSaving(true); 
    setEditError(null);
    try {
      const updatedIssue = await updateIssue(projectId, localIssue.id, { text: editText });
      setLocalIssue(updatedIssue); 
      onIssueUpdated(updatedIssue); 
      setIsEditing(false); 
    } catch (error) {
      console.error("Failed to save issue edit:", error);
      setEditError("Failed to save. Please try again."); 
    } finally {
      setIsSaving(false); 
    }
  };

  // Yorum listesi iÃ§in gÃ¼ncelleme fonksiyonlarÄ±
  const handleCommentUpdated = (updatedComment) => {
    setComments(prev => 
      prev.map(c => c.id === updatedComment.id ? updatedComment : c)
    );
  };
  
  const handleCommentDeleted = (deletedCommentId) => {
    setComments(prev => 
      prev.filter(c => c.id !== deletedCommentId)
    );
  };

  // === 4. RENDER (GÃ–RÃœNÃœM) ===
  const isDone = localIssue.status === 'Closed';
  
  // Stiller: Light/Dark uyumlu
  // isDone ise biraz daha silik ve Ã¼stÃ¼ Ã§izili
  const containerClass = `rounded-md border transition-colors ${
    isDone 
      ? 'bg-app/50 border-border/50 opacity-75' 
      : 'bg-app border-border hover:border-primary/30'
  }`;
  
  const issueTextStyle = isDone ? "text-text-secondary line-through" : "text-text-main";
  const issueAuthorStyle = "text-text-secondary";

  return (
    <div className={containerClass}>
      <div className="flex justify-between items-center p-3">
        
        {isEditing ? (
          // --- DÃœZENLEME MODU ---
          <div className="flex-1 flex flex-col">
            <div className="flex-1 flex items-center space-x-2">
              <input
                type="text"
                value={editText}
                autoFocus
                onChange={(e) => setEditText(e.target.value)}
                className="flex-grow py-1.5 px-3 text-text-main bg-surface border border-primary rounded-md focus:outline-none text-sm shadow-sm"
              />
              <button 
                onClick={handleSaveEdit} 
                disabled={isSaving} 
                className="p-2 text-green-500 hover:text-green-600 disabled:opacity-50 transition-colors"
              >
                {isSaving ? <FiLoader className="animate-spin" /> : <FiSave size={18} />}
              </button>
              <button onClick={handleCancelEdit} className="p-2 text-red-500 hover:text-red-600 transition-colors">
                <FiX size={18} />
              </button>
            </div>
            {editError && (
              <p className="text-xs text-red-500 mt-1 ml-1 flex items-center">
                <FiAlertTriangle size={14} className="mr-1" />
                {editError}
              </p>
            )}
          </div>

        ) : (
          // --- NORMAL MOD ---
          <>
            <button 
              onClick={toggleComments}
              className="flex-1 flex items-center text-left group"
            >
              {isOpen 
                ? <FiChevronDown size={20} className="mr-2 text-text-secondary" /> 
                : <FiChevronRight size={20} className="mr-2 text-text-secondary group-hover:text-text-main" />
              }
              <div className="flex-1">
                <p className={`font-medium ${issueTextStyle}`}>{localIssue.text}</p>
                <span className={`text-xs ${issueAuthorStyle}`}>
                  Opened by <span className="font-semibold">{localIssue.created_by_name || '...'}</span>
                  {isDone && (
                    <span className="italic ml-1">
                      (Closed by {user?.username || '...'})
                    </span>
                  )}
                </span>
              </div>
            </button>
            
            <div className="flex items-center">
              <div className="flex items-center mr-3 text-text-secondary" title="Comments">
                 <FiMessageSquare size={16} className="mr-1" />
                 {/* EÄŸer comment sayÄ±sÄ± varsa buraya eklenebilir */}
              </div>
              
              {/* 3-NOKTA MENÃœ (SADECE 'viewer' veya 'public_viewer' DEÄžÄ°LSE GÃ–STER) */}
              {(userRole === 'owner' || userRole === 'editor') && (
                <div className="relative" ref={menuRef}>
                  <button 
                    onClick={(e) => {
                      e.stopPropagation();
                      setMenuOpen(prev => !prev);
                    }}
                    className="p-1.5 text-text-secondary hover:text-text-main hover:bg-surface-hover rounded-full transition-colors"
                  >
                    <FiMoreVertical size={18} />
                  </button>
                  
                  {isMenuOpen && (
                    <div className="absolute right-0 top-8 w-44 bg-surface border border-border rounded-lg shadow-xl z-50 animate-fade-in origin-top-right overflow-hidden">
                      <div className="py-1">
                        <button
                          onClick={(e) => {
                            e.stopPropagation();
                            handleEditClick();
                          }}
                          className="w-full text-left flex items-center px-4 py-2.5 text-sm text-text-main hover:bg-surface-hover transition-colors"
                        >
                          <FiEdit size={14} className="mr-3 text-text-secondary" />
                          Edit Issue
                        </button>
                        
                        <button
                          onClick={(e) => {
                            e.stopPropagation();
                            handleToggleStatus();
                          }}
                          className="w-full text-left flex items-center px-4 py-2.5 text-sm text-text-main hover:bg-surface-hover transition-colors"
                        >
                          {isDone ? (
                            <><FiCircle size={14} className="mr-3 text-yellow-500" /> Re-open Issue</>
                          ) : (
                            <><FiCheckCircle size={14} className="mr-3 text-green-500" /> Mark as Done</>
                          )}
                        </button>
                      </div>
                    </div>
                  )}
                </div>
              )}
            </div>
          </>
        )}
      </div>

      {/* Yorum BÃ¶lÃ¼mÃ¼ */}
      {isOpen && !isEditing && (
        // border-t border-border
        <div className="p-4 border-t border-border bg-surface/30">
          
          {/* Yorum Listesi */}
          {loadingComments ? (
            <div className="flex justify-center p-3">
              <FiLoader className="animate-spin text-primary" />
            </div>
          ) : (
            <div className="space-y-4 mb-4">
              {comments.length === 0 ? (
                <p className="text-text-secondary text-sm text-center py-2">No comments yet.</p>
              ) : (
                comments.map(comment => (
                  <Comment 
                    key={comment.id} 
                    comment={comment}
                    projectId={projectId}
                    onCommentUpdated={handleCommentUpdated} 
                    onCommentDeleted={handleCommentDeleted} 
                  />
                ))
              )}
            </div>
          )}
          
          {/* Yorum Formu veya KapalÄ± MesajÄ± */}
          {isDone ? (
            <div className="p-3 bg-surface border border-border rounded-md text-center">
              <p className="text-sm text-text-secondary flex items-center justify-center">
                <FiCheckCircle className="mr-2 text-green-500" />
                This issue is closed. No new comments can be added.
              </p>
            </div>
          ) : (
            // Herkes (public_viewer dahil) yorum yapabilir
            <CommentForm 
              onSubmit={handleCommentAdded}
              loading={contextLoading} 
            />
          )}
        </div>
      )}
    </div>
  );
}

export default IssueItem;


================================================
FILE: frontend/src/components/projects/ProjectDiscussion.js
================================================
// src/components/projects/ProjectDiscussion.js

import React, { useState, useEffect, useRef } from 'react';
import { useProjectContext } from '../../context/ProjectContext';
import { useAuth } from '../../context/AuthContext';
import { FiSend, FiLoader, FiLock, FiUser } from 'react-icons/fi';

export default function ProjectDiscussion() {
  const { currentProject, fetchComments, addComment, loading: contextLoading } = useProjectContext();
  const { user } = useAuth();
  const [messages, setMessages] = useState([]);
  const [newMessage, setNewMessage] = useState('');
  const [isLoading, setIsLoading] = useState(true);
  const [isSending, setIsSending] = useState(false);
  const chatEndRef = useRef(null);
  const userRole = currentProject?.currentUserRole;

  useEffect(() => {
    if (userRole === 'public_viewer' || !currentProject?.id) { setIsLoading(false); return; }
    const loadMessages = async () => {
      setIsLoading(true);
      try {
        const fetchedMessages = await fetchComments(currentProject.id);
        setMessages(fetchedMessages || []);
      } catch (error) { console.error("Error loading messages:", error); } 
      finally { setIsLoading(false); }
    };
    loadMessages();
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [currentProject?.id, userRole]);

  useEffect(() => { if (messages.length > 0) chatEndRef.current?.scrollIntoView({ behavior: 'smooth' }); }, [messages]);

  const handleSendMessage = async (e) => {
    e.preventDefault();
    if (!newMessage.trim() || isSending) return;
    const text = newMessage;
    setNewMessage('');
    setIsSending(true);
    try {
      const newComment = await addComment(currentProject.id, text);
      setMessages(prev => [...prev, newComment]);
    } catch (error) { console.error("Error sending:", error); setNewMessage(text); } 
    finally { setIsSending(false); }
  };

  if (userRole === 'public_viewer') {
    return (
      <div className="flex flex-col items-center justify-center p-10 bg-surface rounded-lg h-64 border border-border">
        <FiLock size={40} className="text-yellow-500 mb-4" />
        <h3 className="text-xl font-semibold text-text-main">Members Only Chat</h3>
        <p className="text-text-secondary mt-2">This chat room is only visible to project members.</p>
      </div>
    );
  }

  return (
    // Container: bg-surface
    <div className="flex flex-col h-[60vh] bg-surface rounded-lg shadow-sm border border-border">
      
      {/* Messages */}
      <div className="flex-1 p-4 space-y-4 overflow-y-auto custom-scrollbar">
        {isLoading ? (
          <div className="flex justify-center items-center h-full"><FiLoader className="animate-spin text-primary" size={24} /></div>
        ) : messages.length === 0 ? (
          <div className="flex justify-center items-center h-full flex-col opacity-50">
             <div className="w-12 h-12 bg-app rounded-full flex items-center justify-center mb-2"><FiSend size={20} className="text-text-secondary" /></div>
            <p className="text-text-secondary text-sm">No messages yet.</p>
          </div>
        ) : (
          messages.map(msg => {
            const isMine = msg.author_id === user.id;
            return (
              <div key={msg.id} className={`flex items-start ${isMine ? 'justify-end' : 'justify-start'} animate-fade-in`}>
                {!isMine && (
                  <div className="flex-shrink-0 mr-2 mt-1">
                    <div className="w-8 h-8 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-full flex items-center justify-center text-white text-xs font-bold shadow-sm">
                        {msg.author_name?.charAt(0).toUpperCase() || <FiUser />}
                    </div>
                  </div>
                )}
                
                {/* Bubble: Mine -> bg-primary, Others -> bg-app */}
                <div className={`max-w-[80%] lg:max-w-[70%] p-3 rounded-2xl shadow-sm ${
                    isMine ? 'bg-primary text-white rounded-tr-none' : 'bg-app text-text-main border border-border rounded-tl-none'
                  }`}
                >
                  {!isMine && <p className="text-[10px] font-bold text-primary mb-0.5 opacity-90">{msg.author_name}</p>}
                  <p className="text-sm break-words leading-relaxed">{msg.text}</p>
                  <p className={`text-[9px] mt-1 text-right ${isMine ? 'text-blue-100' : 'text-text-secondary'}`}>
                    {new Date(msg.created_at).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}
                  </p>
                </div>
              </div>
            );
          })
        )}
        <div ref={chatEndRef} />
      </div>

      {/* Input */}
      <div className="p-3 border-t border-border bg-app/50 rounded-b-lg">
        <form onSubmit={handleSendMessage} className="flex space-x-2">
          <input
            type="text" value={newMessage} onChange={(e) => setNewMessage(e.target.value)}
            className="flex-grow py-2.5 px-4 text-sm text-text-main bg-surface border border-border rounded-full focus:outline-none focus:ring-2 focus:ring-primary transition-all placeholder-text-secondary shadow-sm"
            placeholder="Type your message..." disabled={isSending || contextLoading}
          />
          <button type="submit" disabled={isSending || contextLoading} className="flex items-center justify-center w-10 h-10 bg-primary hover:bg-primary-hover text-white rounded-full transition-all shadow-md disabled:opacity-50">
            {isSending ? <FiLoader className="animate-spin text-xs" /> : <FiSend size={18} className="ml-0.5" />}
          </button>
        </form>
      </div>
    </div>
  );
}


================================================
FILE: frontend/src/components/projects/ProjectEditPage.js
================================================
// src/components/projects/ProjectEditPage.js

import React, { useState, useEffect } from 'react';
import { useProjectContext } from '../../context/ProjectContext';
import { useAuth } from '../../context/AuthContext'; 
import { useNavigate } from 'react-router-dom';
import { 
  FiUserPlus, FiLoader, FiCheck, FiAlertTriangle, FiSave,
  FiUsers, FiTrash2, FiUser, FiGlobe, FiLock, FiSettings, FiShield, FiLayout, FiFileText
} from 'react-icons/fi';

export default function ProjectEditPage() {
  const { user } = useAuth(); 
  const navigate = useNavigate();
  const { currentProject, addMember, removeMember, currentMembers, fetchMembers, updateProjectVisibility, updateTasksVisibility, updateProjectDetails, deleteProject } = useProjectContext();

  const [name, setName] = useState('');
  const [description, setDescription] = useState('');
  const [longDescription, setLongDescription] = useState('');
  const [isSavingDetails, setIsSavingDetails] = useState(false);
  const [saveMessage, setSaveMessage] = useState(null);

  const [usernameToAdd, setUsernameToAdd] = useState('');
  const [roleToAdd, setRoleToAdd] = useState('viewer');
  const [isAdding, setIsAdding] = useState(false);
  const [addError, setAddError] = useState(null);
  const [addSuccess, setAddSuccess] = useState(null);

  const [isPublic, setIsPublic] = useState(false);
  const [updatingVisibility, setUpdatingVisibility] = useState(false);
  const [tasksPublic, setTasksPublic] = useState(false);
  const [updatingTasks, setUpdatingTasks] = useState(false);

  const [removingId, setRemovingId] = useState(null); 
  const [isDeletingProject, setIsDeletingProject] = useState(false);

  useEffect(() => {
    if (currentProject) {
      setName(currentProject.name);
      setDescription(currentProject.description || '');
      setLongDescription(currentProject.long_description || ''); 
      setIsPublic(currentProject.is_public); 
      setTasksPublic(currentProject.is_tasks_public);
      fetchMembers(currentProject.id);
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [currentProject]);

  if (!currentProject) return <div className="p-10 text-center"><FiLoader className="animate-spin text-primary" /></div>;

  const handleDetailsSubmit = async (e) => {
    e.preventDefault();
    setIsSavingDetails(true);
    setSaveMessage(null);
    try {
      await updateProjectDetails(currentProject.id, name, description, longDescription);
      setSaveMessage({ type: 'success', text: 'Project details updated successfully!' });
    } catch (err) {
      const errorMsg = err.response?.data?.message || err.message || 'Failed to update.';
      setSaveMessage({ type: 'error', text: errorMsg });
    } finally { setIsSavingDetails(false); }
  };

  const handleVisibilityToggle = async () => {
    setUpdatingVisibility(true);
    try {
      const newVisibility = !isPublic; 
      await updateProjectVisibility(currentProject.id, newVisibility);
      setIsPublic(newVisibility);
    } catch (error) { alert("Error: " + error.message); } finally { setUpdatingVisibility(false); }
  };

  const handleTasksVisibilityToggle = async () => {
    setUpdatingTasks(true);
    try {
      const newVisibility = !tasksPublic;
      await updateTasksVisibility(currentProject.id, newVisibility);
      setTasksPublic(newVisibility);
    } catch (error) { alert("Error: " + error.message); } finally { setUpdatingTasks(false); }
  };

  const handleMemberSubmit = async (e) => {
    e.preventDefault();
    if (!usernameToAdd) return;
    setIsAdding(true);
    setAddError(null);
    setAddSuccess(null);
    try {
      const addedMember = await addMember(currentProject.id, usernameToAdd, roleToAdd);
      setAddSuccess(`Added ${addedMember.username} as ${addedMember.role}.`);
      setUsernameToAdd('');
    } catch (err) { setAddError(err.message); } finally { setIsAdding(false); }
  };

  const handleRemoveMember = async (memberId, memberUsername) => {
    if (window.confirm(`Remove ${memberUsername}?`)) {
      setRemovingId(memberId);
      try { await removeMember(currentProject.id, memberId); } 
      catch (err) { alert("Error: " + err.message); } finally { setRemovingId(null); }
    }
  };

  const handleDeleteProject = async () => {
    const confirmName = window.prompt(`To delete this project, type its name: "${currentProject.name}"`);
    if (confirmName === currentProject.name) {
      setIsDeletingProject(true);
      try {
        await deleteProject(currentProject.id);
        navigate('/dashboard');
      } catch (err) { alert("Failed to delete project: " + err.message); setIsDeletingProject(false); }
    } else if (confirmName !== null) { alert("Project name did not match."); }
  };

  // --- RENDER ---
  return (
    <div className="max-w-4xl mx-auto space-y-8 pb-20">
      
      {/* BAÅžLIK */}
      <div className="border-b border-border pb-4">
        <h2 className="text-3xl font-bold text-text-main flex items-center">
          <FiSettings className="mr-3 text-text-secondary" /> Project Settings
        </h2>
      </div>
      
      {/* 1. GENEL AYARLAR */}
      <div className="bg-surface rounded-xl border border-border p-6 shadow-sm">
        <h3 className="text-xl font-semibold text-text-main mb-4">General Settings</h3>
        <form onSubmit={handleDetailsSubmit} className="space-y-4">
          <div>
            <label className="block text-sm font-medium text-text-secondary mb-1">Project Name</label>
            <input type="text" value={name} onChange={(e) => setName(e.target.value)} className="w-full bg-app border border-border rounded-lg px-4 py-2 text-text-main focus:ring-2 focus:ring-primary outline-none transition-colors"/>
          </div>
          <div>
            <label className="block text-sm font-medium text-text-secondary mb-1">Short Description (Header)</label>
            <textarea rows="2" value={description} onChange={(e) => setDescription(e.target.value)} className="w-full bg-app border border-border rounded-lg px-4 py-2 text-text-main focus:ring-2 focus:ring-primary outline-none transition-colors"/>
          </div>
          <div>
            <label className="block text-sm font-medium text-text-secondary mb-1 flex items-center"><FiFileText className="mr-1"/> Long Description (Readme)</label>
            <textarea rows="6" value={longDescription} onChange={(e) => setLongDescription(e.target.value)} className="w-full bg-app border border-border rounded-lg px-4 py-2 text-text-main focus:ring-2 focus:ring-primary outline-none font-mono text-sm transition-colors" placeholder="Documentation..."/>
          </div>
          <div className="flex items-center justify-between">
            <button type="submit" disabled={isSavingDetails} className="bg-primary hover:bg-primary-hover text-white px-4 py-2 rounded-lg font-semibold flex items-center disabled:opacity-50 transition-colors">
              {isSavingDetails ? <FiLoader className="animate-spin mr-2"/> : <FiSave className="mr-2"/>} Save Changes
            </button>
            {saveMessage && <span className={`text-sm ${saveMessage.type === 'success' ? 'text-green-500' : 'text-red-500'}`}>{saveMessage.text}</span>}
          </div>
        </form>
      </div>

      {/* 2. GÃ–RÃœNÃœRLÃœK */}
      <div className="bg-surface rounded-xl border border-border overflow-hidden shadow-sm">
        <div className="p-6 border-b border-border flex justify-between items-center">
          <div>
            <h3 className="text-xl font-semibold text-text-main flex items-center">
              {isPublic ? <FiGlobe className="mr-2 text-green-500"/> : <FiLock className="mr-2 text-red-500"/>} Project Visibility
            </h3>
            <p className="text-text-secondary text-sm mt-1">{isPublic ? "Visible to everyone." : "Private. Only members can access."}</p>
          </div>
          <button onClick={handleVisibilityToggle} disabled={updatingVisibility} className={`px-4 py-2 rounded-lg font-medium border transition-colors ${isPublic ? 'border-red-500 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20' : 'border-green-500 text-green-500 hover:bg-green-50 dark:hover:bg-green-900/20'}`}>
            {updatingVisibility ? <FiLoader className="animate-spin"/> : (isPublic ? "Make Private" : "Make Public")}
          </button>
        </div>
        <div className="p-6 flex justify-between items-center">
          <div>
            <h3 className="text-xl font-semibold text-text-main flex items-center"><FiLayout className="mr-2 text-blue-500"/> Tasks Visibility</h3>
            <p className="text-text-secondary text-sm mt-1">{tasksPublic ? "Tasks are visible to public visitors." : "Tasks are hidden from public visitors."}</p>
          </div>
          <button onClick={handleTasksVisibilityToggle} disabled={updatingTasks} className={`px-4 py-2 rounded-lg font-medium border transition-colors ${tasksPublic ? 'border-red-500 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20' : 'border-green-500 text-green-500 hover:bg-green-50 dark:hover:bg-green-900/20'}`}>
            {updatingTasks ? <FiLoader className="animate-spin"/> : (tasksPublic ? "Hide Tasks" : "Show Tasks")}
          </button>
        </div>
      </div>

      {/* 3. ÃœYE YÃ–NETÄ°MÄ° */}
      <div className="bg-surface rounded-xl border border-border p-6 shadow-sm">
        <h3 className="text-xl font-semibold text-text-main mb-4 flex items-center"><FiUsers className="mr-2" /> Manage Team</h3>
        <form onSubmit={handleMemberSubmit} className="bg-app p-4 rounded-lg mb-6 flex flex-col md:flex-row gap-3 items-end border border-border">
          <div className="flex-grow w-full">
            <label className="text-xs text-text-secondary uppercase font-bold">Username</label>
            <input type="text" value={usernameToAdd} onChange={(e) => setUsernameToAdd(e.target.value)} className="w-full bg-surface border border-border rounded px-3 py-2 text-text-main outline-none focus:border-primary" placeholder="username"/>
          </div>
          <div className="w-full md:w-40">
            <label className="text-xs text-text-secondary uppercase font-bold">Role</label>
            <select value={roleToAdd} onChange={(e) => setRoleToAdd(e.target.value)} className="w-full bg-surface border border-border rounded px-3 py-2 text-text-main outline-none focus:border-primary">
              <option value="viewer">Viewer</option>
              <option value="editor">Editor</option>
            </select>
          </div>
          <button disabled={isAdding} type="submit" className="w-full md:w-auto bg-primary hover:bg-primary-hover text-white px-4 py-2 rounded font-semibold flex items-center justify-center disabled:opacity-50 transition-colors">
            {isAdding ? <FiLoader className="animate-spin"/> : <FiUserPlus />}
          </button>
        </form>
        
        {(addSuccess || addError) && (
          <div className={`mb-4 p-2 rounded text-sm flex items-center ${addSuccess ? 'text-green-600 bg-green-50 dark:text-green-400 dark:bg-green-900/20' : 'text-red-600 bg-red-50 dark:text-red-400 dark:bg-red-900/20'}`}>
            {addSuccess ? <FiCheck className="mr-2"/> : <FiAlertTriangle className="mr-2"/>} {addSuccess || addError}
          </div>
        )}

        <div className="space-y-2">
          {currentMembers.length > 0 ? (
            currentMembers.map(member => (
              <div key={member.id} className="flex justify-between items-center p-3 bg-surface hover:bg-surface-hover border border-border rounded transition-colors">
                <div className="flex items-center">
                  <div className="w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-text-main font-bold mr-3">{member.username.charAt(0).toUpperCase()}</div>
                  <div>
                    <p className="text-text-main font-medium text-sm">{member.username}</p>
                    <span className="text-xs text-text-secondary bg-app px-2 py-0.5 rounded border border-border capitalize">{member.role}</span>
                  </div>
                </div>
                {member.role !== 'owner' && (
                  <button onClick={() => handleRemoveMember(member.id, member.username)} disabled={removingId === member.id} className="text-text-secondary hover:text-red-500 p-2">
                    {removingId === member.id ? <FiLoader className="animate-spin"/> : <FiTrash2 />}
                  </button>
                )}
              </div>
            ))
          ) : (<p className="text-text-secondary text-center py-4">No members yet.</p>)}
        </div>
      </div>

      {/* 4. TEHLÄ°KE BÃ–LGESÄ° */}
      <div className="bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-900/50 rounded-xl p-6 mt-10">
        <h3 className="text-xl font-bold text-red-600 dark:text-red-500 flex items-center mb-2"><FiShield className="mr-2" /> Danger Zone</h3>
        <p className="text-red-600/70 dark:text-gray-400 text-sm mb-6">Deleting this project will permanently remove all issues, comments, files, and member associations.</p>
        <div className="flex justify-end">
          <button onClick={handleDeleteProject} disabled={isDeletingProject} className="px-5 py-2.5 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg shadow-lg transition-colors disabled:opacity-50 flex items-center">
            {isDeletingProject ? <FiLoader className="animate-spin mr-2"/> : <FiTrash2 className="mr-2"/>} Delete Project
          </button>
        </div>
      </div>
    </div>
  );
}


================================================
FILE: frontend/src/components/projects/ProjectFiles.js
================================================
// src/components/projects/ProjectFiles.js

import React, { useState, useEffect } from 'react';
import { useProjectContext } from '../../context/ProjectContext';
import { 
  FiFile, FiDownload, FiTrash2, FiUpload, FiLoader, 
  FiFileText, FiX, FiEye, FiCheckSquare, FiSquare, FiChevronLeft, FiChevronRight 
} from 'react-icons/fi';

export default function ProjectFiles() {
  const { currentProject, fetchFiles, uploadFile, deleteFile } = useProjectContext();
  
  const [files, setFiles] = useState([]);
  const [loading, setLoading] = useState(false);
  const [uploading, setUploading] = useState(false);
  const [selectedIds, setSelectedIds] = useState([]);
  const [previewFile, setPreviewFile] = useState(null);

  const userRole = currentProject?.currentUserRole;
  const canEdit = userRole === 'owner' || userRole === 'editor';

  useEffect(() => {
    if (currentProject) {
      setLoading(true);
      fetchFiles(currentProject.id)
        .then(data => setFiles(data || []))
        .finally(() => setLoading(false));
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [currentProject]);

  // Klavye olaylarÄ± (Preview iÃ§in)
  useEffect(() => {
    const handleKeyDown = (e) => {
      if (!previewFile) return;
      if (e.key === 'ArrowRight') handleNextPrev('next');
      if (e.key === 'ArrowLeft') handleNextPrev('prev');
      if (e.key === 'Escape') setPreviewFile(null);
    };
    window.addEventListener('keydown', handleKeyDown);
    return () => window.removeEventListener('keydown', handleKeyDown);
  });

  const handleFileUpload = async (e) => {
    const selectedFiles = Array.from(e.target.files);
    if (selectedFiles.length === 0) return;

    setUploading(true);
    try {
      const uploadPromises = selectedFiles.map(file => uploadFile(currentProject.id, file));
      const newFiles = await Promise.all(uploadPromises);
      setFiles(prevFiles => [...newFiles, ...prevFiles]); 
    } catch (error) {
      console.error("Upload failed", error);
      alert("Hata: Dosyalar yÃ¼klenemedi.");
    } finally {
      setUploading(false);
      e.target.value = null; 
    }
  };

  const handleDeleteSelected = async () => {
    if (window.confirm(`SeÃ§ili ${selectedIds.length} dosyayÄ± silmek istediÄŸine emin misin?`)) {
      setLoading(true);
      try {
        await Promise.all(selectedIds.map(id => deleteFile(currentProject.id, id)));
        setFiles(files.filter(f => !selectedIds.includes(f.id)));
        setSelectedIds([]);
      } catch (err) {
        alert("BazÄ± dosyalar silinemedi.");
      } finally {
        setLoading(false);
      }
    }
  };

  const toggleSelect = (id, e) => {
    e.stopPropagation();
    if (selectedIds.includes(id)) {
      setSelectedIds(selectedIds.filter(itemId => itemId !== id));
    } else {
      setSelectedIds([...selectedIds, id]);
    }
  };

  const toggleSelectAll = () => {
    if (selectedIds.length === files.length) {
      setSelectedIds([]);
    } else {
      setSelectedIds(files.map(f => f.id));
    }
  };

  const handleNextPrev = (direction) => {
    if (!previewFile) return;
    const currentIndex = files.findIndex(f => f.id === previewFile.id);
    let newIndex;
    if (direction === 'next') {
      newIndex = currentIndex + 1 < files.length ? currentIndex + 1 : 0; 
    } else {
      newIndex = currentIndex - 1 >= 0 ? currentIndex - 1 : files.length - 1; 
    }
    setPreviewFile(files[newIndex]);
  };

  const getFileUrl = (filePath) => {
    const cleanPath = filePath.replace(/\\/g, '/');
    return `http://localhost:5000/${cleanPath}`;
  };

  const getFileType = (filename) => {
    const ext = filename.split('.').pop().toLowerCase();
    if (['jpg', 'jpeg', 'png', 'gif', 'webp', 'svg'].includes(ext)) return 'image';
    if (ext === 'pdf') return 'pdf';
    if (['txt', 'md', 'json', 'xml', 'js', 'css', 'html', 'csv', 'log'].includes(ext)) return 'text';
    return 'other';
  };

  return (
    <div className="space-y-6 relative">
      {/* HEADER */}
      <div className="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6">
        <div className="flex items-center gap-4">
          <h2 className="text-2xl font-semibold text-text-main">Project Files</h2>
          {selectedIds.length > 0 && canEdit && (
            <button 
              onClick={handleDeleteSelected}
              className="flex items-center px-3 py-1.5 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/40 rounded-lg transition-colors text-sm border border-red-200 dark:border-red-800"
            >
              <FiTrash2 className="mr-2" /> Delete Selected ({selectedIds.length})
            </button>
          )}
        </div>
        
        {canEdit && (
          <div className="relative">
            <input 
              type="file" multiple onChange={handleFileUpload}
              className="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"
              disabled={uploading}
            />
            <button className={`relative z-0 flex items-center px-4 py-2 rounded-lg transition-colors ${uploading ? 'bg-text-secondary cursor-not-allowed' : 'bg-primary hover:bg-primary-hover'} text-white shadow-lg`}>
              {uploading ? <FiLoader className="animate-spin mr-2" /> : <FiUpload className="mr-2" />}
              {uploading ? 'Uploading...' : 'Upload Files'}
            </button>
          </div>
        )}
      </div>

      {/* LÄ°STE */}
      {/* bg-gray-800 -> bg-surface, border-gray-700 -> border-border */}
      <div className="bg-surface rounded-xl overflow-hidden shadow-sm border border-border">
        {/* Header Row */}
        <div className="flex items-center bg-app p-3 border-b border-border text-xs font-bold text-text-secondary uppercase">
          <div className="w-10 text-center">
            {canEdit && (
              <button onClick={toggleSelectAll} className="hover:text-text-main">
                {files.length > 0 && selectedIds.length === files.length ? <FiCheckSquare size={16}/> : <FiSquare size={16}/>}
              </button>
            )}
          </div>
          <div className="flex-1 px-4">Filename</div>
          <div className="w-32 hidden sm:block">Uploaded By</div>
          <div className="w-32 text-right hidden sm:block">Date</div>
          <div className="w-16 text-center">View</div>
        </div>

        {loading ? (
          <div className="flex justify-center p-10"><FiLoader className="animate-spin text-primary" size={30} /></div>
        ) : files.length === 0 ? (
          <div className="p-10 text-center text-text-secondary">No files uploaded yet.</div>
        ) : (
          <ul className="divide-y divide-border">
            {files.map(file => {
              const isSelected = selectedIds.includes(file.id);
              const type = getFileType(file.filename);

              return (
                <li 
                  key={file.id} 
                  onClick={() => setPreviewFile(file)}
                  // hover:bg-surface-hover, text renkleri gÃ¼ncellendi
                  className={`flex items-center p-3 hover:bg-surface-hover transition-colors cursor-pointer group ${isSelected ? 'bg-primary/5' : ''}`}
                >
                  {/* CHECKBOX */}
                  <div className="w-10 flex justify-center" onClick={(e) => e.stopPropagation()}>
                    {canEdit && (
                      <button onClick={(e) => toggleSelect(file.id, e)} className={`transition-colors ${isSelected ? 'text-primary' : 'text-text-secondary hover:text-text-main'}`}>
                        {isSelected ? <FiCheckSquare size={18}/> : <FiSquare size={18}/>}
                      </button>
                    )}
                  </div>

                  {/* Ä°KON VE Ä°SÄ°M */}
                  <div className="flex-1 px-4 flex items-center min-w-0">
                    <div className={`p-2 rounded-lg mr-3 ${type === 'image' ? 'bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400' : (type === 'pdf' || type === 'text') ? 'bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400' : 'bg-app text-text-secondary'}`}>
                      {type === 'image' ? <FiFileText /> : <FiFile />}
                    </div>
                    <span className="text-text-main font-medium truncate">{file.filename}</span>
                  </div>

                  {/* META */}
                  <div className="w-32 text-sm text-text-secondary hidden sm:block truncate">{file.uploader_name}</div>
                  <div className="w-32 text-right text-sm text-text-secondary hidden sm:block font-mono">{new Date(file.created_at).toLocaleDateString()}</div>

                  {/* Ä°NDÄ°R BUTONU */}
                  <div className="w-16 flex justify-center" onClick={(e) => e.stopPropagation()}>
                    <a 
                      href={getFileUrl(file.file_path)} 
                      download
                      className="p-1.5 text-text-secondary hover:text-text-main hover:bg-surface-hover rounded transition-colors"
                      title="Download"
                    >
                      <FiDownload size={16} />
                    </a>
                  </div>
                </li>
              );
            })}
          </ul>
        )}
      </div>

      {/* PREVIEW MODAL - (Genellikle koyu arka plan daha iyi durur, o yÃ¼zden bg-black/95 kalabilir veya bg-app/95 yapÄ±labilir) */}
      {previewFile && (
        <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-md animate-fade-in select-none">
          <button onClick={() => setPreviewFile(null)} className="absolute top-6 right-6 text-gray-400 hover:text-white bg-gray-800/80 p-2 rounded-full z-50 transition-colors">
            <FiX size={28} />
          </button>

          <button onClick={() => handleNextPrev('prev')} className="absolute left-4 top-1/2 -translate-y-1/2 text-white/50 hover:text-white p-4 hover:bg-white/10 rounded-full transition-all z-50">
            <FiChevronLeft size={40} />
          </button>
          
          <button onClick={() => handleNextPrev('next')} className="absolute right-4 top-1/2 -translate-y-1/2 text-white/50 hover:text-white p-4 hover:bg-white/10 rounded-full transition-all z-50">
            <FiChevronRight size={40} />
          </button>

          <div className="w-full h-full p-12 flex flex-col items-center justify-center">
            {getFileType(previewFile.filename) === 'image' ? (
              <img src={getFileUrl(previewFile.file_path)} alt="Preview" className="max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl"/>
            ) : (getFileType(previewFile.filename) === 'pdf' || getFileType(previewFile.filename) === 'text') ? (
              <iframe src={getFileUrl(previewFile.file_path)} title="File Preview" className="w-full max-w-5xl h-[85vh] bg-white rounded-lg shadow-2xl border-none"/>
            ) : (
              <div className="text-center text-white bg-gray-800 p-16 rounded-2xl border border-gray-700 shadow-2xl">
                <FiFileText size={80} className="mx-auto mb-6 text-blue-500 opacity-80"/>
                <h3 className="text-2xl font-bold mb-3 text-white">{previewFile.filename}</h3>
                <p className="text-gray-400 mb-8">This file type cannot be previewed directly.</p>
                <a href={getFileUrl(previewFile.file_path)} download className="px-8 py-3 bg-blue-600 hover:bg-blue-500 rounded-lg font-bold text-white transition-colors shadow-lg">Download File</a>
              </div>
            )}
            <div className="absolute bottom-6 left-0 w-full text-center pointer-events-none">
                <span className="bg-black/50 text-white px-4 py-2 rounded-full text-sm backdrop-blur-sm">
                    {files.findIndex(f => f.id === previewFile.id) + 1} / {files.length} â€” {previewFile.filename}
                </span>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}


================================================
FILE: frontend/src/components/projects/ProjectIssues.js
================================================
// src/components/projects/ProjectIssues.js

import React, { useState, useEffect } from 'react';
import { useProjectContext } from '../../context/ProjectContext';
import { useAuth } from '../../context/AuthContext';
import { FiLoader, FiPlus, FiSearch } from 'react-icons/fi';
import IssueItem from './IssueItem'; 

function ProjectIssues() {
  const [issues, setIssues] = useState([]);
  const [newIssueText, setNewIssueText] = useState('');
  const [searchTerm, setSearchTerm] = useState('');
  const { currentProject, fetchIssues, createIssue, loading } = useProjectContext();
  const { user } = useAuth(); 

  const projectId = currentProject?.id;
  const userRole = currentProject?.currentUserRole;

  useEffect(() => {
    const loadIssues = async () => {
      try {
        const fetchedIssues = await fetchIssues(projectId);
        setIssues(fetchedIssues || []);
      } catch (error) { console.error("Failed to fetch issues:", error); }
    };
    if (projectId) loadIssues();
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [projectId]);

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (!newIssueText.trim()) return;
    try {
      const newIssue = await createIssue(projectId, newIssueText);
      setIssues([newIssue, ...issues]); 
      setNewIssueText('');
    } catch (error) { console.error("Failed to create issue:", error); }
  };

  const handleIssueUpdate = (updatedIssue) => {
    setIssues(prevIssues => prevIssues.map(issue => issue.id === updatedIssue.id ? updatedIssue : issue));
  };

  const filteredIssues = issues.filter(issue => issue.text.toLowerCase().includes(searchTerm.toLowerCase()));

  return (
    // bg-surface
    <div className="bg-surface p-6 rounded-lg shadow-sm border border-border">
      <div className="flex justify-between items-center mb-6">
        <h3 className="text-xl font-bold text-text-main">Project Issues</h3>
        <span className="text-xs bg-app text-text-secondary px-2 py-1 rounded-full border border-border">
          {issues.length} Total
        </span>
      </div>
      
      {/* SEARCH */}
      <div className="relative mb-6">
        <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
          <FiSearch className="text-text-secondary" />
        </div>
        <input 
          type="text" placeholder="Search issues..." value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)}
          className="w-full bg-app text-text-main border border-border text-sm rounded-lg focus:ring-primary focus:border-primary block pl-10 p-2.5 placeholder-text-secondary transition-colors"
        />
      </div>

      {/* CREATE FORM */}
      {(userRole === 'owner' || userRole === 'editor') && (
        <form onSubmit={handleSubmit} className="flex mb-6">
          <input 
            type="text" value={newIssueText} onChange={(e) => setNewIssueText(e.target.value)}
            className="flex-grow py-2 px-3 text-text-main bg-app border border-border rounded-l-lg focus:outline-none focus:ring-2 focus:ring-primary placeholder-text-secondary"
            placeholder="New issue title..."
          />
          <button type="submit" disabled={loading} className="flex items-center bg-primary hover:bg-primary-hover text-white font-semibold py-2 px-4 rounded-r-lg transition-colors disabled:opacity-50">
            {loading ? <FiLoader className="animate-spin" /> : <FiPlus />}
          </button>
        </form>
      )}

      {/* ISSUE LIST */}
      <div className="space-y-3">
        {loading && issues.length === 0 ? (
          <p className="text-text-secondary text-center py-4">Loading issues...</p>
        ) : issues.length === 0 ? (
          <p className="text-text-secondary text-center py-4">No issues found for this project.</p>
        ) : filteredIssues.length === 0 ? (
          <p className="text-text-secondary text-center py-4">No issues match your search.</p>
        ) : (
          filteredIssues.map(issue => (
            <IssueItem key={issue.id} issue={issue} projectId={projectId} onIssueUpdated={handleIssueUpdate} />
          ))
        )}
      </div>
    </div>
  );
}

export default ProjectIssues;


================================================
FILE: frontend/src/components/projects/ProjectList.js
================================================
// src/components/projects/ProjectList.js

import React from 'react';
import { Link } from 'react-router-dom';
import { FiLoader, FiArrowRight } from 'react-icons/fi'; // Ä°konlar

// 1. Component artÄ±k 'projects', 'loading', 'title' gibi verileri
//    prop (parametre) olarak dÄ±ÅŸarÄ±dan alÄ±r.
function ProjectList({ title, projects, loading, viewAllLink }) {

  // 2. YÃ¼kleniyorsa (Loading)
  if (loading) {
    return (
      <div className="bg-gray-800 p-6 rounded-lg flex justify-center items-center">
        <FiLoader className="animate-spin text-blue-500" size={30} />
      </div>
    );
  }

  // 3. YÃ¼kleme bitti ve proje yoksa (Empty State)
  if (projects.length === 0) {
    return (
      <div className="bg-gray-800 p-6 rounded-lg">
        <h2 className="text-xl font-semibold text-white mb-2">{title}</h2>
        <p className="text-gray-400">HenÃ¼z bu kategoriye ait bir projeniz yok.</p>
        <p className="text-gray-500 text-sm mt-4">
          BaÅŸlamak iÃ§in "Create New Project" butonunu kullanÄ±n.
        </p>
      </div>
    );
  }

  // 4. YÃ¼kleme bitti ve projeler varsa (Project List)
  return (
    <div className="bg-gray-800 p-6 rounded-lg">
      {/* BaÅŸlÄ±k ve 'View All' Linki */}
      <div className="flex justify-between items-center mb-4">
        <h2 className="text-xl font-semibold text-white">{title}</h2>
        {viewAllLink && (
          <Link to={viewAllLink} className="text-sm text-blue-400 hover:text-blue-300 flex items-center">
            View All
            <FiArrowRight className="ml-1" size={14} />
          </Link>
        )}
      </div>

      {/* Proje KartlarÄ± */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {projects.map(project => (
          <Link 
            to={`/project/${project.id}`} // Proje detay sayfasÄ±na yÃ¶nlendir
            key={project.id} 
            className="block bg-gray-700 p-4 rounded-lg shadow hover:bg-gray-600 transition-colors"
          >
            <h3 className="font-bold text-lg text-white mb-1">{project.name}</h3>
            <p className="text-gray-400 text-sm truncate">{project.description}</p>
            <span className="text-xs text-gray-500 mt-2 block">
              Last updated: {new Date(project.last_updated_at).toLocaleDateString()}
            </span>
          </Link>
        ))}
      </div>
    </div>
  );
}

export default ProjectList;


================================================
FILE: frontend/src/components/projects/ProjectTasks.js
================================================
// src/components/projects/ProjectTasks.js

import React, { useState, useEffect, useRef } from 'react';
import { useProjectContext } from '../../context/ProjectContext';
import api from '../../services/api'; 
import { 
  FiPlus, FiCheckCircle, FiLoader, FiClock, FiLock, 
  FiMoreVertical, FiEdit, FiTrash2, FiSave, FiX, FiUser 
} from 'react-icons/fi';

export default function ProjectTasks() {
  const { currentProject, fetchTasks, createTask, deleteTask, updateTask } = useProjectContext();
  const [tasks, setTasks] = useState([]);
  const [loading, setLoading] = useState(true);
  const [accessDenied, setAccessDenied] = useState(false);
  const [newTaskTitle, setNewTaskTitle] = useState('');
  
  const projectId = currentProject?.id;
  const userRole = currentProject?.currentUserRole;
  const canEdit = userRole !== 'public_viewer';

  useEffect(() => {
    if (projectId) {
      setLoading(true);
      fetchTasks(projectId).then(data => {
        if (data === null) {
          setAccessDenied(true); 
        } else {
          setTasks(data);
          setAccessDenied(false);
        }
        setLoading(false);
      });
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [projectId]);

  const handleAddTask = async (e) => {
    e.preventDefault();
    if (!newTaskTitle.trim()) return;
    try {
      const newTask = await createTask(projectId, { 
        title: newTaskTitle, status: 'todo', due_date: new Date().toISOString() 
      });
      if (newTask) {
        setTasks([...tasks, newTask]);
        setNewTaskTitle('');
      }
    } catch (error) { console.error("Failed to create task:", error); }
  };

 const moveTask = async (task, newStatus) => {
    const savedToken = localStorage.getItem('token');
    if (!savedToken) return;

    const previousTasks = [...tasks];
    const updatedList = tasks.map(t => t.id === task.id ? { ...t, status: newStatus } : t);
    setTasks(updatedList);

    try {
        await api.put(`/api/projects/${projectId}/tasks/${task.id}`, { status: newStatus });
    } catch (error) {
      setTasks(previousTasks);
      alert(`Error moving task: ${error.message}`);
    }
  };

  const handleDeleteTask = async (taskId) => {
    if (window.confirm("Are you sure you want to delete this task?")) {
      try {
        await deleteTask(projectId, taskId);
        setTasks(tasks.filter(t => t.id !== taskId));
      } catch (error) { console.error("Failed to delete task:", error); }
    }
  };

  const handleUpdateTaskTitle = async (taskId, newTitle) => {
    try {
      const updatedTask = await updateTask(projectId, taskId, { title: newTitle });
      setTasks(tasks.map(t => t.id === taskId ? updatedTask : t));
    } catch (error) { console.error("Failed to update task:", error); }
  };

  const handleDragStart = (e, taskId) => { e.dataTransfer.setData("taskId", taskId); };
  const handleDragOver = (e) => { e.preventDefault(); };
  const handleDrop = (e, newStatus) => {
    e.preventDefault();
    const taskId = e.dataTransfer.getData("taskId");
    const task = tasks.find(t => t.id === Number(taskId) || t.id === taskId);
    if (task && task.status !== newStatus) { moveTask(task, newStatus); }
  };

  const totalTasks = tasks.length;
  const doneCount = tasks.filter(t => t.status === 'done').length;
  const inProgressCount = tasks.filter(t => t.status === 'in_progress').length;
  const weightedScore = doneCount + (inProgressCount * 0.5);
  const progressPercentage = totalTasks === 0 ? 0 : Math.round((weightedScore / totalTasks) * 100);

  if (loading) return <div className="p-10 flex justify-center"><FiLoader className="animate-spin text-primary" size={30}/></div>;
  
  if (accessDenied) {
    return (
      <div className="flex flex-col items-center justify-center p-10 bg-surface rounded-lg border border-border">
        <FiLock size={40} className="text-red-500 mb-4" />
        <h3 className="text-xl font-bold text-text-main">Tasks are Private</h3>
        <p className="text-text-secondary mt-2">Only project members can see the task board.</p>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* 1. PROGRESS BAR */}
      <div className="bg-surface p-4 rounded-lg border border-border shadow-sm">
        <div className="flex justify-between items-center mb-2">
          <h3 className="text-text-main font-semibold flex items-center">
            <FiCheckCircle className="mr-2 text-primary" /> Project Progress
          </h3>
          <span className="text-primary font-bold">{progressPercentage}% Completed</span>
        </div>
        <div className="w-full bg-app rounded-full h-2.5 overflow-hidden">
          <div className="bg-gradient-to-r from-primary to-purple-500 h-2.5 rounded-full transition-all duration-500" style={{ width: `${progressPercentage}%` }}></div>
        </div>
      </div>

      {/* 2. ADD TASK FORM */}
      {canEdit && (
        <form onSubmit={handleAddTask} className="flex gap-2">
          <input 
            type="text" value={newTaskTitle} onChange={(e) => setNewTaskTitle(e.target.value)}
            className="flex-grow bg-surface text-text-main border border-border rounded-lg px-4 py-2 focus:ring-2 focus:ring-primary outline-none transition-colors"
            placeholder="Add a new task..."
          />
          <button type="submit" className="bg-primary hover:bg-primary-hover text-white px-4 py-2 rounded-lg font-semibold flex items-center transition-colors">
            <FiPlus className="mr-2" /> Add Task
          </button>
        </form>
      )}

      {/* 3. KANBAN BOARD */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-6 h-[600px]">
        <KanbanColumn 
          title="To Do" status="todo" tasks={tasks} 
          borderColor="border-indigo-500" badgeColor="bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300"
          canEdit={canEdit} onMove={moveTask} onDelete={handleDeleteTask} onUpdate={handleUpdateTaskTitle} onDragOver={handleDragOver} onDrop={handleDrop} onDragStart={handleDragStart}
        />
        <KanbanColumn 
          title="In Progress" status="in_progress" tasks={tasks} 
          borderColor="border-blue-500" badgeColor="bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"
          canEdit={canEdit} onMove={moveTask} onDelete={handleDeleteTask} onUpdate={handleUpdateTaskTitle} onDragOver={handleDragOver} onDrop={handleDrop} onDragStart={handleDragStart}
        />
        <KanbanColumn 
          title="Done" status="done" tasks={tasks} 
          borderColor="border-purple-500" badgeColor="bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300"
          canEdit={canEdit} onMove={moveTask} onDelete={handleDeleteTask} onUpdate={handleUpdateTaskTitle} onDragOver={handleDragOver} onDrop={handleDrop} onDragStart={handleDragStart}
        />
      </div>
    </div>
  );
}

function KanbanColumn({ title, status, tasks, borderColor, badgeColor, canEdit, onMove, onDelete, onUpdate, onDragOver, onDrop, onDragStart }) {
  const columnTasks = tasks.filter(t => t.status === status);
  return (
    // bg-surface: SÃ¼tun rengi
    <div className={`bg-surface rounded-xl border-t-4 ${borderColor} p-4 flex flex-col h-full shadow-lg border-x border-b border-border`} onDragOver={onDragOver} onDrop={(e) => onDrop(e, status)}>
      <h4 className="text-text-main font-bold mb-4 flex justify-between items-center">
        {title} 
        <span className={`px-2 py-0.5 rounded-full text-xs font-semibold ${badgeColor}`}>{columnTasks.length}</span>
      </h4>
      <div className="flex-1 overflow-y-auto space-y-3 custom-scrollbar pr-1 pb-10">
        {columnTasks.map(task => (
          <TaskItem key={task.id} task={task} canEdit={canEdit} status={status} onMove={onMove} onDelete={onDelete} onUpdate={onUpdate} onDragStart={onDragStart}/>
        ))}
      </div>
    </div>
  );
}

function TaskItem({ task, canEdit, status, onMove, onDelete, onUpdate, onDragStart }) {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [isEditing, setIsEditing] = useState(false);
  const [editTitle, setEditTitle] = useState(task.title);
  const menuRef = useRef(null);

  useEffect(() => {
    function handleClickOutside(event) { if (menuRef.current && !menuRef.current.contains(event.target)) setIsMenuOpen(false); }
    document.addEventListener("mousedown", handleClickOutside);
    return () => document.removeEventListener("mousedown", handleClickOutside);
  }, []);

  const handleSaveEdit = () => {
    if (editTitle.trim() && editTitle !== task.title) { onUpdate(task.id, editTitle); }
    setIsEditing(false);
  };

  return (
    // bg-app: GÃ¶rev kartÄ± rengi (SÃ¼tundan farklÄ± olmasÄ± iÃ§in)
    <div 
      className={`bg-app p-3 rounded-lg border border-border hover:border-primary transition-all group relative ${canEdit ? 'cursor-move' : ''}`}
      draggable={canEdit}
      onDragStart={(e) => canEdit && onDragStart(e, task.id)}
    >
      {isEditing ? (
        <div className="flex flex-col gap-2">
          <input type="text" value={editTitle} onChange={(e) => setEditTitle(e.target.value)} className="w-full bg-surface text-text-main text-sm p-1 rounded border border-primary focus:outline-none" autoFocus/>
          <div className="flex justify-end gap-2">
            <button onClick={() => setIsEditing(false)} className="text-red-500 hover:text-red-600"><FiX size={16}/></button>
            <button onClick={handleSaveEdit} className="text-green-500 hover:text-green-600"><FiSave size={16}/></button>
          </div>
        </div>
      ) : (
        <>
          <div className="flex justify-between items-start">
            <p className="text-text-main text-sm font-medium mb-2 break-words flex-1 pr-6">{task.title}</p>
            {canEdit && (
              <div className="relative" ref={menuRef}>
                <button onClick={() => setIsMenuOpen(!isMenuOpen)} className="text-text-secondary hover:text-text-main p-1 rounded-full hover:bg-surface-hover transition-colors">
                  <FiMoreVertical size={16} />
                </button>
                {isMenuOpen && (
                  <div className="absolute right-0 top-6 w-32 bg-surface border border-border rounded-md shadow-xl z-10 overflow-hidden">
                    <button onClick={() => { setIsEditing(true); setIsMenuOpen(false); }} className="w-full text-left px-3 py-2 text-xs text-text-main hover:bg-surface-hover flex items-center">
                      <FiEdit className="mr-2" /> Edit
                    </button>
                    <button onClick={() => { onDelete(task.id); setIsMenuOpen(false); }} className="w-full text-left px-3 py-2 text-xs text-red-500 hover:bg-surface-hover flex items-center">
                      <FiTrash2 className="mr-2" /> Delete
                    </button>
                  </div>
                )}
              </div>
            )}
          </div>
          <div className="flex flex-col gap-1 mt-2">
             <div className="flex items-center text-xs text-text-secondary">
               <FiUser className="mr-1.5 w-3 h-3" />
               <span>Created by: <span className="text-text-main">{task.created_by_name || 'Unknown'}</span></span>
             </div>
             <div className="flex items-center text-xs text-text-secondary">
                <FiClock className="mr-1.5 w-3 h-3"/> 
                {new Date(task.created_at).toLocaleDateString()}
             </div>
          </div>
          {canEdit && (
            <div className="mt-3 pt-2 border-t border-border flex justify-end space-x-2 opacity-0 group-hover:opacity-100 transition-opacity">
              {status !== 'todo' && <button onClick={() => onMove(task, 'todo')} className="text-xs bg-surface border border-border hover:bg-indigo-100 dark:hover:bg-indigo-900/30 text-text-secondary hover:text-indigo-500 px-2 py-1 rounded transition-colors">To Do</button>}
              {status !== 'in_progress' && <button onClick={() => onMove(task, 'in_progress')} className="text-xs bg-surface border border-border hover:bg-blue-100 dark:hover:bg-blue-900/30 text-text-secondary hover:text-blue-500 px-2 py-1 rounded transition-colors">Progress</button>}
              {status !== 'done' && <button onClick={() => onMove(task, 'done')} className="text-xs bg-surface border border-border hover:bg-purple-100 dark:hover:bg-purple-900/30 text-text-secondary hover:text-purple-500 px-2 py-1 rounded transition-colors">Done</button>}
            </div>
          )}
        </>
      )}
    </div>
  );
}


================================================
FILE: frontend/src/components/projects/SharedProjectCard.js
================================================
// src/components/projects/SharedProjectCard.js
import React from 'react';
import { Link } from 'react-router-dom';
import { FiUser, FiClock, FiChevronRight } from 'react-icons/fi'; 

function SharedProjectCard({ project }) {
  if (!project) return null;

  return (
    <Link to={`/project/${project.id}`} className="relative group h-fit">
      <div className="relative p-4 rounded-2xl bg-surface transition-all duration-300 h-full flex flex-col justify-between hover:shadow-xl shadow-sm border-none dark:bg-surface-dark">
        
        {/* ACCENT STRIP */}
        <div className="absolute left-0 top-4 bottom-4 w-1 rounded-r-full bg-gradient-to-b from-blue-500 to-purple-600 opacity-80"></div>

        <div>
          <div className="flex justify-between items-start mb-2">
            <span className="text-[10px] font-bold px-2 py-0.5 rounded-md uppercase tracking-wider bg-primary/10 text-primary">
              Public
            </span>
          </div>
          
          <h3 className="text-xl font-bold text-text-main group-hover:text-primary transition-colors truncate mb-1 dark:text-white">
            {project.name}
          </h3>
          <p className="text-sm text-text-secondary/70 line-clamp-1 leading-relaxed">
            {project.description || "Public workspace"}
          </p>
        </div>

        <div className="mt-4 pt-3 border-t border-text-secondary/5 flex justify-between items-center text-[10px] text-text-secondary font-bold uppercase tracking-tighter">
          <div className="flex flex-col gap-1">
            <span className="flex items-center text-xs text-text-main/80 font-semibold">
              <FiUser className="mr-1.5 opacity-50" /> 
              {project.owner_name}
            </span>
            <span className="flex items-center opacity-40 font-medium">
              <FiClock className="mr-1.5" /> 
              {new Date(project.created_at).toLocaleDateString()}
            </span>
          </div>
          <div className="flex items-center text-primary font-black text-xs tracking-widest transition-transform group-hover:translate-x-1">
            VIEW <FiChevronRight size={14} className="ml-1" />
          </div>
        </div>
      </div>
    </Link>
  );
}

export default SharedProjectCard;


================================================
FILE: frontend/src/context/AuthContext.js
================================================
// src/context/AuthContext.js

import React, { createContext, useState, useEffect, useContext } from 'react';
import api from '../services/api';

const AuthContext = createContext();

export const useAuth = () => useContext(AuthContext);

export const AuthProvider = ({ children }) => {
  const [user, setUser] = useState(null);
  const [token, setToken] = useState(localStorage.getItem('token')); // BaÅŸlangÄ±Ã§ta depodan oku
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  // Sayfa ilk aÃ§Ä±ldÄ±ÄŸÄ±nda veya yenilendiÄŸinde kullanÄ±cÄ±yÄ± doÄŸrula
  useEffect(() => {
    const loadUser = async () => {
      const storedToken = localStorage.getItem('token');
      
      if (!storedToken) {
        setLoading(false);
        return;
      }

      try {
        // Token'Ä± header'a ekle (api.js interceptor yapÄ±yor ama burasÄ± garanti olsun)
        api.defaults.headers.common['x-auth-token'] = storedToken;
        
        // Backend'den "Ben kimim?" sorusunu sor
        const res = await api.get('/api/auth/user');
        
        setUser(res.data);
        setToken(storedToken);
      } catch (err) {
        console.error("Token geÃ§ersiz, Ã§Ä±kÄ±ÅŸ yapÄ±lÄ±yor...");
        logout(); // Token bozuksa temizle
      } finally {
        setLoading(false);
      }
    };

    loadUser();
  }, []);

  // --- LOGIN ---
  const login = async (username, password) => {
    setLoading(true);
    setError(null);
    try {
      const res = await api.post('/api/auth/login', { username, password });
      
      // Token ve User verisini al
      const { token, user } = res.data;

      // Depoya kaydet
      localStorage.setItem('token', token);
      
      // State'i gÃ¼ncelle
      setToken(token);
      setUser(user);
      
      return true; // BaÅŸarÄ±lÄ±
    } catch (err) {
      setError(err.response?.data?.message || 'Login failed');
      throw err;
    } finally {
      setLoading(false);
    }
  };

  // --- REGISTER ---
  const register = async (username, email, password) => {
    setLoading(true);
    setError(null);
    try {
      const res = await api.post('/api/auth/register', { username, email, password });
      // Register sonrasÄ± otomatik login yapmÄ±yoruz, kullanÄ±cÄ± login sayfasÄ±na gitsin
      return res.data;
    } catch (err) {
      setError(err.response?.data?.message || 'Registration failed');
      throw err;
    } finally {
      setLoading(false);
    }
  };

  // --- FORGOT PASSWORD ---
  const forgotPassword = async (email) => {
    setLoading(true);
    setError(null);
    try {
      const res = await api.post('/api/auth/forgot-password', { email });
      return res.data;
    } catch (err) {
      setError(err.response?.data?.message || 'Error sending email');
      throw err;
    } finally {
      setLoading(false);
    }
  };

  // --- RESET PASSWORD ---
  const resetPassword = async (token, newPassword) => {
    setLoading(true);
    setError(null);
    try {
      const res = await api.post('/api/auth/reset-password', { token, newPassword });
      return res.data;
    } catch (err) {
      setError(err.response?.data?.message || 'Error resetting password');
      throw err;
    } finally {
      setLoading(false);
    }
  };

  // --- LOGOUT ---
  const logout = () => {
    localStorage.removeItem('token');
    setToken(null);
    setUser(null);
    delete api.defaults.headers.common['x-auth-token'];
  };

  const value = {
    user,
    token,
    loading,
    error,
    login,
    register,
    logout,
    forgotPassword,
    resetPassword
  };

  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;
};


================================================
FILE: frontend/src/context/ProjectContext.js
================================================
import React, { createContext, useState, useContext } from 'react';
import axios from 'axios';
import { useAuth } from './AuthContext';

// Backend adresi
const API_URL = 'http://localhost:5000/api/projects';

export const ProjectContext = createContext();
export const useProjectContext = () => useContext(ProjectContext);

export const ProjectProvider = ({ children }) => {
  const [projects, setProjects] = useState([]);
  const [currentProject, setCurrentProject] = useState(null);
  const [myProjects, setMyProjects] = useState([]);
  const [sharedProjects, setSharedProjects] = useState([]);
  const [currentMembers, setCurrentMembers] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [dashboardTasks, setDashboardTasks] = useState([]);
  
  // Token'Ä± AuthContext'ten alÄ±yoruz
  const { token, logout } = useAuth();

  // --- ESKÄ° USUL: HEADER'I ELLE EKLEME ---
  const getAuthHeaders = () => {
    const storedToken = localStorage.getItem('token'); // Token'Ä± direkt depodan alalÄ±m, daha garanti.
    if (!storedToken) return {}; 
    return { 
        headers: { 
            'x-auth-token': storedToken // Backend x-auth-token bekliyor
        } 
    };
  };

  const handleError = (err) => {
    const message = err.response?.data?.message || 'Bir hata oluÅŸtu.';
    setError(message);
    if (err.response?.status === 401) {
        logout();
    }
  };
  
  // --- PROJE FONKSÄ°YONLARI ---

  const fetchProjects = async () => {
    setLoading(true);
    try {
      const response = await axios.get(API_URL, getAuthHeaders());
      setProjects(response.data);
    } catch (err) { handleError(err); } 
    finally { setLoading(false); }
  };

  const fetchMyProjects = async () => {
    setLoading(true);
    try {
      const response = await axios.get(`${API_URL}/my-projects`, getAuthHeaders());
      setMyProjects(response.data); 
    } catch (err) { handleError(err); } 
    finally { setLoading(false); }
  };

  const fetchSharedProjects = async () => {
  setLoading(true);
  try {
    // Bu istek backend'de gÃ¼ncellediÄŸimiz /shared-projects rotasÄ±na gitmeli
    const response = await axios.get(`${API_URL}/shared-projects`, getAuthHeaders()); 
    // Gelen veri sadece Ã¼ye olduÄŸunuz projeleri iÃ§erecektir
    setSharedProjects(response.data.projects || response.data); 
  } catch (err) { 
    handleError(err);
  } finally { 
    setLoading(false);
  }
};

  const createProject = async (name, description) => {
    setLoading(true);
    try {
      const response = await axios.post(API_URL, { name, description }, getAuthHeaders());
      setProjects(prev => [response.data, ...prev]);
      setMyProjects(prev => [response.data, ...prev]);
      return response.data;
    } catch (err) { handleError(err); throw err; } 
    finally { setLoading(false); }
  };

  const fetchProjectById = async (projectId) => {
    setLoading(true);
    try {
      const response = await axios.get(`${API_URL}/${projectId}`, getAuthHeaders());
      setCurrentProject(response.data);
    } catch (err) { handleError(err); } 
    finally { setLoading(false); }
  };

  const updateProjectVisibility = async (projectId, isPublic) => {
    try {
      const response = await axios.put(`${API_URL}/${projectId}/visibility`, { is_public: isPublic }, getAuthHeaders());
      setCurrentProject(response.data);
      return response.data; 
    } catch (err) { handleError(err); throw err; }
  };



  const fetchDashboardTasks = async () => {
    setLoading(true);
    try {
      const response = await axios.get(`${API_URL}/user/all-tasks`, getAuthHeaders());
      setDashboardTasks(response.data);
    } catch (err) { handleError(err); } 
    finally { setLoading(false); }
  };

  const fetchTasks = async (projectId) => {
    try {
      const response = await axios.get(`${API_URL}/${projectId}/tasks`, getAuthHeaders());
      return response.data;
    } catch (err) { if(err.response?.status !== 403) handleError(err); }
  };

  const createTask = async (projectId, taskData) => {
    try {
      const response = await axios.post(`${API_URL}/${projectId}/tasks`, taskData, getAuthHeaders());
      return response.data;
    } catch (err) { handleError(err); }
  };

  const updateTaskStatus = async (projectId, taskId, newStatus) => {
    try {
      const response = await axios.put(`${API_URL}/${projectId}/tasks/${taskId}`, { status: newStatus }, getAuthHeaders());
      return response.data;
    } catch (err) { handleError(err); }
  };

  const updateTask = async (projectId, taskId, data) => {
    try {
      const response = await axios.put(`${API_URL}/${projectId}/tasks/${taskId}`, data, getAuthHeaders());
      return response.data;
    } catch (err) { handleError(err); throw err; }
  };

  const deleteTask = async (projectId, taskId) => {
    try {
      await axios.delete(`${API_URL}/${projectId}/tasks/${taskId}`, getAuthHeaders());
      return true;
    } catch (err) { handleError(err); throw err; }
  };


  const fetchMembers = async (projectId) => {
    try {
        const response = await axios.get(`${API_URL}/${projectId}/members`, getAuthHeaders());
        setCurrentMembers(response.data);
        return response.data;
    } catch (err) { handleError(err); }
  };

  const addMember = async (projectId, username, role) => {
    try {
        const response = await axios.post(`${API_URL}/${projectId}/members`, { username, role }, getAuthHeaders());
        setCurrentMembers(prev => [...prev, response.data]);
        return response.data;
    } catch (err) { handleError(err); throw err; }
  };

  const removeMember = async (projectId, userId) => {
    try {
        await axios.delete(`${API_URL}/${projectId}/members/${userId}`, getAuthHeaders());
        setCurrentMembers(prev => prev.filter(m => m.id !== userId));
        return true;
    } catch (err) { handleError(err); throw err; }
  };

  const updateProjectDetails = async (projectId, name, description, longDescription) => {
    try {
        const response = await axios.put(`${API_URL}/${projectId}`, { name, description, long_description: longDescription }, getAuthHeaders());
        setCurrentProject(response.data);
        return response.data;
    } catch (err) { handleError(err); throw err; }
  };

  const updateTasksVisibility = async (projectId, isPublic) => {
    try {
        const response = await axios.put(`${API_URL}/${projectId}/settings/tasks-visibility`, { is_tasks_public: isPublic }, getAuthHeaders());
        setCurrentProject(prev => ({...prev, is_tasks_public: response.data.is_tasks_public}));
    } catch (err) { handleError(err); }
  };

  const fetchIssues = async (projectId) => {
    try { return (await axios.get(`${API_URL}/${projectId}/issues`, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const createIssue = async (projectId, text) => {
    try { return (await axios.post(`${API_URL}/${projectId}/issues`, {text}, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const updateIssue = async (projectId, issueId, data) => {
    try { return (await axios.put(`${API_URL}/${projectId}/issues/${issueId}`, data, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const fetchComments = async (projectId) => {
    try { return (await axios.get(`${API_URL}/${projectId}/comments`, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const addComment = async (projectId, text) => {
    try { return (await axios.post(`${API_URL}/${projectId}/comments`, {text}, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const likeComment = async (projectId, commentId) => {
    try { return (await axios.post(`${API_URL}/${projectId}/comments/${commentId}/like`, {}, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const deleteComment = async (projectId, commentId) => {
    try { await axios.delete(`${API_URL}/${projectId}/comments/${commentId}`, getAuthHeaders()); return true; } catch (e) { handleError(e); }
  };
  const editComment = async (projectId, commentId, text) => {
    try { return (await axios.put(`${API_URL}/${projectId}/comments/${commentId}`, {text}, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const fetchIssueComments = async (projectId, issueId) => {
    try { return (await axios.get(`${API_URL}/${projectId}/issues/${issueId}/comments`, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const addIssueComment = async (projectId, issueId, text) => {
    try { return (await axios.post(`${API_URL}/${projectId}/issues/${issueId}/comments`, {text}, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const fetchFiles = async (projectId) => {
    try { return (await axios.get(`${API_URL}/${projectId}/files`, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const uploadFile = async (projectId, file) => {
    try { 
        const fd = new FormData(); fd.append('file', file);
        return (await axios.post(`${API_URL}/${projectId}/files`, fd, { headers: { ...getAuthHeaders().headers, 'Content-Type': 'multipart/form-data'} })).data; 
    } catch (e) { handleError(e); }
  };
  const deleteFile = async (projectId, fileId) => {
    try { await axios.delete(`${API_URL}/${projectId}/files/${fileId}`, getAuthHeaders()); return true; } catch (e) { handleError(e); }
  };

  const value = {
    projects, currentProject, myProjects, sharedProjects, loading, error, dashboardTasks, currentMembers,
    fetchProjects, fetchMyProjects, fetchSharedProjects, createProject, fetchProjectById, updateProjectVisibility,
    fetchDashboardTasks, fetchTasks, createTask, updateTaskStatus, updateTask, deleteTask,
    fetchMembers, addMember, removeMember, updateProjectDetails, updateTasksVisibility,
    fetchIssues, createIssue, updateIssue, fetchComments, addComment, likeComment, deleteComment, editComment,
    fetchIssueComments, addIssueComment, fetchFiles, uploadFile, deleteFile
  };

  return (
    <ProjectContext.Provider value={value}>{children}</ProjectContext.Provider>
  );
};


================================================
FILE: frontend/src/context/ThemeContext.js
================================================
import React, { createContext, useContext, useState, useEffect } from 'react';

const ThemeContext = createContext();

export const useTheme = () => useContext(ThemeContext);

export const ThemeProvider = ({ children }) => {
  // BaÅŸlangÄ±Ã§ta localStorage'a bak, yoksa 'dark' olarak baÅŸlat (Siz ÅŸu an dark kullanÄ±yorsunuz)
  const [theme, setTheme] = useState(localStorage.getItem('theme') || 'dark');

  useEffect(() => {
    const root = window.document.documentElement;
    
    // Eski class'Ä± temizle
    root.classList.remove('light', 'dark');
    
    // Yeni class'Ä± ekle
    root.classList.add(theme);
    
    // LocalStorage'a kaydet
    localStorage.setItem('theme', theme);
  }, [theme]);

  const toggleTheme = (newTheme) => {
    setTheme(newTheme);
  };

  return (
    <ThemeContext.Provider value={{ theme, toggleTheme }}>
      {children}
    </ThemeContext.Provider>
  );
};


================================================
FILE: frontend/src/pages/DashboardLayout.js
================================================
// src/pages/DashboardLayout.js

import React, { useState } from 'react';
import { Outlet } from 'react-router-dom';
import Sidebar from '../components/layout/Sidebar';
import Header from '../components/layout/Header';
import RightSidebar from '../components/layout/RightSidebar';
import { FiInfo} from 'react-icons/fi';

function DashboardLayout() {
  // Sol Sidebar: VarsayÄ±lan aÃ§Ä±k
  const [isLeftCollapsed, setIsLeftCollapsed] = useState(false);
  
  // SaÄŸ Sidebar: VarsayÄ±lan aÃ§Ä±k
  const [isRightOpen, setIsRightOpen] = useState(false);

  return (
    // 1. ANA KAPSAYICI: flex-col yaparak alt alta dizilim saÄŸladÄ±k (Header Ã¼stte, gÃ¶vde altta)
    <div className="flex h-screen flex-col bg-app text-text-main overflow-hidden font-sans">
      
      {/* 2. HEADER: En tepede, tam geniÅŸlikte */}
      <div className="z-50 shadow-md">
        <Header />
      </div>

      {/* 3. GÃ–VDE KAPSAYICISI: flex-row yaparak Sidebar, Ä°Ã§erik ve SaÄŸ Sidebar'Ä± yan yana dizdik */}
      <div className="flex flex-1 overflow-hidden relative">
        
        {/* SOL SIDEBAR */}
        <Sidebar 
          isCollapsed={isLeftCollapsed} 
          toggleSidebar={() => setIsLeftCollapsed(!isLeftCollapsed)} 
        />

        {/* ORTA Ä°Ã‡ERÄ°K ALANI (MAIN) */}
        <main className="flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-transparent relative">
          <Outlet />

          {/* SAÄž SIDEBAR KAPALIYSA GERÄ° AÃ‡MA BUTONU */}
          {!isRightOpen && (
            <button
              onClick={() => setIsRightOpen(true)}
              className="fixed bottom-5 right-5 z-40 p-2 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-500 transition-all animate-bounce-slow"
              title="Open Right Panel"
            >
              <FiInfo size={20} />
            </button>
          )}
        </main>

        {/* SAÄž SIDEBAR */}
        <RightSidebar 
          isOpen={isRightOpen} 
          toggleSidebar={() => setIsRightOpen(!isRightOpen)} 
        />
        
      </div>

    </div>
  );
}

export default DashboardLayout;


================================================
FILE: frontend/src/pages/DashboardOverviewPage.js
================================================
// src/pages/DashboardOverviewPage.js

import React, { useEffect } from 'react';
import { useProjectContext } from '../context/ProjectContext';
import { Link } from 'react-router-dom';
import { 
  FiFolder, FiShare2, FiLayers, FiCheckSquare, 
  FiClock, FiArrowRight, FiActivity, FiBriefcase, FiAlertCircle, FiGlobe, FiLock
} from 'react-icons/fi';

function DashboardOverviewPage() {
  const { 
    myProjects, sharedProjects, 
    dashboardTasks, fetchDashboardTasks, 
    fetchMyProjects, fetchSharedProjects,
    loading 
  } = useProjectContext();

  useEffect(() => {
    fetchMyProjects();
    fetchSharedProjects();
    fetchDashboardTasks(); 
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, []);

  // --- 1. RECENT PROJECTS MANTIÄžI (YENÄ° EKLENDÄ°) ---
  // Hem benim hem paylaÅŸÄ±lan projeleri birleÅŸtir
  const allProjects = [...myProjects, ...sharedProjects];
  
  // Tarihe gÃ¶re sÄ±rala (En yeni tarihli en baÅŸa) ve ilk 4 tanesini al
  const recentProjects = allProjects
    .sort((a, b) => new Date(b.last_updated_at || b.created_at) - new Date(a.last_updated_at || a.created_at))
    .slice(0, 4);


  // --- 2. GÃ–REV FÄ°LTRELEME MANTIÄžI (MEVCUT) ---
  const activeTasks = dashboardTasks ? dashboardTasks.filter(task => task.status !== 'done') : [];
  const visibleTasks = activeTasks.slice(0, 10);
  const hiddenCount = activeTasks.length - visibleTasks.length;

  // Helper: GÃ¶rev Durumu Badge'i
  const getStatusBadge = (status) => {
    switch (status) {
      case 'done':
        return <span className="px-2 py-1 bg-green-900/30 text-green-400 rounded text-xs font-semibold border border-green-900/50">Done</span>;
      case 'in_progress':
        return <span className="px-2 py-1 bg-blue-900/30 text-blue-400 rounded text-xs font-semibold border border-blue-900/50">In Progress</span>;
      default: // todo
        return <span className="px-2 py-1 bg-gray-700 text-gray-300 rounded text-xs font-semibold border border-gray-600">To Do</span>;
    }
  };

  return (
    <div className="transition-colors duration-300 pb-10">
      <div className="flex justify-between items-center mb-6">
        <h1 className="text-3xl font-bold text-gray-900 dark:text-white transition-colors duration-300">Dashboard</h1>
      </div>
      
      <div className="space-y-8">

        {/* === BÃ–LÃœM 1: RECENT PROJECTS (SON PROJELER) === */}
        <div>
            <div className="flex items-center justify-between mb-4">
                <h2 className="text-xl font-bold text-gray-900 dark:text-white flex items-center">
                    <FiClock className="mr-2 text-purple-500" /> Recent Projects
                </h2>
                <Link to="/my-projects" className="text-sm text-blue-500 hover:text-blue-400 font-medium flex items-center">
                    View All Projects <FiArrowRight className="ml-1"/>
                </Link>
            </div>

            {loading ? (
                <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                    {[1,2,3,4].map(i => (
                        <div key={i} className="h-32 bg-gray-200 dark:bg-gray-800 rounded-xl animate-pulse"></div>
                    ))}
                </div>
            ) : recentProjects.length === 0 ? (
                <div className="bg-surface p-6 rounded-xl border border-border shadow-sm text-center text-gray-500">
                    No projects found. Create one to get started!
                </div>
            ) : (
                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                    {recentProjects.map(project => (
                        <Link key={project.id} to={`/project/${project.id}`} className="group">
                            <div className="bg-white dark:bg-gray-800 h-full p-5 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-blue-500 dark:hover:border-blue-500 hover:shadow-lg transition-all duration-200 flex flex-col justify-between">
                                <div>
                                    <div className="flex justify-between items-start mb-3">
                                        <div className="p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg text-blue-600 dark:text-blue-400 group-hover:bg-blue-600 group-hover:text-white transition-colors">
                                            <FiFolder size={20} />
                                        </div>
                                        {project.is_public ? (
                                            <FiGlobe className="text-gray-400" size={14} title="Public"/>
                                        ) : (
                                            <FiLock className="text-gray-400" size={14} title="Private"/>
                                        )}
                                    </div>
                                    <h3 className="font-bold text-gray-900 dark:text-white mb-1 truncate" title={project.name}>
                                        {project.name}
                                    </h3>
                                    <p className="text-xs text-gray-500 dark:text-gray-400 line-clamp-2 h-8">
                                        {project.description || "No description."}
                                    </p>
                                </div>
                                <div className="mt-4 pt-3 border-t border-gray-100 dark:border-gray-700 flex items-center justify-between text-xs text-gray-400">
                                    <span>{new Date(project.last_updated_at || project.created_at).toLocaleDateString()}</span>
                                    <span className="group-hover:translate-x-1 transition-transform text-blue-500">
                                        <FiArrowRight />
                                    </span>
                                </div>
                            </div>
                        </Link>
                    ))}
                </div>
            )}
        </div>

        {/* === BÃ–LÃœM 2: GÃ–REV Ã–ZETÄ° (TASK SUMMARY) === */}
        <div className="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm">
          <div className="p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
            <h2 className="text-xl font-bold text-text-main dark:text-white flex items-center">
              <FiActivity className="mr-2 text-blue-500" />
              Active Priority Tasks
            </h2>
          </div>

          <div className="p-0">
            {loading ? (
              <div className="p-8 text-center text-gray-500">Loading tasks...</div>
            ) : activeTasks.length === 0 ? (
              <div className="p-12 text-center flex flex-col items-center">
                <div className="w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4 text-gray-400">
                  <FiCheckSquare size={32} />
                </div>
                <h3 className="text-lg font-medium text-gray-900 dark:text-white">All caught up!</h3>
                <p className="text-text-secondary dark:text-gray-400 mt-1 max-w-sm">
                  You have no active tasks. Completed tasks are hidden from this view.
                </p>
              </div>
            ) : (
              <div className="overflow-x-auto">
                <table className="w-full text-left border-collapse">
                  <thead>
                    <tr className="bg-gray-50 dark:bg-gray-900/50 text-gray-500 dark:text-gray-400 text-xs uppercase tracking-wider border-b border-gray-200 dark:border-gray-700">
                      <th className="p-4 font-medium">Task Name</th>
                      <th className="p-4 font-medium">Project</th>
                      <th className="p-4 font-medium">Status</th>
                      <th className="p-4 font-medium text-right">Created</th>
                      <th className="p-4 font-medium text-right">Action</th>
                    </tr>
                  </thead>
                  <tbody className="divide-y divide-gray-200 dark:divide-gray-700">
                    {visibleTasks.map(task => (
                      <tr key={task.id} className="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                        <td className="p-4">
                          <div className="font-medium text-gray-900 dark:text-white">{task.title}</div>
                        </td>
                        <td className="p-4">
                          <div className="flex items-center">
                            <FiFolder className="mr-2 text-blue-500" size={14} />
                            <span className="text-gray-600 dark:text-gray-300 text-sm">{task.project_name}</span>
                          </div>
                        </td>
                        <td className="p-4">
                          {getStatusBadge(task.status)}
                        </td>
                        <td className="p-4 text-right text-sm text-gray-500 dark:text-gray-400">
                          <div className="flex items-center justify-end">
                            <FiClock className="mr-1.5 w-3 h-3" />
                            {new Date(task.created_at).toLocaleDateString()}
                          </div>
                        </td>
                        <td className="p-4 text-right">
                          <Link 
                            to={`/project/${task.project_id}/tasks`}
                            className="inline-flex items-center text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors"
                          >
                            View Board <FiArrowRight className="ml-1" />
                          </Link>
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            )}
          </div>
          
          {/* Footer Info */}
          <div className="p-4 bg-gray-50 dark:bg-gray-900/30 border-t border-gray-200 dark:border-gray-700 flex justify-center items-center gap-2 text-xs text-gray-500 dark:text-gray-400">
             <span>Showing top {visibleTasks.length} active tasks.</span>
             {hiddenCount > 0 && (
               <span className="flex items-center text-amber-600 dark:text-amber-500 font-medium ml-2">
                 <FiAlertCircle className="mr-1" />
                 {hiddenCount} more tasks are waiting in queue.
               </span>
             )}
          </div>
        </div>

      </div>
    </div>
  );
}

export default DashboardOverviewPage;


================================================
FILE: frontend/src/pages/ForgotPasswordPage.js
================================================
// src/pages/ForgotPasswordPage.js

import React, { useState } from 'react';
import { useAuth } from '../context/AuthContext';
import { Link } from 'react-router-dom';
import { FiMail, FiLoader, FiArrowLeft } from 'react-icons/fi';
import BackgroundImage from '../assets/background.jpg';
import LogoImage from '../assets/logo.png';

export default function ForgotPasswordPage() {
  const [email, setEmail] = useState('');
  const [message, setMessage] = useState('');
  const [error, setError] = useState('');
  const { forgotPassword, loading } = useAuth();

  const handleSubmit = async (e) => {
    e.preventDefault(); // Sayfa yenilenmesini engeller
    setMessage('');
    setError('');

    if (!email) {
        setError("Please enter your email.");
        return;
    }

    try {
      await forgotPassword(email);
      // BaÅŸarÄ±lÄ± olursa:
      setMessage('Success! Check the backend console/terminal for the reset link.');
    } catch (err) {
      // Hata olursa:
      console.error(err);
      setError('Failed to reset password. User may not exist.');
    }
  };

  return (
    <div 
      className="relative flex items-center justify-center min-h-screen bg-cover bg-center transition-all duration-300"
      style={{ backgroundImage: `url(${BackgroundImage})` }}
    >
      {/* Overlay */}
      <div className="absolute inset-0 z-0 bg-white/30 backdrop-blur-[2px] dark:bg-black/60 transition-colors duration-300"></div>

      <Link 
        to="/home" 
        className="absolute top-8 left-8 z-20 flex items-center text-gray-900 dark:text-white hover:text-blue-600 transition-colors group font-semibold"
      >
        <div className="p-2 bg-white/80 dark:bg-gray-800/80 border border-gray-200 dark:border-gray-700 rounded-full mr-3 shadow-sm backdrop-blur-md">
             <FiArrowLeft size={20} />
        </div>
        <span className="bg-white/50 dark:bg-black/50 px-2 py-1 rounded-md backdrop-blur-sm">Back to Home</span>
      </Link>

      <div className="relative z-10 w-full max-w-md p-8 bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl border border-gray-200 dark:border-gray-700 rounded-2xl shadow-2xl animate-fade-in-up">
        
        {/* LOGO */}
        <div className="flex flex-col items-center justify-center mb-6">
            <img 
                src={LogoImage} 
                alt="Logo" 
                className="h-24 w-24 mb-4 object-contain brightness-0 dark:brightness-100 transition-all" 
            />
            <h1 className="text-4xl font-extrabold text-gray-900 dark:text-white tracking-tight">GazozHub</h1>
        </div>

        {/* METÄ°NLER (Renkler sabitlendi) */}
        <h2 className="text-lg font-bold text-gray-800 dark:text-gray-200 text-center mb-2 uppercase tracking-widest">Reset Password</h2>
        <p className="text-gray-600 dark:text-gray-400 text-center mb-6 text-sm font-medium">
          Enter your email to receive a reset link.
        </p>
        
        {message && <div className="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4 text-sm font-bold">{message}</div>}
        {error && <div className="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4 text-sm font-bold">{error}</div>}

        <form onSubmit={handleSubmit} className="space-y-6">
          <div className="relative">
            <div className="absolute top-0 left-0 flex items-center h-full pl-3 pointer-events-none">
              <FiMail className="w-5 h-5 text-gray-500 dark:text-gray-400" />
            </div>
            {/* INPUT AYARLARI: bg-white (Light) / bg-gray-800 (Dark) ve text-gray-900 (Light) / text-white (Dark) */}
            <input
              type="email"
              required
              placeholder="Enter your email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              className="w-full py-3 pl-10 pr-4 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors 
                         bg-white dark:bg-gray-800 
                         border-gray-300 dark:border-gray-600 
                         text-gray-900 dark:text-white 
                         placeholder-gray-500 dark:placeholder-gray-400"
            />
          </div>
          
          <button 
            type="submit" // Bu Ã§ok Ã¶nemli
            disabled={loading} 
            className="w-full flex justify-center items-center py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold shadow-lg transition-all disabled:opacity-70"
          >
            {loading ? <FiLoader className="animate-spin mr-2" /> : 'Send Reset Link'}
          </button>
        </form>
        <div className="mt-4 text-center">
          <Link to="/login" className="text-blue-600 hover:text-blue-500 text-sm font-bold">Back to Login</Link>
        </div>
      </div>
    </div>
  );
}


================================================
FILE: frontend/src/pages/LandingPage.js
================================================
// src/pages/LandingPage.js
import React from 'react';
import { Link } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';
import { useTheme } from '../context/ThemeContext'; // Import the theme hook
import { 
  FiArrowRight, FiCheckCircle, FiUsers, FiLayout, 
  FiLayers, FiShield, FiSun, FiMoon 
} from 'react-icons/fi';
import BackgroundImage from '../assets/background.jpg';
import LogoImage from '../assets/logo.png';

const LandingPage = () => {
  const { user } = useAuth();
  const { theme, toggleTheme } = useTheme(); // Access theme state

  return (
    <div className="min-h-screen font-sans text-text-main relative transition-colors duration-300">
      
      {/* Background Image with Overlay */}
      <div 
        className="absolute inset-0 bg-cover bg-center z-0 fixed"
        style={{ backgroundImage: `url(${BackgroundImage})` }}
      >
        <div className="absolute inset-0 bg-white/70 dark:bg-gray-900/70 backdrop-blur-[2px] transition-colors duration-500"></div>
      </div>

      {/* Content Wrapper */}
      <div className="relative z-10 flex flex-col min-h-screen">
        
        {/* --- HEADER --- */}
        <header className="container mx-auto px-6 py-6 flex justify-between items-center fixed top-0 left-0 right-0 z-50 bg-transparent">
          <div className="flex items-center gap-1">
             <img src={LogoImage} alt="GazozHub Logo" className="h-20 w-20 object-contain drop-shadow-lg brightness-0 dark:brightness-100 transition-all duration-300" />
             <span className="text-3xl font-extrabold tracking-tight text-text-main">GazozHub</span>
          </div>
          
          <div className="flex items-center gap-3">
            {/* --- THEME TOGGLE BUTTON --- */}
            <button
              onClick={() => toggleTheme(theme === 'dark' ? 'light' : 'dark')}
              className="relative flex items-center justify-between w-16 h-8 p-1 rounded-full bg-gray-200 dark:bg-gray-700 transition-colors duration-300 focus:outline-none shadow-inner"
              aria-label="Toggle Theme"
            >
              <div
                className={`absolute w-6 h-6 rounded-full shadow-md transform transition-transform duration-300 flex items-center justify-center ${
                  theme === 'dark' ? 'translate-x-8 bg-indigo-500' : 'translate-x-0 bg-amber-400'
                }`}
              >
                {theme === 'dark' ? (
                  <FiMoon className="text-white w-4 h-4" />
                ) : (
                  <FiSun className="text-white w-4 h-4" />
                )}
              </div>
              <FiSun className={`ml-1 w-4 h-4 ${theme === 'dark' ? 'text-gray-500' : 'opacity-0'}`} />
              <FiMoon className={`mr-1 w-4 h-4 ${theme === 'light' ? 'text-gray-400' : 'opacity-0'}`} />
            </button>

            {/* Existing Desktop Nav */}
            <div className="hidden md:flex items-center gap-4">
              {user ? (
                <Link 
                  to="/dashboard" 
                  className="px-6 py-2.5 bg-primary hover:bg-primary-hover text-white font-semibold rounded-full transition-all shadow-lg hover:shadow-primary/30 flex items-center"
                >
                  Go to Dashboard <FiArrowRight className="ml-2" />
                </Link>
              ) : (
                <>
                  <Link to="/login" className="px-4 py-2 text-text-secondary hover:text-text-main font-medium transition-colors">
                    Sign In
                  </Link>
                  <Link to="/register" className="px-6 py-2.5 bg-primary hover:bg-primary-hover text-white font-bold rounded-full transition-all shadow-lg transform hover:-translate-y-0.5">
                    Get Started
                  </Link>
                </>
              )}
            </div>
          </div>
        </header>

        {/* --- HERO SECTION --- */}
        <main className="flex-grow flex flex-col items-center">
          
          <section className="min-h-screen flex flex-col justify-center items-center text-center px-4">
            <div className="max-w-5xl mx-auto space-y-8">
              <h1 className="text-6xl md:text-8xl font-black tracking-tight leading-none mb-6 drop-shadow-2xl text-text-main">
                Collaboration <br />
                <span className="text-transparent bg-clip-text bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500">
                  Reimagined.
                </span>
              </h1>
              
              <p className="text-xl md:text-2xl text-text-secondary max-w-3xl mx-auto leading-relaxed font-light mb-10">
                GazozHub connects students, teams, and advisors in one seamless workspace. 
                Manage tasks, track issues, and build amazing things together.
              </p>

              <div className="flex flex-col sm:flex-row justify-center gap-5">
                {user ? (
                  <Link to="/dashboard" className="px-10 py-4 bg-primary hover:bg-primary-hover text-white text-xl font-bold rounded-2xl transition-all transform hover:scale-105 shadow-xl shadow-primary/20 flex items-center justify-center">
                    Launch Dashboard <FiArrowRight className="ml-3" />
                  </Link>
                ) : (
                  <>
                    <Link to="/register" className="px-10 py-4 bg-primary hover:bg-primary-hover text-white text-xl font-bold rounded-2xl transition-all transform hover:scale-105 shadow-xl flex items-center justify-center">
                      Get Started <FiArrowRight className="ml-3" size={24} />
                    </Link>
                    <Link to="/login" className="px-10 py-4 bg-surface hover:bg-surface-hover border border-border text-text-main text-xl font-bold rounded-2xl transition-all flex items-center justify-center backdrop-blur-sm">
                      Login
                    </Link>
                  </>
                )}
              </div>
            </div>

            <div className="absolute bottom-10 animate-bounce text-text-secondary">
              <p className="text-sm font-medium mb-2">Scroll to explore</p>
              <div className="flex justify-center">â†“</div>
            </div>
          </section>

          {/* --- FEATURES GRID --- */}
          <div className="pb-20 grid grid-cols-1 md:grid-cols-3 gap-8 max-w-7xl w-full px-4 mt-20">
            <FeatureCard 
              icon={<FiLayout className="w-8 h-8" />} 
              title="Kanban Boards" 
              desc="Visualise work with drag-and-drop boards. Move tasks from To Do to Done with ease."
              color="bg-blue-500"
            />
            <FeatureCard 
              icon={<FiUsers className="w-8 h-8" />} 
              title="Team Sync" 
              desc="Real-time collaboration with role-based access control for Editors and Viewers."
              color="bg-purple-500"
            />
            <FeatureCard 
              icon={<FiCheckCircle className="w-8 h-8" />} 
              title="Issue Tracking" 
              desc="Advanced issue tracking system to squash bugs and manage feature requests efficiently."
              color="bg-green-500"
            />
            <FeatureCard 
              icon={<FiLayers className="w-8 h-8" />} 
              title="Project Hub" 
              desc="Centralize all your project files, discussions, and milestones in one place."
              color="bg-pink-500"
            />
            <FeatureCard 
              icon={<FiShield className="w-8 h-8" />} 
              title="Secure & Private" 
              desc="Keep your projects private or share them publicly with granular visibility settings."
              color="bg-yellow-500"
            />
             
             <div className="p-8 rounded-3xl border border-border bg-surface/60 backdrop-blur-md flex flex-col justify-center items-center text-center">
                <h3 className="text-2xl font-bold text-text-main mb-2">And much more...</h3>
                <p className="text-text-secondary">Join GazozHub today to explore all features.</p>
             </div>
          </div>
        </main>

        <footer className="py-8 text-center border-t border-border bg-surface/50 backdrop-blur-sm mt-auto">
           <div className="flex items-center justify-center gap-2 mb-2">
             <img src={LogoImage} alt="Logo" className="h-6 w-6 opacity-80" />
             <span className="text-text-secondary font-semibold">GazozHub</span>
           </div>
           <p className="text-text-secondary text-sm">
             &copy; {new Date().getFullYear()} GazozHub. Designed for modern teams.
           </p>
        </footer>
      </div>
    </div>
  );
};

// Sub-component: Feature Card
const FeatureCard = ({ icon, title, desc, color }) => (
  <div className="group p-8 rounded-3xl border border-border bg-surface/80 backdrop-blur-md hover:bg-surface hover:border-primary/50 transition-all duration-300 shadow-sm hover:shadow-lg">
    <div className={`w-14 h-14 rounded-2xl ${color} bg-opacity-10 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300`}>
      <div className={`${color.replace('bg-', 'text-')}`}>{icon}</div> 
    </div>
    <h3 className="text-2xl font-bold text-text-main mb-3">{title}</h3>
    <p className="text-text-secondary leading-relaxed">{desc}</p>
  </div>
);

export default LandingPage;


================================================
FILE: frontend/src/pages/LoginPage.js
================================================
// src/pages/LoginPage.js

import React, { useState } from 'react';
import { useNavigate, Link } from 'react-router-dom';
import { FiUser, FiLock, FiArrowLeft, FiLoader } from 'react-icons/fi'; 
import { useAuth } from '../context/AuthContext';
import BackgroundImage from '../assets/background.jpg';
import LogoImage from '../assets/logo.png';

function LoginPage() {
  const [username, setUsername] = useState('');
  const [password, setPassword] = useState('');
  const [localError, setLocalError] = useState(null);
  const navigate = useNavigate();
  const { login, loading } = useAuth();

  const handleSubmit = async (event) => { 
    event.preventDefault(); 
    setLocalError(null);
    if (!username || !password) {
        setLocalError("Please enter all fields.");
        return;
    }
    
    try {
      await login(username, password);
      navigate('/dashboard', { replace: true });
    } catch (err) {
      setLocalError(err.response?.data?.message || "Login failed.");
    }
  };

  return (
    <div 
      className="relative flex items-center justify-center min-h-screen bg-cover bg-center transition-all duration-300"
      style={{ backgroundImage: `url(${BackgroundImage})` }}
    >
      <div className="absolute inset-0 z-0 bg-white/30 backdrop-blur-[2px] dark:bg-black/60 transition-colors duration-300"></div>

      <Link 
        to="/home" 
        className="absolute top-8 left-8 z-20 flex items-center text-gray-900 dark:text-white hover:text-blue-600 transition-colors group font-semibold"
      >
        <div className="p-2 bg-white/80 dark:bg-gray-800/80 border border-gray-200 dark:border-gray-700 rounded-full mr-3 group-hover:bg-white shadow-sm backdrop-blur-md">
             <FiArrowLeft size={20} />
        </div>
        <span className="bg-white/50 dark:bg-black/50 px-2 py-1 rounded-md backdrop-blur-sm">Back to Home</span>
      </Link>

      <div className="relative z-10 w-full max-w-md p-8 space-y-6 bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl border border-gray-200 dark:border-gray-700 rounded-2xl shadow-2xl animate-fade-in-up">
        
        <div className="flex flex-col items-center justify-center mb-6">
            <img 
                src={LogoImage} 
                alt="Logo" 
                className="h-32 w-32 mb-4 object-contain brightness-0 dark:brightness-100 transition-all" 
            />
            <h1 className="text-4xl font-extrabold text-gray-900 dark:text-white tracking-tight">GazozHub</h1>
        </div>
        
        <div className="text-center">
          <h2 className="text-lg font-bold text-gray-600 dark:text-gray-300 uppercase tracking-widest">Sign In</h2>
        </div>
        
        <form className="space-y-6" onSubmit={handleSubmit}>
        
          <div className="relative">
            <div className="absolute top-0 left-0 flex items-center h-full pl-3 pointer-events-none">
              <FiUser className="w-5 h-5 text-gray-500 dark:text-gray-400" />
            </div>
            <input
              id="username"
              name="username"
              type="text"
              required
              
              className="w-full py-3 pl-10 pr-4 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors 
                         bg-white dark:bg-gray-800 
                         border-gray-300 dark:border-gray-600 
                         text-gray-900 dark:text-white 
                         placeholder-gray-500 dark:placeholder-gray-400"
              placeholder="Username"
              value={username}
              onChange={(e) => setUsername(e.target.value)}
            />
          </div>
          
          {/* PASSWORD INPUT */}
          <div className="relative">
            <div className="absolute top-0 left-0 flex items-center h-full pl-3 pointer-events-none">
              <FiLock className="w-5 h-5 text-gray-500 dark:text-gray-400" />
            </div>
            <input
              id="password"
              name="password"
              type="password"
              required
              className="w-full py-3 pl-10 pr-4 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors 
                         bg-white dark:bg-gray-800 
                         border-gray-300 dark:border-gray-600 
                         text-gray-900 dark:text-white 
                         placeholder-gray-500 dark:placeholder-gray-400"
              placeholder="Password"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
            />
          </div>

          {localError && (
            <p className="text-sm text-red-600 font-bold text-center bg-red-100 p-2 rounded border border-red-300">{localError}</p>
          )}

          <div>
            <button
              type="submit"
              disabled={loading}
              className="w-full flex justify-center items-center px-4 py-3 font-semibold text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-300 disabled:opacity-70"
            >
              {loading ? <FiLoader className="animate-spin mr-2"/> : 'Sign In'}
            </button>
            <div className="flex justify-end mb-4 mt-3">
              <Link to="/forgot-password" className="text-sm text-blue-600 hover:text-blue-500 font-bold">
                Forgot Password?
              </Link>
            </div>
          </div>
        </form>
        
        <div className="text-center mt-4">
          <p className="text-sm text-gray-600 dark:text-gray-400">
            Don't have an account?{' '}
            <Link to="/register" className="font-bold text-blue-600 hover:text-blue-500">
              Sign Up
            </Link>
          </p>
        </div>
      </div>
    </div>
  );
}

export default LoginPage;


================================================
FILE: frontend/src/pages/MyProjectsPage.js
================================================
// src/pages/MyProjectsPage.js
import React, { useState, useEffect, useMemo } from 'react';
import CreateProjectModal from '../components/projects/CreateProjectModal';
import { Link } from 'react-router-dom';
import { useProjectContext } from '../context/ProjectContext';
import { useAuth } from '../context/AuthContext';
import { 
  FiLoader, FiPlus, FiGrid, FiList, FiSearch, FiGlobe, FiLock, FiChevronLeft, FiChevronRight, FiUser, FiClock 
} from 'react-icons/fi';

function MyProjectsPage() {
  const { user } = useAuth();
  const { myProjects, sharedProjects, loading, fetchMyProjects, fetchSharedProjects } = useProjectContext();
  
  const [isModalOpen, setIsModalOpen] = useState(false); 
  const [viewMode, setViewMode] = useState('grid'); 
  const [currentPage, setCurrentPage] = useState(1);
  const [searchTerm, setSearchTerm] = useState("");
  
  // Ä°STEDÄ°ÄžÄ°NÄ°Z 2 FÄ°LTRE
  const [ownershipFilter, setOwnershipFilter] = useState('all'); // all, owner, member
  const [visibilityFilter, setVisibilityFilter] = useState('all'); // all, public, private

  const projectsPerPage = viewMode === 'grid' ? 6 : 5;

  useEffect(() => {
    fetchMyProjects();
    fetchSharedProjects();
  }, []);

  // --- ÃœYELÄ°K KONTROLÃœ VE VERÄ° BÄ°RLEÅžTÄ°RME ---
 const joinedProjects = useMemo(() => {
  if (!user || !user.id) return [];

  // 1. Sahibi olduÄŸum projeler (Tip uyuÅŸmazlÄ±ÄŸÄ±nÄ± Ã¶nlemek iÃ§in Number kullanÄ±yoruz)
  const owned = myProjects.map(p => ({ 
    ...p, 
    _role: 'owner' 
  }));

  // 2. Ãœyesi olduÄŸum projeler
  const shared = sharedProjects.map(p => ({ 
    ...p, 
    _role: 'member' 
  }));

  // Filtreleme yapmadan Ã¶nce iki listeyi birleÅŸtiriyoruz
  const all = [...owned, ...shared];

  // MÃ¼kerrer kayÄ±tlarÄ± (hem owner hem member gibi gÃ¶rÃ¼nenleri) ID Ã¼zerinden temizle
  const unique = [];
  const map = new Map();
  for (const item of all) {
    if(!map.has(item.id)){
        map.set(item.id, true);
        unique.push(item);
    }
  }
  return unique;
}, [myProjects, sharedProjects, user]);

  // --- FÄ°LTRELEME MANTIÄžI ---
  const filteredProjects = useMemo(() => {
    return joinedProjects.filter(project => {
      // Arama Filtresi
      const matchesSearch = project.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                          (project.description && project.description.toLowerCase().includes(searchTerm.toLowerCase()));
      
      // Filtre 1: Sahiplik Durumu (Benim kurduklarÄ±m / KatÄ±ldÄ±klarÄ±m)
      const matchesOwnership = ownershipFilter === 'all' ? true : project._role === ownershipFilter;
      
      // Filtre 2: GÃ¶rÃ¼nÃ¼rlÃ¼k Durumu (Public / Private)
      const matchesVisibility = visibilityFilter === 'all' ? true : 
                               visibilityFilter === 'public' ? project.is_public === true : 
                               project.is_public === false;

      return matchesSearch && matchesOwnership && matchesVisibility;
    });
  }, [joinedProjects, searchTerm, ownershipFilter, visibilityFilter]);

  // Sayfalama
  const currentProjects = filteredProjects.slice((currentPage - 1) * projectsPerPage, currentPage * projectsPerPage);
  const totalPages = Math.max(Math.ceil(filteredProjects.length / projectsPerPage), 1);

  const paginate = (pageNumber) => setCurrentPage(pageNumber);
  useEffect(() => { setCurrentPage(1); }, [searchTerm, ownershipFilter, visibilityFilter]);

  // src/pages/MyProjectsPage.js

return (
  <div className="flex flex-col h-[calc(100vh-140px)] p-4 pb-0 bg-app transition-colors duration-300 overflow-hidden">
    <div className="max-w-7xl mx-auto w-full h-full flex flex-col">
      
      {/* HEADER SECTION - BoÅŸluklar daraltÄ±ldÄ±, yazÄ± bÃ¼yÃ¼tÃ¼ldÃ¼ */}
      <div className="flex-none flex justify-between items-center mb-4">
        <h1 className="text-2xl font-black text-text-main tracking-tight dark:text-white">My Projects</h1>
        <button 
          onClick={() => setIsModalOpen(true)} 
          className="bg-primary hover:opacity-90 text-white font-bold py-2 px-6 rounded-xl shadow-lg transition-all transform hover:scale-105 active:scale-95 flex items-center text-sm border-none"
        >
          <FiPlus className="mr-2" /> New Project
        </button>
      </div>

      {/* SEARCH AND FILTERS - P-4'ten P-2'ye indirildi */}
      <div className="flex-none grid grid-cols-1 md:grid-cols-4 gap-3 bg-surface p-2 rounded-2xl border border-border shadow-sm mb-4 dark:bg-surface-dark/40">
        <div className="relative col-span-1 md:col-span-2 group">
          <FiSearch className="absolute left-3 top-3 text-text-secondary transition-colors" />
          <input
            type="text"
            placeholder="Search projects..."
            value={searchTerm}
            onChange={(e) => setSearchTerm(e.target.value)}
            className="w-full bg-app border border-border text-text-main text-base rounded-xl pl-10 py-2 outline-none focus:border-primary transition-all dark:bg-black/20"
          />
        </div>
        
        <select 
          value={ownershipFilter} 
          onChange={(e) => setOwnershipFilter(e.target.value)} 
          className="w-full bg-app border border-border text-text-main text-base rounded-xl px-4 py-2 outline-none focus:border-primary cursor-pointer appearance-none dark:bg-black/20"
        >
          <option value="all">All Roles</option>
          <option value="owner">Owner</option>
          <option value="member">Member</option>
        </select>

        <select 
          value={visibilityFilter} 
          onChange={(e) => setVisibilityFilter(e.target.value)} 
          className="w-full bg-app border border-border text-text-main text-base rounded-xl px-4 py-2 outline-none focus:border-primary cursor-pointer appearance-none dark:bg-black/20"
        >
          <option value="all">All Visibility</option>
          <option value="public">Public</option>
          <option value="private">Private</option>
        </select>
      </div>

      {/* SCROLLABLE PROJECT LIST - Kart iÃ§i padding p-8'den p-4'e dÃ¼ÅŸÃ¼rÃ¼ldÃ¼ */}
      <div className="flex-grow overflow-y-auto pr-1 custom-scrollbar">
        {loading ? (
          <div className="flex justify-center p-10"><FiLoader className="animate-spin text-primary" size={40} /></div>
        ) : filteredProjects.length === 0 ? (
          <div className="p-10 text-center bg-surface/20 rounded-2xl border border-dashed border-border/40">
            <p className="text-text-secondary text-base font-medium">No projects found.</p>
          </div>
        ) : (
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pb-2">
            {currentProjects.map(project => {
              const isOwner = project._role === 'owner';
              return (
                <Link to={`/project/${project.id}`} key={project.id} className="relative group h-fit">
                  <div className={`relative p-4 rounded-2xl bg-surface transition-all duration-300 flex flex-col justify-between hover:shadow-xl shadow-sm border-none dark:bg-surface-dark`}>
                    
                    {/* ACCENT STRIP */}
                    {isOwner && (
                      <div className="absolute left-0 top-4 bottom-4 w-1 rounded-r-full bg-gradient-to-b from-blue-500 to-purple-600 opacity-80"></div>
                    )}

                    <div>
                      <div className="flex justify-between items-start mb-2">
                        <span className={`text-[10px] font-bold px-2 py-0.5 rounded-md uppercase tracking-wider ${
                          isOwner ? 'bg-primary/10 text-primary' : 'bg-text-secondary/5 text-text-secondary'
                        }`}>
                          {isOwner ? 'Owner' : 'Member'}
                        </span>
                        <div className="flex items-center gap-2 opacity-20">
                          {project.is_public ? <FiGlobe size={14} /> : <FiLock size={14} />}
                        </div>
                      </div>
                      
                      <h3 className="text-xl font-bold text-text-main group-hover:text-primary transition-colors truncate mb-1">
                        {project.name}
                      </h3>
                      <p className="text-sm text-text-secondary/70 line-clamp-1 leading-relaxed">
                        {project.description || "Project workspace"}
                      </p>
                    </div>

                    <div className="mt-4 pt-3 border-t border-text-secondary/5 flex justify-between items-center text-[10px] text-text-secondary font-bold uppercase tracking-tighter">
                      <div className="flex flex-col gap-1">
                        <span className={`flex items-center text-xs ${isOwner ? 'text-primary' : ''}`}>
                          <FiUser className="mr-1.5" /> 
                          {isOwner ? `You` : (project.owner_name || 'Owner')}
                        </span>
                        <span className="flex items-center opacity-40 font-medium">
                          <FiClock className="mr-1.5" /> 
                          {new Date(project.created_at).toLocaleDateString()}
                        </span>
                      </div>
                      <div className="flex items-center text-primary font-black text-xs">
                        VIEW
                      </div>
                    </div>
                  </div>
                </Link>
              );
            })}
          </div>
        )}
      </div>

      {/* FIXED PAGINATION BAR - En alta sÄ±fÄ±rlandÄ± */}
      {/* FIXED PAGINATION BAR */}
<div className="flex-none pt-2 pb-4">
  <div className="flex justify-between items-center bg-surface p-3 border border-border rounded-xl shadow-sm dark:bg-surface-dark/60 backdrop-blur-md">
    <span className="text-xs text-text-secondary font-bold uppercase tracking-widest opacity-60">
      {filteredProjects.length > 0 ? (
        <>
          Showing {((currentPage - 1) * projectsPerPage) + 1} - {Math.min(currentPage * projectsPerPage, filteredProjects.length)} / {filteredProjects.length}
        </>
      ) : (
        "Showing 0 / 0"
      )}
    </span>
    <div className="flex items-center gap-3">
      <button 
        onClick={() => paginate(currentPage - 1)} 
        disabled={currentPage === 1} 
        className="p-2 rounded-lg hover:bg-app disabled:opacity-10 transition-all border border-border text-text-main"
      >
        <FiChevronLeft size={20} />
      </button>
      <div className="flex gap-2">
        {[...Array(totalPages)].map((_, i) => (
          <button 
            key={i + 1} 
            onClick={() => paginate(i + 1)} 
            className={`w-10 h-10 rounded-lg text-sm font-black transition-all ${
              currentPage === i + 1 
                ? 'bg-primary text-white shadow-md' 
                : 'hover:bg-app text-text-secondary border border-border'
            }`}
          >
            {i + 1}
          </button>
        ))}
      </div>
      <button 
        onClick={() => paginate(currentPage + 1)} 
        disabled={currentPage === totalPages} 
        className="p-2 rounded-lg hover:bg-app disabled:opacity-10 transition-all text-text-main border border-border"
      >
        <FiChevronRight size={20} />
      </button>
    </div>
  </div>
</div>
    </div>
    <CreateProjectModal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} />
  </div>
);
}
export default MyProjectsPage;


================================================
FILE: frontend/src/pages/ProjectDetailPage.js
================================================
// src/pages/ProjectDetailPage.js

import React, { useEffect } from 'react';
import { useParams, NavLink, Outlet } from 'react-router-dom';
import { useProjectContext } from '../context/ProjectContext';
import { 
  FiLoader, FiAlertTriangle, FiCheckSquare, 
  FiMessageSquare, FiFile, FiEdit, FiLayout 
} from 'react-icons/fi';

function ProjectDetailPage() {
  const { id } = useParams();
  const { currentProject, loading, error, fetchProjectById } = useProjectContext();

  useEffect(() => {
    if (id) {
      fetchProjectById(id);
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [id]);

  if (loading || (!currentProject && !error)) {
    return (
      <div className="p-20 flex justify-center">
        <FiLoader className="animate-spin text-primary" size={40} />
      </div>
    );
  }

  if (error && !currentProject) {
    return (
      <div className="p-20 flex justify-center text-red-500">
        <FiAlertTriangle size={40} />
        <span className="ml-4">Error: {error}</span>
      </div>
    );
  }

  const userRole = currentProject?.currentUserRole;
  const isTasksPublic = currentProject?.is_tasks_public;
  
  const showTasksTab = userRole !== 'public_viewer' || isTasksPublic;
  const showDiscussionsTab = userRole !== 'public_viewer';
  const showEditTab = userRole === 'owner';

  // --- TAB NAVIGASYON STÄ°LÄ° ---
  const navLinkStyle = ({ isActive }) =>
    `flex-1 flex items-center justify-center px-4 py-3 font-semibold border-b-2 transition-colors ` +
    (isActive 
      ? 'text-primary border-primary bg-primary/5' // Aktif: Marka rengi ve Ã§ok hafif zemin
      : 'text-text-secondary border-transparent hover:text-text-main hover:bg-surface-hover'); // Pasif: Gri ve hover efekti

  return (
    // text-white -> text-text-main
    <div className="p-4 text-text-main h-full flex flex-col">
      
      {/* BAÅžLIK ALANI */}
      <h1 className="text-4xl font-bold mb-2 text-text-main">{currentProject.name}</h1>
      
      {/* AÃ‡IKLAMA: text-gray-400 -> text-text-secondary */}
      <p className="text-lg text-text-secondary mb-6 leading-relaxed">
        {currentProject.description || "No description provided."}
      </p>
      
      {/* NAVIGASYON: border-gray-700 -> border-border */}
      <nav className="flex border-b border-border mb-6">
        
        <NavLink to="" end className={navLinkStyle}> 
          <FiFile className="mr-2" />
          Files
        </NavLink>

        {showTasksTab && (
          <NavLink to="tasks" className={navLinkStyle}>
            <FiLayout className="mr-2" />
            Tasks
          </NavLink>
        )}
        
        <NavLink to="issues" className={navLinkStyle}>
          <FiCheckSquare className="mr-2" />
          Issues
        </NavLink>
        
        {showDiscussionsTab && (
          <NavLink to="discussions" className={navLinkStyle}>
            <FiMessageSquare className="mr-2" />
            Discussions
          </NavLink>
        )}
        
        {showEditTab && (
          <NavLink to="edit" className={navLinkStyle}>
            <FiEdit className="mr-2" />
            Edit
          </NavLink>
        )}
      </nav>

      {/* Ä°Ã‡ERÄ°K ALANI (DiÄŸer sayfalarÄ±n yÃ¼kleneceÄŸi yer) */}
      <div className="flex-1 min-h-0">
        <Outlet />
      </div>
    </div>
  );
}

export default ProjectDetailPage;


================================================
FILE: frontend/src/pages/RegisterPage.js
================================================
// src/pages/RegisterPage.js

import React, { useState } from 'react';
import { useNavigate, Link } from 'react-router-dom';
import { FiUser, FiLock, FiMail, FiArrowLeft, FiLoader } from 'react-icons/fi';
import { useAuth } from '../context/AuthContext';
import BackgroundImage from '../assets/background.jpg';
import LogoImage from '../assets/logo.png';

function RegisterPage() {
  const [username, setUsername] = useState('');
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState(null);
  const [success, setSuccess] = useState(null);
  const { register, loading } = useAuth(); 
  const navigate = useNavigate();

  const handleSubmit = async (e) => {
    e.preventDefault();
    setError(null);
    setSuccess(null);
    if (!username || !email || !password) {
      setError("Please enter all fields.");
      return;
    }

    try {
      await register(username, email, password);
      setSuccess("Account created successfully! Redirecting to login...");
      setTimeout(() => {
        navigate('/login');
      }, 2000);
    } catch (err) {
      setError(err.message);
    }
  };

  return (
    <div 
      className="relative flex items-center justify-center min-h-screen bg-cover bg-center transition-all duration-300"
      style={{ backgroundImage: `url(${BackgroundImage})` }}
    >
      <div className="absolute inset-0 z-0 bg-white/30 backdrop-blur-[2px] dark:bg-black/60 transition-colors duration-300"></div>

      <Link 
        to="/home" 
        className="absolute top-8 left-8 z-20 flex items-center text-gray-900 dark:text-white hover:text-blue-600 transition-colors group font-semibold"
      >
        <div className="p-2 bg-white/80 dark:bg-gray-800/80 border border-gray-200 dark:border-gray-700 rounded-full mr-3 group-hover:bg-white shadow-sm backdrop-blur-md">
             <FiArrowLeft size={20} />
        </div>
        <span className="bg-white/50 dark:bg-black/50 px-2 py-1 rounded-md backdrop-blur-sm">Back to Home</span>
      </Link>

      <div className="relative z-10 w-full max-w-md p-8 space-y-6 bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl border border-gray-200 dark:border-gray-700 rounded-2xl shadow-2xl animate-fade-in-up">
         
         <div className="flex flex-col items-center justify-center mb-6">
            <img 
                src={LogoImage} 
                alt="Logo" 
                className="h-32 w-32 mb-4 object-contain brightness-0 dark:brightness-100 transition-all" 
            />
            <h1 className="text-4xl font-extrabold text-gray-900 dark:text-white tracking-tight">GazozHub</h1>
        </div>

         <div className="text-center">
          <h2 className="text-lg font-bold text-gray-600 dark:text-gray-300 uppercase tracking-widest">Create Account</h2>
        </div>
        
        <form className="space-y-5" onSubmit={handleSubmit}>
          
          {/* USERNAME */}
          <div className="relative">
            <div className="absolute top-0 left-0 flex items-center h-full pl-3 pointer-events-none">
              <FiUser className="w-5 h-5 text-gray-500 dark:text-gray-400" />
            </div>
            <input
              id="username"
              type="text"
              required
              className="w-full py-3 pl-10 pr-4 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors 
                         bg-white dark:bg-gray-800 
                         border-gray-300 dark:border-gray-600 
                         text-gray-900 dark:text-white 
                         placeholder-gray-500 dark:placeholder-gray-400"
              placeholder="Username"
              value={username}
              onChange={(e) => setUsername(e.target.value)}
            />
          </div>

          {/* EMAIL */}
          <div className="relative">
            <div className="absolute top-0 left-0 flex items-center h-full pl-3 pointer-events-none">
              <FiMail className="w-5 h-5 text-gray-500 dark:text-gray-400" />
            </div>
            <input
              id="email"
              type="email"
              required
              className="w-full py-3 pl-10 pr-4 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors 
                         bg-white dark:bg-gray-800 
                         border-gray-300 dark:border-gray-600 
                         text-gray-900 dark:text-white 
                         placeholder-gray-500 dark:placeholder-gray-400"
              placeholder="Email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
            />
          </div>
          
          {/* PASSWORD */}
          <div className="relative">
            <div className="absolute top-0 left-0 flex items-center h-full pl-3 pointer-events-none">
              <FiLock className="w-5 h-5 text-gray-500 dark:text-gray-400" />
            </div>
            <input
              id="password"
              type="password"
              required
              className="w-full py-3 pl-10 pr-4 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors 
                         bg-white dark:bg-gray-800 
                         border-gray-300 dark:border-gray-600 
                         text-gray-900 dark:text-white 
                         placeholder-gray-500 dark:placeholder-gray-400"
              placeholder="Password"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
            />
          </div>

          {error && <p className="text-sm text-red-600 font-bold text-center bg-red-100 p-2 rounded border border-red-300">{error}</p>}
          {success && <p className="text-sm text-green-600 font-bold text-center bg-green-100 p-2 rounded border border-green-300">{success}</p>}

          <div>
            <button
              type="submit"
              disabled={loading}
              className="w-full flex justify-center items-center px-4 py-3 font-semibold text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-300 disabled:opacity-70"
            >
              {loading ? <FiLoader className="animate-spin mr-2"/> : 'Sign Up'}
            </button>
          </div>
        </form>
        
        <div className="text-center mt-4">
          <p className="text-sm text-gray-600 dark:text-gray-400">
            Already have an account?{' '}
            <Link to="/login" className="font-bold text-blue-600 hover:text-blue-500">
              Sign In
            </Link>
          </p>
        </div>
      </div>
    </div>
  );
}

export default RegisterPage;


================================================
FILE: frontend/src/pages/ResetPasswordPage.js
================================================
// src/pages/ResetPasswordPage.js

import React, { useState } from 'react';
import { useNavigate, useParams, Link } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';
import { FiLock, FiLoader, FiArrowLeft, FiCheckCircle } from 'react-icons/fi';
import BackgroundImage from '../assets/background.jpg';
import LogoImage from '../assets/logo.png';

export default function ResetPasswordPage() {
  const { token } = useParams(); 
  const navigate = useNavigate();
  const { resetPassword } = useAuth();

  const [password, setPassword] = useState('');
  const [confirmPassword, setConfirmPassword] = useState('');
  const [message, setMessage] = useState('');
  const [error, setError] = useState('');
  const [isSubmitting, setIsSubmitting] = useState(false);

  const handleSubmit = async (e) => {
    e.preventDefault();
    setError('');
    setMessage('');

    if (password !== confirmPassword) {
      setError("Passwords do not match.");
      return;
    }

    setIsSubmitting(true);
    try {
      // AuthContext'teki resetPassword fonksiyonunu Ã§aÄŸÄ±rÄ±r
      await resetPassword(token, password);
      setMessage('Your password has been successfully updated! Redirecting to login...');
      
      setTimeout(() => {
        navigate('/login');
      }, 2500);
    } catch (err) {
      setError(err.response?.data?.message || 'Failed to reset password. The link may be invalid or expired.');
    } finally {
      setIsSubmitting(false);
    }
  };

  return (
    <div 
      className="relative flex items-center justify-center min-h-screen bg-cover bg-center transition-all duration-300"
      style={{ backgroundImage: `url(${BackgroundImage})` }}
    >
      {/* Background Overlay */}
      <div className="absolute inset-0 z-0 bg-white/30 backdrop-blur-[2px] dark:bg-black/60 transition-colors duration-300"></div>

      {/* Back Button */}
      <Link 
        to="/login" 
        className="absolute top-8 left-8 z-20 flex items-center text-gray-900 dark:text-white hover:text-blue-600 transition-colors group font-semibold"
      >
        <div className="p-2 bg-white/80 dark:bg-gray-800/80 border border-gray-200 dark:border-gray-700 rounded-full mr-3 shadow-sm backdrop-blur-md">
             <FiArrowLeft size={20} />
        </div>
        <span className="bg-white/50 dark:bg-black/50 px-2 py-1 rounded-md backdrop-blur-sm">Back to Login</span>
      </Link>

      <div className="relative z-10 w-full max-w-md p-8 bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl border border-gray-200 dark:border-gray-700 rounded-2xl shadow-2xl animate-fade-in-up">
        
        {/* Logo Section */}
        <div className="flex flex-col items-center justify-center mb-6">
            <img 
                src={LogoImage} 
                alt="Logo" 
                className="h-24 w-24 mb-4 object-contain brightness-0 dark:brightness-100 transition-all" 
            />
            <h1 className="text-4xl font-extrabold text-gray-900 dark:text-white tracking-tight">GazozHub</h1>
        </div>

        <h2 className="text-lg font-bold text-gray-700 dark:text-gray-300 text-center mb-6 uppercase tracking-widest">Set New Password</h2>
        
        {/* Feedback Messages */}
        {message && <div className="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4 text-sm font-bold flex items-center"><FiCheckCircle className="mr-2"/> {message}</div>}
        {error && <div className="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4 text-sm font-bold">{error}</div>}

        <form onSubmit={handleSubmit} className="space-y-5">
          {/* New Password */}
          <div className="relative">
            <div className="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
              <FiLock className="text-gray-500" />
            </div>
            <input
              type="password"
              required
              placeholder="New Password"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              className="w-full py-3 pl-10 pr-4 rounded-lg border bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-all"
            />
          </div>

          {/* Confirm Password */}
          <div className="relative">
            <div className="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
              <FiLock className="text-gray-500" />
            </div>
            <input
              type="password"
              required
              placeholder="Confirm New Password"
              value={confirmPassword}
              onChange={(e) => setConfirmPassword(e.target.value)}
              className="w-full py-3 pl-10 pr-4 rounded-lg border bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-all"
            />
          </div>

          <button 
            type="submit" 
            disabled={isSubmitting}
            className="w-full flex justify-center items-center py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold shadow-lg transition-all disabled:opacity-50"
          >
            {isSubmitting ? <FiLoader className="animate-spin mr-2" /> : 'Update Password'}
          </button>
        </form>
      </div>
    </div>
  );
}



================================================
FILE: frontend/src/pages/SettingsPage.js
================================================
// src/pages/SettingsPage.js

import React, { useState } from 'react';
import { FiUser, FiLock, FiMonitor, FiSave, FiSun, FiMoon } from 'react-icons/fi';
import { useTheme } from '../context/ThemeContext'; // YENÄ°: Context'i Ã§ekiyoruz

export default function SettingsPage() {
  const [activeTab, setActiveTab] = useState('profile');
  const { theme, toggleTheme } = useTheme(); // Tema fonksiyonlarÄ±nÄ± al

  // Tab Ä°Ã§erikleri
  const renderContent = () => {
    switch (activeTab) {
      case 'profile':
        return (
          <div className="space-y-6 animate-fade-in">
            <h3 className="text-lg font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">
              Profile Details
            </h3>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label className="block text-sm text-gray-600 dark:text-gray-400 mb-1">Full Name</label>
                    <input type="text" className="w-full bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg p-2.5 text-gray-900 dark:text-white focus:border-blue-500 outline-none transition-colors" placeholder="Your Name" />
                </div>
                <div>
                    <label className="block text-sm text-gray-600 dark:text-gray-400 mb-1">Email</label>
                    <input type="email" className="w-full bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg p-2.5 text-gray-900 dark:text-white focus:border-blue-500 outline-none transition-colors" placeholder="email@example.com" disabled />
                </div>
                <div className="md:col-span-2">
                    <label className="block text-sm text-gray-600 dark:text-gray-400 mb-1">Bio</label>
                    <textarea className="w-full bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg p-2.5 text-gray-900 dark:text-white focus:border-blue-500 outline-none h-24 transition-colors" placeholder="Tell us about yourself..." />
                </div>
            </div>
          </div>
        );
      case 'security':
        return (
          <div className="space-y-6 animate-fade-in">
            <h3 className="text-lg font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">
              Security & Password
            </h3>
            <div className="space-y-4 max-w-md">
                <div>
                    <label className="block text-sm text-gray-600 dark:text-gray-400 mb-1">Current Password</label>
                    <input type="password" className="w-full bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg p-2.5 text-gray-900 dark:text-white focus:border-blue-500 outline-none transition-colors" />
                </div>
                <div>
                    <label className="block text-sm text-gray-600 dark:text-gray-400 mb-1">New Password</label>
                    <input type="password" className="w-full bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg p-2.5 text-gray-900 dark:text-white focus:border-blue-500 outline-none transition-colors" />
                </div>
                <div>
                    <label className="block text-sm text-gray-600 dark:text-gray-400 mb-1">Confirm New Password</label>
                    <input type="password" className="w-full bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg p-2.5 text-gray-900 dark:text-white focus:border-blue-500 outline-none transition-colors" />
                </div>
            </div>
          </div>
        );
      case 'appearance':
        return (
          <div className="space-y-6 animate-fade-in">
            <h3 className="text-lg font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">
              Appearance Settings
            </h3>
            <div className="space-y-4">
                <p className="text-gray-600 dark:text-gray-400 text-sm">Choose how GazozHub looks to you.</p>
                
                <div className="grid grid-cols-2 gap-4 max-w-md">
                  {/* LIGHT MODE BUTONU */}
                  <button 
                    onClick={() => toggleTheme('light')}
                    className={`flex items-center justify-center p-4 rounded-xl border-2 transition-all ${
                      theme === 'light' 
                      ? 'border-blue-500 bg-blue-50 text-blue-700' 
                      : 'border-gray-200 bg-white text-gray-600 hover:border-gray-300'
                    }`}
                  >
                    <FiSun className="mr-2" size={20}/>
                    <span className="font-semibold">Light Mode</span>
                  </button>

                  {/* DARK MODE BUTONU */}
                  <button 
                    onClick={() => toggleTheme('dark')}
                    className={`flex items-center justify-center p-4 rounded-xl border-2 transition-all ${
                      theme === 'dark' 
                      ? 'border-blue-500 bg-gray-800 text-white' 
                      : 'border-gray-200 bg-gray-100 text-gray-600 hover:border-gray-300'
                    }`}
                  >
                    <FiMoon className="mr-2" size={20}/>
                    <span className="font-semibold">Dark Mode</span>
                  </button>
                </div>
            </div>
          </div>
        );
      default:
        return null;
    }
  };

  return (
    <div className="container mx-auto px-4 py-8 max-w-4xl h-[calc(100vh-100px)]">
      <h1 className="text-3xl font-bold text-gray-900 dark:text-white mb-6 transition-colors">Settings</h1>

      {/* --- TAB MENÃœSÃœ --- */}
      <div className="flex space-x-2 border-b border-gray-200 dark:border-gray-700 mb-8 overflow-x-auto transition-colors">
        <button 
            onClick={() => setActiveTab('profile')} 
            className={`flex items-center px-6 py-3 text-sm font-medium transition-colors border-b-2 ${
                activeTab === 'profile' 
                ? 'border-blue-500 text-blue-600 dark:text-blue-400' 
                : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white hover:border-gray-300 dark:hover:border-gray-600'
            }`}
        >
            <FiUser className="mr-2" /> Account
        </button>
        
        

        <button 
            onClick={() => setActiveTab('appearance')} 
            className={`flex items-center px-6 py-3 text-sm font-medium transition-colors border-b-2 ${
                activeTab === 'appearance' 
                ? 'border-blue-500 text-blue-600 dark:text-blue-400' 
                : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white hover:border-gray-300 dark:hover:border-gray-600'
            }`}
        >
            <FiMonitor className="mr-2" /> Appearance
        </button>
      </div>

      
      <div className="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-8 shadow-sm dark:shadow-xl min-h-[400px] transition-colors duration-300">
          {renderContent()}
          
          <div className="mt-10 pt-6 border-t border-gray-200 dark:border-gray-700 flex justify-end transition-colors">
              <button className="flex items-center px-6 py-2.5 bg-blue-600 hover:bg-blue-500 text-white rounded-lg font-medium transition-colors shadow-lg">
                  <FiSave className="mr-2" /> Save Changes
              </button>
          </div>
      </div>
    </div>
  );
}


================================================
FILE: frontend/src/pages/SharedProjectsPage.js
================================================
// src/pages/SharedProjectsPage.js
import React, { useState, useEffect, useMemo } from 'react';
import { FiLoader, FiSearch, FiChevronLeft, FiChevronRight, FiGlobe } from 'react-icons/fi'; 
import SharedProjectCard from '../components/projects/SharedProjectCard';
import api from '../services/api'; 

function SharedProjectsPage() {
  const [publicProjects, setPublicProjects] = useState([]);
  const [loading, setLoading] = useState(true);
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const projectsPerPage = 6;

  useEffect(() => {
    const fetchPublic = async () => {
      setLoading(true);
      try {
        const response = await api.get('/api/projects/public-explorer');
        setPublicProjects(response.data);
      } catch (err) {
        console.error("Public projects load error:", err);
      } finally {
        setLoading(false);
      }
    };
    fetchPublic();
  }, []);

  const filteredProjects = useMemo(() => {
    return (Array.isArray(publicProjects) ? publicProjects : []).filter(project => 
      project.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
      (project.description && project.description.toLowerCase().includes(searchTerm.toLowerCase()))
    );
  }, [publicProjects, searchTerm]);

  const totalPages = Math.max(Math.ceil(filteredProjects.length / projectsPerPage), 1);
  const currentProjects = filteredProjects.slice((currentPage - 1) * projectsPerPage, currentPage * projectsPerPage);

  const paginate = (pageNumber) => setCurrentPage(pageNumber);

  useEffect(() => { setCurrentPage(1); }, [searchTerm]);

  // src/pages/SharedProjectsPage.js

return (
  <div className="flex flex-col h-[calc(100vh-140px)] p-4 pb-0 bg-app transition-colors duration-300 overflow-hidden">
    <div className="max-w-7xl mx-auto w-full h-full flex flex-col">
      
      {/* HEADER SECTION */}
      <div className="flex-none flex justify-between items-center mb-4">
        <h1 className="text-2xl font-black text-text-main tracking-tight dark:text-white flex items-center">
          <FiGlobe className="mr-3 text-primary" /> Shared Projects
        </h1>
      </div>

      {/* SEARCH BAR - My Projects ile aynÄ± kutu stili */}
      <div className="flex-none bg-surface p-2 rounded-2xl border border-border shadow-sm mb-4 dark:bg-surface-dark/40">
        <div className="relative group">
          <FiSearch className="absolute left-3 top-3 text-text-secondary transition-colors" />
          <input
            type="text"
            placeholder="Search shared projects..."
            value={searchTerm}
            onChange={(e) => setSearchTerm(e.target.value)}
            className="w-full bg-app border border-border text-text-main text-base rounded-xl pl-10 py-2 outline-none focus:border-primary transition-all dark:bg-black/20"
          />
        </div>
      </div>

      {/* PROJECT LIST */}
      <div className="flex-grow overflow-y-auto pr-1 custom-scrollbar">
        {loading ? (
          <div className="flex justify-center p-10"><FiLoader className="animate-spin text-primary" size={40} /></div>
        ) : filteredProjects.length === 0 ? (
          <div className="p-10 text-center bg-surface/20 rounded-2xl border border-dashed border-border/40">
            <p className="text-text-secondary text-base font-medium">No shared projects found.</p>
          </div>
        ) : (
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pb-2">
            {currentProjects.map(project => (
              <SharedProjectCard key={project.id} project={project} />
            ))}
          </div>
        )}
      </div>

      {/* FIXED PAGINATION BAR - "Showing" kÄ±smÄ± bÃ¼yÃ¼tÃ¼ldÃ¼ ve kurumsallaÅŸtÄ±rÄ±ldÄ± */}
      {/* FIXED PAGINATION BAR */}
<div className="flex-none pt-2 pb-4">
  <div className="flex justify-between items-center bg-surface p-3 border border-border rounded-xl shadow-sm dark:bg-surface-dark/60 backdrop-blur-md">
    <span className="text-xs text-text-secondary font-bold uppercase tracking-widest opacity-60">
      {filteredProjects.length > 0 ? (
        <>
          Showing {((currentPage - 1) * projectsPerPage) + 1} - {Math.min(currentPage * projectsPerPage, filteredProjects.length)} / {filteredProjects.length}
        </>
      ) : (
        "Showing 0 / 0"
      )}
    </span>
    <div className="flex items-center gap-3">
      <button 
        onClick={() => paginate(currentPage - 1)} 
        disabled={currentPage === 1} 
        className="p-2 rounded-lg hover:bg-app disabled:opacity-10 transition-all border border-border text-text-main"
      >
        <FiChevronLeft size={20} />
      </button>
      <div className="flex gap-2">
        {[...Array(totalPages)].map((_, i) => (
          <button 
            key={i + 1} 
            onClick={() => paginate(i + 1)} 
            className={`w-10 h-10 rounded-lg text-sm font-black transition-all ${
              currentPage === i + 1 
                ? 'bg-primary text-white shadow-md' 
                : 'hover:bg-app text-text-secondary border border-border'
            }`}
          >
            {i + 1}
          </button>
        ))}
      </div>
      <button 
        onClick={() => paginate(currentPage + 1)} 
        disabled={currentPage === totalPages} 
        className="p-2 rounded-lg hover:bg-app disabled:opacity-10 transition-all text-text-main border border-border"
      >
        <FiChevronRight size={20} />
      </button>
    </div>
  </div>
</div>
    </div>
  </div>
);
}

export default SharedProjectsPage;


================================================
FILE: frontend/src/pages/Users.js
================================================
// src/pages/Users.js

import React, { useState, useEffect, useRef } from 'react';
import api from '../services/api';
import { 
  FiMail, FiUserPlus, FiMoreVertical, FiEdit2, FiTrash2, 
  FiChevronLeft, FiChevronRight, FiX, FiUser, FiCheck, FiSearch, FiLock, FiShield,
  FiBox, FiUsers, FiExternalLink, FiCalendar,FiLoader
} from 'react-icons/fi';

function Users() {
  const [activeTab, setActiveTab] = useState('users'); 
  const [users, setUsers] = useState([]);
  const [projects, setProjects] = useState([]); 
  const [loading, setLoading] = useState(true);
  const [currentPage, setCurrentPage] = useState(1);
  const [itemsPerPage] = useState(7);
  const [searchTerm, setSearchTerm] = useState(""); 
  const [openMenuId, setOpenMenuId] = useState(null);
  const [showModal, setShowModal] = useState(false);
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [selectedItem, setSelectedItem] = useState(null);
  
  const [formData, setFormData] = useState({
    username: '',
    email: '',
    password: '',
    role: 'student'
  });

  const menuRef = useRef(null);

  // --- MENU KONTROLÃœ ---
  const toggleMenu = (id, e) => {
    e.stopPropagation();
    setOpenMenuId(openMenuId === id ? null : id);
  };

  useEffect(() => {
    function handleClickOutside(event) {
      if (menuRef.current && !menuRef.current.contains(event.target)) {
        setOpenMenuId(null);
      }
    }
    document.addEventListener("mousedown", handleClickOutside);
    return () => { document.removeEventListener("mousedown", handleClickOutside); };
  }, [menuRef]);

  // --- VERÄ° Ã‡EKME ---
  useEffect(() => { 
    if (activeTab === 'users') fetchUsers();
    else fetchAllProjects();
  }, [activeTab]);

  const fetchUsers = async () => {
    setLoading(true);
    try {
      const response = await api.get('/api/auth/users');
      if (Array.isArray(response.data)) {
         setUsers(response.data.sort((a, b) => new Date(b.created_at || Date.now()) - new Date(a.created_at || Date.now())));
      }
    } catch (err) {
      console.error("Fetch Error:", err);
    } finally {
      setLoading(false);
    }
  };

  const fetchAllProjects = async () => {
    setLoading(true);
    try {
      // BÃ¼tÃ¼n projeleri Ã§ekmek iÃ§in backend'de oluÅŸturduÄŸumuz admin rotasÄ±nÄ± kullanÄ±yoruz
      const response = await api.get('/api/projects/admin/all-projects'); 
      setProjects(Array.isArray(response.data) ? response.data : []);
    } catch (err) {
      console.error("Projects Fetch Error:", err);
      setProjects([]);
    } finally {
      setLoading(false);
    }
  };

  // --- FÄ°LTRELEME & SAYFALAMA ---
  const filteredData = activeTab === 'users' 
    ? users.filter(u => u.username?.toLowerCase().includes(searchTerm.toLowerCase()) || u.email?.toLowerCase().includes(searchTerm.toLowerCase()))
    : projects.filter(p => p.name?.toLowerCase().includes(searchTerm.toLowerCase()) || p.owner_name?.toLowerCase().includes(searchTerm.toLowerCase()));

  const totalPages = Math.max(Math.ceil(filteredData.length / itemsPerPage), 1);
  const currentItems = filteredData.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage);
  
  const paginate = (pageNumber) => setCurrentPage(pageNumber);

  // --- USER Ä°ÅžLEMLERÄ° ---
  const openAddModal = () => {
      setSelectedItem(null);
      setFormData({ username: '', email: '', password: '', role: 'student' });
      setShowModal(true);
  };

  const openEditModal = (user) => {
      setSelectedItem(user);
      setFormData({
          username: user.username,
          email: user.email,
          password: '',
          role: user.role || 'student'
      });
      setOpenMenuId(null);
      setShowModal(true);
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsSubmitting(true);
    try {
        if (selectedItem) {
            await api.put(`/api/auth/users/${selectedItem.id}`, formData);
        } else {
            await api.post('/api/auth/register', formData);
        }
        fetchUsers();
        setShowModal(false);
    } catch (err) { alert("Operation failed."); }
    finally { setIsSubmitting(false); }
  };

  const handleDeleteUser = async (user) => {
    const confirmDelete = window.confirm(`Are you sure you want to delete ${user.username}?`);
    if (!confirmDelete) return;
    try {
      setIsSubmitting(true);
      await api.delete(`/api/auth/users/${user.id}`);
      setOpenMenuId(null);
      fetchUsers();
    } catch (err) {
      alert("Delete failed.");
    } finally {
      setIsSubmitting(false);
    }
  };

  const handleDeleteProject = async (project) => {
    const confirmDelete = window.confirm(`Are you sure you want to delete project "${project.name}"?`);
    if (!confirmDelete) return;
    try {
      setIsSubmitting(true);
      await api.delete(`/api/projects/${project.id}`);
      setOpenMenuId(null);
      fetchAllProjects();
    } catch (err) {
      alert("Delete failed.");
    } finally {
      setIsSubmitting(false);
    }
  };

  return (
    <div className="flex flex-col h-[calc(100vh-140px)] container mx-auto max-w-6xl px-4 py-4 overflow-hidden">
      
      {/* TABS HEADER */}
      <div className="flex items-center space-x-1 bg-surface p-1 rounded-xl border border-border w-fit mb-6 shadow-sm">
        <button 
          onClick={() => { setActiveTab('users'); setCurrentPage(1); setSearchTerm(""); }}
          className={`flex items-center px-6 py-2 rounded-lg text-sm font-bold transition-all ${activeTab === 'users' ? 'bg-primary text-white shadow-md' : 'text-text-secondary hover:text-text-main hover:bg-surface-hover'}`}
        >
          <FiUsers className="mr-2" /> Users
        </button>
        <button 
          onClick={() => { setActiveTab('projects'); setCurrentPage(1); setSearchTerm(""); }}
          className={`flex items-center px-6 py-2 rounded-lg text-sm font-bold transition-all ${activeTab === 'projects' ? 'bg-primary text-white shadow-md' : 'text-text-secondary hover:text-text-main hover:bg-surface-hover'}`}
        >
          <FiBox className="mr-2" /> Projects
        </button>
      </div>

      {/* SEARCH & ACTIONS */}
      <div className="flex-none flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4">
        <div className="relative flex-1 md:w-80">
          <FiSearch className="absolute left-3 top-2.5 text-text-secondary" />
          <input 
            type="text" 
            placeholder={activeTab === 'users' ? "Search users..." : "Search projects..."}
            value={searchTerm} 
            onChange={(e) => { setSearchTerm(e.target.value); setCurrentPage(1); }} 
            className="w-full bg-surface border border-border text-text-main text-sm rounded-lg pl-10 pr-4 py-2 focus:border-primary outline-none transition-colors shadow-sm" 
          />
        </div>
        
        {activeTab === 'users' && (
          <button onClick={openAddModal} className="flex items-center px-4 py-2 bg-primary hover:bg-primary-hover text-white rounded-lg shadow-lg font-bold text-sm transition-colors border-none">
            <FiUserPlus className="mr-2" /> Add User
          </button>
        )}
      </div>

      {/* MAIN TABLE CONTAINER */}
      <div className="flex-grow bg-surface rounded-xl border border-border shadow-xl overflow-hidden flex flex-col relative" ref={menuRef}>
        <div className="overflow-x-auto flex-1 custom-scrollbar">
          {loading ? (
            <div className="flex justify-center p-20"><FiLoader className="animate-spin text-primary" size={40} /></div>
          ) : (
            <table className="w-full text-left text-text-secondary">
              <thead className="bg-app/80 text-[11px] uppercase text-text-secondary font-black sticky top-0 z-10 backdrop-blur-sm border-b border-border">
                {activeTab === 'users' ? (
                  <tr>
                    <th className="px-6 py-4 tracking-widest">User Details</th>
                    <th className="px-6 py-4 tracking-widest">Role</th>
                    <th className="px-6 py-4 text-right tracking-widest">Joined</th>
                    <th className="px-6 py-4 w-10"></th>
                  </tr>
                ) : (
                  <tr>
                    <th className="px-6 py-4 tracking-widest">Project Name</th>
                    <th className="px-6 py-4 tracking-widest">Owner</th>
                    <th className="px-6 py-4 tracking-widest">Visibility</th>
                    <th className="px-6 py-4 text-right tracking-widest">Updated</th>
                    <th className="px-6 py-4 w-10"></th>
                  </tr>
                )}
              </thead>
              <tbody className="divide-y divide-border text-sm">
                {currentItems.map((item) => (
                  <tr key={item.id} className="hover:bg-surface-hover transition-colors">
                    {activeTab === 'users' ? (
                      <>
                        <td className="px-6 py-3">
                          <div className="flex items-center">
                            <div className="w-9 h-9 rounded-full bg-primary/10 text-primary flex items-center justify-center font-black mr-3 text-xs border border-primary/20">
                              {item.username?.charAt(0).toUpperCase()}
                            </div>
                            <div className="flex flex-col">
                              <span className="font-bold text-text-main leading-none mb-1">{item.username}</span>
                              <span className="text-[11px] opacity-60 font-medium">{item.email}</span>
                            </div>
                          </div>
                        </td>
                        <td className="px-6 py-3">
                          <span className={`text-[10px] font-black px-2 py-0.5 rounded border ${item.role === 'admin' ? 'bg-red-500/10 text-red-500 border-red-500/20' : 'bg-blue-500/10 text-blue-500 border-blue-500/20'}`}>
                            {item.role?.toUpperCase()}
                          </span>
                        </td>
                        <td className="px-6 py-3 text-right text-xs font-bold opacity-40">
                          {new Date(item.created_at).toLocaleDateString()}
                        </td>
                      </>
                    ) : (
                      <>
                        <td className="px-6 py-3 font-bold text-text-main">{item.name}</td>
                        <td className="px-6 py-3 text-xs font-bold">{item.owner_name}</td>
                        <td className="px-6 py-3">
                          <span className={`text-[10px] font-black px-2 py-0.5 rounded border ${item.is_public ? 'bg-green-500/10 text-green-500 border-green-500/20' : 'bg-amber-500/10 text-amber-500 border-amber-500/20'}`}>
                            {item.is_public ? 'PUBLIC' : 'PRIVATE'}
                          </span>
                        </td>
                        <td className="px-6 py-3 text-right text-xs font-bold opacity-40">
                          {new Date(item.updated_at || item.created_at).toLocaleDateString()}
                        </td>
                      </>
                    )}
                    <td className="px-6 py-3 relative">
                      <button onClick={(e) => toggleMenu(item.id, e)} className="p-2 rounded-lg hover:bg-surface-hover text-text-secondary transition-colors">
                        <FiMoreVertical size={16} />
                      </button>
                      {openMenuId === item.id && (
                        <div className="absolute right-8 top-2 w-40 bg-surface border border-border rounded-xl shadow-2xl z-50 py-1 overflow-hidden">
                          {activeTab === 'users' ? (
                            <>
                              <button onClick={() => openEditModal(item)} className="w-full text-left px-4 py-2 text-xs font-bold text-text-main hover:bg-surface-hover flex items-center border-none transition-colors"><FiEdit2 className="mr-2"/> EDIT USER</button>
                              <button 
                                onClick={() => handleDeleteUser(item)} 
                                className="w-full text-left px-4 py-2 text-xs font-bold text-red-500 hover:bg-red-500/10 flex items-center border-none transition-colors"
                              >
                                <FiTrash2 className="mr-2"/> DELETE
                              </button>
                            </>
                          ) : (
                            <>
                              <button onClick={() => window.open(`/project/${item.id}`, '_blank')} className="w-full text-left px-4 py-2 text-xs font-bold text-text-main hover:bg-surface-hover flex items-center border-none transition-colors"><FiExternalLink className="mr-2"/> VIEW PROJECT</button>
                              <button 
                                onClick={() => handleDeleteProject(item)} 
                                className="w-full text-left px-4 py-2 text-xs font-bold text-red-500 hover:bg-red-500/10 flex items-center border-none transition-colors"
                              >
                                <FiTrash2 className="mr-2"/> DELETE
                              </button>
                            </>
                          )}
                        </div>
                      )}
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          )}
        </div>
        
        {/* PAGINATION BAR */}
        <div className="flex-none bg-surface border-t border-border p-4 flex items-center justify-between">
            <span className="text-xs text-text-secondary font-black uppercase tracking-widest opacity-60">
              {filteredData.length > 0 ? (
                `Showing ${((currentPage - 1) * itemsPerPage) + 1} - ${Math.min(currentPage * itemsPerPage, filteredData.length)} / ${filteredData.length}`
              ) : "Showing 0 / 0"}
            </span>
            <div className="flex items-center gap-2">
                <button onClick={() => paginate(currentPage - 1)} disabled={currentPage === 1} className="p-2 rounded-lg bg-app border border-border hover:bg-surface-hover text-text-secondary disabled:opacity-20 transition-all"><FiChevronLeft size={18}/></button>
                <div className="flex gap-1">
                  {[...Array(totalPages)].map((_, i) => (
                    <button key={i + 1} onClick={() => paginate(i + 1)} className={`w-8 h-8 rounded-lg text-xs font-black transition-all ${currentPage === i + 1 ? 'bg-primary text-white' : 'text-text-secondary hover:bg-app border border-border'}`}>{i+1}</button>
                  ))}
                </div>
                <button onClick={() => paginate(currentPage + 1)} disabled={currentPage === totalPages || totalPages === 0} className="p-2 rounded-lg bg-app border border-border hover:bg-surface-hover text-text-secondary disabled:opacity-20 transition-all"><FiChevronRight size={18}/></button>
            </div>
        </div>
      </div>

      {/* USER MODAL */}
      {showModal && activeTab === 'users' && (
        <div className="fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm">
            <div className="bg-surface border border-border rounded-2xl w-full max-w-md shadow-2xl p-8 relative">
                <button onClick={() => setShowModal(false)} className="absolute top-6 right-6 text-text-secondary hover:text-text-main transition-colors border-none bg-transparent cursor-pointer"><FiX size={20} /></button>
                <h2 className="text-xl font-black text-text-main mb-6 uppercase tracking-tight">
                    {selectedItem ? 'Update User' : 'New Registration'}
                </h2>
                <form onSubmit={handleSubmit} className="space-y-4">
                  <input name="username" required value={formData.username} onChange={(e) => setFormData({...formData, username: e.target.value})} className="w-full py-3 px-4 text-sm text-text-main bg-app border border-border rounded-xl focus:border-primary outline-none" placeholder="Username"/>
                  <input type="email" name="email" required value={formData.email} onChange={(e) => setFormData({...formData, email: e.target.value})} className="w-full py-3 px-4 text-sm text-text-main bg-app border border-border rounded-xl focus:border-primary outline-none" placeholder="Email Address"/>
                  <input type="password" name="password" required={!selectedItem} value={formData.password} onChange={(e) => setFormData({...formData, password: e.target.value})} className="w-full py-3 px-4 text-sm text-text-main bg-app border border-border rounded-xl focus:border-primary outline-none" placeholder={selectedItem ? "New Password (Optional)" : "Password"}/>
                  <button type="submit" disabled={isSubmitting} className="w-full bg-primary hover:opacity-90 text-white font-black rounded-xl py-3 mt-4 transition-all uppercase tracking-widest text-xs border-none cursor-pointer">
                      {isSubmitting ? 'Saving...' : 'Save Data'}
                  </button>
                </form>
            </div>
        </div>
      )}
    </div>
  );
}

export default Users;


================================================
FILE: frontend/src/services/api.js
================================================
import axios from 'axios';

const api = axios.create({
  baseURL: 'http://localhost:5000',
  headers: {
    'Content-Type': 'application/json'
  }
});

// TOKEN EKLEME INTERCEPTOR'I
api.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem('token');
    if (token) {
      // Backend'in beklediÄŸi header anahtarÄ±: 'x-auth-token'
      // EÄŸer backend middleware'inde 'Authorization' bekliyorsan burayÄ± deÄŸiÅŸtirmen gerekir.
      // Senin backend/middleware/auth.js dosyan 'x-auth-token' bekliyor.
      config.headers['x-auth-token'] = token;
    }
    return config;
  },
  (error) => Promise.reject(error)
);

export default api;

