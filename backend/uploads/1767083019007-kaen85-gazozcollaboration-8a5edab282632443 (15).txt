Directory structure:
‚îî‚îÄ‚îÄ kaen85-gazozcollaboration/
    ‚îî‚îÄ‚îÄ frontend/
        ‚îú‚îÄ‚îÄ package.json
        ‚îú‚îÄ‚îÄ tailwind.config.js
        ‚îú‚îÄ‚îÄ public/
        ‚îÇ   ‚îú‚îÄ‚îÄ index.html
        ‚îÇ   ‚îú‚îÄ‚îÄ manifest.json
        ‚îÇ   ‚îî‚îÄ‚îÄ robots.txt
        ‚îî‚îÄ‚îÄ src/
            ‚îú‚îÄ‚îÄ App.css
            ‚îú‚îÄ‚îÄ App.js
            ‚îú‚îÄ‚îÄ App.test.js
            ‚îú‚îÄ‚îÄ index.css
            ‚îú‚îÄ‚îÄ index.js
            ‚îú‚îÄ‚îÄ reportWebVitals.js
            ‚îú‚îÄ‚îÄ setupTests.js
            ‚îú‚îÄ‚îÄ components/
            ‚îÇ   ‚îú‚îÄ‚îÄ auth/
            ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ProtectedRoute.js
            ‚îÇ   ‚îú‚îÄ‚îÄ layout/
            ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header.js
            ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProfileDropdown.js
            ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RightSidebar.js
            ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Sidebar.js
            ‚îÇ   ‚îî‚îÄ‚îÄ projects/
            ‚îÇ       ‚îú‚îÄ‚îÄ Comment.js
            ‚îÇ       ‚îú‚îÄ‚îÄ CommentForm.js
            ‚îÇ       ‚îú‚îÄ‚îÄ CommentList.js
            ‚îÇ       ‚îú‚îÄ‚îÄ CreateProjectModal.js
            ‚îÇ       ‚îú‚îÄ‚îÄ FileList.js
            ‚îÇ       ‚îú‚îÄ‚îÄ IssueItem.js
            ‚îÇ       ‚îú‚îÄ‚îÄ ProjectDiscussion.js
            ‚îÇ       ‚îú‚îÄ‚îÄ ProjectEditPage.js
            ‚îÇ       ‚îú‚îÄ‚îÄ ProjectFiles.js
            ‚îÇ       ‚îú‚îÄ‚îÄ ProjectIssues.js
            ‚îÇ       ‚îú‚îÄ‚îÄ ProjectList.js
            ‚îÇ       ‚îú‚îÄ‚îÄ ProjectTasks.js
            ‚îÇ       ‚îî‚îÄ‚îÄ SharedProjectCard.js
            ‚îú‚îÄ‚îÄ context/
            ‚îÇ   ‚îú‚îÄ‚îÄ AuthContext.js
            ‚îÇ   ‚îú‚îÄ‚îÄ ProjectContext.js
            ‚îÇ   ‚îî‚îÄ‚îÄ ThemeContext.js
            ‚îú‚îÄ‚îÄ pages/
            ‚îÇ   ‚îú‚îÄ‚îÄ AdminProjects.js
            ‚îÇ   ‚îú‚îÄ‚îÄ AdminUsers.js
            ‚îÇ   ‚îú‚îÄ‚îÄ DashboardLayout.js
            ‚îÇ   ‚îú‚îÄ‚îÄ DashboardOverviewPage.js
            ‚îÇ   ‚îú‚îÄ‚îÄ ForgotPasswordPage.js
            ‚îÇ   ‚îú‚îÄ‚îÄ LandingPage.js
            ‚îÇ   ‚îú‚îÄ‚îÄ LoginPage.js
            ‚îÇ   ‚îú‚îÄ‚îÄ MyProjectsPage.js
            ‚îÇ   ‚îú‚îÄ‚îÄ ProjectDetailPage.js
            ‚îÇ   ‚îú‚îÄ‚îÄ RegisterPage.js
            ‚îÇ   ‚îú‚îÄ‚îÄ ResetPasswordPage.js
            ‚îÇ   ‚îú‚îÄ‚îÄ SettingsPage.js
            ‚îÇ   ‚îî‚îÄ‚îÄ SharedProjectsPage.js
            ‚îî‚îÄ‚îÄ services/
                ‚îî‚îÄ‚îÄ api.js

================================================
FILE: frontend/package.json
================================================
{
  "name": "frontend",
  "version": "0.1.0",
  "private": true,
  "dependencies": {
    "@cyntler/react-doc-viewer": "^1.17.1",
    "@testing-library/dom": "^10.4.1",
    "@testing-library/jest-dom": "^6.9.1",
    "@testing-library/react": "^16.3.0",
    "@testing-library/user-event": "^13.5.0",
    "axios": "^1.12.2",
    "file-saver": "^2.0.5",
    "jszip": "^3.10.1",
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "react-icons": "^5.5.0",
    "react-router-dom": "^7.11.0",
    "react-scripts": "5.0.1",
    "web-vitals": "^2.1.4"
  },
  "scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test",
    "eject": "react-scripts eject"
  },
  "eslintConfig": {
    "extends": [
      "react-app",
      "react-app/jest"
    ]
  },
  "browserslist": {
    "production": [
      ">0.2%",
      "not dead",
      "not op_mini all"
    ],
    "development": [
      "last 1 chrome version",
      "last 1 firefox version",
      "last 1 safari version"
    ]
  },
  "devDependencies": {
    "autoprefixer": "^10.4.21",
    "postcss": "^8.5.6",
    "tailwindcss": "^3.3.3"
  }
}



================================================
FILE: frontend/tailwind.config.js
================================================
/** @type {import('tailwindcss').Config} */
module.exports = {
  // Dark mode'u 'class' stratejisine √ßekiyoruz (ThemeContext ile uyumlu olmasƒ± i√ßin)
  darkMode: 'class', 
  content: [
    "./src/**/*.{js,jsx,ts,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        // Kendi semantik renklerimizi ekliyoruz
        // Artƒ±k bg-gray-900 yerine bg-app kullanacaƒüƒ±z
        app: 'var(--bg-app)',
        surface: 'var(--bg-surface)',
        'surface-hover': 'var(--bg-surface-hover)',
        
        // Metinler
        'text-main': 'var(--text-main)',
        'text-secondary': 'var(--text-secondary)',
        'text-inverted': 'var(--text-inverted)',

        // √áizgiler
        border: 'var(--border-color)',

        // Ana Renk (Primary) - Mevcut blue/indigo yerine bunu kullan
        primary: {
          DEFAULT: 'var(--primary)',
          hover: 'var(--primary-hover)',
        }
      },
    },
  },
  plugins: [],
}


================================================
FILE: frontend/public/index.html
================================================
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/logo192.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <title>
     
      GazozHub</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
  </body>
</html>



================================================
FILE: frontend/public/manifest.json
================================================
{
  "short_name": "React App",
  "name": "Create React App Sample",
  "icons": [
    {
      "src": "favicon.ico",
      "sizes": "64x64 32x32 24x24 16x16",
      "type": "image/x-icon"
    },
    {
      "src": "logo192.png",
      "type": "image/png",
      "sizes": "192x192"
    },
    {
      "src": "logo512.png",
      "type": "image/png",
      "sizes": "512x512"
    }
  ],
  "start_url": ".",
  "display": "standalone",
  "theme_color": "#000000",
  "background_color": "#ffffff"
}



================================================
FILE: frontend/public/robots.txt
================================================
# https://www.robotstxt.org/robotstxt.html
User-agent: *
Disallow:



================================================
FILE: frontend/src/App.css
================================================
/* ‚òÄÔ∏è Varsayƒ±lan (LIGHT MODE) */
:root {
  /* Arka Planlar */
  --bg-app: #F8FAFC;        /* Soft Slate */
  --bg-surface: #FFFFFF;    /* Beyaz */
  
  /* Metinler */
  --text-main: #1E293B;     /* Koyu Gri/Mavi */
  --text-secondary: #64748B; /* Orta Gri */
  
  /* Marka Rengi */
  --primary: #4F46E5;       /* ƒ∞ndigo */
  --primary-text: #FFFFFF;  /* Buton yazƒ± rengi */
  
  /* √áizgiler */
  --border-color: #E2E8F0;  /* A√ßƒ±k Gri */
}

/* üåô Karanlƒ±k Mod (DARK MODE) */
body.dark-mode {
  /* Arka Planlar - Light'ƒ±n tam tersi koyu tonlar */
  --bg-app: #0F172A;        /* √áok koyu lacivert (Slate 900) */
  --bg-surface: #1E293B;    /* Kartlar i√ßin biraz daha a√ßƒ±k (Slate 800) */
  
  /* Metinler - Koyu zemin √ºzerinde a√ßƒ±k renkler */
  --text-main: #F1F5F9;     /* Kƒ±rƒ±k Beyaz */
  --text-secondary: #94A3B8; /* A√ßƒ±k Gri (Slate 400) */
  
  /* Marka Rengi */
  --primary: #6366F1;       /* ƒ∞ndigo'nun bir tƒ±k parlaƒüƒ± (Karanlƒ±kta daha iyi okunur) */
  --primary-text: #FFFFFF;
  
  /* √áizgiler */
  --border-color: #334155;  /* Koyu Gri √ßizgi */
}

/* GENEL AYARLAR ve GE√áƒ∞≈û EFEKTƒ∞ */
body {
  background-color: var(--bg-app);
  color: var(--text-main);
  font-family: 'Inter', sans-serif;
  margin: 0;
  
  /* Renk deƒüi≈üiminde yumu≈üak ge√ßi≈ü (Animasyon) */
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Kartlar ve Kutular i√ßin genel sƒ±nƒ±f */
.card, .box, .navbar {
  background-color: var(--bg-surface);
  border: 1px solid var(--border-color);
  transition: background-color 0.3s ease, border-color 0.3s ease;
}

.App {
  text-align: center;
}

.App-logo {
  height: 40vmin;
  pointer-events: none;
}

@media (prefers-reduced-motion: no-preference) {
  .App-logo {
    animation: App-logo-spin infinite 20s linear;
  }
}

.App-header {
  background-color: #282c34;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  font-size: calc(10px + 2vmin);
  color: white;
}

.App-link {
  color: #61dafb;
}

@keyframes App-logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}



================================================
FILE: frontend/src/App.js
================================================
import React from 'react';
import { Routes, Route, Navigate } from 'react-router-dom';

// Context Providers
import { AuthProvider } from './context/AuthContext';
import { ProjectProvider } from './context/ProjectContext';
import { ThemeProvider } from './context/ThemeContext';

// Auth Components
import ProtectedRoute from './components/auth/ProtectedRoute';

// Pages - Public
import LandingPage from './pages/LandingPage';
import LoginPage from './pages/LoginPage';
import RegisterPage from './pages/RegisterPage';
import ForgotPasswordPage from './pages/ForgotPasswordPage';
import ResetPasswordPage from './pages/ResetPasswordPage';

// Pages - Dashboard & Layout
import DashboardLayout from './pages/DashboardLayout';
import DashboardOverviewPage from './pages/DashboardOverviewPage';
import MyProjectsPage from './pages/MyProjectsPage';
import SharedProjectsPage from './pages/SharedProjectsPage';
import SettingsPage from './pages/SettingsPage';
import AdminUsers from './pages/AdminUsers';
import AdminProjects from './pages/AdminProjects';

// Pages - Project Details & Tabs
import ProjectDetailPage from './pages/ProjectDetailPage';
import ProjectFiles from './components/projects/ProjectFiles';
import ProjectTasks from './components/projects/ProjectTasks';
import ProjectIssues from './components/projects/ProjectIssues';
import ProjectDiscussion from './components/projects/ProjectDiscussion';
import ProjectEditPage from './components/projects/ProjectEditPage';

function App() {
  return (
    <ThemeProvider>
      <AuthProvider>
        <ProjectProvider>
          
          <Routes>
            {/* === DEƒûƒ∞≈ûƒ∞KLƒ∞K BURADA BA≈ûLIYOR === */}
            
            {/* 1. Eƒüer kullanƒ±cƒ± k√∂k dizine (localhost:3000/) gelirse, /home'a y√∂nlendir */}
            <Route path="/" element={<Navigate to="/home" replace />} />

            {/* 2. LandingPage artƒ±k /home adresinde √ßalƒ±≈üƒ±yor */}
            <Route path="/home" element={<LandingPage />} />

            {/* === DEƒûƒ∞≈ûƒ∞KLƒ∞K BURADA Bƒ∞Tƒ∞YOR === */}

            <Route path="/login" element={<LoginPage />} />
            <Route path="/register" element={<RegisterPage />} />
            <Route path="/forgot-password" element={<ForgotPasswordPage />} />
            <Route path="/reset-password/:token" element={<ResetPasswordPage />} />

            {/* === PROTECTED ROUTES (Giri≈ü yapƒ±lmasƒ± zorunlu) === */}
            <Route 
              path="/*" 
              element={
                <ProtectedRoute>
                  <DashboardLayout />
                </ProtectedRoute>
              }
            >
              <Route path="dashboard" element={<DashboardOverviewPage />} />
              <Route path="my-projects" element={<MyProjectsPage />} />
              <Route path="shared-projects" element={<SharedProjectsPage />} />
              <Route path="settings" element={<SettingsPage />} />
              

              {/* Project Detail Routes */}
              <Route path="project/:id" element={<ProjectDetailPage />}>
                <Route index element={<ProjectFiles />} /> 
                <Route path="tasks" element={<ProjectTasks />} />
                <Route path="issues" element={<ProjectIssues />} />
                <Route path="discussions" element={<ProjectDiscussion />} />
                <Route path="edit" element={<ProjectEditPage />} />
              </Route>
              <Route path="admin-users" element={<AdminUsers />} />
              <Route path="admin-projects" element={<AdminProjects />} />
              
              {/* Tanƒ±msƒ±z bir rota girilirse dashboard'a y√∂nlendir */}
              <Route path="*" element={<Navigate to="/dashboard" replace />} />
            </Route>

          </Routes>

        </ProjectProvider>
      </AuthProvider>
    </ThemeProvider>
  );
}

export default App;


================================================
FILE: frontend/src/App.test.js
================================================
import { render, screen } from '@testing-library/react';
import App from './App';

test('renders learn react link', () => {
  render(<App />);
  const linkElement = screen.getByText(/learn react/i);
  expect(linkElement).toBeInTheDocument();
});



================================================
FILE: frontend/src/index.css
================================================
@tailwind base;
@tailwind components;
@tailwind utilities;

/* üé® TEMA Sƒ∞STEMƒ∞ 
  Light Mode (Varsayƒ±lan): Modern Indigo
  Dark Mode (.dark class'ƒ± gelince): Senin Mevcut Teman
*/

@layer base {
  :root {
    /* --- LIGHT MODE (Modern Indigo) --- */
    --bg-app: #F8FAFC;        /* Slate-50: Ferah arka plan */
    --bg-surface: #FFFFFF;    /* Beyaz kartlar */
    --bg-surface-hover: #F1F5F9; 
    
    --text-main: #1E293B;     /* Koyu Gri/Lacivert Metin */
    --text-secondary: #64748B; /* Orta Gri Metin */
    --text-inverted: #FFFFFF;  /* Buton i√ßi yazƒ± vb. */

    --border-color: #E2E8F0;  /* ƒ∞nce √ßizgiler */
    
    --primary: #4F46E5;       /* Indigo-600 */
    --primary-hover: #4338CA; /* Indigo-700 */
  }

  /* --- DARK MODE (Mevcut Teman) --- */
  /* ThemeContext 'dark' class'ƒ±nƒ± eklediƒüinde burasƒ± devreye girer */
  .dark {
    --bg-app: #111827;        /* Gray-900 (Mevcut body rengin) */
    --bg-surface: #1F2937;    /* Gray-800 (Mevcut kart rengin) */
    --bg-surface-hover: #374151; /* Gray-700 */

    --text-main: #F9FAFB;     /* Gray-50 (Beyazƒ±msƒ±) */
    --text-secondary: #9CA3AF; /* Gray-400 */
    --text-inverted: #FFFFFF;

    --border-color: #374151;  /* Gray-700 */

    --primary: #6366F1;       /* Indigo-500 (Karanlƒ±kta daha parlak durur) */
    --primary-hover: #4F46E5;
  }

  body {
    @apply bg-app text-text-main transition-colors duration-300;
  }
}


================================================
FILE: frontend/src/index.js
================================================
import React from 'react';
import ReactDOM from 'react-dom/client';
import './index.css';
import App from './App';
import reportWebVitals from './reportWebVitals';
// Router'ƒ± import ediyoruz
import { BrowserRouter } from 'react-router-dom'; 

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <React.StrictMode>
    {/* Uygulamayƒ± Router ile sarmalƒ±yoruz */}
    <BrowserRouter>
      <App />
    </BrowserRouter>
  </React.StrictMode>
);

reportWebVitals();


================================================
FILE: frontend/src/reportWebVitals.js
================================================
const reportWebVitals = onPerfEntry => {
  if (onPerfEntry && onPerfEntry instanceof Function) {
    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {
      getCLS(onPerfEntry);
      getFID(onPerfEntry);
      getFCP(onPerfEntry);
      getLCP(onPerfEntry);
      getTTFB(onPerfEntry);
    });
  }
};

export default reportWebVitals;



================================================
FILE: frontend/src/setupTests.js
================================================
// jest-dom adds custom jest matchers for asserting on DOM nodes.
// allows you to do things like:
// expect(element).toHaveTextContent(/react/i)
// learn more: https://github.com/testing-library/jest-dom
import '@testing-library/jest-dom';



================================================
FILE: frontend/src/components/auth/ProtectedRoute.js
================================================
// src/components/auth/ProtectedRoute.js

import React from 'react';
import { useAuth } from '../../context/AuthContext';
import { Navigate } from 'react-router-dom';

// Bu component, App.js'te i√ßine sardƒ±ƒüƒ±mƒ±z
// <ProjectProvider> ve <DashboardLayout> elementlerini 'children' prop'u olarak alƒ±r.
const ProtectedRoute = ({ children }) => {
  
  // AuthContext'ten token'ƒ± (giri≈ü durumunu) al
  const { token } = useAuth(); 

  // 1. EƒûER TOKEN YOKSA (Kullanƒ±cƒ± giri≈ü yapmamƒ±≈üsa):
  if (!token) {
    // Kullanƒ±cƒ±yƒ± '/login' sayfasƒ±na y√∂nlendir.
    // 'replace', tarayƒ±cƒ± ge√ßmi≈üinde 'geri' tu≈üunun √ßalƒ±≈ümamasƒ±nƒ± saƒülar.
    // "Beyaz ekran" sorununuzun √ß√∂z√ºm√º bu satƒ±rdƒ±r.
    return <Navigate to="/login" replace />;
  }

  // 2. EƒûER TOKEN VARSA (Kullanƒ±cƒ± giri≈ü yapmƒ±≈üsa):
  // Gitmek istediƒüi sayfayƒ± (children) g√∂ster.
  // (Bu, <ProjectProvider><DashboardLayout /></ProjectProvider> olur)
  return children;
};

export default ProtectedRoute;


================================================
FILE: frontend/src/components/layout/Header.js
================================================
// src/components/layout/Header.js

import React, { useState, useEffect, useRef } from 'react';
import { FiBell, FiChevronDown, FiInfo, FiSun, FiMoon } from 'react-icons/fi'; // ƒ∞konlar g√ºncellendi
import { Link } from 'react-router-dom';
import ProfileDropdown from './ProfileDropdown';
import { useAuth } from '../../context/AuthContext';
import { useTheme } from '../../context/ThemeContext'; // Tema hook'u eklendi
import LogoImage from '../../assets/logo.png';

function Header({ onToggleRightSidebar }) {
  const [isDropdownOpen, setDropdownOpen] = useState(false);
  const dropdownRef = useRef(null);
  const { user } = useAuth();
  const { theme, toggleTheme } = useTheme(); // Tema durumu ve deƒüi≈ütirme fonksiyonu

  // Dropdown dƒ±≈üƒ±na tƒ±klanƒ±nca kapatma mantƒ±ƒüƒ±
  useEffect(() => {
    function handleClickOutside(event) {
      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {
        setDropdownOpen(false);
      }
    }
    document.addEventListener("mousedown", handleClickOutside);
    return () => {
      document.removeEventListener("mousedown", handleClickOutside);
    };
  }, [dropdownRef]);

  return (
    // bg-surface/80 ve backdrop-blur-md: Buzlu cam efekti verir.
    <header className="sticky top-0 z-40 w-full border-b border-border bg-surface/80 backdrop-blur-md transition-colors duration-300">
      
      <div className="px-6 py-3 flex justify-between items-center">
        
        {/* SOL: LOGO VE MARKA */}
        <Link to="/dashboard" className="flex items-center group gap-1.5">
          <img 
            src={LogoImage} 
            alt="Logo" 
            className="h-16 w-16 object-contain drop-shadow-lg brightness-0 dark:brightness-100 transition-all duration-300" 
          />
          <div className="flex flex-col">
            <span className="text-xl font-bold tracking-wide text-text-main group-hover:text-primary transition-colors">
              GazozHub
            </span>
          </div>
        </Link>

        {/* SAƒû: BUTONLAR VE PROFƒ∞L */}
        <div className="flex items-center space-x-3 md:space-x-5">
          
          {/* --- TEMA DEƒûƒ∞≈ûTƒ∞RME BUTONU (YENƒ∞) --- */}
          <button
            onClick={() => toggleTheme(theme === 'dark' ? 'light' : 'dark')}
            className="relative flex items-center justify-between w-14 h-7 p-1 rounded-full bg-gray-200 dark:bg-gray-700 transition-colors duration-300 focus:outline-none shadow-inner"
            aria-label="Toggle Theme"
          >
            <div
              className={`absolute w-5 h-5 rounded-full shadow-md transform transition-transform duration-300 flex items-center justify-center ${
                theme === 'dark' ? 'translate-x-7 bg-indigo-500' : 'translate-x-0 bg-amber-400'
              }`}
            >
              {theme === 'dark' ? (
                <FiMoon className="text-white w-3 h-3" />
              ) : (
                <FiSun className="text-white w-3 h-3" />
              )}
            </div>
            <FiSun className={`ml-1 w-3.5 h-3.5 ${theme === 'dark' ? 'text-gray-500' : 'opacity-0'}`} />
            <FiMoon className={`mr-1 w-3.5 h-3.5 ${theme === 'light' ? 'text-gray-400' : 'opacity-0'}`} />
          </button>
          
          {/* Profil Dropdown */}
          <div className="relative" ref={dropdownRef}>
            <button 
              onClick={() => setDropdownOpen(!isDropdownOpen)} 
              className="flex items-center space-x-2 p-1.5 pr-3 rounded-full hover:bg-surface-hover border border-transparent hover:border-border transition-all group"
            >
              <div className="w-8 h-8 rounded-full bg-gradient-to-tr from-blue-600 to-indigo-600 flex items-center justify-center text-white text-sm font-bold shadow-sm">
                 {user?.username?.charAt(0).toUpperCase() || 'U'}
              </div>

              <span className="font-medium text-sm text-text-main hidden md:block">
                {user ? user.username : 'Guest'}
              </span>
              
              {user?.role === 'admin' && (
                <span className="hidden md:inline-block bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-[10px] font-bold px-1.5 py-0.5 rounded border border-red-200 dark:border-red-800 ml-1">
                  ADMIN
                </span>
              )}
              
              <FiChevronDown size={16} className="text-text-secondary group-hover:text-text-main transition-colors" />
            </button>
            
            {/* Dropdown Bile≈üeni */}
            <ProfileDropdown isOpen={isDropdownOpen} />
          </div>
        </div>
      </div>
    </header>
  );
}

export default Header;


================================================
FILE: frontend/src/components/layout/ProfileDropdown.js
================================================
// src/components/layout/ProfileDropdown.js

import React from 'react';
import { FiUser, FiSettings, FiLogOut } from 'react-icons/fi';
import { useNavigate } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext';

function ProfileDropdown({ isOpen }) {
  const { logout } = useAuth();
  const navigate = useNavigate();

  if (!isOpen) {
    return null;
  }

  const handleLogout = () => {
    logout();
    navigate('/'); 
  };

  const handleNavigate = (path) => {
    navigate(path);
  };

  return (
    // DROPDOWN KUTUSU
    // bg-surface: Temaya g√∂re Beyaz veya Koyu Gri
    // border-border: Temaya g√∂re kenarlƒ±k rengi
    <div className="absolute top-full right-0 mt-2 w-56 bg-surface rounded-xl shadow-xl border border-border z-50 overflow-hidden animate-fade-in-up origin-top-right">
      
      <div className="py-1">
        {/* Profil Linki */}
        <button 
          onClick={() => handleNavigate('/settings')} 
          className="w-full text-left flex items-center px-4 py-3 text-sm text-text-main hover:bg-surface-hover transition-colors group"
        >
          <FiUser className="mr-3 text-text-secondary group-hover:text-primary transition-colors" />
          Profile
        </button>
        
        {/* Ayarlar Linki */}
        <button 
          onClick={() => handleNavigate('/settings')} 
          className="w-full text-left flex items-center px-4 py-3 text-sm text-text-main hover:bg-surface-hover transition-colors group"
        >
          <FiSettings className="mr-3 text-text-secondary group-hover:text-primary transition-colors" />
          Settings
        </button>

        {/* Ayƒ±rƒ±cƒ± √áizgi */}
        <div className="border-t border-border my-1 mx-2"></div>
        
        {/* √áƒ±kƒ±≈ü Yap Butonu */}
        <button
          onClick={handleLogout}
          className="w-full text-left flex items-center px-4 py-3 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"
        >
          <FiLogOut className="mr-3" />
          Logout
        </button>
      </div>
    </div>
  );
}

export default ProfileDropdown;


================================================
FILE: frontend/src/components/layout/RightSidebar.js
================================================
// src/components/layout/RightSidebar.js

import React, { useEffect, useState } from 'react';
import { useLocation } from 'react-router-dom';
import { useProjectContext } from '../../context/ProjectContext';
import api from '../../services/api';
import { 
  FiX, FiCalendar, FiClock, FiUser, FiUsers, 
  FiChevronsRight, FiTarget, FiActivity, 
  FiShield, FiInfo
} from 'react-icons/fi';

function RightSidebar({ isOpen, toggleSidebar }) {
  const location = useLocation();
  const { currentProject, currentMembers, fetchMembers } = useProjectContext();

  // --- SAYFA KONTROLLERƒ∞ ---
  const isProjectPage = location.pathname.startsWith('/project/');
  const isUsersPage = location.pathname === '/users';
  const showProjectDetails = isProjectPage && currentProject;

  // Sidebar ve a√ßma butonu sadece bu sayfalarda i≈ülevsel/g√∂r√ºn√ºr olmalƒ±
  const shouldRenderSidebar = isProjectPage || isUsersPage;

  const [stats, setStats] = useState({ total: 0, admins: 0, users: 0, loading: false });

  useEffect(() => {
    if (showProjectDetails && currentProject?.id) {
        fetchMembers(currentProject.id);
    }
  }, [currentProject?.id]);

  useEffect(() => {
    if (isUsersPage && isOpen) {
        const fetchStats = async () => {
            setStats(prev => ({ ...prev, loading: true }));
            try {
                const res = await api.get('/api/auth/users');
                const usersList = res.data;
                const total = usersList.length;
                const admins = usersList.filter(u => u.role === 'admin').length;

                setStats({
                    total,
                    admins,
                    users: total - admins,
                    loading: false
                });
            } catch (err) {
                console.error("Stats error:", err);
                setStats(prev => ({ ...prev, loading: false }));
            }
        };
        fetchStats();
    }
  }, [isUsersPage, isOpen]);

  const projectOwner = currentMembers ? currentMembers.find(m => m.role === 'owner') : null;
  const otherMembers = currentMembers ? currentMembers.filter(m => m.role !== 'owner') : [];

  const formatDate = (dateString) => {
    if (!dateString) return 'N/A';
    return new Date(dateString).toLocaleDateString('en-US', {
      day: 'numeric', month: 'short', year: 'numeric'
    });
  };

  // --- EƒûER PROJE VEYA USER SAYFASI DEƒûƒ∞LSE Hƒ∞√áBƒ∞R ≈ûEY (BUTON DAHƒ∞L) RENDER ETME ---
  if (!shouldRenderSidebar) return null;

  const renderProjectContent = () => (
    <div className="animate-fade-in flex flex-col h-full">
        <div className="mt-1 mb-8">
            <h2 className="text-3xl font-extrabold text-text-main leading-tight">
                {currentProject.name}
            </h2>
        </div>

        <div className="mb-8">
            {currentProject.description ? (
                <p className="text-sm text-text-secondary leading-relaxed font-light">
                {currentProject.description}
                </p>
            ) : (
                <p className="text-sm text-text-secondary italic">No description added.</p>
            )}
        </div>

        <div className="mb-8">
            <h4 className="text-xs font-bold text-text-secondary uppercase tracking-wider mb-3 flex items-center">
                Led By
            </h4>
            <div className="flex items-center p-3 bg-app border border-border rounded-xl hover:border-primary/50 transition-colors group">
                <div className="w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-indigo-600 flex items-center justify-center text-white font-bold text-sm shadow-md mr-3 group-hover:scale-105 transition-transform">
                    {projectOwner?.username?.charAt(0).toUpperCase() || <FiUser />}
                </div>
                <div>
                    <p className="text-text-main font-semibold text-sm">
                        {projectOwner?.username || 'Loading...'}
                    </p>
                    <p className="text-xs text-primary font-medium">Project Owner</p>
                </div>
            </div>
        </div>

        <div className="mb-8 flex-1">
            <div className="flex justify-between items-end mb-3">
                <h4 className="text-xs font-bold text-text-secondary uppercase tracking-wider">Team</h4>
                <span className="text-xs text-text-secondary bg-app px-2 py-0.5 rounded-full border border-border">
                    {otherMembers.length} members
                </span>
            </div>
            {otherMembers.length > 0 ? (
                <div className="space-y-2">
                    {otherMembers.map(member => (
                        <div key={member.id} className="flex items-center justify-between p-2 hover:bg-app rounded-lg transition-colors cursor-default border border-transparent hover:border-border">
                            <div className="flex items-center">
                                <div className="w-8 h-8 rounded-full bg-surface border border-border flex items-center justify-center text-text-main text-xs font-bold mr-3">
                                    {member.username.charAt(0).toUpperCase()}
                                </div>
                                <span className="text-text-main text-sm">{member.username}</span>
                            </div>
                            <span className="text-[10px] text-text-secondary uppercase font-semibold border border-border px-1.5 py-0.5 rounded bg-app">
                                {member.role}
                            </span>
                        </div>
                    ))}
                </div>
            ) : (
                <div className="p-4 border border-dashed border-border rounded-xl text-center">
                    <FiUsers className="mx-auto text-text-secondary mb-2" />
                    <p className="text-xs text-text-secondary">Solo project for now.</p>
                </div>
            )}
        </div>

        <div className="mt-auto pt-6 border-t border-border grid grid-cols-2 gap-4">
            <div>
                <div className="flex items-center text-text-secondary mb-1">
                    <FiCalendar className="mr-1.5 text-xs"/> <span className="text-[10px] uppercase font-bold tracking-wide">Created</span>
                </div>
                <span className="text-text-main text-xs font-mono">
                {formatDate(currentProject.created_at)}
                </span>
            </div>
            <div>
                <div className="flex items-center text-text-secondary mb-1">
                    <FiClock className="mr-1.5 text-xs"/> <span className="text-[10px] uppercase font-bold tracking-wide">Updated</span>
                </div>
                <span className="text-text-main text-xs font-mono">
                {formatDate(currentProject.last_updated_at || currentProject.created_at)}
                </span>
            </div>
        </div>
    </div>
  );

  const renderUsersContent = () => (
    <div className="animate-fade-in flex flex-col h-full">
        <div className="mt-2 mb-8">
            <h2 className="text-2xl font-bold text-text-main flex items-center">
                <FiActivity className="mr-3 text-primary" />
                System Overview
            </h2>
        </div>

        {stats.loading ? (
            <div className="flex justify-center py-10"><div className="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div>
        ) : (
            <>
                <div className="bg-gradient-to-br from-white to-app dark:from-gray-800 dark:to-gray-900 p-5 rounded-2xl border border-border mb-8 relative overflow-hidden group shadow-sm">
                    <div className="absolute -right-4 -top-4 text-text-secondary opacity-10 group-hover:opacity-20 transition-opacity transform group-hover:scale-110 duration-500">
                        <FiUsers size={100} />
                    </div>
                    <h3 className="text-text-secondary text-xs uppercase font-bold tracking-wider mb-1">Total Users</h3>
                    <p className="text-5xl font-extrabold text-text-main tracking-tight">{stats.total}</p>
                </div>

                <div className="mb-10 space-y-5">
                    <h4 className="text-sm font-semibold text-text-main flex items-center uppercase tracking-wide">
                        <FiShield className="mr-2 text-primary" /> Role Distribution
                    </h4>
                    
                    <div className="group">
                        <div className="flex justify-between text-xs text-text-secondary mb-1.5">
                            <span className="group-hover:text-red-400 transition-colors">Admins</span>
                            <span className="font-mono">{stats.admins}</span>
                        </div>
                        <div className="w-full bg-app rounded-full h-2.5 overflow-hidden border border-border">
                            <div 
                                className="bg-gradient-to-r from-red-600 to-red-400 h-full rounded-full transition-all duration-1000 ease-out" 
                                style={{ width: stats.total > 0 ? `${(stats.admins / stats.total) * 100}%` : '0%' }}
                            />
                        </div>
                    </div>

                    <div className="group">
                        <div className="flex justify-between text-xs text-text-secondary mb-1.5">
                            <span className="group-hover:text-blue-400 transition-colors">Students</span>
                            <span className="font-mono">{stats.users}</span>
                        </div>
                        <div className="w-full bg-app rounded-full h-2.5 overflow-hidden border border-border">
                            <div 
                                className="bg-gradient-to-r from-blue-600 to-blue-400 h-full rounded-full transition-all duration-1000 ease-out" 
                                style={{ width: stats.total > 0 ? `${(stats.users / stats.total) * 100}%` : '0%' }}
                            />
                        </div>
                    </div>
                </div>
            </>
        )}
    </div>
  );

  return (
    <div 
      className={`${
        isOpen ? 'w-80 translate-x-0' : 'w-0 translate-x-full'
      } bg-surface border-l border-border flex flex-col transition-all duration-300 ease-in-out absolute right-0 top-0 h-full z-30 shadow-2xl`}
    >
      <div className="relative z-10 flex-1 overflow-y-auto px-6 pb-20 custom-scrollbar pt-6">
        {isUsersPage ? renderUsersContent() : showProjectDetails ? renderProjectContent() : null}
      </div>

      <div className="absolute bottom-0 left-0 w-full h-12 border-t border-border bg-surface/90 backdrop-blur-sm z-20 flex items-center justify-center">
        <button
          onClick={toggleSidebar}
          className="text-text-secondary hover:text-text-main transition-colors p-2 rounded-full hover:bg-app group"
        >
          <FiChevronsRight size={20} className="group-hover:translate-x-1 transition-transform" />
        </button>
      </div>
    </div>
  );
}

export default RightSidebar;


================================================
FILE: frontend/src/components/layout/Sidebar.js
================================================
// src/components/layout/Sidebar.js

import React from 'react';
import { NavLink } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext';
import { 
  FiHome, FiBox, FiUsers, 
  FiChevronsLeft, FiChevronsRight,
  FiUserCheck,
  FiLayers // Projeler y√∂netimi i√ßin yeni ikon
} from 'react-icons/fi';

function Sidebar({ isCollapsed, toggleSidebar }) {
  const { user } = useAuth();

  const navItems = [
    { name: 'Dashboard', icon: <FiHome size={20} />, path: '/dashboard' },
    { name: 'My Projects', icon: <FiBox size={20} />, path: '/my-projects' },
    { name: 'Shared', icon: <FiUsers size={20} />, path: '/shared-projects' },
  ];

  return (
    <div 
      className={`${
        isCollapsed ? 'w-20' : 'w-64'
      } bg-surface border-r border-border flex flex-col transition-all duration-300 relative shadow-xl pt-4`}
    >
      
      {/* MENU Lƒ∞STESƒ∞ */}
      <nav className="flex-1 space-y-2 overflow-y-auto overflow-x-hidden mt-2">
        {navItems.map((item) => (
          <NavLink
            key={item.name}
            to={item.path}
            className={({ isActive }) =>
              `flex items-center px-4 py-3 mx-2 rounded-lg transition-colors group relative ${
                isActive
                  ? 'bg-blue-600 text-white'
                  : 'text-text-secondary hover:bg-surface-hover hover:text-text-main'
              } ${isCollapsed ? 'justify-center' : ''}`
            }
          >
            <span className="flex-shrink-0">{item.icon}</span>
            {!isCollapsed && <span className="ml-3 font-medium whitespace-nowrap">{item.name}</span>}
            
            {isCollapsed && (
              <div className="absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none">
                {item.name}
              </div>
            )}
          </NavLink>
        ))}

        {/* --- ADMIN B√ñL√úM√ú --- */}
        {user && user.role === 'admin' && (
          <>
            <div className="my-4 border-t border-border mx-4 opacity-50" />
            
            {/* ADMIN USERS BUTONU */}
            <NavLink
              to="/admin-users" 
              className={({ isActive }) =>
                `flex items-center px-4 py-3 mx-2 rounded-lg transition-colors group relative ${
                  isActive
                    ? 'bg-red-600/80 text-white'
                    : 'text-text-secondary hover:bg-surface-hover hover:text-text-main'
                } ${isCollapsed ? 'justify-center' : ''}`
              }
            >
              <span className="flex-shrink-0"><FiUserCheck size={20} /></span>
              {!isCollapsed && <span className="ml-3 font-medium whitespace-nowrap">Manage Users</span>}
              {isCollapsed && (
                <div className="absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50">
                  Users Management
                </div>
              )}
            </NavLink>

            {/* --- YENƒ∞: ADMIN PROJECTS BUTONU --- */}
            <NavLink
              to="/admin-projects" // Mevcut Users sayfasƒ±ndaki 'Projects' tabƒ±nƒ± kullanƒ±yorsanƒ±z burasƒ± /users kalabilir
              state={{ activeTab: 'projects' }} // Sayfaya 'projects' tabƒ± a√ßƒ±k gelsin bilgisi g√∂nderiyoruz
              className={({ isActive }) =>
                `flex items-center px-4 py-3 mx-2 rounded-lg transition-colors group relative ${
                   // Eƒüer url /users ise ve state i√ßinde projects varsa aktif g√∂sterilebilir
                   isActive ? 'bg-purple-600/80 text-white' : 'text-text-secondary hover:bg-surface-hover hover:text-text-main'
                } ${isCollapsed ? 'justify-center' : ''}`
              }
            >
              <span className="flex-shrink-0"><FiLayers size={20} /></span>
              {!isCollapsed && <span className="ml-3 font-medium whitespace-nowrap">Manage Projects</span>}
              {isCollapsed && (
                <div className="absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50">
                  All Projects
                </div>
              )}
            </NavLink>
          </>
        )}
      </nav>

      {/* ALT KISIM (Collapse Button) */}
      <div className="p-4 border-t border-border">
        <button
          onClick={toggleSidebar}
          className="w-full flex items-center justify-center py-2 text-text-secondary hover:text-text-main hover:bg-surface-hover rounded-lg transition-colors"
        >
          {isCollapsed ? <FiChevronsRight size={24} /> : <FiChevronsLeft size={24} />}
        </button>
      </div>
    </div>
  );
}

export default Sidebar;


================================================
FILE: frontend/src/components/projects/Comment.js
================================================
// src/components/projects/Comment.js

import React, { useState, useRef, useEffect } from 'react';
import { useAuth } from '../../context/AuthContext';
import { useProjectContext } from '../../context/ProjectContext';
import { 
  FiUser, FiHeart, FiCopy, FiMoreVertical, FiEdit, FiTrash, 
    FiLoader, FiCheck,
} from 'react-icons/fi';

// Yeni proplar alƒ±yoruz: projectId, onCommentUpdated, onCommentDeleted
function Comment({ comment, projectId, onCommentUpdated, onCommentDeleted }) {
  
  const { user } = useAuth();
  // Mevcut giri≈ü yapmƒ±≈ü kullanƒ±cƒ±
  const { 
    likeComment, 
    editComment, 
    deleteComment, 
    currentProject // Proje sahibini kontrol etmek i√ßin
  } = useProjectContext();

  // 'comment' prop'unu yerel state'e alƒ±yoruz
  const [localComment, setLocalComment] = useState(comment);
  
  // State'ler
  const [isEditing, setIsEditing] = useState(false);
  const [editText, setEditText] = useState(comment.text);
  const [isSaving, setIsSaving] = useState(false);

  // 3-nokta men√º state'i
  const [isMenuOpen, setMenuOpen] = useState(false);
  const menuRef = useRef(null);
  
  // Diƒüer state'ler
  const [copied, setCopied] = useState(false);
  const [isLiking, setIsLiking] = useState(false);

  // === G√úVENLƒ∞K KONTROLLERƒ∞ ===
  const authorId = localComment?.author_id;
  const currentUserId = user?.id;
  const projectOwnerId = currentProject?.owner_id;

  const isOwner = currentUserId === authorId;
  const isProjectOwner = currentUserId === projectOwnerId;
  const hasLiked = localComment?.likes_user_ids?.includes(currentUserId);
  const likeCount = localComment?.likes_user_ids?.length || 0;

  // Prop deƒüi≈üirse state g√ºncelle
  useEffect(() => {
    setLocalComment(comment);
  }, [comment]);

  // --- KOPYALA FONKSƒ∞YONU ---
  const handleCopy = () => {
    const el = document.createElement('textarea');
    el.value = localComment.text;
    document.body.appendChild(el);
    el.select();
    document.execCommand('copy');
    document.body.removeChild(el);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000); 
  };

  // --- BEƒûEN (LIKE) FONKSƒ∞YONU ---
  const handleLike = async () => {
    if (isLiking) return;
    setIsLiking(true);
    try {
      const updatedLikes = await likeComment(projectId, localComment.id);
      setLocalComment(prev => ({ ...prev, likes_user_ids: updatedLikes.likes_user_ids }));
    } catch (error) {
      console.error("Failed to like comment:", error);
    } finally {
      setIsLiking(false);
    }
  };

  // --- D√úZENLE (EDIT) FONKSƒ∞YONLARI ---
  const handleEdit = () => {
    setIsEditing(true);
    setMenuOpen(false);
  };

  const handleCancelEdit = () => {
    setIsEditing(false);
    setEditText(localComment.text); // Deƒüi≈üiklikleri iptal et
  };

  const handleSaveEdit = async () => {
    if (editText.trim() === '' || editText === localComment.text) {
      return handleCancelEdit();
    }
    setIsSaving(true);
    try {
      const updatedComment = await editComment(projectId, localComment.id, editText);
      setLocalComment(updatedComment);
      setIsEditing(false);
      if (onCommentUpdated) {
        onCommentUpdated(updatedComment);
      }
    } catch (error) {
      console.error("Failed to save edit:", error);
      alert("Hata: " + error.message);
    } finally {
      setIsSaving(false);
    }
  };

  // --- Sƒ∞L (DELETE) FONKSƒ∞YONU ---
  const handleDelete = async () => {
    if (window.confirm('Are you sure you want to delete this comment?')) {
      try {
        await deleteComment(projectId, localComment.id);
        if (onCommentDeleted) {
          onCommentDeleted(localComment.id);
        }
      } catch (error) {
        console.error("Failed to delete comment:", error);
        alert("Hata: " + error.message);
      }
    }
    setMenuOpen(false);
  };
  
  // Men√º dƒ±≈üƒ±na tƒ±klamayƒ± dinle
  useEffect(() => {
    function handleClickOutside(event) {
      if (menuRef.current && !menuRef.current.contains(event.target)) {
        setMenuOpen(false);
      }
    }
    document.addEventListener("mousedown", handleClickOutside);
    return () => {
      document.removeEventListener("mousedown", handleClickOutside);
    };
  }, [menuRef]);

  return (
    // Yorumlarƒ± ayƒ±rmak i√ßin √ºst √ßizgi: border-gray-600 -> border-border
    <div className="flex space-x-3 pt-4 border-t border-border/50 first:pt-0 first:border-0">
      {/* Avatar/ƒ∞kon */}
      <div className="flex-shrink-0">
        {/* bg-gray-700 -> bg-app, text-gray-400 -> text-text-secondary */}
        <div className="w-8 h-8 rounded-full bg-app flex items-center justify-center border border-border">
            <FiUser className="w-5 h-5 text-text-secondary" />
        </div>
      </div>
      
      {/* Yorum ƒ∞√ßeriƒüi */}
      <div className="flex-1">
        
        {isEditing ? (
          // --- D√úZENLEME MODU ---
          <div className="space-y-2">
            <textarea
              value={editText}
              onChange={(e) => setEditText(e.target.value)}
              className="w-full py-2 px-3 text-text-main bg-surface border border-primary rounded-lg focus:outline-none focus:ring-1 focus:ring-primary shadow-sm"
              rows="3"
            />
            <div className="flex justify-end space-x-2">
              <button onClick={handleCancelEdit} className="text-text-secondary hover:text-text-main text-sm transition-colors">Cancel</button>
              <button 
                onClick={handleSaveEdit} 
                disabled={isSaving}
                className="flex items-center bg-primary hover:bg-primary-hover text-white font-semibold py-1 px-3 rounded-lg text-sm transition-colors disabled:opacity-50"
              >
                {isSaving ? <FiLoader className="animate-spin" /> : 'Save'}
              </button>
            </div>
          </div>
        ) : (
          // --- NORMAL G√ñR√úN√úM MODU ---
          // bg-gray-700 -> bg-surface, border ekledik
          <div className="bg-surface border border-border rounded-lg p-3 shadow-sm hover:shadow-md transition-shadow">
            <div className="flex items-center justify-between mb-1">
              <span className="font-semibold text-text-main text-sm">
                {localComment.author_name || 'User'} 
              </span>
              <span className="text-xs text-text-secondary">
                {new Date(localComment.created_at).toLocaleString()}
              </span>
            </div>
            <p className="text-text-main text-sm break-words leading-relaxed">
              {localComment.text}
            </p>
            
            {/* YORUM ALTINDAKƒ∞ BUTONLAR */}
            <div className="flex items-center space-x-3 mt-3">
              
              {/* BEƒûEN BUTONU */}
              <button 
                onClick={handleLike} 
                disabled={isLiking}
                className={`flex items-center text-xs transition-colors ${hasLiked ? 'text-red-500' : 'text-text-secondary hover:text-red-500'}`}
              >
                <FiHeart fill={hasLiked ? 'currentColor' : 'none'} size={14} className="mr-1" />
                {likeCount}
              </button>
              
              {/* KOPYALA BUTONU */}
              <button onClick={handleCopy} className="text-xs text-text-secondary hover:text-text-main transition-colors">
                {copied ? <FiCheck size={14} className="text-green-500" /> : <FiCopy size={14} />}
              </button>
              
              {/* 3-NOKTA MEN√ú */}
              {(isOwner || isProjectOwner) && (
                <div className="relative" ref={menuRef}>
                  <button onClick={() => setMenuOpen(p => !p)} className="text-xs text-text-secondary hover:text-text-main transition-colors">
                    <FiMoreVertical size={14} />
                  </button>
                  
                  {isMenuOpen && (
                    <div className="absolute right-0 top-6 w-36 bg-surface border border-border rounded-md shadow-xl z-20 overflow-hidden">
                      <ul className="py-1">
                        {/* EDIT */}
                        {isOwner && (
                          <li>
                            <button
                              onClick={handleEdit}
                              className="w-full text-left flex items-center px-4 py-2 text-sm text-text-main hover:bg-surface-hover transition-colors"
                            >
                              <FiEdit size={14} className="mr-2 text-text-secondary" />
                              Edit
                            </button>
                          </li>
                        )}
                        {/* DELETE */}
                        <li>
                          <button
                            onClick={handleDelete}
                            className="w-full text-left flex items-center px-4 py-2 text-sm text-red-500 hover:bg-surface-hover transition-colors"
                          >
                            <FiTrash size={14} className="mr-2" />
                            Delete
                          </button>
                        </li>
                      </ul>
                    </div>
                  )}
                </div>
              )}
            </div>
          </div>
        )}
      </div>
    </div>
  );
}

export default Comment;


================================================
FILE: frontend/src/components/projects/CommentForm.js
================================================
// src/components/projects/CommentForm.js

import React, { useState } from 'react';
import { FiSend, FiLoader } from 'react-icons/fi';

function CommentForm({ onSubmit, loading }) {
  const [text, setText] = useState('');
  
  const handleSubmit = async (e) => {
    e.preventDefault();
    if (!text.trim()) return;
    try {
      await onSubmit(text);
      setText('');
    } catch (error) {
      console.error("CommentForm Error:", error);
    }
  };

  return (
    <form onSubmit={handleSubmit} className="flex">
      {/* Input: bg-surface, border-border, text-text-main */}
      <input 
        type="text"
        value={text}
        onChange={(e) => setText(e.target.value)}
        className="flex-grow py-2 px-4 text-text-main bg-surface border border-border rounded-l-lg focus:outline-none focus:ring-2 focus:ring-primary placeholder-text-secondary transition-colors"
        placeholder="Add a comment..."
      />
      {/* Button: bg-primary */}
      <button 
        type="submit" 
        disabled={loading}
        className="flex items-center justify-center w-12 bg-primary hover:bg-primary-hover text-white font-semibold py-2 px-3 rounded-r-lg transition-colors disabled:opacity-50"
      >
        {loading ? <FiLoader className="animate-spin" /> : <FiSend size={18} />}
      </button>
    </form>
  );
}

export default CommentForm;


================================================
FILE: frontend/src/components/projects/CommentList.js
================================================
// src/components/projects/CommentList.js

import React, { useState, useEffect } from 'react';
import { useProjectContext } from '../../context/ProjectContext';
import { FiLoader } from 'react-icons/fi';
import Comment from './Comment';

function CommentList({ projectId, refreshKey }) {
  const [comments, setComments] = useState([]);
  const { fetchComments, loading } = useProjectContext();

  const loadComments = async () => {
    try {
      const fetchedComments = await fetchComments(projectId);
      setComments(fetchedComments || []);
    } catch (error) {
      console.error("Failed to fetch comments:", error);
    }
  };

  useEffect(() => {
    if (projectId) {
      loadComments();
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [projectId, refreshKey]);

  const handleCommentUpdated = (updatedComment) => {
    setComments(prev => 
      prev.map(c => c.id === updatedComment.id ? updatedComment : c)
    );
  };
  const handleCommentDeleted = (deletedCommentId) => {
    setComments(prev => 
      prev.filter(c => c.id !== deletedCommentId)
    );
  };

  return (
    <div className="space-y-4 mt-4">
      {loading && comments.length === 0 ? (
        <div className="flex justify-center py-4">
            <FiLoader className="animate-spin text-primary" size={24} />
        </div>
      ) : comments.length === 0 ? (
        <p className="text-text-secondary text-sm text-center py-2">Be the first to comment.</p>
      ) : (
        comments.map(comment => (
          <Comment 
            key={comment.id} 
            comment={comment}
            projectId={projectId} 
            onCommentUpdated={handleCommentUpdated} 
            onCommentDeleted={handleCommentDeleted} 
          />
        ))
      )}
    </div>
  );
}

export default CommentList;


================================================
FILE: frontend/src/components/projects/CreateProjectModal.js
================================================
import React, { useState } from 'react';
import { useProjectContext } from '../../context/ProjectContext'; // 1. Context'i import et
import { FiX, FiLoader } from 'react-icons/fi';

// Component, 'isOpen' (a√ßƒ±k mƒ±?) ve 'onClose' (kapatma fonksiyonu) proplarƒ±nƒ± alƒ±r
function CreateProjectModal({ isOpen, onClose }) {
  
  // 2. Context'ten 'createProject' fonksiyonunu ve 'loading' durumunu al
  const { createProject, loading } = useProjectContext();

  // 3. Form alanlarƒ± i√ßin state'ler
  const [name, setName] = useState('');
  const [description, setDescription] = useState('');
  const [error, setError] = useState(null);

  // Form g√∂nderildiƒüinde √ßalƒ±≈üacak fonksiyon
  const handleSubmit = async (e) => {
    e.preventDefault();
    setError(null); // Eski hatayƒ± temizle

    if (!name) {
      setError('Project name is required.');
      return;
    }

    try {
      // 4. Context'teki 'createProject' fonksiyonunu √ßaƒüƒ±r
      // Bu fonksiyon backend'e API isteƒüi atacak
      await createProject(name, description);
      
      // Ba≈üarƒ±lƒ± olursa, formu temizle ve modal'ƒ± kapat
      setName('');
      setDescription('');
      onClose(); 
    } catch (err) {
      // Ba≈üarƒ±sƒ±z olursa (√∂rn: sunucu hatasƒ±), hatayƒ± g√∂ster
      setError(err.message);
    }
  };

  // Eƒüer modal 'isOpen' false ise, hi√ßbir ≈üey g√∂sterme
  if (!isOpen) {
    return null;
  }

  // Modal a√ßƒ±ksa, bu JSX'i g√∂ster
  return (
    // Arka planƒ± karartan overlay
    <div className="fixed inset-0 bg-black bg-opacity-75 flex justify-center items-center z-50">
      
      {/* Asƒ±l Modal Penceresi */}
      <div className="bg-gray-800 rounded-lg shadow-2xl w-full max-w-lg p-6">
        
        {/* Ba≈ülƒ±k ve Kapatma Butonu */}
        <div className="flex justify-between items-center mb-4">
          <h2 className="text-2xl font-bold text-white">Create New Project</h2>
          <button 
            onClick={onClose} 
            className="text-gray-400 hover:text-white"
          >
            <FiX size={24} />
          </button>
        </div>
        
        {/* Proje Olu≈üturma Formu */}
        <form onSubmit={handleSubmit}>
          <div className="space-y-4">
            
           
            <div>
              <label htmlFor="projectName" className="block text-sm font-medium text-gray-300 mb-1">
                Project Name
              </label>
              <input 
                type="text"
                id="projectName"
                value={name}
                onChange={(e) => setName(e.target.value)}
                className="w-full py-2 px-3 text-gray-200 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                placeholder="My New Awesome Project"
              />
            </div>
            
            
            <div>
              <label htmlFor="projectDescription" className="block text-sm font-medium text-gray-300 mb-1">
                Description (Optional)
              </label>
              <textarea
                id="projectDescription"
                rows="3"
                value={description}
                onChange={(e) => setDescription(e.target.value)}
                className="w-full py-2 px-3 text-gray-200 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                placeholder="What is this project about?"
              />
            </div>
          </div>
          
         
          {error && (
            <p className="text-sm text-red-400 text-center mt-4">
              {error}
            </p>
          )}

          
          <div className="flex justify-end space-x-3 mt-6">
            <button
              type="button"
              onClick={onClose}
              disabled={loading}
              className="py-2 px-4 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors disabled:opacity-50"
            >
              Cancel
            </button>
            <button
              type="submit"
              disabled={loading}
              className="flex items-center justify-center py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors disabled:opacity-50"
            >
              {loading ? (
                <FiLoader className="animate-spin mr-2" />
              ) : (
                'Create Project'
              )}
            </button>
          </div>
        </form>
      </div>
    </div>
  );
}

export default CreateProjectModal;


================================================
FILE: frontend/src/components/projects/FileList.js
================================================
/*// src/components/projects/FileList.js
import React from 'react';
import { FiFileText, FiFile, FiImage } from 'react-icons/fi'; // Icons for file types

// A simple function to get an icon based on file type
const getFileIcon = (fileName) => {
  if (fileName.endsWith('.pdf')) return <FiFileText className="text-red-400" />;
  if (fileName.endsWith('.docx') || fileName.endsWith('.doc')) return <FiFileText className="text-blue-40√°00" />;
  if (fileName.endsWith('.png') || fileName.endsWith('.jpg')) return <FiImage className="text-green-400" />;
  return <FiFile className="text-gray-400" />;
};

function FileList({ files, loading }) {
  return (
    <div className="mt-12">
      <h2 className="text-2xl font-bold text-white border-b border-gray-700 pb-2 mb-4">
        Project Files
      </h2>
      {loading ? (
        <p>Loading files...</p>
      ) : (
        <div className="space-y-2">
          {files.map(file => (
            <div key={file.id} className="flex items-center bg-gray-800 p-3 rounded-md">
              <span className="mr-3">{getFileIcon(file.name)}</span>
              <div className="flex-1">
                <p className="text-white font-medium">{file.name}</p>
                <p className="text-xs text-gray-500">Uploaded by {file.uploadedBy}</p>
              </div>
            </div>
          ))}
        </div>
      )}
    </div>
  );
}
export default FileList;*/


================================================
FILE: frontend/src/components/projects/IssueItem.js
================================================
// src/components/projects/IssueItem.js

import React, { useState, useRef, useEffect } from 'react';
import { 
  FiMessageSquare, FiChevronDown, FiChevronRight, FiLoader, 
  FiMoreVertical, FiEdit, FiCheckCircle, FiCircle, FiSave, FiX, FiAlertTriangle
} from 'react-icons/fi';
import { useProjectContext } from '../../context/ProjectContext';
import { useAuth } from '../../context/AuthContext';
import Comment from './Comment'; 
import CommentForm from './CommentForm';

function IssueItem({ issue, projectId, onIssueUpdated }) {
  
  // === 1. STATE (DURUM) TANIMLAMALARI ===
  const [localIssue, setLocalIssue] = useState(issue);
  const [isOpen, setIsOpen] = useState(false); 
  const [comments, setComments] = useState([]); 
  const [loadingComments, setLoadingComments] = useState(false);
  const [isMenuOpen, setMenuOpen] = useState(false);
  const [isEditing, setIsEditing] = useState(false); 
  const [editText, setEditText] = useState(issue.text); 
  const [isSaving, setIsSaving] = useState(false);
  const [editError, setEditError] = useState(null);
  const menuRef = useRef(null);
  
  // Context'ten gerekli fonksiyonlarƒ± al
  const { 
    currentProject, 
    fetchIssueComments, 
    addIssueComment, 
    updateIssue, 
    loading: contextLoading 
  } = useProjectContext();
  
  const { user } = useAuth(); 
  const userRole = currentProject?.currentUserRole;

  // === 2. EFFECT'LER ===
  
  // 'issue' prop'u deƒüi≈ütiƒüinde yerel state'i g√ºncelle
  useEffect(() => {
    setLocalIssue(issue);
  }, [issue]);

  // Men√º dƒ±≈üƒ±na tƒ±klamayƒ± dinle
  useEffect(() => {
    function handleClickOutside(event) {
      if (menuRef.current && !menuRef.current.contains(event.target)) {
        setMenuOpen(false);
      }
    }
    document.addEventListener("mousedown", handleClickOutside);
    return () => {
      document.removeEventListener("mousedown", handleClickOutside);
    };
  }, [menuRef]);

  // === 3. FONKSƒ∞YONLAR ===

  // Yorumlarƒ± a√ß/kapat
  const toggleComments = async () => {
    if (isOpen) {
      setIsOpen(false);
      return;
    }
    setIsOpen(true);
    setLoadingComments(true);
    try {
      const fetchedComments = await fetchIssueComments(projectId, localIssue.id);
      setComments(fetchedComments || []);
    } catch (error) {
      console.error("Failed to fetch issue comments:", error);
    } finally {
      setLoadingComments(false);
    }
  };

  // Yorum ekle
  const handleCommentAdded = async (text) => {
    try {
      const newComment = await addIssueComment(projectId, localIssue.id, text);
      setComments([...comments, newComment]); // Listeyi anƒ±nda g√ºncelle
    } catch (error) {
      console.error("Failed to add issue comment:", error);
    }
  };

  // Issue durumunu Deƒüi≈ütir (Done/Open)
  const handleToggleStatus = async () => {
    const isDone = localIssue.status === 'Closed';
    const newStatus = isDone ? 'Open' : 'Closed'; 
    try {
      const updatedIssue = await updateIssue(projectId, localIssue.id, { status: newStatus });
      setLocalIssue(updatedIssue); 
      onIssueUpdated(updatedIssue); 
    } catch (error) {
      console.error("Failed to update issue status:", error);
    } finally {
      setMenuOpen(false);
    }
  };

  // "Edit" (D√ºzenleme) Modu Fonksiyonlarƒ±
  const handleEditClick = () => {
    setEditText(localIssue.text); 
    setIsEditing(true); 
    setMenuOpen(false); 
    setEditError(null); 
  };

  const handleCancelEdit = () => {
    setIsEditing(false); 
    setEditError(null); 
  };

  const handleSaveEdit = async () => {
    if (editText.trim() === '' || editText === localIssue.text) {
      setIsEditing(false);
      return;
    }
    setIsSaving(true); 
    setEditError(null);
    try {
      const updatedIssue = await updateIssue(projectId, localIssue.id, { text: editText });
      setLocalIssue(updatedIssue); 
      onIssueUpdated(updatedIssue); 
      setIsEditing(false); 
    } catch (error) {
      console.error("Failed to save issue edit:", error);
      setEditError("Failed to save. Please try again."); 
    } finally {
      setIsSaving(false); 
    }
  };

  // Yorum listesi i√ßin g√ºncelleme fonksiyonlarƒ±
  const handleCommentUpdated = (updatedComment) => {
    setComments(prev => 
      prev.map(c => c.id === updatedComment.id ? updatedComment : c)
    );
  };
  
  const handleCommentDeleted = (deletedCommentId) => {
    setComments(prev => 
      prev.filter(c => c.id !== deletedCommentId)
    );
  };

  // === 4. RENDER (G√ñR√úN√úM) ===
  const isDone = localIssue.status === 'Closed';
  
  // Stiller: Light/Dark uyumlu
  // isDone ise biraz daha silik ve √ºst√º √ßizili
  const containerClass = `rounded-md border transition-colors ${
    isDone 
      ? 'bg-app/50 border-border/50 opacity-75' 
      : 'bg-app border-border hover:border-primary/30'
  }`;
  
  const issueTextStyle = isDone ? "text-text-secondary line-through" : "text-text-main";
  const issueAuthorStyle = "text-text-secondary";

  return (
    <div className={containerClass}>
      <div className="flex justify-between items-center p-3">
        
        {isEditing ? (
          // --- D√úZENLEME MODU ---
          <div className="flex-1 flex flex-col">
            <div className="flex-1 flex items-center space-x-2">
              <input
                type="text"
                value={editText}
                autoFocus
                onChange={(e) => setEditText(e.target.value)}
                className="flex-grow py-1.5 px-3 text-text-main bg-surface border border-primary rounded-md focus:outline-none text-sm shadow-sm"
              />
              <button 
                onClick={handleSaveEdit} 
                disabled={isSaving} 
                className="p-2 text-green-500 hover:text-green-600 disabled:opacity-50 transition-colors"
              >
                {isSaving ? <FiLoader className="animate-spin" /> : <FiSave size={18} />}
              </button>
              <button onClick={handleCancelEdit} className="p-2 text-red-500 hover:text-red-600 transition-colors">
                <FiX size={18} />
              </button>
            </div>
            {editError && (
              <p className="text-xs text-red-500 mt-1 ml-1 flex items-center">
                <FiAlertTriangle size={14} className="mr-1" />
                {editError}
              </p>
            )}
          </div>

        ) : (
          // --- NORMAL MOD ---
          <>
            <button 
              onClick={toggleComments}
              className="flex-1 flex items-center text-left group"
            >
              {isOpen 
                ? <FiChevronDown size={20} className="mr-2 text-text-secondary" /> 
                : <FiChevronRight size={20} className="mr-2 text-text-secondary group-hover:text-text-main" />
              }
              <div className="flex-1">
                <p className={`font-medium ${issueTextStyle}`}>{localIssue.text}</p>
                <span className={`text-xs ${issueAuthorStyle}`}>
                  Opened by <span className="font-semibold">{localIssue.created_by_name || '...'}</span>
                  {isDone && (
                    <span className="italic ml-1">
                      (Closed by {user?.username || '...'})
                    </span>
                  )}
                </span>
              </div>
            </button>
            
            <div className="flex items-center">
              <div className="flex items-center mr-3 text-text-secondary" title="Comments">
                 <FiMessageSquare size={16} className="mr-1" />
                 {/* Eƒüer comment sayƒ±sƒ± varsa buraya eklenebilir */}
              </div>
              
              {/* 3-NOKTA MEN√ú (SADECE 'viewer' veya 'public_viewer' DEƒûƒ∞LSE G√ñSTER) */}
              {(userRole === 'owner' || userRole === 'editor') && (
                <div className="relative" ref={menuRef}>
                  <button 
                    onClick={(e) => {
                      e.stopPropagation();
                      setMenuOpen(prev => !prev);
                    }}
                    className="p-1.5 text-text-secondary hover:text-text-main hover:bg-surface-hover rounded-full transition-colors"
                  >
                    <FiMoreVertical size={18} />
                  </button>
                  
                  {isMenuOpen && (
                    <div className="absolute right-0 top-8 w-44 bg-surface border border-border rounded-lg shadow-xl z-50 animate-fade-in origin-top-right overflow-hidden">
                      <div className="py-1">
                        <button
                          onClick={(e) => {
                            e.stopPropagation();
                            handleEditClick();
                          }}
                          className="w-full text-left flex items-center px-4 py-2.5 text-sm text-text-main hover:bg-surface-hover transition-colors"
                        >
                          <FiEdit size={14} className="mr-3 text-text-secondary" />
                          Edit Issue
                        </button>
                        
                        <button
                          onClick={(e) => {
                            e.stopPropagation();
                            handleToggleStatus();
                          }}
                          className="w-full text-left flex items-center px-4 py-2.5 text-sm text-text-main hover:bg-surface-hover transition-colors"
                        >
                          {isDone ? (
                            <><FiCircle size={14} className="mr-3 text-yellow-500" /> Re-open Issue</>
                          ) : (
                            <><FiCheckCircle size={14} className="mr-3 text-green-500" /> Mark as Done</>
                          )}
                        </button>
                      </div>
                    </div>
                  )}
                </div>
              )}
            </div>
          </>
        )}
      </div>

      {/* Yorum B√∂l√ºm√º */}
      {isOpen && !isEditing && (
        // border-t border-border
        <div className="p-4 border-t border-border bg-surface/30">
          
          {/* Yorum Listesi */}
          {loadingComments ? (
            <div className="flex justify-center p-3">
              <FiLoader className="animate-spin text-primary" />
            </div>
          ) : (
            <div className="space-y-4 mb-4">
              {comments.length === 0 ? (
                <p className="text-text-secondary text-sm text-center py-2">No comments yet.</p>
              ) : (
                comments.map(comment => (
                  <Comment 
                    key={comment.id} 
                    comment={comment}
                    projectId={projectId}
                    onCommentUpdated={handleCommentUpdated} 
                    onCommentDeleted={handleCommentDeleted} 
                  />
                ))
              )}
            </div>
          )}
          
          {/* Yorum Formu veya Kapalƒ± Mesajƒ± */}
          {isDone ? (
            <div className="p-3 bg-surface border border-border rounded-md text-center">
              <p className="text-sm text-text-secondary flex items-center justify-center">
                <FiCheckCircle className="mr-2 text-green-500" />
                This issue is closed. No new comments can be added.
              </p>
            </div>
          ) : (
            // Herkes (public_viewer dahil) yorum yapabilir
            <CommentForm 
              onSubmit={handleCommentAdded}
              loading={contextLoading} 
            />
          )}
        </div>
      )}
    </div>
  );
}

export default IssueItem;


================================================
FILE: frontend/src/components/projects/ProjectDiscussion.js
================================================
// src/components/projects/ProjectDiscussion.js

import React, { useState, useEffect, useRef } from 'react';
import { useProjectContext } from '../../context/ProjectContext';
import { useAuth } from '../../context/AuthContext';
import { FiSend, FiLoader, FiLock, FiUser } from 'react-icons/fi';

export default function ProjectDiscussion() {
  const { currentProject, fetchComments, addComment, loading: contextLoading } = useProjectContext();
  const { user } = useAuth();
  const [messages, setMessages] = useState([]);
  const [newMessage, setNewMessage] = useState('');
  const [isLoading, setIsLoading] = useState(true);
  const [isSending, setIsSending] = useState(false);
  const chatEndRef = useRef(null);
  const userRole = currentProject?.currentUserRole;

  useEffect(() => {
    if (userRole === 'public_viewer' || !currentProject?.id) { setIsLoading(false); return; }
    const loadMessages = async () => {
      setIsLoading(true);
      try {
        const fetchedMessages = await fetchComments(currentProject.id);
        setMessages(fetchedMessages || []);
      } catch (error) { console.error("Error loading messages:", error); } 
      finally { setIsLoading(false); }
    };
    loadMessages();
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [currentProject?.id, userRole]);

  useEffect(() => { if (messages.length > 0) chatEndRef.current?.scrollIntoView({ behavior: 'smooth' }); }, [messages]);

  const handleSendMessage = async (e) => {
    e.preventDefault();
    if (!newMessage.trim() || isSending) return;
    const text = newMessage;
    setNewMessage('');
    setIsSending(true);
    try {
      const newComment = await addComment(currentProject.id, text);
      setMessages(prev => [...prev, newComment]);
    } catch (error) { console.error("Error sending:", error); setNewMessage(text); } 
    finally { setIsSending(false); }
  };

  if (userRole === 'public_viewer') {
    return (
      <div className="flex flex-col items-center justify-center p-10 bg-surface rounded-lg h-64 border border-border">
        <FiLock size={40} className="text-yellow-500 mb-4" />
        <h3 className="text-xl font-semibold text-text-main">Members Only Chat</h3>
        <p className="text-text-secondary mt-2">This chat room is only visible to project members.</p>
      </div>
    );
  }

  return (
    // Container: bg-surface
    <div className="flex flex-col h-[60vh] bg-surface rounded-lg shadow-sm border border-border">
      
      {/* Messages */}
      <div className="flex-1 p-4 space-y-4 overflow-y-auto custom-scrollbar">
        {isLoading ? (
          <div className="flex justify-center items-center h-full"><FiLoader className="animate-spin text-primary" size={24} /></div>
        ) : messages.length === 0 ? (
          <div className="flex justify-center items-center h-full flex-col opacity-50">
             <div className="w-12 h-12 bg-app rounded-full flex items-center justify-center mb-2"><FiSend size={20} className="text-text-secondary" /></div>
            <p className="text-text-secondary text-sm">No messages yet.</p>
          </div>
        ) : (
          messages.map(msg => {
            const isMine = msg.author_id === user.id;
            return (
              <div key={msg.id} className={`flex items-start ${isMine ? 'justify-end' : 'justify-start'} animate-fade-in`}>
                {!isMine && (
                  <div className="flex-shrink-0 mr-2 mt-1">
                    <div className="w-8 h-8 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-full flex items-center justify-center text-white text-xs font-bold shadow-sm">
                        {msg.author_name?.charAt(0).toUpperCase() || <FiUser />}
                    </div>
                  </div>
                )}
                
                {/* Bubble: Mine -> bg-primary, Others -> bg-app */}
                <div className={`max-w-[80%] lg:max-w-[70%] p-3 rounded-2xl shadow-sm ${
                    isMine ? 'bg-primary text-white rounded-tr-none' : 'bg-app text-text-main border border-border rounded-tl-none'
                  }`}
                >
                  {!isMine && <p className="text-[10px] font-bold text-primary mb-0.5 opacity-90">{msg.author_name}</p>}
                  <p className="text-sm break-words leading-relaxed">{msg.text}</p>
                  <p className={`text-[9px] mt-1 text-right ${isMine ? 'text-blue-100' : 'text-text-secondary'}`}>
                    {new Date(msg.created_at).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}
                  </p>
                </div>
              </div>
            );
          })
        )}
        <div ref={chatEndRef} />
      </div>

      {/* Input */}
      <div className="p-3 border-t border-border bg-app/50 rounded-b-lg">
        <form onSubmit={handleSendMessage} className="flex space-x-2">
          <input
            type="text" value={newMessage} onChange={(e) => setNewMessage(e.target.value)}
            className="flex-grow py-2.5 px-4 text-sm text-text-main bg-surface border border-border rounded-full focus:outline-none focus:ring-2 focus:ring-primary transition-all placeholder-text-secondary shadow-sm"
            placeholder="Type your message..." disabled={isSending || contextLoading}
          />
          <button type="submit" disabled={isSending || contextLoading} className="flex items-center justify-center w-10 h-10 bg-primary hover:bg-primary-hover text-white rounded-full transition-all shadow-md disabled:opacity-50">
            {isSending ? <FiLoader className="animate-spin text-xs" /> : <FiSend size={18} className="ml-0.5" />}
          </button>
        </form>
      </div>
    </div>
  );
}


================================================
FILE: frontend/src/components/projects/ProjectEditPage.js
================================================
// src/components/projects/ProjectEditPage.js

import React, { useState, useEffect } from 'react';
import { useProjectContext } from '../../context/ProjectContext';
import { useAuth } from '../../context/AuthContext'; 
import { useNavigate } from 'react-router-dom';
import { 
  FiUserPlus, FiLoader, FiCheck, FiAlertTriangle, FiSave,
  FiUsers, FiTrash2, FiUser, FiGlobe, FiLock, FiSettings, FiShield, FiLayout, FiFileText
} from 'react-icons/fi';

export default function ProjectEditPage() {
  const { user } = useAuth(); 
  const navigate = useNavigate();
  const { 
    currentProject, addMember, removeMember, currentMembers, 
    fetchMembers, updateProjectVisibility, updateTasksVisibility, 
    updateProjectDetails, deleteProject, updateMemberRole 
  } = useProjectContext();

  const [name, setName] = useState('');
  const [description, setDescription] = useState('');
  const [longDescription, setLongDescription] = useState('');
  const [isSavingDetails, setIsSavingDetails] = useState(false);
  const [saveMessage, setSaveMessage] = useState(null);

  const [usernameToAdd, setUsernameToAdd] = useState('');
  const [roleToAdd, setRoleToAdd] = useState('viewer');
  const [isAdding, setIsAdding] = useState(false);
  const [addError, setAddError] = useState(null);
  const [addSuccess, setAddSuccess] = useState(null);

  const [isPublic, setIsPublic] = useState(false);
  const [updatingVisibility, setUpdatingVisibility] = useState(false);
  const [tasksPublic, setTasksPublic] = useState(false);
  const [updatingTasks, setUpdatingTasks] = useState(false);

  const [removingId, setRemovingId] = useState(null); 
  const [updatingRoleId, setUpdatingRoleId] = useState(null);
  const [isDeletingProject, setIsDeletingProject] = useState(false);

  useEffect(() => {
    if (currentProject) {
      setName(currentProject.name);
      setDescription(currentProject.description || '');
      setLongDescription(currentProject.long_description || ''); 
      setIsPublic(currentProject.is_public); 
      setTasksPublic(currentProject.is_tasks_public);
      fetchMembers(currentProject.id);
    }
  }, [currentProject]);

  if (!currentProject) return <div className="p-10 text-center"><FiLoader className="animate-spin text-primary" /></div>;

  const handleDetailsSubmit = async (e) => {
    e.preventDefault();
    setIsSavingDetails(true);
    setSaveMessage(null);
    try {
      await updateProjectDetails(currentProject.id, name, description, longDescription);
      setSaveMessage({ type: 'success', text: 'Project details updated successfully!' });
    } catch (err) {
      const errorMsg = err.response?.data?.message || err.message || 'Failed to update.';
      setSaveMessage({ type: 'error', text: errorMsg });
    } finally { setIsSavingDetails(false); }
  };

  const handleVisibilityToggle = async () => {
    setUpdatingVisibility(true);
    try {
      const newVisibility = !isPublic; 
      await updateProjectVisibility(currentProject.id, newVisibility);
      setIsPublic(newVisibility);
    } catch (error) { alert("Error: " + error.message); } finally { setUpdatingVisibility(false); }
  };

  const handleTasksVisibilityToggle = async () => {
    setUpdatingTasks(true);
    try {
      const newVisibility = !tasksPublic;
      await updateTasksVisibility(currentProject.id, newVisibility);
      setTasksPublic(newVisibility);
    } catch (error) { alert("Error: " + error.message); } finally { setUpdatingTasks(false); }
  };

  const handleMemberSubmit = async (e) => {
    e.preventDefault();
    if (!usernameToAdd) return;
    setIsAdding(true);
    setAddError(null);
    setAddSuccess(null);
    try {
      const addedMember = await addMember(currentProject.id, usernameToAdd, roleToAdd);
      setAddSuccess(`Added ${addedMember.username} as ${addedMember.role}.`);
      setUsernameToAdd('');
    } catch (err) { setAddError(err.message); } finally { setIsAdding(false); }
  };

  const handleRoleChange = async (memberId, newRole) => {
    setUpdatingRoleId(memberId);
    try {
      await updateMemberRole(currentProject.id, memberId, newRole);
    } catch (err) {
      alert("Failed to update role: " + err.message);
    } finally {
      setUpdatingRoleId(null);
    }
  };

  const handleRemoveMember = async (memberId, memberUsername) => {
    if (window.confirm(`Remove ${memberUsername}?`)) {
      setRemovingId(memberId);
      try { await removeMember(currentProject.id, memberId); } 
      catch (err) { alert("Error: " + err.message); } finally { setRemovingId(null); }
    }
  };

  const handleDeleteProject = async () => {
    const confirmName = window.prompt(`To delete this project, type its name: "${currentProject.name}"`);
    if (confirmName === currentProject.name) {
      setIsDeletingProject(true);
      try {
        await deleteProject(currentProject.id);
        navigate('/dashboard');
      } catch (err) { alert("Failed to delete project: " + err.message); setIsDeletingProject(false); }
    } else if (confirmName !== null) { alert("Project name did not match."); }
  };

  return (
    <div className="max-w-4xl mx-auto space-y-8 pb-20">
      
      {/* BA≈ûLIK */}
      <div className="border-b border-border pb-4">
        <h2 className="text-3xl font-bold text-text-main flex items-center">
          <FiSettings className="mr-3 text-text-secondary" /> Project Settings
        </h2>
      </div>
      
      {/* 1. GENEL AYARLAR */}
      <div className="bg-surface rounded-xl border border-border p-6 shadow-sm">
        <h3 className="text-xl font-semibold text-text-main mb-4">General Settings</h3>
        <form onSubmit={handleDetailsSubmit} className="space-y-4">
          <div>
            <label className="block text-sm font-medium text-text-secondary mb-1">Project Name</label>
            <input type="text" value={name} onChange={(e) => setName(e.target.value)} className="w-full bg-app border border-border rounded-lg px-4 py-2 text-text-main focus:ring-2 focus:ring-primary outline-none transition-colors"/>
          </div>
          <div>
            <label className="block text-sm font-medium text-text-secondary mb-1">Short Description (Header)</label>
            <textarea rows="2" value={description} onChange={(e) => setDescription(e.target.value)} className="w-full bg-app border border-border rounded-lg px-4 py-2 text-text-main focus:ring-2 focus:ring-primary outline-none transition-colors"/>
          </div>
          <div>
            <label className="block text-sm font-medium text-text-secondary mb-1 flex items-center"><FiFileText className="mr-1"/> Long Description (Readme)</label>
            <textarea rows="6" value={longDescription} onChange={(e) => setLongDescription(e.target.value)} className="w-full bg-app border border-border rounded-lg px-4 py-2 text-text-main focus:ring-2 focus:ring-primary outline-none font-mono text-sm transition-colors" placeholder="Documentation..."/>
          </div>
          <div className="flex items-center justify-between">
            <button type="submit" disabled={isSavingDetails} className="bg-primary hover:bg-primary-hover text-white px-4 py-2 rounded-lg font-semibold flex items-center disabled:opacity-50 transition-colors">
              {isSavingDetails ? <FiLoader className="animate-spin mr-2"/> : <FiSave className="mr-2"/>} Save Changes
            </button>
            {saveMessage && <span className={`text-sm ${saveMessage.type === 'success' ? 'text-green-500' : 'text-red-500'}`}>{saveMessage.text}</span>}
          </div>
        </form>
      </div>

      {/* 2. G√ñR√úN√úRL√úK */}
      <div className="bg-surface rounded-xl border border-border overflow-hidden shadow-sm">
        <div className="p-6 border-b border-border flex justify-between items-center">
          <div>
            <h3 className="text-xl font-semibold text-text-main flex items-center">
              {isPublic ? <FiGlobe className="mr-2 text-green-500"/> : <FiLock className="mr-2 text-red-500"/>} Project Visibility
            </h3>
            <p className="text-text-secondary text-sm mt-1">{isPublic ? "Visible to everyone." : "Private. Only members can access."}</p>
          </div>
          <button onClick={handleVisibilityToggle} disabled={updatingVisibility} className={`px-4 py-2 rounded-lg font-medium border transition-colors ${isPublic ? 'border-red-500 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20' : 'border-green-500 text-green-500 hover:bg-green-50 dark:hover:bg-green-900/20'}`}>
            {updatingVisibility ? <FiLoader className="animate-spin"/> : (isPublic ? "Make Private" : "Make Public")}
          </button>
        </div>
        <div className="p-6 flex justify-between items-center">
          <div>
            <h3 className="text-xl font-semibold text-text-main flex items-center"><FiLayout className="mr-2 text-blue-500"/> Tasks Visibility</h3>
            <p className="text-text-secondary text-sm mt-1">{tasksPublic ? "Tasks are visible to public visitors." : "Tasks are hidden from public visitors."}</p>
          </div>
          <button onClick={handleTasksVisibilityToggle} disabled={updatingTasks} className={`px-4 py-2 rounded-lg font-medium border transition-colors ${tasksPublic ? 'border-red-500 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20' : 'border-green-500 text-green-500 hover:bg-green-50 dark:hover:bg-green-900/20'}`}>
            {updatingTasks ? <FiLoader className="animate-spin"/> : (tasksPublic ? "Hide Tasks" : "Show Tasks")}
          </button>
        </div>
      </div>

      {/* 3. √úYE Y√ñNETƒ∞Mƒ∞ */}
      <div className="bg-surface rounded-xl border border-border p-6 shadow-sm">
        <h3 className="text-xl font-semibold text-text-main mb-4 flex items-center"><FiUsers className="mr-2" /> Manage Team</h3>
        <form onSubmit={handleMemberSubmit} className="bg-app p-4 rounded-lg mb-6 flex flex-col md:flex-row gap-3 items-end border border-border">
          <div className="flex-grow w-full">
            <label className="text-xs text-text-secondary uppercase font-bold">Username</label>
            <input type="text" value={usernameToAdd} onChange={(e) => setUsernameToAdd(e.target.value)} className="w-full bg-surface border border-border rounded px-3 py-2 text-text-main outline-none focus:border-primary" placeholder="username"/>
          </div>
          <div className="w-full md:w-40">
            <label className="text-xs text-text-secondary uppercase font-bold">Role</label>
            <select value={roleToAdd} onChange={(e) => setRoleToAdd(e.target.value)} className="w-full bg-surface border border-border rounded px-3 py-2 text-text-main outline-none focus:border-primary">
              <option value="viewer">Viewer</option>
              <option value="editor">Editor</option>
            </select>
          </div>
          <button disabled={isAdding} type="submit" className="w-full md:w-auto bg-primary hover:bg-primary-hover text-white px-4 py-2 rounded font-semibold flex items-center justify-center disabled:opacity-50 transition-colors">
            {isAdding ? <FiLoader className="animate-spin"/> : <FiUserPlus />}
          </button>
        </form>
        
        {(addSuccess || addError) && (
          <div className={`mb-4 p-2 rounded text-sm flex items-center ${addSuccess ? 'text-green-600 bg-green-50 dark:text-green-400 dark:bg-green-900/20' : 'text-red-600 bg-red-50 dark:text-red-400 dark:bg-red-900/20'}`}>
            {addSuccess ? <FiCheck className="mr-2"/> : <FiAlertTriangle className="mr-2"/>} {addSuccess || addError}
          </div>
        )}

        <div className="space-y-2">
          {currentMembers.length > 0 ? (
            currentMembers.map(member => (
              <div key={member.id} className="flex justify-between items-center p-3 bg-surface hover:bg-surface-hover border border-border rounded transition-colors">
                <div className="flex items-center">
                  <div className="w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-text-main font-bold mr-3">{member.username.charAt(0).toUpperCase()}</div>
                  <div>
                    <p className="text-text-main font-medium text-sm">{member.username}</p>
                    {member.role === 'owner' ? (
                      <span className="text-xs text-text-secondary bg-app px-2 py-0.5 rounded border border-border capitalize">Owner</span>
                    ) : (
                      <div className="flex items-center gap-2 mt-1">
                        <select 
                          value={member.role} 
                          disabled={updatingRoleId === member.id}
                          onChange={(e) => handleRoleChange(member.id, e.target.value)}
                          className="text-xs bg-app border border-border rounded px-1.5 py-0.5 text-text-main outline-none focus:border-primary cursor-pointer disabled:opacity-50"
                        >
                          <option value="viewer">Viewer</option>
                          <option value="editor">Editor</option>
                        </select>
                        {updatingRoleId === member.id && <FiLoader className="animate-spin text-xs text-primary"/>}
                      </div>
                    )}
                  </div>
                </div>
                {member.role !== 'owner' && (
                  <button onClick={() => handleRemoveMember(member.id, member.username)} disabled={removingId === member.id} className="text-text-secondary hover:text-red-500 p-2">
                    {removingId === member.id ? <FiLoader className="animate-spin"/> : <FiTrash2 />}
                  </button>
                )}
              </div>
            ))
          ) : (<p className="text-text-secondary text-center py-4">No members yet.</p>)}
        </div>
      </div>

      {/* 4. TEHLƒ∞KE B√ñLGESƒ∞ */}
      <div className="bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-900/50 rounded-xl p-6 mt-10">
        <h3 className="text-xl font-bold text-red-600 dark:text-red-500 flex items-center mb-2"><FiShield className="mr-2" /> Danger Zone</h3>
        <p className="text-red-600/70 dark:text-gray-400 text-sm mb-6">Deleting this project will permanently remove all issues, comments, files, and member associations.</p>
        <div className="flex justify-end">
          <button onClick={handleDeleteProject} disabled={isDeletingProject} className="px-5 py-2.5 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg shadow-lg transition-colors disabled:opacity-50 flex items-center">
            {isDeletingProject ? <FiLoader className="animate-spin mr-2"/> : <FiTrash2 className="mr-2"/>} Delete Project
          </button>
        </div>
      </div>
    </div>
  );
}


================================================
FILE: frontend/src/components/projects/ProjectFiles.js
================================================
// src/components/projects/ProjectFiles.js

import React, { useState, useEffect } from 'react';
import { useProjectContext } from '../../context/ProjectContext';
import { 
  FiDownload, FiUpload, FiLoader, 
  FiFileText, FiX, FiCheckSquare, FiSquare, FiChevronLeft, FiChevronRight, 
  FiExternalLink, FiImage, FiAlertTriangle, FiTrash2, FiMinusCircle,
  FiInfo, FiChevronDown, FiChevronUp, FiEye
} from 'react-icons/fi';

import JSZip from 'jszip';
import { saveAs } from 'file-saver';

export default function ProjectFiles() {
  const { currentProject, fetchFiles, uploadFile, deleteFile } = useProjectContext();
  
  const [files, setFiles] = useState([]);
  const [loading, setLoading] = useState(false);
  const [uploading, setUploading] = useState(false);
  const [downloadingBulk, setDownloadingBulk] = useState(false);
  const [selectedIds, setSelectedIds] = useState([]);
  const [previewFile, setPreviewFile] = useState(null);
  const [isDescriptionOpen, setIsDescriptionOpen] = useState(false); 

  const userRole = currentProject?.currentUserRole;
  const canEdit = userRole === 'owner' || userRole === 'editor';

  // --- 1. Load Files ---
  useEffect(() => {
    if (currentProject?.id) {
      loadFiles();
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [currentProject]);

  const loadFiles = async () => {
    setLoading(true);
    try {
      const data = await fetchFiles(currentProject.id);
      setFiles(Array.isArray(data) ? data : []);
    } catch (error) {
      console.error("Error loading files:", error);
    } finally {
      setLoading(false);
    }
  };

  // --- 2. Saya√ß Tetikleyici ---
  useEffect(() => {
    if (previewFile) {
        const category = getFileTypeCategory(previewFile.filename);
        // Eƒüer √∂nizlemesi olmayan bir dosya t√ºr√º ise (ZIP vb.), manuel istek atarak sayacƒ± artƒ±r.
        if (category === 'other') {
            fetch(getPreviewUrl(previewFile)).catch(err => console.log("Counter ping sent"));
        }
    }
  }, [previewFile]);

  // --- Actions ---
  const handleFileUpload = async (e) => {
    const selectedFiles = Array.from(e.target.files);
    if (selectedFiles.length === 0) return;

    setUploading(true);
    try {
      for (const file of selectedFiles) {
        await uploadFile(currentProject.id, file);
      }
      await loadFiles(); 
    } catch (error) {
      console.error("Upload error:", error);
      alert("Error uploading files.");
    } finally {
      setUploading(false);
      e.target.value = null; 
    }
  };

  const handleDeleteSelected = async () => {
    if (selectedIds.length === 0) return;
    if (window.confirm(`${selectedIds.length} dosyayƒ± silmek istediƒüine emin misin?`)) {
      setLoading(true);
      try {
        await Promise.all(selectedIds.map(id => deleteFile(currentProject.id, id)));
        await loadFiles();
        setSelectedIds([]);
        setPreviewFile(null);
      } catch (err) {
        alert("Dosyalar silinemedi.");
      } finally {
        setLoading(false);
      }
    }
  };

  const handleDownloadSelected = async () => {
    if (selectedIds.length === 0) return;
    if (selectedIds.length === 1) {
        const file = files.find(f => f.id === selectedIds[0]);
        if (file) {
            const link = document.createElement('a');
            link.href = getDownloadUrl(file.file_path);
            link.download = file.filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        return;
    }
    setDownloadingBulk(true);
    try {
        const zip = new JSZip();
        const folderName = currentProject?.name ? `${currentProject.name}_Files` : 'Project_Files';
        const imgFolder = zip.folder(folderName);
        const downloadPromises = selectedIds.map(async (id) => {
            const file = files.find(f => f.id === id);
            if (!file) return;
            try {
                const response = await fetch(getDownloadUrl(file.file_path));
                const blob = await response.blob();
                imgFolder.file(file.filename, blob);
            } catch (err) {
                console.error(`Failed to download ${file.filename}`, err);
            }
        });
        await Promise.all(downloadPromises);
        const content = await zip.generateAsync({ type: "blob" });
        saveAs(content, `${folderName}.zip`);
    } catch (error) {
        console.error("Zip Error:", error);
        alert("Failed to create zip file.");
    } finally {
        setDownloadingBulk(false);
    }
  };

  const toggleSelect = (id, e) => {
    e.stopPropagation();
    selectedIds.includes(id) ? setSelectedIds(selectedIds.filter(itemId => itemId !== id)) : setSelectedIds([...selectedIds, id]);
  };

  const toggleSelectAll = () => {
    const validIds = files.filter(f => f?.id).map(f => f.id);
    selectedIds.length === validIds.length ? setSelectedIds([]) : setSelectedIds(validIds);
  };

  const handleUnselectAll = () => setSelectedIds([]);

  // --- Helpers ---
  const getDownloadUrl = (filePath) => {
    if (!filePath) return '';
    const cleanPath = filePath.replace(/\\/g, '/');
    return `http://localhost:5000/${cleanPath}`;
  };

  // Cache busting (t=Date.now()) ile saya√ß her zaman √ßalƒ±≈üƒ±r
  const getPreviewUrl = (file) => {
    if (!file) return '';
    const token = localStorage.getItem('token');
    return `http://localhost:5000/api/projects/${file.project_id}/files/${file.id}/preview?token=${token}&t=${Date.now()}`;
  };

  const getFileTypeCategory = (filename) => {
    if (!filename) return 'other';
    const ext = filename.split('.').pop().toLowerCase();
    if (['jpg', 'jpeg', 'png', 'gif', 'webp', 'svg', 'bmp'].includes(ext)) return 'image';
    if (['doc', 'docx', 'ppt', 'pptx', 'xls', 'xlsx', 'pdf', 'txt', 'md'].includes(ext)) return 'previewable';
    return 'other';
  };

  // BOYUT HESAPLAMA FONKSƒ∞YONU
  const formatFileSize = (bytes) => {
    // Veritabanƒ±ndan string gelme ihtimaline kar≈üƒ± parseInt yapƒ±yoruz
    const b = parseInt(bytes, 10);
    if (!b || isNaN(b) || b === 0) return '0 B';
    
    const k = 1024;
    const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];
    const i = Math.floor(Math.log(b) / Math.log(k));
    return parseFloat((b / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
  };

  const handleNextPrev = (direction) => {
    if (!previewFile) return;
    const validFiles = files.filter(f => f && f.id);
    const currentIndex = validFiles.findIndex(f => f.id === previewFile.id);
    if (currentIndex === -1) return;
    let newIndex;
    if (direction === 'next') {
      newIndex = currentIndex + 1 < validFiles.length ? currentIndex + 1 : 0; 
    } else {
      newIndex = currentIndex - 1 >= 0 ? currentIndex - 1 : validFiles.length - 1; 
    }
    setPreviewFile(validFiles[newIndex]);
  };

  const handleOpenPreview = (file) => {
      setPreviewFile(file);
  };

  // --- RENDER PREVIEW CONTENT ---
  const renderPreviewContent = () => {
    if (!previewFile) return null;
    const category = getFileTypeCategory(previewFile.filename);
    
    if (category === 'image') {
      return (
        <div className="absolute inset-0 flex items-center justify-center p-4">
            <img 
            src={getPreviewUrl(previewFile)} 
            alt="Preview" 
            className="max-w-full max-h-full object-contain drop-shadow-2xl"
            />
        </div>
      );
    }
    if (category === 'previewable') {
      return (
        <iframe 
          src={getPreviewUrl(previewFile)} 
          title="File Preview" 
          className="absolute inset-0 w-full h-full border-none bg-white block" 
        />
      );
    }
    return (
      <div className="absolute inset-0 flex items-center justify-center">
        <div className="text-center text-white bg-zinc-800 p-8 rounded-2xl border border-zinc-700">
            <FiFileText size={48} className="mx-auto mb-4 text-gray-400"/>
            <p className="text-gray-300 mb-6">Preview not available for this format.</p>
            <a href={getDownloadUrl(previewFile.file_path)} download className="px-6 py-2 bg-primary hover:bg-primary-hover rounded-lg font-bold text-white transition-colors no-underline">
            Download File
            </a>
        </div>
      </div>
    );
  };

  // --- RENDER MAIN ---
  return (
    <div className="space-y-6 relative">
      
      {/* Description Box */}
      <div className="bg-surface border border-border rounded-lg overflow-hidden shadow-sm transition-all">
        <button onClick={() => setIsDescriptionOpen(!isDescriptionOpen)} className="w-full flex items-center justify-between p-4 bg-surface hover:bg-surface-hover transition-colors text-left cursor-pointer border-none">
          <div className="flex items-center gap-2 font-medium text-text-main"><FiInfo className="text-primary" size={18} /><span>Project Description</span></div>
          <div className="text-text-secondary">{isDescriptionOpen ? <FiChevronUp size={20} /> : <FiChevronDown size={20} />}</div>
        </button>
        {isDescriptionOpen && (
          <div className="p-4 border-t border-border bg-app/30 text-text-secondary text-sm leading-relaxed whitespace-pre-wrap animate-fade-in max-h-64 overflow-y-auto">
             {currentProject?.long_description || currentProject?.description || "No description provided."}
          </div>
        )}
      </div>

      {/* Toolbar */}
      <div className="flex flex-wrap items-center gap-3 py-2">
        {canEdit && (
          <div className="relative">
            <input type="file" multiple onChange={handleFileUpload} className="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10" disabled={uploading} />
            <button className={`px-4 py-2 rounded-lg text-white font-bold flex items-center gap-2 transition-all ${uploading ? 'bg-gray-500 cursor-not-allowed' : 'bg-primary hover:bg-primary-hover shadow-lg'}`}>
              {uploading ? <FiLoader className="animate-spin"/> : <FiUpload/>} {uploading ? 'Uploading...' : 'Upload Files'}
            </button>
          </div>
        )}
        {selectedIds.length > 0 && (
          <div className="flex items-center gap-3 animate-fade-in">
            <div className="h-8 w-[1px] bg-border mx-1"></div>
            <button onClick={handleUnselectAll} className="px-3 py-2 bg-transparent hover:bg-surface-hover text-text-secondary hover:text-text-main rounded-lg text-sm font-medium flex items-center gap-2 transition-colors border border-dashed border-border"><FiMinusCircle /> <span className="hidden sm:inline">Unselect All</span></button>
            <button onClick={handleDownloadSelected} disabled={downloadingBulk} className="px-4 py-2 bg-surface hover:bg-surface-hover border border-border rounded-lg text-text-main font-medium flex items-center gap-2 transition-colors">{downloadingBulk ? <FiLoader className="animate-spin"/> : <FiDownload />} {downloadingBulk ? 'Zipping...' : `Download (${selectedIds.length})`}</button>
            {canEdit && <button onClick={handleDeleteSelected} className="px-4 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-600 border border-red-500/20 rounded-lg font-medium flex items-center gap-2 transition-colors"><FiTrash2 /> Delete ({selectedIds.length})</button>}
          </div>
        )}
      </div>

      {/* File List */}
      <div className="bg-surface rounded-xl overflow-hidden border border-border shadow-sm">
        <div className="flex bg-app p-3 border-b border-border text-xs font-bold text-text-secondary uppercase tracking-wider items-center">
          <div className="w-10 text-center flex justify-center">
             <button onClick={toggleSelectAll} className="bg-transparent border-none cursor-pointer hover:text-text-main text-text-secondary">
               {files.length > 0 && selectedIds.length === files.length ? <FiCheckSquare size={16}/> : <FiSquare size={16}/>}
             </button>
          </div>
          <div className="flex-1 px-4">Filename</div>
          <div className="w-36 text-left hidden sm:block">Uploaded By</div>
          <div className="w-32 text-left hidden sm:block">Date</div>
          <div className="w-20 text-right hidden md:block">Size</div>
          <div className="w-20 text-center">Views</div>
          <div className="w-16 text-center">Action</div>
        </div>

        {loading ? (
          <div className="p-8 flex justify-center"><FiLoader className="animate-spin text-primary" size={24}/></div>
        ) : (
          <ul className="divide-y divide-border m-0 p-0">
            {files.map((file, index) => {
              if (!file) return null;
              
              const fileId = file.id || index;
              const category = getFileTypeCategory(file.filename);
              const isSelected = selectedIds.includes(fileId);

              return (
                <li 
                  key={fileId} 
                  onClick={() => handleOpenPreview(file)}
                  className={`flex items-center p-3 hover:bg-surface-hover cursor-pointer transition-colors ${isSelected ? 'bg-primary/5' : ''}`}
                >
                  <div className="w-10 flex justify-center" onClick={(e) => { e.stopPropagation(); if (file.id) toggleSelect(fileId, e); }}>
                    {file.id && (isSelected ? <FiCheckSquare className="text-primary"/> : <FiSquare className="text-text-secondary"/>)}
                    {!file.id && <FiAlertTriangle className="text-yellow-500" title="Data Error"/>}
                  </div>

                  <div className="flex-1 px-4 flex items-center gap-3 overflow-hidden">
                    <div className={`p-2 rounded-lg flex-shrink-0 ${
                        category === 'image' ? 'bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400' : 
                        category === 'previewable' ? 'bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400' :
                        'bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400'
                    }`}>
                      {category === 'image' ? <FiImage size={18}/> : <FiFileText size={18}/>}
                    </div>
                    <span className="font-medium text-text-main truncate text-sm">{file.filename || "Untitled"}</span>
                  </div>

                  <div className="w-36 text-xs text-text-secondary hidden sm:block truncate text-left">{file.uploader_name || '-'}</div>
                  <div className="w-32 text-xs text-text-secondary hidden sm:block font-mono opacity-70 text-left">
                    {file.created_at ? new Date(file.created_at).toLocaleDateString() : '-'}
                  </div>
                  
                  {/* SIZE DISPLAY */}
                  <div className="w-20 text-right text-xs text-text-secondary hidden md:block font-mono opacity-70">
                    {formatFileSize(file.file_size)}
                  </div>
                  
                  {/* VIEWS DISPLAY */}
                  <div className="w-20 text-center flex justify-center items-center gap-1 text-xs text-text-secondary font-medium">
                     <FiEye size={14} className="opacity-50"/> {file.view_count || 0}
                  </div>
                  
                  <div className="w-16 flex justify-center items-center" onClick={(e) => e.stopPropagation()}>
                     <a href={getDownloadUrl(file.file_path)} download className="p-2 hover:bg-surface-hover rounded-full text-text-secondary hover:text-primary transition-colors flex items-center">
                       <FiDownload size={16}/>
                     </a>
                  </div>
                </li>
              );
            })}
            {files.length === 0 && <div className="p-8 text-center text-text-secondary text-sm">No files uploaded yet.</div>}
          </ul>
        )}
      </div>

      {/* Preview Modal */}
      {previewFile && (
        <div className="fixed top-0 left-0 w-screen h-[100vh] z-[99999] bg-black/95 flex flex-col animate-fade-in overflow-hidden m-0 p-0">
          <div className="flex-none h-16 flex items-center justify-between px-6 bg-zinc-900 border-b border-white/10 text-white z-50">
             <div className="flex items-center gap-4 overflow-hidden">
               <button onClick={() => { setPreviewFile(null); loadFiles(); }} className="p-2 hover:bg-white/10 rounded-full transition-colors border-none bg-transparent cursor-pointer text-white"><FiX size={24} /></button>
               <span className="font-bold truncate text-sm md:text-base">{previewFile.filename}</span>
             </div>
             <div className="flex items-center gap-3 flex-shrink-0">
               <a href={getPreviewUrl(previewFile)} target="_blank" rel="noreferrer" className="hidden md:flex items-center gap-2 px-4 py-2 hover:bg-white/10 rounded-lg text-sm font-medium transition-colors text-white no-underline"><FiExternalLink /> New Tab</a>
               <a href={getDownloadUrl(previewFile.file_path)} download className="flex items-center gap-2 px-4 py-2 bg-primary hover:bg-primary-hover rounded-lg text-sm font-bold transition-colors text-white no-underline"><FiDownload /> Download</a>
             </div>
          </div>
          <div className="flex-1 relative w-full h-full overflow-hidden bg-zinc-900">
            <button onClick={(e) => { e.stopPropagation(); handleNextPrev('prev'); }} className="absolute left-4 top-1/2 -translate-y-1/2 z-[100] text-white/50 hover:text-white p-4 hover:bg-white/10 rounded-full transition-all border-none bg-transparent cursor-pointer"><FiChevronLeft size={48} /></button>
            <button onClick={(e) => { e.stopPropagation(); handleNextPrev('next'); }} className="absolute right-4 top-1/2 -translate-y-1/2 z-[100] text-white/50 hover:text-white p-4 hover:bg-white/10 rounded-full transition-all border-none bg-transparent cursor-pointer"><FiChevronRight size={48} /></button>
             
             {renderPreviewContent()}
             
             <div className="absolute bottom-6 left-1/2 -translate-x-1/2 z-50 pointer-events-none">
                <span className="bg-black/60 text-white/80 px-4 py-1.5 rounded-full text-xs font-medium backdrop-blur-md border border-white/10 shadow-lg">
                    {files.filter(f => f && f.id).findIndex(f => f.id === previewFile.id) + 1} / {files.filter(f => f && f.id).length}
                </span>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}


================================================
FILE: frontend/src/components/projects/ProjectIssues.js
================================================
// src/components/projects/ProjectIssues.js

import React, { useState, useEffect } from 'react';
import { useProjectContext } from '../../context/ProjectContext';
import { useAuth } from '../../context/AuthContext';
import { FiLoader, FiPlus, FiSearch } from 'react-icons/fi';
import IssueItem from './IssueItem'; 

function ProjectIssues() {
  const [issues, setIssues] = useState([]);
  const [newIssueText, setNewIssueText] = useState('');
  const [searchTerm, setSearchTerm] = useState('');
  const { currentProject, fetchIssues, createIssue, loading } = useProjectContext();
  const { user } = useAuth(); 

  const projectId = currentProject?.id;
  const userRole = currentProject?.currentUserRole;

  useEffect(() => {
    const loadIssues = async () => {
      try {
        const fetchedIssues = await fetchIssues(projectId);
        setIssues(fetchedIssues || []);
      } catch (error) { console.error("Failed to fetch issues:", error); }
    };
    if (projectId) loadIssues();
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [projectId]);

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (!newIssueText.trim()) return;
    try {
      const newIssue = await createIssue(projectId, newIssueText);
      setIssues([newIssue, ...issues]); 
      setNewIssueText('');
    } catch (error) { console.error("Failed to create issue:", error); }
  };

  const handleIssueUpdate = (updatedIssue) => {
    setIssues(prevIssues => prevIssues.map(issue => issue.id === updatedIssue.id ? updatedIssue : issue));
  };

  const filteredIssues = issues.filter(issue => issue.text.toLowerCase().includes(searchTerm.toLowerCase()));

  return (
    // bg-surface
    <div className="bg-surface p-6 rounded-lg shadow-sm border border-border">
      <div className="flex justify-between items-center mb-6">
        <h3 className="text-xl font-bold text-text-main">Project Issues</h3>
        <span className="text-xs bg-app text-text-secondary px-2 py-1 rounded-full border border-border">
          {issues.length} Total
        </span>
      </div>
      
      {/* SEARCH */}
      <div className="relative mb-6">
        <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
          <FiSearch className="text-text-secondary" />
        </div>
        <input 
          type="text" placeholder="Search issues..." value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)}
          className="w-full bg-app text-text-main border border-border text-sm rounded-lg focus:ring-primary focus:border-primary block pl-10 p-2.5 placeholder-text-secondary transition-colors"
        />
      </div>

      {/* CREATE FORM */}
      {(userRole === 'owner' || userRole === 'editor') && (
        <form onSubmit={handleSubmit} className="flex mb-6">
          <input 
            type="text" value={newIssueText} onChange={(e) => setNewIssueText(e.target.value)}
            className="flex-grow py-2 px-3 text-text-main bg-app border border-border rounded-l-lg focus:outline-none focus:ring-2 focus:ring-primary placeholder-text-secondary"
            placeholder="New issue title..."
          />
          <button type="submit" disabled={loading} className="flex items-center bg-primary hover:bg-primary-hover text-white font-semibold py-2 px-4 rounded-r-lg transition-colors disabled:opacity-50">
            {loading ? <FiLoader className="animate-spin" /> : <FiPlus />}
          </button>
        </form>
      )}

      {/* ISSUE LIST */}
      <div className="space-y-3">
        {loading && issues.length === 0 ? (
          <p className="text-text-secondary text-center py-4">Loading issues...</p>
        ) : issues.length === 0 ? (
          <p className="text-text-secondary text-center py-4">No issues found for this project.</p>
        ) : filteredIssues.length === 0 ? (
          <p className="text-text-secondary text-center py-4">No issues match your search.</p>
        ) : (
          filteredIssues.map(issue => (
            <IssueItem key={issue.id} issue={issue} projectId={projectId} onIssueUpdated={handleIssueUpdate} />
          ))
        )}
      </div>
    </div>
  );
}

export default ProjectIssues;


================================================
FILE: frontend/src/components/projects/ProjectList.js
================================================
// src/components/projects/ProjectList.js

import React from 'react';
import { Link } from 'react-router-dom';
import { FiLoader, FiArrowRight } from 'react-icons/fi'; // ƒ∞konlar

// 1. Component artƒ±k 'projects', 'loading', 'title' gibi verileri
//    prop (parametre) olarak dƒ±≈üarƒ±dan alƒ±r.
function ProjectList({ title, projects, loading, viewAllLink }) {

  // 2. Y√ºkleniyorsa (Loading)
  if (loading) {
    return (
      <div className="bg-gray-800 p-6 rounded-lg flex justify-center items-center">
        <FiLoader className="animate-spin text-blue-500" size={30} />
      </div>
    );
  }

  // 3. Y√ºkleme bitti ve proje yoksa (Empty State)
  if (projects.length === 0) {
    return (
      <div className="bg-gray-800 p-6 rounded-lg">
        <h2 className="text-xl font-semibold text-white mb-2">{title}</h2>
        <p className="text-gray-400">Hen√ºz bu kategoriye ait bir projeniz yok.</p>
        <p className="text-gray-500 text-sm mt-4">
          Ba≈ülamak i√ßin "Create New Project" butonunu kullanƒ±n.
        </p>
      </div>
    );
  }

  // 4. Y√ºkleme bitti ve projeler varsa (Project List)
  return (
    <div className="bg-gray-800 p-6 rounded-lg">
      {/* Ba≈ülƒ±k ve 'View All' Linki */}
      <div className="flex justify-between items-center mb-4">
        <h2 className="text-xl font-semibold text-white">{title}</h2>
        {viewAllLink && (
          <Link to={viewAllLink} className="text-sm text-blue-400 hover:text-blue-300 flex items-center">
            View All
            <FiArrowRight className="ml-1" size={14} />
          </Link>
        )}
      </div>

      {/* Proje Kartlarƒ± */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {projects.map(project => (
          <Link 
            to={`/project/${project.id}`} // Proje detay sayfasƒ±na y√∂nlendir
            key={project.id} 
            className="block bg-gray-700 p-4 rounded-lg shadow hover:bg-gray-600 transition-colors"
          >
            <h3 className="font-bold text-lg text-white mb-1">{project.name}</h3>
            <p className="text-gray-400 text-sm truncate">{project.description}</p>
            <span className="text-xs text-gray-500 mt-2 block">
              Last updated: {new Date(project.last_updated_at).toLocaleDateString()}
            </span>
          </Link>
        ))}
      </div>
    </div>
  );
}

export default ProjectList;


================================================
FILE: frontend/src/components/projects/ProjectTasks.js
================================================
// src/components/projects/ProjectTasks.js

import React, { useState, useEffect, useRef } from 'react';
import { useProjectContext } from '../../context/ProjectContext';
import api from '../../services/api'; 
import { 
  FiPlus, FiCheckCircle, FiLoader, FiClock, FiLock, 
  FiMoreVertical, FiEdit, FiTrash2, FiSave, FiX, FiUser 
} from 'react-icons/fi';

export default function ProjectTasks() {
  const { currentProject, fetchTasks, createTask, deleteTask, updateTask } = useProjectContext();
  const [tasks, setTasks] = useState([]);
  const [loading, setLoading] = useState(true);
  const [accessDenied, setAccessDenied] = useState(false);
  const [newTaskTitle, setNewTaskTitle] = useState('');
  
  const projectId = currentProject?.id;
  const userRole = currentProject?.currentUserRole;
  const canEdit = userRole !== 'public_viewer';

  useEffect(() => {
    if (projectId) {
      setLoading(true);
      fetchTasks(projectId).then(data => {
        if (data === null) {
          setAccessDenied(true); 
        } else {
          setTasks(data);
          setAccessDenied(false);
        }
        setLoading(false);
      });
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [projectId]);

  const handleAddTask = async (e) => {
    e.preventDefault();
    if (!newTaskTitle.trim()) return;
    try {
      const newTask = await createTask(projectId, { 
        title: newTaskTitle, status: 'todo', due_date: new Date().toISOString() 
      });
      if (newTask) {
        setTasks([...tasks, newTask]);
        setNewTaskTitle('');
      }
    } catch (error) { console.error("Failed to create task:", error); }
  };

 const moveTask = async (task, newStatus) => {
    const savedToken = localStorage.getItem('token');
    if (!savedToken) return;

    const previousTasks = [...tasks];
    const updatedList = tasks.map(t => t.id === task.id ? { ...t, status: newStatus } : t);
    setTasks(updatedList);

    try {
        await api.put(`/api/projects/${projectId}/tasks/${task.id}`, { status: newStatus });
    } catch (error) {
      setTasks(previousTasks);
      alert(`Error moving task: ${error.message}`);
    }
  };

  const handleDeleteTask = async (taskId) => {
    if (window.confirm("Are you sure you want to delete this task?")) {
      try {
        await deleteTask(projectId, taskId);
        setTasks(tasks.filter(t => t.id !== taskId));
      } catch (error) { console.error("Failed to delete task:", error); }
    }
  };

  const handleUpdateTaskTitle = async (taskId, newTitle) => {
    try {
      const updatedTask = await updateTask(projectId, taskId, { title: newTitle });
      setTasks(tasks.map(t => t.id === taskId ? updatedTask : t));
    } catch (error) { console.error("Failed to update task:", error); }
  };

  const handleDragStart = (e, taskId) => { e.dataTransfer.setData("taskId", taskId); };
  const handleDragOver = (e) => { e.preventDefault(); };
  const handleDrop = (e, newStatus) => {
    e.preventDefault();
    const taskId = e.dataTransfer.getData("taskId");
    const task = tasks.find(t => t.id === Number(taskId) || t.id === taskId);
    if (task && task.status !== newStatus) { moveTask(task, newStatus); }
  };

  const totalTasks = tasks.length;
  const doneCount = tasks.filter(t => t.status === 'done').length;
  const inProgressCount = tasks.filter(t => t.status === 'in_progress').length;
  const weightedScore = doneCount + (inProgressCount * 0.5);
  const progressPercentage = totalTasks === 0 ? 0 : Math.round((weightedScore / totalTasks) * 100);

  if (loading) return <div className="p-10 flex justify-center"><FiLoader className="animate-spin text-primary" size={30}/></div>;
  
  if (accessDenied) {
    return (
      <div className="flex flex-col items-center justify-center p-10 bg-surface rounded-lg border border-border">
        <FiLock size={40} className="text-red-500 mb-4" />
        <h3 className="text-xl font-bold text-text-main">Tasks are Private</h3>
        <p className="text-text-secondary mt-2">Only project members can see the task board.</p>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* 1. PROGRESS BAR */}
      <div className="bg-surface p-4 rounded-lg border border-border shadow-sm">
        <div className="flex justify-between items-center mb-2">
          <h3 className="text-text-main font-semibold flex items-center">
            <FiCheckCircle className="mr-2 text-primary" /> Project Progress
          </h3>
          <span className="text-primary font-bold">{progressPercentage}% Completed</span>
        </div>
        <div className="w-full bg-app rounded-full h-2.5 overflow-hidden">
          <div className="bg-gradient-to-r from-primary to-purple-500 h-2.5 rounded-full transition-all duration-500" style={{ width: `${progressPercentage}%` }}></div>
        </div>
      </div>

      {/* 2. ADD TASK FORM */}
      {canEdit && (
        <form onSubmit={handleAddTask} className="flex gap-2">
          <input 
            type="text" value={newTaskTitle} onChange={(e) => setNewTaskTitle(e.target.value)}
            className="flex-grow bg-surface text-text-main border border-border rounded-lg px-4 py-2 focus:ring-2 focus:ring-primary outline-none transition-colors"
            placeholder="Add a new task..."
          />
          <button type="submit" className="bg-primary hover:bg-primary-hover text-white px-4 py-2 rounded-lg font-semibold flex items-center transition-colors">
            <FiPlus className="mr-2" /> Add Task
          </button>
        </form>
      )}

      {/* 3. KANBAN BOARD */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-6 h-[600px]">
        <KanbanColumn 
          title="To Do" status="todo" tasks={tasks} 
          borderColor="border-indigo-500" badgeColor="bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300"
          canEdit={canEdit} onMove={moveTask} onDelete={handleDeleteTask} onUpdate={handleUpdateTaskTitle} onDragOver={handleDragOver} onDrop={handleDrop} onDragStart={handleDragStart}
        />
        <KanbanColumn 
          title="In Progress" status="in_progress" tasks={tasks} 
          borderColor="border-blue-500" badgeColor="bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"
          canEdit={canEdit} onMove={moveTask} onDelete={handleDeleteTask} onUpdate={handleUpdateTaskTitle} onDragOver={handleDragOver} onDrop={handleDrop} onDragStart={handleDragStart}
        />
        <KanbanColumn 
          title="Done" status="done" tasks={tasks} 
          borderColor="border-purple-500" badgeColor="bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300"
          canEdit={canEdit} onMove={moveTask} onDelete={handleDeleteTask} onUpdate={handleUpdateTaskTitle} onDragOver={handleDragOver} onDrop={handleDrop} onDragStart={handleDragStart}
        />
      </div>
    </div>
  );
}

function KanbanColumn({ title, status, tasks, borderColor, badgeColor, canEdit, onMove, onDelete, onUpdate, onDragOver, onDrop, onDragStart }) {
  const columnTasks = tasks.filter(t => t.status === status);
  return (
    // bg-surface: S√ºtun rengi
    <div className={`bg-surface rounded-xl border-t-4 ${borderColor} p-4 flex flex-col h-full shadow-lg border-x border-b border-border`} onDragOver={onDragOver} onDrop={(e) => onDrop(e, status)}>
      <h4 className="text-text-main font-bold mb-4 flex justify-between items-center">
        {title} 
        <span className={`px-2 py-0.5 rounded-full text-xs font-semibold ${badgeColor}`}>{columnTasks.length}</span>
      </h4>
      <div className="flex-1 overflow-y-auto space-y-3 custom-scrollbar pr-1 pb-10">
        {columnTasks.map(task => (
          <TaskItem key={task.id} task={task} canEdit={canEdit} status={status} onMove={onMove} onDelete={onDelete} onUpdate={onUpdate} onDragStart={onDragStart}/>
        ))}
      </div>
    </div>
  );
}

function TaskItem({ task, canEdit, status, onMove, onDelete, onUpdate, onDragStart }) {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [isEditing, setIsEditing] = useState(false);
  const [editTitle, setEditTitle] = useState(task.title);
  const menuRef = useRef(null);

  useEffect(() => {
    function handleClickOutside(event) { if (menuRef.current && !menuRef.current.contains(event.target)) setIsMenuOpen(false); }
    document.addEventListener("mousedown", handleClickOutside);
    return () => document.removeEventListener("mousedown", handleClickOutside);
  }, []);

  const handleSaveEdit = () => {
    if (editTitle.trim() && editTitle !== task.title) { onUpdate(task.id, editTitle); }
    setIsEditing(false);
  };

  return (
    // bg-app: G√∂rev kartƒ± rengi (S√ºtundan farklƒ± olmasƒ± i√ßin)
    <div 
      className={`bg-app p-3 rounded-lg border border-border hover:border-primary transition-all group relative ${canEdit ? 'cursor-move' : ''}`}
      draggable={canEdit}
      onDragStart={(e) => canEdit && onDragStart(e, task.id)}
    >
      {isEditing ? (
        <div className="flex flex-col gap-2">
          <input type="text" value={editTitle} onChange={(e) => setEditTitle(e.target.value)} className="w-full bg-surface text-text-main text-sm p-1 rounded border border-primary focus:outline-none" autoFocus/>
          <div className="flex justify-end gap-2">
            <button onClick={() => setIsEditing(false)} className="text-red-500 hover:text-red-600"><FiX size={16}/></button>
            <button onClick={handleSaveEdit} className="text-green-500 hover:text-green-600"><FiSave size={16}/></button>
          </div>
        </div>
      ) : (
        <>
          <div className="flex justify-between items-start">
            <p className="text-text-main text-sm font-medium mb-2 break-words flex-1 pr-6">{task.title}</p>
            {canEdit && (
              <div className="relative" ref={menuRef}>
                <button onClick={() => setIsMenuOpen(!isMenuOpen)} className="text-text-secondary hover:text-text-main p-1 rounded-full hover:bg-surface-hover transition-colors">
                  <FiMoreVertical size={16} />
                </button>
                {isMenuOpen && (
                  <div className="absolute right-0 top-6 w-32 bg-surface border border-border rounded-md shadow-xl z-10 overflow-hidden">
                    <button onClick={() => { setIsEditing(true); setIsMenuOpen(false); }} className="w-full text-left px-3 py-2 text-xs text-text-main hover:bg-surface-hover flex items-center">
                      <FiEdit className="mr-2" /> Edit
                    </button>
                    <button onClick={() => { onDelete(task.id); setIsMenuOpen(false); }} className="w-full text-left px-3 py-2 text-xs text-red-500 hover:bg-surface-hover flex items-center">
                      <FiTrash2 className="mr-2" /> Delete
                    </button>
                  </div>
                )}
              </div>
            )}
          </div>
          <div className="flex flex-col gap-1 mt-2">
             <div className="flex items-center text-xs text-text-secondary">
               <FiUser className="mr-1.5 w-3 h-3" />
               <span>Created by: <span className="text-text-main">{task.created_by_name || 'Unknown'}</span></span>
             </div>
             <div className="flex items-center text-xs text-text-secondary">
                <FiClock className="mr-1.5 w-3 h-3"/> 
                {new Date(task.created_at).toLocaleDateString()}
             </div>
          </div>
          {canEdit && (
            <div className="mt-3 pt-2 border-t border-border flex justify-end space-x-2 opacity-0 group-hover:opacity-100 transition-opacity">
              {status !== 'todo' && <button onClick={() => onMove(task, 'todo')} className="text-xs bg-surface border border-border hover:bg-indigo-100 dark:hover:bg-indigo-900/30 text-text-secondary hover:text-indigo-500 px-2 py-1 rounded transition-colors">To Do</button>}
              {status !== 'in_progress' && <button onClick={() => onMove(task, 'in_progress')} className="text-xs bg-surface border border-border hover:bg-blue-100 dark:hover:bg-blue-900/30 text-text-secondary hover:text-blue-500 px-2 py-1 rounded transition-colors">Progress</button>}
              {status !== 'done' && <button onClick={() => onMove(task, 'done')} className="text-xs bg-surface border border-border hover:bg-purple-100 dark:hover:bg-purple-900/30 text-text-secondary hover:text-purple-500 px-2 py-1 rounded transition-colors">Done</button>}
            </div>
          )}
        </>
      )}
    </div>
  );
}


================================================
FILE: frontend/src/components/projects/SharedProjectCard.js
================================================
// src/components/projects/SharedProjectCard.js (veya SharedProjectsPage i√ßindeki ilgili kƒ±sƒ±m)
import React from 'react';
import { Link } from 'react-router-dom';
import { FiGlobe, FiUser, FiClock } from 'react-icons/fi';

const SharedProjectCard = ({ project }) => {
  return (
    <Link to={`/project/${project.id}`} className="relative group h-fit">
      <div className="relative p-4 rounded-2xl bg-surface transition-all duration-300 flex flex-col justify-between hover:shadow-xl shadow-sm border-none dark:bg-surface-dark">
        
        <div>
          
          
          <h3 className="text-xl font-bold text-text-main group-hover:text-primary transition-colors truncate mb-1">
            {project.name}
          </h3>
          <p className="text-sm text-text-secondary/80 line-clamp-1 leading-relaxed">
            {project.description || "Public project workspace"}
          </p>
        </div>

        {/* --- ALT ALAN: TARƒ∞H VE SAHƒ∞P (MyProjectsPage ile aynƒ±) --- */}
        <div className="mt-4 pt-3 border-t border-border/50 flex justify-between items-center text-[10px] uppercase tracking-tight">
          <div className="flex flex-col gap-1.5">
            {/* Proje Sahibi - Daha belirgin text-text-main */}
            <span className="flex items-center text-[11px] font-bold text-text-main">
              <FiUser className="mr-1.5 text-xs text-primary" /> 
              {project.owner_name || 'Owner'}
            </span>
            
            {/* Tarih - Opaklƒ±ƒüƒ± kaldƒ±rƒ±lmƒ±≈ü ve formatlanmƒ±≈ü */}
            <span className="flex items-center text-text-secondary font-bold text-[10px]">
              <FiClock className="mr-1.5 text-xs opacity-70" /> 
              {new Date(project.created_at).toLocaleDateString(undefined, { 
                day: 'numeric', 
                month: 'numeric', 
                year: 'numeric' 
              })}
            </span>
          </div>

          <div className="flex items-center px-3 py-1 bg-primary/5 text-primary font-black text-[10px] rounded-lg group-hover:bg-primary group-hover:text-white transition-all">
            VIEW
          </div>
        </div>
      </div>
    </Link>
  );
};

export default SharedProjectCard;


================================================
FILE: frontend/src/context/AuthContext.js
================================================
// src/context/AuthContext.js

import React, { createContext, useState, useEffect, useContext } from 'react';
import api from '../services/api';

const AuthContext = createContext();

export const useAuth = () => useContext(AuthContext);

export const AuthProvider = ({ children }) => {
  const [user, setUser] = useState(null);
  const [token, setToken] = useState(localStorage.getItem('token')); // Ba≈ülangƒ±√ßta depodan oku
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  // Sayfa ilk a√ßƒ±ldƒ±ƒüƒ±nda veya yenilendiƒüinde kullanƒ±cƒ±yƒ± doƒürula
  useEffect(() => {
    const loadUser = async () => {
      const storedToken = localStorage.getItem('token');
      
      if (!storedToken) {
        setLoading(false);
        return;
      }

      try {
        // Token'ƒ± header'a ekle (api.js interceptor yapƒ±yor ama burasƒ± garanti olsun)
        api.defaults.headers.common['x-auth-token'] = storedToken;
        
        // Backend'den "Ben kimim?" sorusunu sor
        const res = await api.get('/api/auth/user');
        
        setUser(res.data);
        setToken(storedToken);
      } catch (err) {
        console.error("Token ge√ßersiz, √ßƒ±kƒ±≈ü yapƒ±lƒ±yor...");
        logout(); // Token bozuksa temizle
      } finally {
        setLoading(false);
      }
    };

    loadUser();
  }, []);

  // --- LOGIN ---
  const login = async (username, password) => {
    setLoading(true);
    setError(null);
    try {
      const res = await api.post('/api/auth/login', { username, password });
      
      // Token ve User verisini al
      const { token, user } = res.data;

      // Depoya kaydet
      localStorage.setItem('token', token);
      
      // State'i g√ºncelle
      setToken(token);
      setUser(user);
      
      return true; // Ba≈üarƒ±lƒ±
    } catch (err) {
      setError(err.response?.data?.message || 'Login failed');
      throw err;
    } finally {
      setLoading(false);
    }
  };

  // --- REGISTER ---
  const register = async (username, email, password) => {
    setLoading(true);
    setError(null);
    try {
      const res = await api.post('/api/auth/register', { username, email, password });
      // Register sonrasƒ± otomatik login yapmƒ±yoruz, kullanƒ±cƒ± login sayfasƒ±na gitsin
      return res.data;
    } catch (err) {
      setError(err.response?.data?.message || 'Registration failed');
      throw err;
    } finally {
      setLoading(false);
    }
  };

  // --- FORGOT PASSWORD ---
  const forgotPassword = async (email) => {
    setLoading(true);
    setError(null);
    try {
      const res = await api.post('/api/auth/forgot-password', { email });
      return res.data;
    } catch (err) {
      setError(err.response?.data?.message || 'Error sending email');
      throw err;
    } finally {
      setLoading(false);
    }
  };

  // --- RESET PASSWORD ---
  const resetPassword = async (token, newPassword) => {
    setLoading(true);
    setError(null);
    try {
      const res = await api.post('/api/auth/reset-password', { token, newPassword });
      return res.data;
    } catch (err) {
      setError(err.response?.data?.message || 'Error resetting password');
      throw err;
    } finally {
      setLoading(false);
    }
  };

  // --- LOGOUT ---
  const logout = () => {
    localStorage.removeItem('token');
    setToken(null);
    setUser(null);
    delete api.defaults.headers.common['x-auth-token'];
  };

  const value = {
    user,
    token,
    loading,
    error,
    login,
    register,
    logout,
    forgotPassword,
    resetPassword
  };

  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;
};


================================================
FILE: frontend/src/context/ProjectContext.js
================================================
import React, { createContext, useState, useContext } from 'react';
import axios from 'axios';
import { useAuth } from './AuthContext';

const API_URL = 'http://localhost:5000/api/projects';

export const ProjectContext = createContext();
export const useProjectContext = () => useContext(ProjectContext);

export const ProjectProvider = ({ children }) => {
  const [projects, setProjects] = useState([]);
  const [currentProject, setCurrentProject] = useState(null);
  const [myProjects, setMyProjects] = useState([]);
  const [sharedProjects, setSharedProjects] = useState([]);
  const [currentMembers, setCurrentMembers] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [dashboardTasks, setDashboardTasks] = useState([]);
  
  const { logout } = useAuth();

  const getAuthHeaders = () => {
    const storedToken = localStorage.getItem('token');
    if (!storedToken) return {}; 
    return { 
        headers: { 
            'x-auth-token': storedToken 
        } 
    };
  };

  const handleError = (err) => {
    const message = err.response?.data?.message || 'Bir hata olu≈ütu.';
    setError(message);
    if (err.response?.status === 401) {
        logout();
    }
  };
  
  const fetchProjects = async () => {
    setLoading(true);
    try {
      const response = await axios.get(API_URL, getAuthHeaders());
      setProjects(response.data);
    } catch (err) { handleError(err); } 
    finally { setLoading(false); }
  };

  const fetchMyProjects = async () => {
    setLoading(true);
    try {
      const response = await axios.get(`${API_URL}/my-projects`, getAuthHeaders());
      setMyProjects(response.data); 
    } catch (err) { handleError(err); } 
    finally { setLoading(false); }
  };

  const fetchSharedProjects = async () => {
    setLoading(true);
    try {
      const response = await axios.get(`${API_URL}/shared-projects`, getAuthHeaders()); 
      setSharedProjects(response.data.projects || response.data); 
    } catch (err) { 
      handleError(err);
    } finally { 
      setLoading(false);
    }
  };

  const createProject = async (name, description) => {
    setLoading(true);
    try {
      const response = await axios.post(API_URL, { name, description }, getAuthHeaders());
      setProjects(prev => [response.data, ...prev]);
      setMyProjects(prev => [response.data, ...prev]);
      return response.data;
    } catch (err) { handleError(err); throw err; } 
    finally { setLoading(false); }
  };

  const fetchProjectById = async (projectId) => {
    setLoading(true);
    try {
      const response = await axios.get(`${API_URL}/${projectId}`, getAuthHeaders());
      setCurrentProject(response.data);
    } catch (err) { handleError(err); } 
    finally { setLoading(false); }
  };

  const updateProjectVisibility = async (projectId, isPublic) => {
    try {
      const response = await axios.put(`${API_URL}/${projectId}/visibility`, { is_public: isPublic }, getAuthHeaders());
      setCurrentProject(response.data);
      return response.data; 
    } catch (err) { handleError(err); throw err; }
  };

  const fetchDashboardTasks = async () => {
    setLoading(true);
    try {
      const response = await axios.get(`${API_URL}/user/all-tasks`, getAuthHeaders());
      setDashboardTasks(response.data);
    } catch (err) { handleError(err); } 
    finally { setLoading(false); }
  };

  const fetchTasks = async (projectId) => {
    try {
      const response = await axios.get(`${API_URL}/${projectId}/tasks`, getAuthHeaders());
      return response.data;
    } catch (err) { if(err.response?.status !== 403) handleError(err); }
  };

  const createTask = async (projectId, taskData) => {
    try {
      const response = await axios.post(`${API_URL}/${projectId}/tasks`, taskData, getAuthHeaders());
      return response.data;
    } catch (err) { handleError(err); }
  };

  const updateTaskStatus = async (projectId, taskId, newStatus) => {
    try {
      const response = await axios.put(`${API_URL}/${projectId}/tasks/${taskId}`, { status: newStatus }, getAuthHeaders());
      return response.data;
    } catch (err) { handleError(err); }
  };

  const updateTask = async (projectId, taskId, data) => {
    try {
      const response = await axios.put(`${API_URL}/${projectId}/tasks/${taskId}`, data, getAuthHeaders());
      return response.data;
    } catch (err) { handleError(err); throw err; }
  };

  const deleteTask = async (projectId, taskId) => {
    try {
      await axios.delete(`${API_URL}/${projectId}/tasks/${taskId}`, getAuthHeaders());
      return true;
    } catch (err) { handleError(err); throw err; }
  };

  const fetchMembers = async (projectId) => {
    try {
        const response = await axios.get(`${API_URL}/${projectId}/members`, getAuthHeaders());
        setCurrentMembers(response.data);
        return response.data;
    } catch (err) { handleError(err); }
  };

  const addMember = async (projectId, username, role) => {
    try {
        const response = await axios.post(`${API_URL}/${projectId}/members`, { username, role }, getAuthHeaders());
        setCurrentMembers(prev => [...prev, response.data]);
        return response.data;
    } catch (err) { handleError(err); throw err; }
  };

  const removeMember = async (projectId, userId) => {
    try {
        await axios.delete(`${API_URL}/${projectId}/members/${userId}`, getAuthHeaders());
        setCurrentMembers(prev => prev.filter(m => m.id !== userId));
        return true;
    } catch (err) { handleError(err); throw err; }
  };

 const updateMemberRole = async (projectId, userId, newRole) => {
  try {
    const response = await axios.put(`${API_URL}/${projectId}/members/${userId}`, {
      role: newRole
    }, getAuthHeaders());

    setCurrentMembers(prev => 
      prev.map(m => m.id === userId ? { ...m, role: newRole } : m)
    );

    return response.data;
  } catch (err) {
    handleError(err);
    throw err;
  }
};

  const updateProjectDetails = async (projectId, name, description, longDescription) => {
    try {
        const response = await axios.put(`${API_URL}/${projectId}`, { name, description, long_description: longDescription }, getAuthHeaders());
        setCurrentProject(response.data);
        return response.data;
    } catch (err) { handleError(err); throw err; }
  };

  const updateTasksVisibility = async (projectId, isPublic) => {
    try {
        const response = await axios.put(`${API_URL}/${projectId}/settings/tasks-visibility`, { is_tasks_public: isPublic }, getAuthHeaders());
        setCurrentProject(prev => ({...prev, is_tasks_public: response.data.is_tasks_public}));
    } catch (err) { handleError(err); }
  };

  const deleteProject = async (projectId) => {
    try {
      await axios.delete(`${API_URL}/${projectId}`, getAuthHeaders());
      setMyProjects(prev => prev.filter(p => p.id !== projectId));
      setProjects(prev => prev.filter(p => p.id !== projectId));
      return true;
    } catch (err) { handleError(err); throw err; }
  };

  const fetchIssues = async (projectId) => {
    try { return (await axios.get(`${API_URL}/${projectId}/issues`, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const createIssue = async (projectId, text) => {
    try { return (await axios.post(`${API_URL}/${projectId}/issues`, {text}, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const updateIssue = async (projectId, issueId, data) => {
    try { return (await axios.put(`${API_URL}/${projectId}/issues/${issueId}`, data, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const fetchComments = async (projectId) => {
    try { return (await axios.get(`${API_URL}/${projectId}/comments`, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const addComment = async (projectId, text) => {
    try { return (await axios.post(`${API_URL}/${projectId}/comments`, {text}, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const likeComment = async (projectId, commentId) => {
    try { return (await axios.post(`${API_URL}/${projectId}/comments/${commentId}/like`, {}, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const deleteComment = async (projectId, commentId) => {
    try { await axios.delete(`${API_URL}/${projectId}/comments/${commentId}`, getAuthHeaders()); return true; } catch (e) { handleError(e); }
  };
  const editComment = async (projectId, commentId, text) => {
    try { return (await axios.put(`${API_URL}/${projectId}/comments/${commentId}`, {text}, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const fetchIssueComments = async (projectId, issueId) => {
    try { return (await axios.get(`${API_URL}/${projectId}/issues/${issueId}/comments`, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const addIssueComment = async (projectId, issueId, text) => {
    try { return (await axios.post(`${API_URL}/${projectId}/issues/${issueId}/comments`, {text}, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  const fetchFiles = async (projectId) => {
    try { return (await axios.get(`${API_URL}/${projectId}/files`, getAuthHeaders())).data; } catch (e) { handleError(e); }
  };
  
  // G√úNCELLENEN KISIM:
  const uploadFile = async (projectId, file) => {
    try { 
        const fd = new FormData(); fd.append('file', file);
        return (await axios.post(`${API_URL}/${projectId}/files`, fd, { headers: { ...getAuthHeaders().headers, 'Content-Type': 'multipart/form-data'} })).data; 
    } catch (e) { 
        handleError(e); 
        throw e; // HATAYI FIRLAT (B√∂ylece bile≈üen haberdar olur)
    }
  };
  
  const deleteFile = async (projectId, fileId) => {
    try { await axios.delete(`${API_URL}/${projectId}/files/${fileId}`, getAuthHeaders()); return true; } catch (e) { handleError(e); }
  };

  const value = {
    projects, currentProject, myProjects, sharedProjects, loading, error, dashboardTasks, currentMembers,
    fetchProjects, fetchMyProjects, fetchSharedProjects, createProject, fetchProjectById, updateProjectVisibility,
    fetchDashboardTasks, fetchTasks, createTask, updateTaskStatus, updateTask, deleteTask,
    fetchMembers, addMember, removeMember, updateProjectDetails, updateTasksVisibility, updateMemberRole, deleteProject,
    fetchIssues, createIssue, updateIssue, fetchComments, addComment, likeComment, deleteComment, editComment,
    fetchIssueComments, addIssueComment, fetchFiles, uploadFile, deleteFile
  };

  return (
    <ProjectContext.Provider value={value}>{children}</ProjectContext.Provider>
  );
};


================================================
FILE: frontend/src/context/ThemeContext.js
================================================
import React, { createContext, useContext, useState, useEffect } from 'react';

const ThemeContext = createContext();

export const useTheme = () => useContext(ThemeContext);

export const ThemeProvider = ({ children }) => {
  // Ba≈ülangƒ±√ßta localStorage'a bak, yoksa 'dark' olarak ba≈ülat (Siz ≈üu an dark kullanƒ±yorsunuz)
  const [theme, setTheme] = useState(localStorage.getItem('theme') || 'dark');

  useEffect(() => {
    const root = window.document.documentElement;
    
    // Eski class'ƒ± temizle
    root.classList.remove('light', 'dark');
    
    // Yeni class'ƒ± ekle
    root.classList.add(theme);
    
    // LocalStorage'a kaydet
    localStorage.setItem('theme', theme);
  }, [theme]);

  const toggleTheme = (newTheme) => {
    setTheme(newTheme);
  };

  return (
    <ThemeContext.Provider value={{ theme, toggleTheme }}>
      {children}
    </ThemeContext.Provider>
  );
};


================================================
FILE: frontend/src/pages/AdminProjects.js
================================================
// src/pages/AdminProjects.js
import React, { useState, useEffect } from 'react';
import api from '../services/api';
import { 
  FiBox, FiSearch, FiMoreVertical, FiTrash2, FiExternalLink, FiChevronLeft, FiChevronRight, FiLoader, FiLayers 
} from 'react-icons/fi';

function AdminProjects() {
  const [projects, setProjects] = useState([]);
  const [loading, setLoading] = useState(true);
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const [openMenuId, setOpenMenuId] = useState(null);
  const itemsPerPage = 6;

  useEffect(() => { fetchAllProjects(); }, []);

  const fetchAllProjects = async () => {
    setLoading(true);
    try {
      const response = await api.get('/api/projects/admin/all-projects');
      setProjects(Array.isArray(response.data) ? response.data : []);
    } catch (err) { console.error("Projects Fetch Error:", err); } 
    finally { setLoading(false); }
  };

  const handleDeleteProject = async (project) => {
    if (!window.confirm(`Are you sure you want to delete project "${project.name}"?`)) return;
    try {
      await api.delete(`/api/projects/${project.id}`);
      setOpenMenuId(null);
      fetchAllProjects();
    } catch (err) { alert("Delete failed."); }
  };

  // --- Helper: Dosya Boyutu Formatlama ---
  const formatTotalSize = (bytes) => {
    // Gelen deƒüeri sayƒ±ya √ßevir (Backend bazen string g√∂nderir)
    const value = Number(bytes);

    // Eƒüer deƒüer yoksa, hatalƒ±ysa (NaN) veya 0 ise direkt '0 B' d√∂nd√ºr
    if (!value || isNaN(value) || value === 0) {
        return '0 B';
    }

    const k = 1024;
    const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];
    const i = Math.floor(Math.log(value) / Math.log(k));
    
    return parseFloat((value / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
  };

  const filteredData = projects.filter(p => {
    const searchLower = searchTerm.toLowerCase();
    const visibilityText = p.is_public ? 'public' : 'private'; 

    return (
      p.name?.toLowerCase().includes(searchLower) || 
      p.owner_name?.toLowerCase().includes(searchLower) ||
      visibilityText.includes(searchLower) 
    );
  });
  
  const totalPages = Math.max(Math.ceil(filteredData.length / itemsPerPage), 1);
  const currentItems = filteredData.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage);

  return (
    <div className="flex flex-col h-[calc(100vh-140px)] p-4 pb-0 bg-app transition-colors duration-300 overflow-hidden">
      <div className="max-w-7xl mx-auto w-full h-full flex flex-col">
        
        {/* HEADER SECTION */}
        <div className="flex-none flex justify-between items-center mb-4">
          <h1 className="text-2xl font-black text-text-main tracking-tight flex items-center">
            <FiLayers className="mr-3 text-primary" /> Project Management
          </h1>
        </div>

        {/* SEARCH BAR */}
        <div className="flex-none bg-surface p-2 rounded-2xl border border-border shadow-sm mb-4 dark:bg-surface-dark/40">
          <div className="relative group max-w-md">
            <FiSearch className="absolute left-3 top-3 text-text-secondary transition-colors" />
            <input 
              type="text" placeholder="Search projects..." value={searchTerm}
              onChange={(e) => { setSearchTerm(e.target.value); setCurrentPage(1); }}
              className="w-full bg-app border border-border text-text-main text-base rounded-xl pl-10 py-2 outline-none focus:border-primary transition-all dark:bg-black/20"
            />
          </div>
        </div>

        {/* TABLE AREA */}
        <div className="flex-grow bg-surface rounded-2xl border border-border shadow-sm overflow-hidden flex flex-col mb-4">
          <div className="overflow-x-auto flex-1 custom-scrollbar">
            {loading ? <div className="flex justify-center p-20"><FiLoader className="animate-spin text-primary" size={40} /></div> : (
              <table className="w-full text-left text-text-secondary">
                <thead className="bg-app/80 text-[11px] uppercase text-text-secondary font-black border-b border-border sticky top-0 z-10 backdrop-blur-sm">
                  <tr>
                    <th className="px-6 py-4 tracking-widest">Project Name</th>
                    <th className="px-6 py-4 tracking-widest">Owner</th>
                    <th className="px-6 py-4 tracking-widest">Visibility</th>
                    {/* YENƒ∞ S√úTUN BA≈ûLIƒûI */}
                    <th className="px-6 py-4 text-right tracking-widest">Total Size</th>
                    <th className="px-6 py-4 text-right tracking-widest">Updated</th>
                    <th className="px-6 py-4 w-10"></th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-border text-sm">
                  {currentItems.map((item) => (
                    <tr key={item.id} className="hover:bg-surface-hover transition-colors">
                      <td className="px-6 py-3 font-bold text-text-main">{item.name}</td>
                      <td className="px-6 py-3 text-xs font-bold">{item.owner_name}</td>
                      <td className="px-6 py-3">
                        <span className={`text-[10px] font-black px-2 py-0.5 rounded border ${item.is_public ? 'bg-green-500/10 text-green-500 border-green-500/20' : 'bg-amber-500/10 text-amber-500 border-amber-500/20'}`}>
                          {item.is_public ? 'PUBLIC' : 'PRIVATE'}
                        </span>
                      </td>
                      {/* YENƒ∞ S√úTUN VERƒ∞Sƒ∞ */}
                      <td className="px-6 py-3 text-right text-xs font-mono font-bold text-text-main opacity-80">
                        {formatTotalSize(item.total_size)}
                      </td>
                      <td className="px-6 py-3 text-right text-xs font-bold opacity-40">
                        {new Date(item.updated_at || item.created_at).toLocaleDateString()}
                      </td>
                      <td className="px-6 py-3 relative">
                        <button onClick={() => setOpenMenuId(openMenuId === item.id ? null : item.id)} className="p-2 rounded-lg hover:bg-surface-hover text-text-secondary transition-colors"><FiMoreVertical size={16} /></button>
                        {openMenuId === item.id && (
                          <div className="absolute right-8 top-2 w-40 bg-surface border border-border rounded-xl shadow-2xl z-50 py-1 overflow-hidden">
                            <button onClick={() => window.open(`/project/${item.id}`, '_blank')} className="w-full text-left px-4 py-2 text-xs font-bold text-text-main hover:bg-surface-hover flex items-center border-none transition-colors"><FiExternalLink className="mr-2"/> VIEW PROJECT</button>
                            <button onClick={() => handleDeleteProject(item)} className="w-full text-left px-4 py-2 text-xs font-bold text-red-500 hover:bg-red-500/10 flex items-center border-none transition-colors"><FiTrash2 className="mr-2"/> DELETE</button>
                          </div>
                        )}
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            )}
          </div>
        </div>

        {/* PAGINATION BAR */}
        <div className="flex-none pb-4">
          <div className="flex justify-between items-center bg-surface p-3 border border-border rounded-xl shadow-sm dark:bg-surface-dark/60 backdrop-blur-md">
            <span className="text-xs text-text-secondary font-bold uppercase tracking-widest opacity-60">
              {filteredData.length > 0 ? `Showing ${((currentPage - 1) * itemsPerPage) + 1} - ${Math.min(currentPage * itemsPerPage, filteredData.length)} / ${filteredData.length}` : "Showing 0 / 0"}
            </span>
            <div className="flex items-center gap-2">
              <button onClick={() => setCurrentPage(currentPage - 1)} disabled={currentPage === 1} className="p-2 rounded-lg bg-app border border-border hover:bg-surface-hover text-text-secondary disabled:opacity-20 transition-all"><FiChevronLeft size={18}/></button>
              <button onClick={() => setCurrentPage(currentPage + 1)} disabled={currentPage === totalPages || totalPages === 0} className="p-2 rounded-lg bg-app border border-border hover:bg-surface-hover text-text-secondary disabled:opacity-20 transition-all"><FiChevronRight size={18}/></button>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

export default AdminProjects;


================================================
FILE: frontend/src/pages/AdminUsers.js
================================================
// src/pages/AdminUsers.js
import React, { useState, useEffect } from 'react';
import api from '../services/api';
import { 
  FiUserPlus, FiMoreVertical, FiEdit2, FiTrash2, FiChevronLeft, FiChevronRight, FiX, FiSearch, FiUsers, FiLoader 
} from 'react-icons/fi';

function AdminUsers() {
  const [users, setUsers] = useState([]);
  const [loading, setLoading] = useState(true);
  const [currentPage, setCurrentPage] = useState(1);
  const [searchTerm, setSearchTerm] = useState(""); 
  const [openMenuId, setOpenMenuId] = useState(null);
  const [showModal, setShowModal] = useState(false);
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [selectedItem, setSelectedItem] = useState(null);
  const [formData, setFormData] = useState({ username: '', email: '', password: '', role: 'student' });
  const itemsPerPage = 7;

  useEffect(() => { fetchUsers(); }, []);

  const fetchUsers = async () => {
    setLoading(true);
    try {
      const response = await api.get('/api/auth/users');
      setUsers(response.data.sort((a, b) => new Date(b.created_at) - new Date(a.created_at)));
    } catch (err) { console.error(err); } finally { setLoading(false); }
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsSubmitting(true);
    try {
      if (selectedItem) await api.put(`/api/auth/users/${selectedItem.id}`, formData);
      else await api.post('/api/auth/register', formData);
      fetchUsers();
      setShowModal(false);
    } catch (err) { alert("Operation failed."); } finally { setIsSubmitting(false); }
  };

  const handleDeleteUser = async (user) => {
    if (!window.confirm(`Delete ${user.username}?`)) return;
    try {
      await api.delete(`/api/auth/users/${user.id}`);
      fetchUsers();
    } catch (err) { alert("Delete failed."); }
  };

  const filteredData = users.filter(u => u.username?.toLowerCase().includes(searchTerm.toLowerCase()) || u.email?.toLowerCase().includes(searchTerm.toLowerCase()));
  const currentItems = filteredData.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage);
  const totalPages = Math.max(Math.ceil(filteredData.length / itemsPerPage), 1);

  return (
    <div className="flex flex-col h-[calc(100vh-140px)] p-4 pb-0 bg-app transition-colors duration-300 overflow-hidden">
      <div className="max-w-7xl mx-auto w-full h-full flex flex-col">
        
        {/* HEADER SECTION */}
        <div className="flex-none flex justify-between items-center mb-4">
          <h1 className="text-2xl font-black text-text-main tracking-tight flex items-center">
            <FiUsers className="mr-3 text-primary" /> User Management
          </h1>
          <button onClick={() => { setSelectedItem(null); setFormData({ username: '', email: '', password: '', role: 'student' }); setShowModal(true); }} className="bg-primary hover:opacity-90 text-white font-bold py-2 px-6 rounded-xl shadow-lg transition-all transform hover:scale-105 active:scale-95 flex items-center text-sm border-none">
            <FiUserPlus className="mr-2" /> Add User
          </button>
        </div>

        {/* SEARCH BAR */}
        <div className="flex-none bg-surface p-2 rounded-2xl border border-border shadow-sm mb-4 dark:bg-surface-dark/40">
          <div className="relative group max-w-md">
            <FiSearch className="absolute left-3 top-3 text-text-secondary transition-colors" />
            <input 
              type="text" placeholder="Search users..." value={searchTerm}
              onChange={(e) => { setSearchTerm(e.target.value); setCurrentPage(1); }}
              className="w-full bg-app border border-border text-text-main text-base rounded-xl pl-10 py-2 outline-none focus:border-primary transition-all dark:bg-black/20"
            />
          </div>
        </div>

        {/* TABLE AREA */}
        <div className="flex-grow bg-surface rounded-2xl border border-border shadow-sm overflow-hidden flex flex-col mb-4">
          <div className="overflow-x-auto flex-1 custom-scrollbar">
            {loading ? <div className="flex justify-center p-20"><FiLoader className="animate-spin text-primary" size={40} /></div> : (
              <table className="w-full text-left">
                <thead className="bg-app/80 text-[11px] uppercase text-text-secondary font-black border-b border-border sticky top-0 z-10 backdrop-blur-sm">
                  <tr><th className="px-6 py-4">User Details</th><th className="px-6 py-4">Role</th><th className="px-6 py-4 text-right">Joined</th><th className="px-6 py-4 w-10"></th></tr>
                </thead>
                <tbody className="divide-y divide-border text-sm">
                  {currentItems.map((u) => (
                    <tr key={u.id} className="hover:bg-surface-hover transition-colors">
                      <td className="px-6 py-3 flex items-center">
                        <div className="w-9 h-9 rounded-full bg-primary/10 text-primary flex items-center justify-center font-black mr-3 text-xs">{u.username?.charAt(0).toUpperCase()}</div>
                        <div className="flex flex-col"><span className="font-bold text-text-main leading-none mb-1">{u.username}</span><span className="text-[11px] opacity-60">{u.email}</span></div>
                      </td>
                      <td className="px-6 py-3"><span className={`text-[10px] font-black px-2 py-0.5 rounded border ${u.role === 'admin' ? 'bg-red-500/10 text-red-500 border-red-500/20' : 'bg-blue-500/10 text-blue-500 border-blue-500/20'}`}>{u.role?.toUpperCase()}</span></td>
                      <td className="px-6 py-3 text-right opacity-40 font-bold">{new Date(u.created_at).toLocaleDateString()}</td>
                      <td className="px-6 py-3 relative">
                        <button onClick={() => setOpenMenuId(openMenuId === u.id ? null : u.id)} className="p-2 rounded-lg hover:bg-surface-hover text-text-secondary transition-colors"><FiMoreVertical size={16} /></button>
                        {openMenuId === u.id && (
                          <div className="absolute right-8 top-2 w-32 bg-surface border border-border rounded-xl shadow-2xl z-50 py-1 overflow-hidden">
                            <button onClick={() => { setSelectedItem(u); setFormData({username:u.username, email:u.email, role:u.role, password:''}); setShowModal(true); setOpenMenuId(null); }} className="w-full text-left px-4 py-2 text-xs font-bold text-text-main hover:bg-surface-hover flex items-center border-none transition-colors"><FiEdit2 className="mr-2"/> EDIT</button>
                            <button onClick={() => handleDeleteUser(u)} className="w-full text-left px-4 py-2 text-xs font-bold text-red-500 hover:bg-red-500/10 flex items-center border-none transition-colors"><FiTrash2 className="mr-2"/> DELETE</button>
                          </div>
                        )}
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            )}
          </div>
        </div>

        {/* PAGINATION BAR */}
        <div className="flex-none pb-4">
          <div className="flex justify-between items-center bg-surface p-3 border border-border rounded-xl shadow-sm dark:bg-surface-dark/60 backdrop-blur-md">
            <span className="text-xs text-text-secondary font-bold uppercase tracking-widest opacity-60">
              {filteredData.length > 0 ? `Showing ${((currentPage - 1) * itemsPerPage) + 1} - ${Math.min(currentPage * itemsPerPage, filteredData.length)} / ${filteredData.length}` : "Showing 0 / 0"}
            </span>
            <div className="flex items-center gap-2">
              <button onClick={() => setCurrentPage(currentPage - 1)} disabled={currentPage === 1} className="p-2 rounded-lg bg-app border border-border hover:bg-surface-hover text-text-secondary disabled:opacity-20 transition-all"><FiChevronLeft size={18}/></button>
              <button onClick={() => setCurrentPage(currentPage + 1)} disabled={currentPage === totalPages || totalPages === 0} className="p-2 rounded-lg bg-app border border-border hover:bg-surface-hover text-text-secondary disabled:opacity-20 transition-all"><FiChevronRight size={18}/></button>
            </div>
          </div>
        </div>
      </div>

      {showModal && (
        <div className="fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm">
          <div className="bg-surface border border-border rounded-2xl w-full max-w-md p-8 relative">
            <button onClick={() => setShowModal(false)} className="absolute top-6 right-6 text-text-secondary border-none bg-transparent cursor-pointer"><FiX size={20}/></button>
            <h2 className="text-xl font-black mb-6 text-text-main uppercase tracking-tight">{selectedItem ? 'Update User' : 'New User'}</h2>
            <form onSubmit={handleSubmit} className="space-y-4">
              <input value={formData.username} onChange={(e)=>setFormData({...formData, username:e.target.value})} className="w-full py-3 px-4 bg-app border border-border rounded-xl text-text-main outline-none focus:border-primary" placeholder="Username"/>
              <input value={formData.email} onChange={(e)=>setFormData({...formData, email:e.target.value})} className="w-full py-3 px-4 bg-app border border-border rounded-xl text-text-main outline-none focus:border-primary" placeholder="Email"/>
              <input type="password" value={formData.password} onChange={(e)=>setFormData({...formData, password:e.target.value})} className="w-full py-3 px-4 bg-app border border-border rounded-xl text-text-main outline-none focus:border-primary" placeholder="Password"/>
              <select value={formData.role} onChange={(e)=>setFormData({...formData, role:e.target.value})} className="w-full py-3 px-4 bg-app border border-border rounded-xl text-text-main outline-none focus:border-primary">
                <option value="student">Student</option>
                <option value="admin">Admin</option>
              </select>
              <button type="submit" disabled={isSubmitting} className="w-full bg-primary text-white font-black rounded-xl py-3 mt-4 transition-all hover:opacity-90 border-none cursor-pointer uppercase text-xs tracking-widest">{isSubmitting ? 'Saving...' : 'Save'}</button>
            </form>
          </div>
        </div>
      )}
    </div>
  );
}

export default AdminUsers;


================================================
FILE: frontend/src/pages/DashboardLayout.js
================================================
// src/pages/DashboardLayout.js

import React, { useState } from 'react';
import { Outlet, useLocation } from 'react-router-dom';
import Sidebar from '../components/layout/Sidebar';
import Header from '../components/layout/Header';
import RightSidebar from '../components/layout/RightSidebar';
import { FiInfo} from 'react-icons/fi';

function DashboardLayout() {
  const location = useLocation();
  
  // Sol Sidebar: Varsayƒ±lan a√ßƒ±k
  const [isLeftCollapsed, setIsLeftCollapsed] = useState(false);
  
  // Saƒü Sidebar: Varsayƒ±lan kapalƒ±
  const [isRightOpen, setIsRightOpen] = useState(false);

  // --- SAYFA KONTROLLERƒ∞ ---
  // Saƒü sidebar a√ßma butonu sadece proje sayfasƒ±nda ve users sayfasƒ±nda g√∂r√ºnmeli
  const isProjectPage = location.pathname.startsWith('/project/');
  const isUsersPage = location.pathname === '/users';
  const shouldShowToggleButton = isProjectPage || isUsersPage;

  return (
    // 1. ANA KAPSAYICI
    <div className="flex h-screen flex-col bg-app text-text-main overflow-hidden font-sans">
      
      {/* 2. HEADER */}
      <div className="z-50 shadow-md">
        <Header />
      </div>

      {/* 3. G√ñVDE KAPSAYICISI */}
      <div className="flex flex-1 overflow-hidden relative">
        
        {/* SOL SIDEBAR */}
        <Sidebar 
          isCollapsed={isLeftCollapsed} 
          toggleSidebar={() => setIsLeftCollapsed(!isLeftCollapsed)} 
        />

        {/* ORTA ƒ∞√áERƒ∞K ALANI (MAIN) */}
        <main className="flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-transparent relative">
          <Outlet />

          {/* SAƒû SIDEBAR KAPALIYSA VE DOƒûRU SAYFADAYSAK GERƒ∞ A√áMA BUTONU */}
          {shouldShowToggleButton && !isRightOpen && (
            <button
              onClick={() => setIsRightOpen(true)}
              className="fixed bottom-5 right-5 z-40 p-2 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-500 transition-all animate-bounce-slow"
              title="Open Right Panel"
            >
              <FiInfo size={20} />
            </button>
          )}
        </main>

        {/* SAƒû SIDEBAR */}
        <RightSidebar 
          isOpen={isRightOpen} 
          toggleSidebar={() => setIsRightOpen(!isRightOpen)} 
        />
        
      </div>

    </div>
  );
}

export default DashboardLayout;


================================================
FILE: frontend/src/pages/DashboardOverviewPage.js
================================================
// src/pages/DashboardOverviewPage.js

import React, { useEffect, useState, useMemo } from 'react';
import { useProjectContext } from '../context/ProjectContext';
import { useAuth } from '../context/AuthContext';
import { Link } from 'react-router-dom';
import api from '../services/api';
import { 
  FiFolder, FiCheckSquare, FiClock, FiArrowRight, 
  FiActivity, FiUsers, FiGlobe, FiLock, FiUserPlus, FiPlusCircle 
} from 'react-icons/fi';

function DashboardOverviewPage() {
  const { user } = useAuth();
  const { 
    myProjects, sharedProjects, 
    dashboardTasks, fetchDashboardTasks, 
    fetchMyProjects, fetchSharedProjects,
    loading 
  } = useProjectContext();

  const [adminStats, setAdminStats] = useState({ users: [], allProjects: [], loading: false });
  const isAdmin = user?.role === 'admin';

  useEffect(() => {
    fetchMyProjects();
    fetchSharedProjects();
    if (!isAdmin) fetchDashboardTasks();
    
    if (isAdmin) {
      fetchAdminData();
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [isAdmin]);

  const fetchAdminData = async () => {
    setAdminStats(prev => ({ ...prev, loading: true }));
    try {
      const [usersRes, projectsRes] = await Promise.all([
        api.get('/api/auth/users'),
        api.get('/api/projects/admin/all-projects')
      ]);
      setAdminStats({
        users: usersRes.data,
        allProjects: projectsRes.data,
        loading: false
      });
    } catch (err) {
      console.error("Admin data fetch error:", err);
      setAdminStats(prev => ({ ...prev, loading: false }));
    }
  };

  // --- MANTIKSAL VERƒ∞LER ---
  const allProjects = [...myProjects, ...sharedProjects];
  const recentProjects = allProjects
    .sort((a, b) => new Date(b.last_updated_at || b.created_at) - new Date(a.last_updated_at || a.created_at))
    .slice(0, 4);

  const activeTasks = dashboardTasks ? dashboardTasks.filter(task => task.status !== 'done') : [];

  // Admin i√ßin son veriler
  const latestUsers = [...adminStats.users].slice(0, 5);
  const latestAllProjects = [...adminStats.allProjects].slice(0, 5);

  // --- RENDER FUNCTIONS ---

  const renderAdminDashboard = () => (
    <div className="space-y-8 animate-fade-in">
      {/* 1. ƒ∞statistik Kartlarƒ± */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
        <StatCard 
          icon={<FiUsers size={24}/>} 
          title="Total Users" 
          count={adminStats.users.length} 
          color="bg-blue-500" 
        />
        <StatCard 
          icon={<FiFolder size={24}/>} 
          title="Total Projects" 
          count={adminStats.allProjects.length} 
          color="bg-purple-500" 
        />
        <StatCard 
          icon={<FiActivity size={24}/>} 
          title="System Status" 
          count="Active" 
          color="bg-green-500" 
        />
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
        {/* Son Katƒ±lan √úyeler */}
        <div className="bg-surface border border-border rounded-2xl overflow-hidden shadow-sm">
          <div className="p-5 border-b border-border flex justify-between items-center bg-app/50">
            <h3 className="font-bold text-text-main flex items-center gap-2">
              <FiUserPlus className="text-blue-500" /> Recently Joined Members
            </h3>
            <Link to="/admin-users" className="text-xs text-primary font-bold hover:underline">View All</Link>
          </div>
          <div className="p-2">
            {adminStats.loading ? <div className="p-4 animate-pulse space-y-2"><div className="h-10 bg-app rounded"></div></div> : latestUsers.map(u => (
              <div key={u.id} className="flex items-center justify-between p-3 hover:bg-app/50 rounded-xl transition-colors">
                <div className="flex items-center gap-3">
                  <div className="w-8 h-8 rounded-full bg-primary/10 text-primary flex items-center justify-center font-bold text-xs">
                    {u.username.charAt(0).toUpperCase()}
                  </div>
                  <div>
                    <p className="text-sm font-bold text-text-main">{u.username}</p>
                    <p className="text-[10px] text-text-secondary">{u.email}</p>
                  </div>
                </div>
                <span className="text-[10px] text-text-secondary font-mono">{new Date(u.created_at).toLocaleDateString()}</span>
              </div>
            ))}
          </div>
        </div>

        {/* Son A√ßƒ±lan Projeler */}
        <div className="bg-surface border border-border rounded-2xl overflow-hidden shadow-sm">
          <div className="p-5 border-b border-border flex justify-between items-center bg-app/50">
            <h3 className="font-bold text-text-main flex items-center gap-2">
              <FiPlusCircle className="text-purple-500" /> Recently Created Projects
            </h3>
            <Link to="/admin-projects" className="text-xs text-primary font-bold hover:underline">Manage All</Link>
          </div>
          <div className="p-2">
            {adminStats.loading ? <div className="p-4 animate-pulse space-y-2"><div className="h-10 bg-app rounded"></div></div> : latestAllProjects.map(p => (
              <div key={p.id} className="flex items-center justify-between p-3 hover:bg-app/50 rounded-xl transition-colors">
                <div className="flex items-center gap-3">
                  <div className="p-2 bg-purple-500/10 text-purple-500 rounded-lg"><FiFolder size={16}/></div>
                  <div>
                    <p className="text-sm font-bold text-text-main">{p.name}</p>
                    <p className="text-[10px] text-text-secondary">Owner: {p.owner_name}</p>
                  </div>
                </div>
                <Link to={`/project/${p.id}`} className="p-1.5 hover:bg-primary/10 text-primary rounded-lg transition-colors">
                  <FiArrowRight size={16} />
                </Link>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  );

  const renderStudentDashboard = () => (
    <div className="space-y-8 animate-fade-in">
        {/* RECENT PROJECTS */}
        <div>
            <div className="flex items-center justify-between mb-4">
                <h2 className="text-xl font-bold text-text-main flex items-center">
                    <FiClock className="mr-2 text-purple-500" /> Recent Projects
                </h2>
                <Link to="/my-projects" className="text-sm text-primary hover:opacity-80 font-bold flex items-center transition-opacity">
                    View All <FiArrowRight className="ml-1"/>
                </Link>
            </div>

            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                {recentProjects.map(project => (
                    <Link key={project.id} to={`/project/${project.id}`} className="group">
                        <div className="bg-surface h-full p-5 rounded-2xl border border-border hover:border-primary hover:shadow-xl transition-all duration-300 flex flex-col justify-between">
                            <div>
                                <div className="flex justify-between items-start mb-3">
                                    <div className="p-2 bg-primary/10 rounded-xl text-primary group-hover:bg-primary group-hover:text-white transition-all">
                                        <FiFolder size={20} />
                                    </div>
                                    {project.is_public ? <FiGlobe size={14} className="text-text-secondary/40"/> : <FiLock size={14} className="text-text-secondary/40"/>}
                                </div>
                                <h3 className="font-bold text-text-main mb-1 truncate">{project.name}</h3>
                                <p className="text-xs text-text-secondary line-clamp-2 h-8">{project.description || "No description."}</p>
                            </div>
                            <div className="mt-4 pt-3 border-t border-border flex items-center justify-between text-[10px] font-bold text-text-secondary uppercase tracking-tighter">
                                <span>{new Date(project.last_updated_at || project.created_at).toLocaleDateString()}</span>
                                <FiArrowRight className="group-hover:translate-x-1 transition-transform text-primary" size={14}/>
                            </div>
                        </div>
                    </Link>
                ))}
            </div>
        </div>

        {/* TASKS SUMMARY */}
        <div className="bg-surface rounded-2xl border border-border overflow-hidden shadow-sm">
          <div className="p-6 border-b border-border flex justify-between items-center">
            <h2 className="text-xl font-bold text-text-main flex items-center">
              <FiCheckSquare className="mr-2 text-blue-500" /> Your Active Tasks
            </h2>
          </div>
          <div className="overflow-x-auto">
            {activeTasks.length === 0 ? (
                <div className="p-10 text-center text-text-secondary italic">No active tasks found.</div>
            ) : (
                <table className="w-full text-left">
                  <thead className="bg-app/50 text-text-secondary text-[10px] uppercase font-black tracking-widest border-b border-border">
                    <tr>
                      <th className="p-4">Task</th>
                      <th className="p-4">Project</th>
                      <th className="p-4 text-right">Action</th>
                    </tr>
                  </thead>
                  <tbody className="divide-y divide-border">
                    {activeTasks.slice(0, 6).map(task => (
                      <tr key={task.id} className="hover:bg-app/30 transition-colors">
                        <td className="p-4 font-bold text-text-main text-sm">{task.title}</td>
                        <td className="p-4 text-xs text-text-secondary font-medium">{task.project_name}</td>
                        <td className="p-4 text-right">
                          <Link to={`/project/${task.project_id}/tasks`} className="text-primary hover:underline text-xs font-black">VIEW</Link>
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
            )}
          </div>
        </div>
    </div>
  );

  return (
    <div className="pb-10">
      <div className="flex flex-col mb-8">
        <h1 className="text-3xl font-black text-text-main tracking-tight">
          {isAdmin ? "System Overview" : `Welcome back, ${user?.username}!`}
        </h1>
        <p className="text-text-secondary text-sm mt-1">
          {isAdmin ? "Manage and monitor the entire GazozHub ecosystem." : "Here is what's happening with your projects."}
        </p>
      </div>

      {isAdmin ? renderAdminDashboard() : renderStudentDashboard()}
    </div>
  );
}

// Alt Bile≈üen: Stat Kartƒ±
const StatCard = ({ icon, title, count, color }) => (
  <div className="bg-surface p-6 rounded-2xl border border-border shadow-sm flex items-center gap-5 transition-all hover:shadow-md hover:-translate-y-1">
    <div className={`p-4 rounded-2xl ${color} text-white shadow-lg`}>
      {icon}
    </div>
    <div>
      <p className="text-xs font-bold text-text-secondary uppercase tracking-widest">{title}</p>
      <p className="text-3xl font-black text-text-main tracking-tight">{count}</p>
    </div>
  </div>
);

export default DashboardOverviewPage;


================================================
FILE: frontend/src/pages/ForgotPasswordPage.js
================================================
// src/pages/ForgotPasswordPage.js

import React, { useState } from 'react';
import { useAuth } from '../context/AuthContext';
import { Link } from 'react-router-dom';
import { FiMail, FiLoader, FiArrowLeft } from 'react-icons/fi';
import BackgroundImage from '../assets/background.jpg';
import LogoImage from '../assets/logo.png';

export default function ForgotPasswordPage() {
  const [email, setEmail] = useState('');
  const [message, setMessage] = useState('');
  const [error, setError] = useState('');
  const { forgotPassword, loading } = useAuth();

  const handleSubmit = async (e) => {
    e.preventDefault(); // Sayfa yenilenmesini engeller
    setMessage('');
    setError('');

    if (!email) {
        setError("Please enter your email.");
        return;
    }

    try {
      await forgotPassword(email);
      // Ba≈üarƒ±lƒ± olursa:
      setMessage('Success! Check the backend console/terminal for the reset link.');
    } catch (err) {
      // Hata olursa:
      console.error(err);
      setError('Failed to reset password. User may not exist.');
    }
  };

  return (
    <div 
      className="relative flex items-center justify-center min-h-screen bg-cover bg-center transition-all duration-300"
      style={{ backgroundImage: `url(${BackgroundImage})` }}
    >
      {/* Overlay */}
      <div className="absolute inset-0 z-0 bg-white/30 backdrop-blur-[2px] dark:bg-black/60 transition-colors duration-300"></div>

      <Link 
        to="/home" 
        className="absolute top-8 left-8 z-20 flex items-center text-gray-900 dark:text-white hover:text-blue-600 transition-colors group font-semibold"
      >
        <div className="p-2 bg-white/80 dark:bg-gray-800/80 border border-gray-200 dark:border-gray-700 rounded-full mr-3 shadow-sm backdrop-blur-md">
             <FiArrowLeft size={20} />
        </div>
        <span className="bg-white/50 dark:bg-black/50 px-2 py-1 rounded-md backdrop-blur-sm">Back to Home</span>
      </Link>

      <div className="relative z-10 w-full max-w-md p-8 bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl border border-gray-200 dark:border-gray-700 rounded-2xl shadow-2xl animate-fade-in-up">
        
        {/* LOGO */}
        <div className="flex flex-col items-center justify-center mb-6">
            <img 
                src={LogoImage} 
                alt="Logo" 
                className="h-24 w-24 mb-4 object-contain brightness-0 dark:brightness-100 transition-all" 
            />
            <h1 className="text-4xl font-extrabold text-gray-900 dark:text-white tracking-tight">GazozHub</h1>
        </div>

        {/* METƒ∞NLER (Renkler sabitlendi) */}
        <h2 className="text-lg font-bold text-gray-800 dark:text-gray-200 text-center mb-2 uppercase tracking-widest">Reset Password</h2>
        <p className="text-gray-600 dark:text-gray-400 text-center mb-6 text-sm font-medium">
          Enter your email to receive a reset link.
        </p>
        
        {message && <div className="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4 text-sm font-bold">{message}</div>}
        {error && <div className="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4 text-sm font-bold">{error}</div>}

        <form onSubmit={handleSubmit} className="space-y-6">
          <div className="relative">
            <div className="absolute top-0 left-0 flex items-center h-full pl-3 pointer-events-none">
              <FiMail className="w-5 h-5 text-gray-500 dark:text-gray-400" />
            </div>
            {/* INPUT AYARLARI: bg-white (Light) / bg-gray-800 (Dark) ve text-gray-900 (Light) / text-white (Dark) */}
            <input
              type="email"
              required
              placeholder="Enter your email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              className="w-full py-3 pl-10 pr-4 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors 
                         bg-white dark:bg-gray-800 
                         border-gray-300 dark:border-gray-600 
                         text-gray-900 dark:text-white 
                         placeholder-gray-500 dark:placeholder-gray-400"
            />
          </div>
          
          <button 
            type="submit" // Bu √ßok √∂nemli
            disabled={loading} 
            className="w-full flex justify-center items-center py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold shadow-lg transition-all disabled:opacity-70"
          >
            {loading ? <FiLoader className="animate-spin mr-2" /> : 'Send Reset Link'}
          </button>
        </form>
        <div className="mt-4 text-center">
          <Link to="/login" className="text-blue-600 hover:text-blue-500 text-sm font-bold">Back to Login</Link>
        </div>
      </div>
    </div>
  );
}


================================================
FILE: frontend/src/pages/LandingPage.js
================================================
// src/pages/LandingPage.js
import React from 'react';
import { Link } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';
import { useTheme } from '../context/ThemeContext';
import { 
  FiArrowRight, FiCheckCircle, FiUsers, FiLayout, 
  FiLayers, FiShield, FiSun, FiMoon 
} from 'react-icons/fi';
import BackgroundImage from '../assets/background.jpg';
import LogoImage from '../assets/logo.png';

const LandingPage = () => {
  const { user } = useAuth();
  const { theme, toggleTheme } = useTheme();

  return (
    <div className="min-h-screen font-sans text-text-main relative transition-colors duration-300 bg-surface">
      
      <div className="relative flex flex-col min-h-screen">
        
        {/* --- HERO SECTION --- */}
        <section className="relative min-h-screen flex flex-col px-4 overflow-hidden">
          
          {/* Background - Adjusted opacity for better readability */}
          <div 
            className="absolute inset-0 bg-cover bg-center z-0"
            style={{ backgroundImage: `url(${BackgroundImage})` }}
          >
            <div className="absolute inset-0 bg-white/85 dark:bg-gray-900/85 backdrop-blur-[2px] transition-colors duration-500"></div>
          </div>

          {/* --- TOP NAVIGATION --- */}
          <nav className="relative z-20 container mx-auto px-6 py-6 flex justify-between items-center bg-transparent">
            <div className="flex items-center gap-1">
               <img src={LogoImage} alt="GazozHub Logo" className="h-20 w-20 object-contain drop-shadow-lg brightness-0 dark:brightness-100 transition-all duration-300" />
               <span className="text-3xl font-extrabold tracking-tight text-text-main">GazozHub</span>
            </div>
            
            <div className="flex items-center gap-3">
              <button
                onClick={() => toggleTheme(theme === 'dark' ? 'light' : 'dark')}
                className="relative flex items-center justify-between w-16 h-8 p-1 rounded-full bg-gray-200 dark:bg-gray-700 transition-colors duration-300 focus:outline-none shadow-inner"
                aria-label="Toggle Theme"
              >
                <div
                  className={`absolute w-6 h-6 rounded-full shadow-md transform transition-transform duration-300 flex items-center justify-center ${
                    theme === 'dark' ? 'translate-x-8 bg-indigo-500' : 'translate-x-0 bg-amber-400'
                  }`}
                >
                  {theme === 'dark' ? <FiMoon className="text-white w-4 h-4" /> : <FiSun className="text-white w-4 h-4" />}
                </div>
                <FiSun className={`ml-1 w-4 h-4 ${theme === 'dark' ? 'text-gray-500' : 'opacity-0'}`} />
                <FiMoon className={`mr-1 w-4 h-4 ${theme === 'light' ? 'text-gray-400' : 'opacity-0'}`} />
              </button>

              <div className="hidden md:flex items-center gap-4">
                {user ? (
                  <Link 
                    to="/dashboard" 
                    className="px-6 py-2.5 bg-primary hover:bg-primary-hover text-white font-semibold rounded-full transition-all shadow-lg flex items-center"
                  >
                    Dashboard <FiArrowRight className="ml-2" />
                  </Link>
                ) : (
                  <>
                    <Link to="/login" className="px-4 py-2 text-text-secondary hover:text-text-main font-medium transition-colors">
                      Sign In
                    </Link>
                    <Link to="/register" className="px-6 py-2.5 bg-primary hover:bg-primary-hover text-white font-bold rounded-full transition-all shadow-lg">
                      Get Started
                    </Link>
                  </>
                )}
              </div>
            </div>
          </nav>

          {/* Hero Content */}
          <div className="relative z-10 flex-grow flex flex-col justify-center items-center text-center max-w-5xl mx-auto space-y-8">
            <h1 className="text-6xl md:text-8xl font-black tracking-tight leading-none mb-6 drop-shadow-2xl text-text-main">
              Collaboration <br />
              <span className="text-transparent bg-clip-text bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500">
                Reimagined.
              </span>
            </h1>
            
            {/* --- IMPROVED READABILITY TEXT --- */}
            <p className="text-xl md:text-2xl text-gray-800 dark:text-gray-200 max-w-3xl mx-auto leading-relaxed font-medium mb-10">
              GazozHub connects students, teams, and advisors in one seamless workspace. 
              Manage tasks, track issues, and build amazing things together.
            </p>

            <div className="flex flex-col sm:flex-row justify-center gap-5">
              {user ? (
                <Link to="/dashboard" className="px-10 py-4 bg-primary hover:bg-primary-hover text-white text-xl font-bold rounded-2xl transition-all transform hover:scale-105 shadow-xl flex items-center justify-center">
                  Launch Dashboard <FiArrowRight className="ml-3" />
                </Link>
              ) : (
                <>
                  <Link to="/register" className="px-10 py-4 bg-primary hover:bg-primary-hover text-white text-xl font-bold rounded-2xl transition-all transform hover:scale-105 shadow-xl flex items-center justify-center">
                    Get Started <FiArrowRight className="ml-3" size={24} />
                  </Link>
                  <Link to="/login" className="px-10 py-4 bg-white/50 dark:bg-surface border border-border text-text-main text-xl font-bold rounded-2xl transition-all flex items-center justify-center backdrop-blur-sm">
                    Login
                  </Link>
                </>
              )}
            </div>
          </div>

          <div className="relative z-10 pb-10 animate-bounce text-text-secondary text-center">
            <p className="text-sm font-medium mb-2">Scroll to explore</p>
            <div className="flex justify-center">‚Üì</div>
          </div>
        </section>

        {/* --- FEATURES SECTION --- */}
        <main className="bg-surface relative z-10">
          <div className="py-24 grid grid-cols-1 md:grid-cols-3 gap-8 max-w-7xl w-full mx-auto px-4">
            <FeatureCard 
              icon={<FiLayout className="w-8 h-8" />} 
              title="Kanban Boards" 
              desc="Visualise work with drag-and-drop boards. Move tasks from To Do to Done with ease."
              color="bg-blue-500"
            />
            <FeatureCard 
              icon={<FiUsers className="w-8 h-8" />} 
              title="Team Sync" 
              desc="Real-time collaboration with role-based access control for Editors and Viewers."
              color="bg-purple-500"
            />
            <FeatureCard 
              icon={<FiCheckCircle className="w-8 h-8" />} 
              title="Issue Tracking" 
              desc="Advanced issue tracking system to squash bugs and manage feature requests efficiently."
              color="bg-green-500"
            />
            <FeatureCard 
              icon={<FiLayers className="w-8 h-8" />} 
              title="Project Hub" 
              desc="Centralize all your project files, discussions, and milestones in one place."
              color="bg-pink-500"
            />
            <FeatureCard 
              icon={<FiShield className="w-8 h-8" />} 
              title="Secure & Private" 
              desc="Keep your projects private or share them publicly with granular visibility settings."
              color="bg-yellow-500"
            />
             
             <div className="p-8 rounded-3xl border border-border bg-surface/60 backdrop-blur-md flex flex-col justify-center items-center text-center">
                <h3 className="text-2xl font-bold text-text-main mb-2">And much more...</h3>
                <p className="text-text-secondary">Join GazozHub today to explore all features.</p>
             </div>
          </div>
        </main>

        <footer className="py-8 text-center border-t border-border bg-surface mt-auto">
            <div className="flex items-center justify-center gap-2 mb-2">
              <img src={LogoImage} alt="Logo" className="h-6 w-6 opacity-80" />
              <span className="text-text-secondary font-semibold">GazozHub</span>
            </div>
            <p className="text-text-secondary text-sm">
              &copy; {new Date().getFullYear()} GazozHub. Designed for modern teams.
            </p>
        </footer>
      </div>
    </div>
  );
};

const FeatureCard = ({ icon, title, desc, color }) => (
  <div className="group p-8 rounded-3xl border border-border bg-surface/80 backdrop-blur-md hover:bg-surface hover:border-primary/50 transition-all duration-300 shadow-sm hover:shadow-lg">
    <div className={`w-14 h-14 rounded-2xl ${color} bg-opacity-10 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300`}>
      <div className={`${color.replace('bg-', 'text-')}`}>{icon}</div> 
    </div>
    <h3 className="text-2xl font-bold text-text-main mb-3">{title}</h3>
    <p className="text-text-secondary leading-relaxed">{desc}</p>
  </div>
);

export default LandingPage;


================================================
FILE: frontend/src/pages/LoginPage.js
================================================
// src/pages/LoginPage.js

import React, { useState } from 'react';
import { useNavigate, Link } from 'react-router-dom';
import { FiUser, FiLock, FiArrowLeft, FiLoader } from 'react-icons/fi'; 
import { useAuth } from '../context/AuthContext';
import BackgroundImage from '../assets/background.jpg';
import LogoImage from '../assets/logo.png';

function LoginPage() {
  const [username, setUsername] = useState('');
  const [password, setPassword] = useState('');
  const [localError, setLocalError] = useState(null);
  const navigate = useNavigate();
  const { login, loading } = useAuth();

  const handleSubmit = async (event) => { 
    event.preventDefault(); 
    setLocalError(null);
    if (!username || !password) {
        setLocalError("Please enter all fields.");
        return;
    }
    
    try {
      await login(username, password);
      navigate('/dashboard', { replace: true });
    } catch (err) {
      setLocalError(err.response?.data?.message || "Login failed.");
    }
  };

  return (
    <div 
      className="relative flex items-center justify-center min-h-screen bg-cover bg-center transition-all duration-300"
      style={{ backgroundImage: `url(${BackgroundImage})` }}
    >
      <div className="absolute inset-0 z-0 bg-white/30 backdrop-blur-[2px] dark:bg-black/60 transition-colors duration-300"></div>

      <Link 
        to="/home" 
        className="absolute top-8 left-8 z-20 flex items-center text-gray-900 dark:text-white hover:text-blue-600 transition-colors group font-semibold"
      >
        <div className="p-2 bg-white/80 dark:bg-gray-800/80 border border-gray-200 dark:border-gray-700 rounded-full mr-3 group-hover:bg-white shadow-sm backdrop-blur-md">
             <FiArrowLeft size={20} />
        </div>
        <span className="bg-white/50 dark:bg-black/50 px-2 py-1 rounded-md backdrop-blur-sm">Back to Home</span>
      </Link>

      <div className="relative z-10 w-full max-w-md p-8 space-y-6 bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl border border-gray-200 dark:border-gray-700 rounded-2xl shadow-2xl animate-fade-in-up">
        
        <div className="flex flex-col items-center justify-center mb-6">
            <img 
                src={LogoImage} 
                alt="Logo" 
                className="h-32 w-32 mb-4 object-contain brightness-0 dark:brightness-100 transition-all" 
            />
            <h1 className="text-4xl font-extrabold text-gray-900 dark:text-white tracking-tight">GazozHub</h1>
        </div>
        
        <div className="text-center">
          <h2 className="text-lg font-bold text-gray-600 dark:text-gray-300 uppercase tracking-widest">Sign In</h2>
        </div>
        
        <form className="space-y-6" onSubmit={handleSubmit}>
        
          <div className="relative">
            <div className="absolute top-0 left-0 flex items-center h-full pl-3 pointer-events-none">
              <FiUser className="w-5 h-5 text-gray-500 dark:text-gray-400" />
            </div>
            <input
              id="username"
              name="username"
              type="text"
              required
              
              className="w-full py-3 pl-10 pr-4 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors 
                         bg-white dark:bg-gray-800 
                         border-gray-300 dark:border-gray-600 
                         text-gray-900 dark:text-white 
                         placeholder-gray-500 dark:placeholder-gray-400"
              placeholder="Username"
              value={username}
              onChange={(e) => setUsername(e.target.value)}
            />
          </div>
          
          {/* PASSWORD INPUT */}
          <div className="relative">
            <div className="absolute top-0 left-0 flex items-center h-full pl-3 pointer-events-none">
              <FiLock className="w-5 h-5 text-gray-500 dark:text-gray-400" />
            </div>
            <input
              id="password"
              name="password"
              type="password"
              required
              className="w-full py-3 pl-10 pr-4 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors 
                         bg-white dark:bg-gray-800 
                         border-gray-300 dark:border-gray-600 
                         text-gray-900 dark:text-white 
                         placeholder-gray-500 dark:placeholder-gray-400"
              placeholder="Password"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
            />
          </div>

          {localError && (
            <p className="text-sm text-red-600 font-bold text-center bg-red-100 p-2 rounded border border-red-300">{localError}</p>
          )}

          <div>
            <button
              type="submit"
              disabled={loading}
              className="w-full flex justify-center items-center px-4 py-3 font-semibold text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-300 disabled:opacity-70"
            >
              {loading ? <FiLoader className="animate-spin mr-2"/> : 'Sign In'}
            </button>
            <div className="flex justify-end mb-4 mt-3">
              <Link to="/forgot-password" className="text-sm text-blue-600 hover:text-blue-500 font-bold">
                Forgot Password?
              </Link>
            </div>
          </div>
        </form>
        
        <div className="text-center mt-4">
          <p className="text-sm text-gray-600 dark:text-gray-400">
            Don't have an account?{' '}
            <Link to="/register" className="font-bold text-blue-600 hover:text-blue-500">
              Sign Up
            </Link>
          </p>
        </div>
      </div>
    </div>
  );
}

export default LoginPage;


================================================
FILE: frontend/src/pages/MyProjectsPage.js
================================================
// src/pages/MyProjectsPage.js
import React, { useState, useEffect, useMemo } from 'react';
import CreateProjectModal from '../components/projects/CreateProjectModal';
import { Link } from 'react-router-dom';
import { useProjectContext } from '../context/ProjectContext';
import { useAuth } from '../context/AuthContext';
import { 
  FiLoader, FiPlus, FiSearch, FiGlobe, FiLock, FiChevronLeft, FiChevronRight, FiUser, FiClock, FiBox 
} from 'react-icons/fi';

function MyProjectsPage() {
  const { user } = useAuth();
  const { myProjects, sharedProjects, loading, fetchMyProjects, fetchSharedProjects } = useProjectContext();
  
  const [isModalOpen, setIsModalOpen] = useState(false); 
  const [currentPage, setCurrentPage] = useState(1);
  const [searchTerm, setSearchTerm] = useState("");
  const [ownershipFilter, setOwnershipFilter] = useState('all'); 
  const [visibilityFilter, setVisibilityFilter] = useState('all'); 

  const projectsPerPage = 6;

  useEffect(() => {
    fetchMyProjects();
    fetchSharedProjects();
  }, []);

  const joinedProjects = useMemo(() => {
    if (!user || !user.id) return [];
    const owned = myProjects.map(p => ({ ...p, _role: 'owner' }));
    const shared = sharedProjects.map(p => ({ ...p, _role: 'member' }));
    const all = [...owned, ...shared];
    const unique = [];
    const map = new Map();
    for (const item of all) {
      if(!map.has(item.id)){
          map.set(item.id, true);
          unique.push(item);
      }
    }
    return unique;
  }, [myProjects, sharedProjects, user]);

  const filteredProjects = useMemo(() => {
  return joinedProjects.filter(project => {
    const searchLower = searchTerm.toLowerCase();
    
    // Arama Filtresi (ƒ∞sim, A√ßƒ±klama ve Sahibi)
    const matchesSearch = 
      project.name.toLowerCase().includes(searchLower) ||
      (project.description && project.description.toLowerCase().includes(searchLower)) ||
      (project.owner_name && project.owner_name.toLowerCase().includes(searchLower)); // Kullanƒ±cƒ± adƒ±na g√∂re arama
    
    const matchesOwnership = ownershipFilter === 'all' ? true : project._role === ownershipFilter;
    const matchesVisibility = visibilityFilter === 'all' ? true : 
                             visibilityFilter === 'public' ? project.is_public === true : 
                             project.is_public === false;

    return matchesSearch && matchesOwnership && matchesVisibility;
  });
}, [joinedProjects, searchTerm, ownershipFilter, visibilityFilter]);

  const currentProjects = filteredProjects.slice((currentPage - 1) * projectsPerPage, currentPage * projectsPerPage);
  const totalPages = Math.max(Math.ceil(filteredProjects.length / projectsPerPage), 1);

  const paginate = (pageNumber) => setCurrentPage(pageNumber);
  useEffect(() => { setCurrentPage(1); }, [searchTerm, ownershipFilter, visibilityFilter]);

  return (
    <div className="flex flex-col h-[calc(100vh-140px)] p-4 pb-0 bg-app transition-colors duration-300 overflow-hidden">
      <div className="max-w-7xl mx-auto w-full h-full flex flex-col">
        
        {/* HEADER SECTION - Standart Hizalama */}
        <div className="flex-none flex justify-between items-center mb-4">
          <h1 className="text-2xl font-black text-text-main tracking-tight flex items-center">
            <FiBox className="mr-3 text-primary" /> My Projects
          </h1>
          <button 
            onClick={() => setIsModalOpen(true)} 
            className="bg-primary hover:opacity-90 text-white font-bold py-2 px-6 rounded-xl shadow-lg transition-all transform hover:scale-105 active:scale-95 flex items-center text-sm border-none cursor-pointer"
          >
            <FiPlus className="mr-2" /> New Project
          </button>
        </div>

        {/* SEARCH AND FILTERS - MyProjects'e √∂zel grid yapƒ±sƒ± ama aynƒ± kutu stili */}
        <div className="flex-none grid grid-cols-1 md:grid-cols-4 gap-3 bg-surface p-2 rounded-2xl border border-border shadow-sm mb-4 dark:bg-surface-dark/40">
          <div className="relative col-span-1 md:col-span-2 group">
            <FiSearch className="absolute left-3 top-3 text-text-secondary transition-colors" />
            <input
              type="text" placeholder="Search projects..." value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
              className="w-full bg-app border border-border text-text-main text-base rounded-xl pl-10 py-2 outline-none focus:border-primary transition-all dark:bg-black/20"
            />
          </div>
          <select 
            value={ownershipFilter} onChange={(e) => setOwnershipFilter(e.target.value)} 
            className="w-full bg-app border border-border text-text-main text-base rounded-xl px-4 py-2 outline-none focus:border-primary cursor-pointer appearance-none dark:bg-black/20"
          >
            <option value="all">All Roles</option>
            <option value="owner">Owner</option>
            <option value="member">Member</option>
          </select>
          <select 
            value={visibilityFilter} onChange={(e) => setVisibilityFilter(e.target.value)} 
            className="w-full bg-app border border-border text-text-main text-base rounded-xl px-4 py-2 outline-none focus:border-primary cursor-pointer appearance-none dark:bg-black/20"
          >
            <option value="all">All Visibility</option>
            <option value="public">Public</option>
            <option value="private">Private</option>
          </select>
        </div>

        {/* GRID AREA */}
        <div className="flex-grow overflow-y-auto pr-1 custom-scrollbar">
          {loading ? (
            <div className="flex justify-center p-20"><FiLoader className="animate-spin text-primary" size={40} /></div>
          ) : filteredProjects.length === 0 ? (
            <div className="p-10 text-center bg-surface/20 rounded-2xl border border-dashed border-border/40">
              <p className="text-text-secondary text-base font-medium">No projects found.</p>
            </div>
          ) : (
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pb-2">
              {currentProjects.map(project => {
                const isOwner = project._role === 'owner';
                return (
                  <Link to={`/project/${project.id}`} key={project.id} className="relative group h-fit">
                    <div className="relative p-4 rounded-2xl bg-surface transition-all duration-300 flex flex-col justify-between hover:shadow-xl shadow-sm border-none dark:bg-surface-dark">
                      {isOwner && <div className="absolute left-0 top-4 bottom-4 w-1 rounded-r-full bg-gradient-to-b from-blue-500 to-purple-600"></div>}
                      <div>
                        <div className="flex justify-between items-start mb-2">
                          <span className={`text-[10px] font-bold px-2 py-0.5 rounded-md uppercase tracking-wider ${isOwner ? 'bg-primary/10 text-primary' : 'bg-text-secondary/10 text-text-secondary'}`}>{isOwner ? 'Owner' : 'Member'}</span>
                          <div className={`flex items-center gap-1.5 px-2 py-0.5 rounded-full text-[10px] font-bold border transition-colors ${project.is_public ? 'text-emerald-600 border-emerald-500/20 bg-emerald-500/5 dark:text-emerald-400' : 'text-amber-600 border-amber-500/20 bg-amber-500/5 dark:text-amber-400'}`}>
                            {project.is_public ? <><FiGlobe size={12} strokeWidth={3} /> PUBLIC</> : <><FiLock size={12} strokeWidth={3} /> PRIVATE</>}
                          </div>
                        </div>
                        <h3 className="text-xl font-bold text-text-main group-hover:text-primary transition-colors truncate mb-1">{project.name}</h3>
                        <p className="text-sm text-text-secondary/80 line-clamp-1 leading-relaxed">{project.description || "Project workspace"}</p>
                      </div>
                      <div className="mt-4 pt-3 border-t border-border/50 flex justify-between items-center text-[10px] uppercase tracking-tight">
                        <div className="flex flex-col gap-1.5">
                          <span className="flex items-center text-[11px] font-bold text-text-main">
                            <FiUser className="mr-1.5 text-xs text-primary" /> {isOwner ? 'You' : (project.owner_name || 'Owner')}
                          </span>
                          <span className="flex items-center text-text-secondary font-bold text-[10px]">
                            <FiClock className="mr-1.5 text-xs opacity-70" /> {new Date(project.created_at).toLocaleDateString(undefined, { day: 'numeric', month: 'short', year: 'numeric' })}
                          </span>
                        </div>
                        <div className="flex items-center px-3 py-1 bg-primary/5 text-primary font-black text-[10px] rounded-lg group-hover:bg-primary group-hover:text-white transition-all">VIEW</div>
                      </div>
                    </div>
                  </Link>
                );
              })}
            </div>
          )}
        </div>

        {/* PAGINATION BAR - Standart Alt Bar */}
        <div className="flex-none pt-2 pb-4">
          <div className="flex justify-between items-center bg-surface p-3 border border-border rounded-xl shadow-sm dark:bg-surface-dark/60 backdrop-blur-md">
            <span className="text-xs text-text-main font-bold uppercase tracking-widest">
              {filteredProjects.length > 0 ? <>Showing <span className="text-primary">{((currentPage - 1) * projectsPerPage) + 1} - {Math.min(currentPage * projectsPerPage, filteredProjects.length)}</span> / {filteredProjects.length}</> : "Showing 0 / 0"}
            </span>
            <div className="flex items-center gap-3">
              <button onClick={() => paginate(currentPage - 1)} disabled={currentPage === 1} className="p-2 rounded-lg hover:bg-app disabled:opacity-10 transition-all border border-border text-text-main"><FiChevronLeft size={20} /></button>
              <button onClick={() => paginate(currentPage + 1)} disabled={currentPage === totalPages} className="p-2 rounded-lg hover:bg-app disabled:opacity-10 transition-all text-text-main border border-border"><FiChevronRight size={20} /></button>
            </div>
          </div>
        </div>
      </div>
      <CreateProjectModal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} />
    </div>
  );
}
export default MyProjectsPage;


================================================
FILE: frontend/src/pages/ProjectDetailPage.js
================================================
// src/pages/ProjectDetailPage.js

import React, { useEffect } from 'react';
import { useParams, NavLink, Outlet } from 'react-router-dom';
import { useProjectContext } from '../context/ProjectContext';
import { 
  FiLoader, FiAlertTriangle, FiCheckSquare, 
  FiMessageSquare, FiFile, FiEdit, FiLayout 
} from 'react-icons/fi';

function ProjectDetailPage() {
  const { id } = useParams();
  const { currentProject, loading, error, fetchProjectById } = useProjectContext();

  useEffect(() => {
    if (id) {
      fetchProjectById(id);
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [id]);

  if (loading || (!currentProject && !error)) {
    return (
      <div className="p-20 flex justify-center">
        <FiLoader className="animate-spin text-primary" size={40} />
      </div>
    );
  }

  if (error && !currentProject) {
    return (
      <div className="p-20 flex justify-center text-red-500">
        <FiAlertTriangle size={40} />
        <span className="ml-4">Error: {error}</span>
      </div>
    );
  }

  const userRole = currentProject?.currentUserRole;
  const isTasksPublic = currentProject?.is_tasks_public;
  
  const showTasksTab = userRole !== 'public_viewer' || isTasksPublic;
  const showDiscussionsTab = userRole !== 'public_viewer';
  const showEditTab = userRole === 'owner';

  // --- TAB NAVIGASYON STƒ∞Lƒ∞ ---
  const navLinkStyle = ({ isActive }) =>
    `flex-1 flex items-center justify-center px-4 py-3 font-semibold border-b-2 transition-colors ` +
    (isActive 
      ? 'text-primary border-primary bg-primary/5' // Aktif: Marka rengi ve √ßok hafif zemin
      : 'text-text-secondary border-transparent hover:text-text-main hover:bg-surface-hover'); // Pasif: Gri ve hover efekti

  return (
    // text-white -> text-text-main
    <div className="p-4 text-text-main h-full flex flex-col">
      
      {/* BA≈ûLIK ALANI */}
      <h1 className="text-4xl font-bold mb-2 text-text-main">{currentProject.name}</h1>
      
      {/* A√áIKLAMA: text-gray-400 -> text-text-secondary */}
      <p className="text-lg text-text-secondary mb-6 leading-relaxed">
        {currentProject.description || "No description provided."}
      </p>
      
      {/* NAVIGASYON: border-gray-700 -> border-border */}
      <nav className="flex border-b border-border mb-6">
        
        <NavLink to="" end className={navLinkStyle}> 
          <FiFile className="mr-2" />
          Files
        </NavLink>

        {showTasksTab && (
          <NavLink to="tasks" className={navLinkStyle}>
            <FiLayout className="mr-2" />
            Tasks
          </NavLink>
        )}
        
        <NavLink to="issues" className={navLinkStyle}>
          <FiCheckSquare className="mr-2" />
          Issues
        </NavLink>
        
        {showDiscussionsTab && (
          <NavLink to="discussions" className={navLinkStyle}>
            <FiMessageSquare className="mr-2" />
            Discussions
          </NavLink>
        )}
        
        {showEditTab && (
          <NavLink to="edit" className={navLinkStyle}>
            <FiEdit className="mr-2" />
            Edit
          </NavLink>
        )}
      </nav>

      {/* ƒ∞√áERƒ∞K ALANI (Diƒüer sayfalarƒ±n y√ºkleneceƒüi yer) */}
      <div className="flex-1 min-h-0">
        <Outlet />
      </div>
    </div>
  );
}

export default ProjectDetailPage;


================================================
FILE: frontend/src/pages/RegisterPage.js
================================================
// src/pages/RegisterPage.js

import React, { useState } from 'react';
import { useNavigate, Link } from 'react-router-dom';
import { FiUser, FiLock, FiMail, FiArrowLeft, FiLoader } from 'react-icons/fi';
import { useAuth } from '../context/AuthContext';
import BackgroundImage from '../assets/background.jpg';
import LogoImage from '../assets/logo.png';

function RegisterPage() {
  const [username, setUsername] = useState('');
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState(null);
  const [success, setSuccess] = useState(null);
  const { register, loading } = useAuth(); 
  const navigate = useNavigate();

  const handleSubmit = async (e) => {
    e.preventDefault();
    setError(null);
    setSuccess(null);
    if (!username || !email || !password) {
      setError("Please enter all fields.");
      return;
    }

    try {
      await register(username, email, password);
      setSuccess("Account created successfully! Redirecting to login...");
      setTimeout(() => {
        navigate('/login');
      }, 2000);
    } catch (err) {
      setError(err.message);
    }
  };

  return (
    <div 
      className="relative flex items-center justify-center min-h-screen bg-cover bg-center transition-all duration-300"
      style={{ backgroundImage: `url(${BackgroundImage})` }}
    >
      <div className="absolute inset-0 z-0 bg-white/30 backdrop-blur-[2px] dark:bg-black/60 transition-colors duration-300"></div>

      <Link 
        to="/home" 
        className="absolute top-8 left-8 z-20 flex items-center text-gray-900 dark:text-white hover:text-blue-600 transition-colors group font-semibold"
      >
        <div className="p-2 bg-white/80 dark:bg-gray-800/80 border border-gray-200 dark:border-gray-700 rounded-full mr-3 group-hover:bg-white shadow-sm backdrop-blur-md">
             <FiArrowLeft size={20} />
        </div>
        <span className="bg-white/50 dark:bg-black/50 px-2 py-1 rounded-md backdrop-blur-sm">Back to Home</span>
      </Link>

      <div className="relative z-10 w-full max-w-md p-8 space-y-6 bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl border border-gray-200 dark:border-gray-700 rounded-2xl shadow-2xl animate-fade-in-up">
         
         <div className="flex flex-col items-center justify-center mb-6">
            <img 
                src={LogoImage} 
                alt="Logo" 
                className="h-32 w-32 mb-4 object-contain brightness-0 dark:brightness-100 transition-all" 
            />
            <h1 className="text-4xl font-extrabold text-gray-900 dark:text-white tracking-tight">GazozHub</h1>
        </div>

         <div className="text-center">
          <h2 className="text-lg font-bold text-gray-600 dark:text-gray-300 uppercase tracking-widest">Create Account</h2>
        </div>
        
        <form className="space-y-5" onSubmit={handleSubmit}>
          
          {/* USERNAME */}
          <div className="relative">
            <div className="absolute top-0 left-0 flex items-center h-full pl-3 pointer-events-none">
              <FiUser className="w-5 h-5 text-gray-500 dark:text-gray-400" />
            </div>
            <input
              id="username"
              type="text"
              required
              className="w-full py-3 pl-10 pr-4 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors 
                         bg-white dark:bg-gray-800 
                         border-gray-300 dark:border-gray-600 
                         text-gray-900 dark:text-white 
                         placeholder-gray-500 dark:placeholder-gray-400"
              placeholder="Username"
              value={username}
              onChange={(e) => setUsername(e.target.value)}
            />
          </div>

          {/* EMAIL */}
          <div className="relative">
            <div className="absolute top-0 left-0 flex items-center h-full pl-3 pointer-events-none">
              <FiMail className="w-5 h-5 text-gray-500 dark:text-gray-400" />
            </div>
            <input
              id="email"
              type="email"
              required
              className="w-full py-3 pl-10 pr-4 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors 
                         bg-white dark:bg-gray-800 
                         border-gray-300 dark:border-gray-600 
                         text-gray-900 dark:text-white 
                         placeholder-gray-500 dark:placeholder-gray-400"
              placeholder="Email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
            />
          </div>
          
          {/* PASSWORD */}
          <div className="relative">
            <div className="absolute top-0 left-0 flex items-center h-full pl-3 pointer-events-none">
              <FiLock className="w-5 h-5 text-gray-500 dark:text-gray-400" />
            </div>
            <input
              id="password"
              type="password"
              required
              className="w-full py-3 pl-10 pr-4 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors 
                         bg-white dark:bg-gray-800 
                         border-gray-300 dark:border-gray-600 
                         text-gray-900 dark:text-white 
                         placeholder-gray-500 dark:placeholder-gray-400"
              placeholder="Password"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
            />
          </div>

          {error && <p className="text-sm text-red-600 font-bold text-center bg-red-100 p-2 rounded border border-red-300">{error}</p>}
          {success && <p className="text-sm text-green-600 font-bold text-center bg-green-100 p-2 rounded border border-green-300">{success}</p>}

          <div>
            <button
              type="submit"
              disabled={loading}
              className="w-full flex justify-center items-center px-4 py-3 font-semibold text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-300 disabled:opacity-70"
            >
              {loading ? <FiLoader className="animate-spin mr-2"/> : 'Sign Up'}
            </button>
          </div>
        </form>
        
        <div className="text-center mt-4">
          <p className="text-sm text-gray-600 dark:text-gray-400">
            Already have an account?{' '}
            <Link to="/login" className="font-bold text-blue-600 hover:text-blue-500">
              Sign In
            </Link>
          </p>
        </div>
      </div>
    </div>
  );
}

export default RegisterPage;


================================================
FILE: frontend/src/pages/ResetPasswordPage.js
================================================
// src/pages/ResetPasswordPage.js

import React, { useState } from 'react';
import { useNavigate, useParams, Link } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';
import { FiLock, FiLoader, FiArrowLeft, FiCheckCircle } from 'react-icons/fi';
import BackgroundImage from '../assets/background.jpg';
import LogoImage from '../assets/logo.png';

export default function ResetPasswordPage() {
  const { token } = useParams(); 
  const navigate = useNavigate();
  const { resetPassword } = useAuth();

  const [password, setPassword] = useState('');
  const [confirmPassword, setConfirmPassword] = useState('');
  const [message, setMessage] = useState('');
  const [error, setError] = useState('');
  const [isSubmitting, setIsSubmitting] = useState(false);

  const handleSubmit = async (e) => {
    e.preventDefault();
    setError('');
    setMessage('');

    if (password !== confirmPassword) {
      setError("Passwords do not match.");
      return;
    }

    setIsSubmitting(true);
    try {
      // AuthContext'teki resetPassword fonksiyonunu √ßaƒüƒ±rƒ±r
      await resetPassword(token, password);
      setMessage('Your password has been successfully updated! Redirecting to login...');
      
      setTimeout(() => {
        navigate('/login');
      }, 2500);
    } catch (err) {
      setError(err.response?.data?.message || 'Failed to reset password. The link may be invalid or expired.');
    } finally {
      setIsSubmitting(false);
    }
  };

  return (
    <div 
      className="relative flex items-center justify-center min-h-screen bg-cover bg-center transition-all duration-300"
      style={{ backgroundImage: `url(${BackgroundImage})` }}
    >
      {/* Background Overlay */}
      <div className="absolute inset-0 z-0 bg-white/30 backdrop-blur-[2px] dark:bg-black/60 transition-colors duration-300"></div>

      {/* Back Button */}
      <Link 
        to="/login" 
        className="absolute top-8 left-8 z-20 flex items-center text-gray-900 dark:text-white hover:text-blue-600 transition-colors group font-semibold"
      >
        <div className="p-2 bg-white/80 dark:bg-gray-800/80 border border-gray-200 dark:border-gray-700 rounded-full mr-3 shadow-sm backdrop-blur-md">
             <FiArrowLeft size={20} />
        </div>
        <span className="bg-white/50 dark:bg-black/50 px-2 py-1 rounded-md backdrop-blur-sm">Back to Login</span>
      </Link>

      <div className="relative z-10 w-full max-w-md p-8 bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl border border-gray-200 dark:border-gray-700 rounded-2xl shadow-2xl animate-fade-in-up">
        
        {/* Logo Section */}
        <div className="flex flex-col items-center justify-center mb-6">
            <img 
                src={LogoImage} 
                alt="Logo" 
                className="h-24 w-24 mb-4 object-contain brightness-0 dark:brightness-100 transition-all" 
            />
            <h1 className="text-4xl font-extrabold text-gray-900 dark:text-white tracking-tight">GazozHub</h1>
        </div>

        <h2 className="text-lg font-bold text-gray-700 dark:text-gray-300 text-center mb-6 uppercase tracking-widest">Set New Password</h2>
        
        {/* Feedback Messages */}
        {message && <div className="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4 text-sm font-bold flex items-center"><FiCheckCircle className="mr-2"/> {message}</div>}
        {error && <div className="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4 text-sm font-bold">{error}</div>}

        <form onSubmit={handleSubmit} className="space-y-5">
          {/* New Password */}
          <div className="relative">
            <div className="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
              <FiLock className="text-gray-500" />
            </div>
            <input
              type="password"
              required
              placeholder="New Password"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              className="w-full py-3 pl-10 pr-4 rounded-lg border bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-all"
            />
          </div>

          {/* Confirm Password */}
          <div className="relative">
            <div className="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
              <FiLock className="text-gray-500" />
            </div>
            <input
              type="password"
              required
              placeholder="Confirm New Password"
              value={confirmPassword}
              onChange={(e) => setConfirmPassword(e.target.value)}
              className="w-full py-3 pl-10 pr-4 rounded-lg border bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-all"
            />
          </div>

          <button 
            type="submit" 
            disabled={isSubmitting}
            className="w-full flex justify-center items-center py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold shadow-lg transition-all disabled:opacity-50"
          >
            {isSubmitting ? <FiLoader className="animate-spin mr-2" /> : 'Update Password'}
          </button>
        </form>
      </div>
    </div>
  );
}



================================================
FILE: frontend/src/pages/SettingsPage.js
================================================
// src/pages/SettingsPage.js

import React, { useState } from 'react';
import { FiUser, FiLock, FiMonitor, FiSave, FiSun, FiMoon } from 'react-icons/fi';
import { useTheme } from '../context/ThemeContext'; // YENƒ∞: Context'i √ßekiyoruz

export default function SettingsPage() {
  const [activeTab, setActiveTab] = useState('profile');
  const { theme, toggleTheme } = useTheme(); // Tema fonksiyonlarƒ±nƒ± al

  // Tab ƒ∞√ßerikleri
  const renderContent = () => {
    switch (activeTab) {
      case 'profile':
        return (
          <div className="space-y-6 animate-fade-in">
            <h3 className="text-lg font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">
              Profile Details
            </h3>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label className="block text-sm text-gray-600 dark:text-gray-400 mb-1">Full Name</label>
                    <input type="text" className="w-full bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg p-2.5 text-gray-900 dark:text-white focus:border-blue-500 outline-none transition-colors" placeholder="Your Name" />
                </div>
                <div>
                    <label className="block text-sm text-gray-600 dark:text-gray-400 mb-1">Email</label>
                    <input type="email" className="w-full bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg p-2.5 text-gray-900 dark:text-white focus:border-blue-500 outline-none transition-colors" placeholder="email@example.com" disabled />
                </div>
                <div className="md:col-span-2">
                    <label className="block text-sm text-gray-600 dark:text-gray-400 mb-1">Bio</label>
                    <textarea className="w-full bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg p-2.5 text-gray-900 dark:text-white focus:border-blue-500 outline-none h-24 transition-colors" placeholder="Tell us about yourself..." />
                </div>
            </div>
          </div>
        );
      case 'security':
        return (
          <div className="space-y-6 animate-fade-in">
            <h3 className="text-lg font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">
              Security & Password
            </h3>
            <div className="space-y-4 max-w-md">
                <div>
                    <label className="block text-sm text-gray-600 dark:text-gray-400 mb-1">Current Password</label>
                    <input type="password" className="w-full bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg p-2.5 text-gray-900 dark:text-white focus:border-blue-500 outline-none transition-colors" />
                </div>
                <div>
                    <label className="block text-sm text-gray-600 dark:text-gray-400 mb-1">New Password</label>
                    <input type="password" className="w-full bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg p-2.5 text-gray-900 dark:text-white focus:border-blue-500 outline-none transition-colors" />
                </div>
                <div>
                    <label className="block text-sm text-gray-600 dark:text-gray-400 mb-1">Confirm New Password</label>
                    <input type="password" className="w-full bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg p-2.5 text-gray-900 dark:text-white focus:border-blue-500 outline-none transition-colors" />
                </div>
            </div>
          </div>
        );
      case 'appearance':
        return (
          <div className="space-y-6 animate-fade-in">
            <h3 className="text-lg font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">
              Appearance Settings
            </h3>
            <div className="space-y-4">
                <p className="text-gray-600 dark:text-gray-400 text-sm">Choose how GazozHub looks to you.</p>
                
                <div className="grid grid-cols-2 gap-4 max-w-md">
                  {/* LIGHT MODE BUTONU */}
                  <button 
                    onClick={() => toggleTheme('light')}
                    className={`flex items-center justify-center p-4 rounded-xl border-2 transition-all ${
                      theme === 'light' 
                      ? 'border-blue-500 bg-blue-50 text-blue-700' 
                      : 'border-gray-200 bg-white text-gray-600 hover:border-gray-300'
                    }`}
                  >
                    <FiSun className="mr-2" size={20}/>
                    <span className="font-semibold">Light Mode</span>
                  </button>

                  {/* DARK MODE BUTONU */}
                  <button 
                    onClick={() => toggleTheme('dark')}
                    className={`flex items-center justify-center p-4 rounded-xl border-2 transition-all ${
                      theme === 'dark' 
                      ? 'border-blue-500 bg-gray-800 text-white' 
                      : 'border-gray-200 bg-gray-100 text-gray-600 hover:border-gray-300'
                    }`}
                  >
                    <FiMoon className="mr-2" size={20}/>
                    <span className="font-semibold">Dark Mode</span>
                  </button>
                </div>
            </div>
          </div>
        );
      default:
        return null;
    }
  };

  return (
    <div className="container mx-auto px-4 py-8 max-w-4xl h-[calc(100vh-100px)]">
      <h1 className="text-3xl font-bold text-gray-900 dark:text-white mb-6 transition-colors">Settings</h1>

      {/* --- TAB MEN√úS√ú --- */}
      <div className="flex space-x-2 border-b border-gray-200 dark:border-gray-700 mb-8 overflow-x-auto transition-colors">
        <button 
            onClick={() => setActiveTab('profile')} 
            className={`flex items-center px-6 py-3 text-sm font-medium transition-colors border-b-2 ${
                activeTab === 'profile' 
                ? 'border-blue-500 text-blue-600 dark:text-blue-400' 
                : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white hover:border-gray-300 dark:hover:border-gray-600'
            }`}
        >
            <FiUser className="mr-2" /> Account
        </button>
        
        

        <button 
            onClick={() => setActiveTab('appearance')} 
            className={`flex items-center px-6 py-3 text-sm font-medium transition-colors border-b-2 ${
                activeTab === 'appearance' 
                ? 'border-blue-500 text-blue-600 dark:text-blue-400' 
                : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white hover:border-gray-300 dark:hover:border-gray-600'
            }`}
        >
            <FiMonitor className="mr-2" /> Appearance
        </button>
      </div>

      
      <div className="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-8 shadow-sm dark:shadow-xl min-h-[400px] transition-colors duration-300">
          {renderContent()}
          
          <div className="mt-10 pt-6 border-t border-gray-200 dark:border-gray-700 flex justify-end transition-colors">
              <button className="flex items-center px-6 py-2.5 bg-blue-600 hover:bg-blue-500 text-white rounded-lg font-medium transition-colors shadow-lg">
                  <FiSave className="mr-2" /> Save Changes
              </button>
          </div>
      </div>
    </div>
  );
}


================================================
FILE: frontend/src/pages/SharedProjectsPage.js
================================================
// src/pages/SharedProjectsPage.js
import React, { useState, useEffect, useMemo } from 'react';
import { FiLoader, FiSearch, FiChevronLeft, FiChevronRight, FiGlobe, FiUser, FiClock } from 'react-icons/fi'; 
import { Link } from 'react-router-dom';
import api from '../services/api'; 

function SharedProjectsPage() {
  const [publicProjects, setPublicProjects] = useState([]);
  const [loading, setLoading] = useState(true);
  const [searchTerm, setSearchTerm] = useState("");
  const [currentPage, setCurrentPage] = useState(1);
  const projectsPerPage = 6;

  useEffect(() => {
    const fetchPublic = async () => {
      setLoading(true);
      try {
        const response = await api.get('/api/projects/public-explorer');
        setPublicProjects(response.data);
      } catch (err) { console.error("Public projects error:", err); } 
      finally { setLoading(false); }
    };
    fetchPublic();
  }, []);

  const filteredProjects = useMemo(() => {
  return (Array.isArray(publicProjects) ? publicProjects : []).filter(project => {
    const searchLower = searchTerm.toLowerCase();
    return (
      project.name.toLowerCase().includes(searchLower) ||
      (project.description && project.description.toLowerCase().includes(searchLower)) ||
      (project.owner_name && project.owner_name.toLowerCase().includes(searchLower)) 
    );
  });
}, [publicProjects, searchTerm]);

  const totalPages = Math.max(Math.ceil(filteredProjects.length / projectsPerPage), 1);
  const currentProjects = filteredProjects.slice((currentPage - 1) * projectsPerPage, currentPage * projectsPerPage);

  const paginate = (pageNumber) => setCurrentPage(pageNumber);
  useEffect(() => { setCurrentPage(1); }, [searchTerm]);

  return (
    <div className="flex flex-col h-[calc(100vh-140px)] p-4 pb-0 bg-app transition-colors duration-300 overflow-hidden">
      <div className="max-w-7xl mx-auto w-full h-full flex flex-col">
        
        {/* HEADER SECTION - Standart Hizalama */}
        <div className="flex-none flex justify-between items-center mb-4">
          <h1 className="text-2xl font-black text-text-main tracking-tight dark:text-white flex items-center">
            <FiGlobe className="mr-3 text-primary" /> Shared Projects
          </h1>
        </div>

        {/* SEARCH BAR - Standart Kutu */}
        <div className="flex-none bg-surface p-2 rounded-2xl border border-border shadow-sm mb-4 dark:bg-surface-dark/40">
          <div className="relative group max-w-md">
            <FiSearch className="absolute left-3 top-3 text-text-secondary transition-colors" />
            <input
              type="text" placeholder="Search shared projects..." value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
              className="w-full bg-app border border-border text-text-main text-base rounded-xl pl-10 py-2 outline-none focus:border-primary transition-all dark:bg-black/20"
            />
          </div>
        </div>

        {/* GRID AREA */}
        <div className="flex-grow overflow-y-auto pr-1 custom-scrollbar">
          {loading ? (
            <div className="flex justify-center p-20"><FiLoader className="animate-spin text-primary" size={40} /></div>
          ) : filteredProjects.length === 0 ? (
            <div className="p-10 text-center bg-surface/20 rounded-2xl border border-dashed border-border/40">
              <p className="text-text-secondary text-base font-medium">No shared projects found.</p>
            </div>
          ) : (
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pb-2">
              {currentProjects.map(project => (
                <Link to={`/project/${project.id}`} key={project.id} className="relative group h-fit">
                  <div className="relative p-4 rounded-2xl bg-surface transition-all duration-300 flex flex-col justify-between hover:shadow-xl shadow-sm border-none dark:bg-surface-dark">
                    <div className="absolute left-0 top-4 bottom-4 w-1 rounded-r-full bg-gradient-to-b from-blue-500 to-purple-600 opacity-80"></div>
                    <div>
                      <div className="flex justify-between items-start mb-2">
                        <span className="text-[10px] font-bold px-2 py-0.5 rounded-md uppercase tracking-wider bg-text-secondary/10 text-text-secondary">Member</span>
                        <div className="flex items-center gap-1.5 px-2 py-0.5 rounded-full text-[10px] font-bold border border-emerald-500/20 bg-emerald-500/5 text-emerald-600 dark:text-emerald-400">
                          <FiGlobe size={12} strokeWidth={3} /> PUBLIC
                        </div>
                      </div>
                      <h3 className="text-xl font-bold text-text-main group-hover:text-primary transition-colors truncate mb-1">{project.name}</h3>
                      <p className="text-sm text-text-secondary/80 line-clamp-1 leading-relaxed">{project.description || "Public workspace"}</p>
                    </div>
                    <div className="mt-4 pt-3 border-t border-border/50 flex justify-between items-center text-[10px] uppercase tracking-tight">
                      <div className="flex flex-col gap-1.5">
                        <span className="flex items-center text-[11px] font-bold text-text-main">
                          <FiUser className="mr-1.5 text-xs text-primary" /> {project.owner_name || 'Owner'}
                        </span>
                        <span className="flex items-center text-text-secondary font-bold text-[10px]">
                          <FiClock className="mr-1.5 text-xs opacity-70" /> {new Date(project.created_at).toLocaleDateString(undefined, { day: 'numeric', month: 'short', year: 'numeric' })}
                        </span>
                      </div>
                      <div className="flex items-center px-3 py-1 bg-primary/5 text-primary font-black text-[10px] rounded-lg group-hover:bg-primary group-hover:text-white transition-all">VIEW</div>
                    </div>
                  </div>
                </Link>
              ))}
            </div>
          )}
        </div>

        {/* PAGINATION BAR - Standart Alt Bar */}
        <div className="flex-none pt-2 pb-4">
          <div className="flex justify-between items-center bg-surface p-3 border border-border rounded-xl shadow-sm dark:bg-surface-dark/60 backdrop-blur-md">
            <span className="text-xs text-text-main font-bold uppercase tracking-widest">
              {filteredProjects.length > 0 ? <>Showing <span className="text-primary">{((currentPage - 1) * projectsPerPage) + 1} - {Math.min(currentPage * projectsPerPage, filteredProjects.length)}</span> / {filteredProjects.length}</> : "Showing 0 / 0"}
            </span>
            <div className="flex items-center gap-3">
              <button onClick={() => paginate(currentPage - 1)} disabled={currentPage === 1} className="p-2 rounded-lg hover:bg-app disabled:opacity-10 transition-all border border-border text-text-main"><FiChevronLeft size={20} /></button>
              <button onClick={() => paginate(currentPage + 1)} disabled={currentPage === totalPages} className="p-2 rounded-lg hover:bg-app disabled:opacity-10 transition-all text-text-main border border-border"><FiChevronRight size={20} /></button>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}
export default SharedProjectsPage;


================================================
FILE: frontend/src/services/api.js
================================================
import axios from 'axios';

const api = axios.create({
  baseURL: 'http://localhost:5000',
  headers: {
    'Content-Type': 'application/json'
  }
});

// TOKEN EKLEME INTERCEPTOR'I
api.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem('token');
    if (token) {
      // Backend'in beklediƒüi header anahtarƒ±: 'x-auth-token'
      // Eƒüer backend middleware'inde 'Authorization' bekliyorsan burayƒ± deƒüi≈ütirmen gerekir.
      // Senin backend/middleware/auth.js dosyan 'x-auth-token' bekliyor.
      config.headers['x-auth-token'] = token;
    }
    return config;
  },
  (error) => Promise.reject(error)
);

export default api;

