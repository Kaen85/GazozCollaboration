{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kaan\\\\OneDrive\\\\Belgeler\\\\GitHub\\\\GazozCollaboration\\\\frontend\\\\src\\\\components\\\\projects\\\\ProjectIssues.js\",\n  _s = $RefreshSig$();\n// src/components/projects/ProjectIssues.js\n\nimport React, { useState, useEffect } from 'react';\nimport { useProjectContext } from '../../context/ProjectContext';\nimport { useAuth } from '../../context/AuthContext';\nimport { FiLoader, FiPlus } from 'react-icons/fi';\nimport IssueItem from './IssueItem'; // <-- YENİ COMPONENT'İ IMPORT ET\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ProjectIssues() {\n  _s();\n  const [issues, setIssues] = useState([]);\n  const [newIssueText, setNewIssueText] = useState('');\n\n  // 1. Context'ten 'currentProject'i almamız gerekiyor (ID'si için)\n  const {\n    currentProject,\n    fetchIssues,\n    createIssue,\n    loading\n  } = useProjectContext();\n  const {\n    user\n  } = useAuth(); // Yazar adını bilmek için\n\n  const projectId = currentProject === null || currentProject === void 0 ? void 0 : currentProject.id; // Proje ID'sini al\n\n  // 2. Sayfa yüklendiğinde issue'ları çek\n  useEffect(() => {\n    const loadIssues = async () => {\n      try {\n        const fetchedIssues = await fetchIssues(projectId);\n        setIssues(fetchedIssues || []);\n      } catch (error) {\n        console.error(\"Failed to fetch issues:\", error);\n      }\n    };\n    if (projectId) {\n      loadIssues();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [projectId]); // projectId değişirse tekrar çek\n\n  // 3. Yeni issue oluşturma formu\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!newIssueText.trim()) return;\n    try {\n      const newIssue = await createIssue(projectId, newIssueText);\n      // Backend'den dönen yeni issue'yu, yazar adıyla birlikte listeye ekle\n      setIssues([{\n        ...newIssue,\n        created_by_name: user.username\n      }, ...issues]);\n      setNewIssueText(''); // Formu temizle\n    } catch (error) {\n      console.error(\"Failed to create issue:\", error);\n    }\n  };\n  const handleIssueUpdate = updatedIssue => {\n    // 'issues' state'indeki eski issue'yu bul ve yenisiyle değiştir\n    setIssues(prevIssues => prevIssues.map(issue => issue.id === updatedIssue.id ? {\n      ...issue,\n      ...updatedIssue\n    } : issue));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gray-800 p-4 rounded-lg shadow-lg\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-xl font-semibold text-white mb-4\",\n      children: \"Project Issues\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"flex mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: newIssueText,\n        onChange: e => setNewIssueText(e.target.value),\n        className: \"flex-grow py-2 px-3 text-gray-200 bg-gray-700 border border-gray-600 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n        placeholder: \"New issue title...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading,\n        className: \"flex items-center bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-3 rounded-r-lg transition-colors disabled:opacity-50\",\n        children: loading ? /*#__PURE__*/_jsxDEV(FiLoader, {\n          className: \"animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 22\n        }, this) : /*#__PURE__*/_jsxDEV(FiPlus, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 62\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-3\",\n      children: loading && issues.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-400\",\n        children: \"Loading issues...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this) : issues.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-400\",\n        children: \"No issues found for this project.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this) : issues.map(issue =>\n      /*#__PURE__*/\n      // Her bir issue için 'IssueItem' (buton) oluştur\n      _jsxDEV(IssueItem, {\n        issue: issue,\n        projectId: projectId,\n        onIssueUpdated: handleIssueUpdate\n      }, issue.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n_s(ProjectIssues, \"XizpLER6DUSgNIf4F2K6cDd1xf8=\", false, function () {\n  return [useProjectContext, useAuth];\n});\n_c = ProjectIssues;\nexport default ProjectIssues;\nvar _c;\n$RefreshReg$(_c, \"ProjectIssues\");","map":{"version":3,"names":["React","useState","useEffect","useProjectContext","useAuth","FiLoader","FiPlus","IssueItem","jsxDEV","_jsxDEV","ProjectIssues","_s","issues","setIssues","newIssueText","setNewIssueText","currentProject","fetchIssues","createIssue","loading","user","projectId","id","loadIssues","fetchedIssues","error","console","handleSubmit","e","preventDefault","trim","newIssue","created_by_name","username","handleIssueUpdate","updatedIssue","prevIssues","map","issue","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","value","onChange","target","placeholder","disabled","length","onIssueUpdated","_c","$RefreshReg$"],"sources":["C:/Users/Kaan/OneDrive/Belgeler/GitHub/GazozCollaboration/frontend/src/components/projects/ProjectIssues.js"],"sourcesContent":["// src/components/projects/ProjectIssues.js\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useProjectContext } from '../../context/ProjectContext';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { FiLoader, FiPlus } from 'react-icons/fi';\r\nimport IssueItem from './IssueItem'; // <-- YENİ COMPONENT'İ IMPORT ET\r\n\r\nfunction ProjectIssues() {\r\n  const [issues, setIssues] = useState([]);\r\n  const [newIssueText, setNewIssueText] = useState('');\r\n  \r\n  // 1. Context'ten 'currentProject'i almamız gerekiyor (ID'si için)\r\n  const { currentProject, fetchIssues, createIssue, loading } = useProjectContext();\r\n  const { user } = useAuth(); // Yazar adını bilmek için\r\n\r\n  const projectId = currentProject?.id; // Proje ID'sini al\r\n\r\n  // 2. Sayfa yüklendiğinde issue'ları çek\r\n  useEffect(() => {\r\n    const loadIssues = async () => {\r\n      try {\r\n        const fetchedIssues = await fetchIssues(projectId);\r\n        setIssues(fetchedIssues || []);\r\n      } catch (error) {\r\n        console.error(\"Failed to fetch issues:\", error);\r\n      }\r\n    };\r\n    \r\n    if (projectId) {\r\n      loadIssues();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [projectId]); // projectId değişirse tekrar çek\r\n\r\n  // 3. Yeni issue oluşturma formu\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!newIssueText.trim()) return; \r\n\r\n    try {\r\n      const newIssue = await createIssue(projectId, newIssueText);\r\n      // Backend'den dönen yeni issue'yu, yazar adıyla birlikte listeye ekle\r\n      setIssues([{ ...newIssue, created_by_name: user.username }, ...issues]);\r\n      setNewIssueText(''); // Formu temizle\r\n    } catch (error) {\r\n      console.error(\"Failed to create issue:\", error);\r\n    }\r\n  };\r\n  const handleIssueUpdate = (updatedIssue) => {\r\n    // 'issues' state'indeki eski issue'yu bul ve yenisiyle değiştir\r\n    setIssues(prevIssues => \r\n      prevIssues.map(issue => \r\n        issue.id === updatedIssue.id ? { ...issue, ...updatedIssue } : issue\r\n      )\r\n    );\r\n  };\r\n  return (\r\n    <div className=\"bg-gray-800 p-4 rounded-lg shadow-lg\">\r\n      <h3 className=\"text-xl font-semibold text-white mb-4\">Project Issues</h3>\r\n      \r\n      {/* Yeni Issue Ekleme Formu (Hâlâ üstte durabilir) */}\r\n      <form onSubmit={handleSubmit} className=\"flex mb-4\">\r\n        <input \r\n          type=\"text\"\r\n          value={newIssueText}\r\n          onChange={(e) => setNewIssueText(e.target.value)}\r\n          className=\"flex-grow py-2 px-3 text-gray-200 bg-gray-700 border border-gray-600 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          placeholder=\"New issue title...\"\r\n        />\r\n        <button \r\n          type=\"submit\" \r\n          disabled={loading}\r\n          className=\"flex items-center bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-3 rounded-r-lg transition-colors disabled:opacity-50\"\r\n        >\r\n          {loading ? <FiLoader className=\"animate-spin\" /> : <FiPlus />}\r\n        </button>\r\n      </form>\r\n\r\n      {/* === DEĞİŞİKLİK BURADA: Issue Listesi === */}\r\n      {/* Artık 'IssueItem' component'ini map'liyoruz */}\r\n      <div className=\"space-y-3\">\r\n        {loading && issues.length === 0 ? (\r\n          <p className=\"text-gray-400\">Loading issues...</p>\r\n        ) : issues.length === 0 ? (\r\n          <p className=\"text-gray-400\">No issues found for this project.</p>\r\n        ) : (\r\n          issues.map(issue => (\r\n            // Her bir issue için 'IssueItem' (buton) oluştur\r\n            <IssueItem \r\n              key={issue.id} \r\n              issue={issue} \r\n              projectId={projectId} \r\n              onIssueUpdated={handleIssueUpdate}\r\n            />\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProjectIssues;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}