{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kaan\\\\OneDrive\\\\Belgeler\\\\GitHub\\\\GazozCollaboration\\\\frontend\\\\src\\\\components\\\\projects\\\\Comment.js\",\n  _s = $RefreshSig$();\n// src/components/projects/Comment.js (YENİ TAM HALİ)\n\nimport React, { useState } from 'react';\nimport { useAuth } from '../../context/AuthContext';\nimport { useProjectContext } from '../../context/ProjectContext';\nimport { FiUser, FiHeart, FiCopy, FiMoreVertical, FiEdit, FiTrash, FiSave, FiX, FiLoader, FiCheck } from 'react-icons/fi';\n\n// Yeni proplar alıyoruz: projectId ve onCommentDeleted\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Comment({\n  comment,\n  projectId,\n  onCommentDeleted\n}) {\n  _s();\n  var _comment$likes_user_i, _comment$likes_user_i2;\n  const {\n    user\n  } = useAuth(); // Mevcut giriş yapmış kullanıcı (artık {id, username} içeriyor)\n  const {\n    likeComment,\n    editComment,\n    deleteComment,\n    loading: contextLoading\n  } = useProjectContext();\n\n  // Yorumu düzenleme (edit) modu için state'ler\n  const [isEditing, setIsEditing] = useState(false);\n  const [editText, setEditText] = useState(comment.text);\n  const [isSaving, setIsSaving] = useState(false);\n\n  // Kopyalama state'i\n  const [copied, setCopied] = useState(false);\n  // Beğenme (like) state'i\n  const [isLiking, setIsLiking] = useState(false);\n\n  // Kullanıcı bu yorumun sahibi mi? (Güvenli kontrol için ID kullanıyoruz)\n  const isOwner = (user === null || user === void 0 ? void 0 : user.id) === comment.author_id;\n  // Kullanıcı bu yorumu beğenmiş mi?\n  const hasLiked = (_comment$likes_user_i = comment.likes_user_ids) === null || _comment$likes_user_i === void 0 ? void 0 : _comment$likes_user_i.includes(user === null || user === void 0 ? void 0 : user.id);\n\n  // --- KOPYALA FONKSİYONU ---\n  const handleCopy = () => {\n    // (execCommand, iframe'lerde clipboard API'den daha güvenilir çalışır)\n    const el = document.createElement('textarea');\n    el.value = comment.text;\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand('copy');\n    document.body.removeChild(el);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000); // 2 saniye sonra \"Copied!\" yazısını kaldır\n  };\n\n  // --- BEĞEN (LIKE) FONKSİYONU ---\n  const handleLike = async () => {\n    if (isLiking) return; // Zaten bir istek atılıyorsa tekrar basmayı engelle\n    setIsLiking(true);\n    try {\n      await likeComment(projectId, comment.id);\n      // Not: Arayüzün anında güncellenmesi için\n      // CommentList'in bu beğeniyi 'onCommentUpdated' ile yönetmesi gerekir.\n      // Şimdilik, sayfa yenileninceye kadar bekler (veya refreshKey'e bağlıdır)\n    } catch (error) {\n      console.error(\"Failed to like comment:\", error);\n    } finally {\n      setIsLiking(false);\n    }\n  };\n\n  // --- DÜZENLE (EDIT) FONKSİYONLARI ---\n  const handleEdit = () => {\n    setIsEditing(true);\n  };\n  const handleCancelEdit = () => {\n    setIsEditing(false);\n    setEditText(comment.text); // Değişiklikleri iptal et\n  };\n  const handleSaveEdit = async () => {\n    if (editText.trim() === '' || editText === comment.text) {\n      return handleCancelEdit();\n    }\n    setIsSaving(true);\n    try {\n      await editComment(projectId, comment.id, editText);\n      setIsEditing(false);\n      // Not: Bu da anında güncelleme için 'onCommentUpdated' prop'u gerektirir.\n    } catch (error) {\n      console.error(\"Failed to save edit:\", error);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  // --- SİL (DELETE) FONKSİYONU ---\n  const handleDelete = async () => {\n    // Silmeden önce onay iste\n    if (window.confirm('Are you sure you want to delete this comment?')) {\n      try {\n        await deleteComment(projectId, comment.id);\n        // Silme başarılıysa, ebeveyn component'e (CommentList/IssueItem) haber ver\n        if (onCommentDeleted) {\n          onCommentDeleted(comment.id);\n        }\n      } catch (error) {\n        console.error(\"Failed to delete comment:\", error);\n      }\n    }\n  };\n  return (\n    /*#__PURE__*/\n    // Yorumları ayırmak için üst çizgi (istediğiniz gibi)\n    _jsxDEV(\"div\", {\n      className: \"flex space-x-3 pt-4 border-t border-gray-600\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-shrink-0\",\n        children: /*#__PURE__*/_jsxDEV(FiUser, {\n          className: \"w-8 h-8 text-gray-400 bg-gray-700 rounded-full p-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 bg-gray-700 rounded-lg p-3\",\n        children: isEditing ?\n        /*#__PURE__*/\n        // --- DÜZENLEME MODU ---\n        _jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: editText,\n            onChange: e => setEditText(e.target.value),\n            className: \"w-full py-2 px-3 text-gray-200 bg-gray-600 border border-blue-500 rounded-lg focus:outline-none\",\n            rows: \"3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleCancelEdit,\n              className: \"text-gray-400 hover:text-white text-sm\",\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSaveEdit,\n              disabled: isSaving,\n              className: \"flex items-center bg-blue-600 hover:bg-blue-700 text-white font-semibold py-1 px-3 rounded-lg text-sm\",\n              children: isSaving ? /*#__PURE__*/_jsxDEV(FiLoader, {\n                className: \"animate-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 29\n              }, this) : 'Save'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this) :\n        /*#__PURE__*/\n        // --- NORMAL GÖRÜNÜM MODU ---\n        _jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold text-white text-sm\",\n              children: comment.author_name || 'User'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs text-gray-500\",\n              children: new Date(comment.created_at).toLocaleString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-300 text-sm\",\n            children: comment.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-3 mt-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleLike,\n              disabled: isLiking,\n              className: `flex items-center text-xs ${hasLiked ? 'text-red-500' : 'text-gray-400 hover:text-white'}`,\n              children: [/*#__PURE__*/_jsxDEV(FiHeart, {\n                fill: hasLiked ? 'currentColor' : 'none',\n                size: 14,\n                className: \"mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 17\n              }, this), ((_comment$likes_user_i2 = comment.likes_user_ids) === null || _comment$likes_user_i2 === void 0 ? void 0 : _comment$likes_user_i2.length) || 0]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleCopy,\n              className: \"text-xs text-gray-400 hover:text-white\",\n              children: copied ? /*#__PURE__*/_jsxDEV(FiCheck, {\n                size: 14,\n                className: \"text-green-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 27\n              }, this) : /*#__PURE__*/_jsxDEV(FiCopy, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 78\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 15\n            }, this), isOwner && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => alert('3-nokta menü açılacak'),\n                className: \"text-xs text-gray-400 hover:text-white\",\n                children: /*#__PURE__*/_jsxDEV(FiMoreVertical, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleEdit,\n                className: \"text-xs text-gray-400 hover:text-white ml-2\",\n                children: \"Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleDelete,\n                className: \"text-xs text-red-500 hover:text-red-400 ml-2\",\n                children: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }, this)\n  );\n}\n_s(Comment, \"VoYZ1EDc4IzzVIuK5+YKiWC46g4=\", false, function () {\n  return [useAuth, useProjectContext];\n});\n_c = Comment;\nexport default Comment;\nvar _c;\n$RefreshReg$(_c, \"Comment\");","map":{"version":3,"names":["React","useState","useAuth","useProjectContext","FiUser","FiHeart","FiCopy","FiMoreVertical","FiEdit","FiTrash","FiSave","FiX","FiLoader","FiCheck","jsxDEV","_jsxDEV","Fragment","_Fragment","Comment","comment","projectId","onCommentDeleted","_s","_comment$likes_user_i","_comment$likes_user_i2","user","likeComment","editComment","deleteComment","loading","contextLoading","isEditing","setIsEditing","editText","setEditText","text","isSaving","setIsSaving","copied","setCopied","isLiking","setIsLiking","isOwner","id","author_id","hasLiked","likes_user_ids","includes","handleCopy","el","document","createElement","value","body","appendChild","select","execCommand","removeChild","setTimeout","handleLike","error","console","handleEdit","handleCancelEdit","handleSaveEdit","trim","handleDelete","window","confirm","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","e","target","rows","onClick","disabled","author_name","Date","created_at","toLocaleString","fill","size","length","alert","_c","$RefreshReg$"],"sources":["C:/Users/Kaan/OneDrive/Belgeler/GitHub/GazozCollaboration/frontend/src/components/projects/Comment.js"],"sourcesContent":["// src/components/projects/Comment.js (YENİ TAM HALİ)\r\n\r\nimport React, { useState } from 'react';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { useProjectContext } from '../../context/ProjectContext';\r\nimport { FiUser, FiHeart, FiCopy, FiMoreVertical, FiEdit, FiTrash, FiSave, FiX, FiLoader, FiCheck } from 'react-icons/fi';\r\n\r\n// Yeni proplar alıyoruz: projectId ve onCommentDeleted\r\nfunction Comment({ comment, projectId, onCommentDeleted }) {\r\n  \r\n  const { user } = useAuth(); // Mevcut giriş yapmış kullanıcı (artık {id, username} içeriyor)\r\n  const { \r\n    likeComment, \r\n    editComment, \r\n    deleteComment, \r\n    loading: contextLoading \r\n  } = useProjectContext();\r\n\r\n  // Yorumu düzenleme (edit) modu için state'ler\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editText, setEditText] = useState(comment.text);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n\r\n  // Kopyalama state'i\r\n  const [copied, setCopied] = useState(false);\r\n  // Beğenme (like) state'i\r\n  const [isLiking, setIsLiking] = useState(false);\r\n\r\n  // Kullanıcı bu yorumun sahibi mi? (Güvenli kontrol için ID kullanıyoruz)\r\n  const isOwner = user?.id === comment.author_id;\r\n  // Kullanıcı bu yorumu beğenmiş mi?\r\n  const hasLiked = comment.likes_user_ids?.includes(user?.id);\r\n\r\n  // --- KOPYALA FONKSİYONU ---\r\n  const handleCopy = () => {\r\n    // (execCommand, iframe'lerde clipboard API'den daha güvenilir çalışır)\r\n    const el = document.createElement('textarea');\r\n    el.value = comment.text;\r\n    document.body.appendChild(el);\r\n    el.select();\r\n    document.execCommand('copy');\r\n    document.body.removeChild(el);\r\n    setCopied(true);\r\n    setTimeout(() => setCopied(false), 2000); // 2 saniye sonra \"Copied!\" yazısını kaldır\r\n  };\r\n\r\n  // --- BEĞEN (LIKE) FONKSİYONU ---\r\n  const handleLike = async () => {\r\n    if (isLiking) return; // Zaten bir istek atılıyorsa tekrar basmayı engelle\r\n    setIsLiking(true);\r\n    try {\r\n      await likeComment(projectId, comment.id);\r\n      // Not: Arayüzün anında güncellenmesi için\r\n      // CommentList'in bu beğeniyi 'onCommentUpdated' ile yönetmesi gerekir.\r\n      // Şimdilik, sayfa yenileninceye kadar bekler (veya refreshKey'e bağlıdır)\r\n    } catch (error) {\r\n      console.error(\"Failed to like comment:\", error);\r\n    } finally {\r\n      setIsLiking(false);\r\n    }\r\n  };\r\n\r\n  // --- DÜZENLE (EDIT) FONKSİYONLARI ---\r\n  const handleEdit = () => {\r\n    setIsEditing(true);\r\n  };\r\n  const handleCancelEdit = () => {\r\n    setIsEditing(false);\r\n    setEditText(comment.text); // Değişiklikleri iptal et\r\n  };\r\n  const handleSaveEdit = async () => {\r\n    if (editText.trim() === '' || editText === comment.text) {\r\n      return handleCancelEdit();\r\n    }\r\n    setIsSaving(true);\r\n    try {\r\n      await editComment(projectId, comment.id, editText);\r\n      setIsEditing(false);\r\n      // Not: Bu da anında güncelleme için 'onCommentUpdated' prop'u gerektirir.\r\n    } catch (error) {\r\n      console.error(\"Failed to save edit:\", error);\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  // --- SİL (DELETE) FONKSİYONU ---\r\n  const handleDelete = async () => {\r\n    // Silmeden önce onay iste\r\n    if (window.confirm('Are you sure you want to delete this comment?')) {\r\n      try {\r\n        await deleteComment(projectId, comment.id);\r\n        // Silme başarılıysa, ebeveyn component'e (CommentList/IssueItem) haber ver\r\n        if (onCommentDeleted) {\r\n          onCommentDeleted(comment.id);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Failed to delete comment:\", error);\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    // Yorumları ayırmak için üst çizgi (istediğiniz gibi)\r\n    <div className=\"flex space-x-3 pt-4 border-t border-gray-600\">\r\n      {/* Avatar/İkon */}\r\n      <div className=\"flex-shrink-0\">\r\n        <FiUser className=\"w-8 h-8 text-gray-400 bg-gray-700 rounded-full p-1\" />\r\n      </div>\r\n      \r\n      {/* Yorum İçeriği */}\r\n      <div className=\"flex-1 bg-gray-700 rounded-lg p-3\">\r\n        \r\n        {isEditing ? (\r\n          // --- DÜZENLEME MODU ---\r\n          <div className=\"space-y-2\">\r\n            <textarea\r\n              value={editText}\r\n              onChange={(e) => setEditText(e.target.value)}\r\n              className=\"w-full py-2 px-3 text-gray-200 bg-gray-600 border border-blue-500 rounded-lg focus:outline-none\"\r\n              rows=\"3\"\r\n            />\r\n            <div className=\"flex justify-end space-x-2\">\r\n              <button onClick={handleCancelEdit} className=\"text-gray-400 hover:text-white text-sm\">Cancel</button>\r\n              <button \r\n                onClick={handleSaveEdit} \r\n                disabled={isSaving}\r\n                className=\"flex items-center bg-blue-600 hover:bg-blue-700 text-white font-semibold py-1 px-3 rounded-lg text-sm\"\r\n              >\r\n                {isSaving ? <FiLoader className=\"animate-spin\" /> : 'Save'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          // --- NORMAL GÖRÜNÜM MODU ---\r\n          <>\r\n            <div className=\"flex items-center justify-between mb-1\">\r\n              <span className=\"font-semibold text-white text-sm\">\r\n                {comment.author_name || 'User'} \r\n              </span>\r\n              <span className=\"text-xs text-gray-500\">\r\n                {new Date(comment.created_at).toLocaleString()}\r\n              </span>\r\n            </div>\r\n            <p className=\"text-gray-300 text-sm\">\r\n              {comment.text}\r\n            </p>\r\n            \r\n            {/* YORUM ALTINDAKİ BUTONLAR (BEĞEN, KOPYALA, 3-NOKTA) */}\r\n            <div className=\"flex items-center space-x-3 mt-3\">\r\n              \r\n              {/* BEĞEN BUTONU */}\r\n              <button \r\n                onClick={handleLike} \r\n                disabled={isLiking}\r\n                className={`flex items-center text-xs ${hasLiked ? 'text-red-500' : 'text-gray-400 hover:text-white'}`}\r\n              >\r\n                <FiHeart fill={hasLiked ? 'currentColor' : 'none'} size={14} className=\"mr-1\" />\r\n                {comment.likes_user_ids?.length || 0}\r\n              </button>\r\n              \r\n              {/* KOPYALA BUTONU */}\r\n              <button onClick={handleCopy} className=\"text-xs text-gray-400 hover:text-white\">\r\n                {copied ? <FiCheck size={14} className=\"text-green-500\" /> : <FiCopy size={14} />}\r\n              </button>\r\n              \r\n              {/* 3-NOKTA MENÜ (SADECE YORUMUN SAHİBİ GÖRÜR) */}\r\n              {isOwner && (\r\n                <div className=\"relative\">\r\n                  <button onClick={() => alert('3-nokta menü açılacak')} className=\"text-xs text-gray-400 hover:text-white\">\r\n                    <FiMoreVertical size={14} />\r\n                  </button>\r\n                  {/* (Buraya 'isMenuOpen' state'i ile \r\n                      'Edit' ve 'Delete' butonlarını içeren bir açılır menü ekleyebilirsiniz)\r\n                  */}\r\n                  {/* BASİTLEŞTİRME: Şimdilik direkt butonları ekleyelim */}\r\n                  <button onClick={handleEdit} className=\"text-xs text-gray-400 hover:text-white ml-2\">Edit</button>\r\n                  <button onClick={handleDelete} className=\"text-xs text-red-500 hover:text-red-400 ml-2\">Delete</button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Comment;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}