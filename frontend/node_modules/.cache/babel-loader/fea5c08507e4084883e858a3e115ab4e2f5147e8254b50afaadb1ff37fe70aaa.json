{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kaan\\\\OneDrive\\\\Belgeler\\\\GitHub\\\\GazozCollaboration\\\\frontend\\\\src\\\\components\\\\projects\\\\ProjectFiles.js\",\n  _s = $RefreshSig$();\n// src/components/projects/ProjectFiles.js\n\nimport React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom'; // PORTAL İÇİN GEREKLİ\nimport { useProjectContext } from '../../context/ProjectContext';\nimport { FiFile, FiDownload, FiTrash2, FiUpload, FiLoader, FiFileText, FiX, FiEye, FiCheckSquare, FiSquare, FiChevronLeft, FiChevronRight, FiExternalLink, FiAirplay, FiAlertCircle } from 'react-icons/fi';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ProjectFiles() {\n  _s();\n  const {\n    currentProject,\n    fetchFiles,\n    uploadFile,\n    deleteFile\n  } = useProjectContext();\n  const [files, setFiles] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [selectedIds, setSelectedIds] = useState([]);\n  const [previewFile, setPreviewFile] = useState(null);\n\n  // Listeyi yenilemek için tetikleyici\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\n  const userRole = currentProject === null || currentProject === void 0 ? void 0 : currentProject.currentUserRole;\n  const canEdit = userRole === 'owner' || userRole === 'editor';\n\n  // Localhost kontrolü (Office viewer için)\n  const isLocalhost = typeof window !== 'undefined' && (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1');\n\n  // --- 1. LİSTE YÜKLEME (RefreshTrigger her değiştiğinde çalışır) ---\n  useEffect(() => {\n    if (currentProject !== null && currentProject !== void 0 && currentProject.id) {\n      setLoading(true);\n      fetchFiles(currentProject.id).then(data => {\n        setFiles(Array.isArray(data) ? data : []);\n      }).catch(err => console.error(\"Liste hatası:\", err)).finally(() => setLoading(false));\n    }\n  }, [currentProject, refreshTrigger]); // refreshTrigger değişince liste yenilenir\n\n  // --- 2. DOSYA YÜKLEME ---\n  const handleFileUpload = async e => {\n    const selectedFiles = Array.from(e.target.files);\n    if (selectedFiles.length === 0) return;\n    setUploading(true);\n    try {\n      for (const file of selectedFiles) {\n        await uploadFile(currentProject.id, file);\n      }\n      // Yükleme bitince tetikleyiciyi değiştir -> useEffect çalışır -> Liste güncellenir\n      setRefreshTrigger(prev => prev + 1);\n    } catch (error) {\n      alert(\"Yükleme sırasında hata oluştu.\");\n    } finally {\n      setUploading(false);\n      e.target.value = null;\n    }\n  };\n\n  // --- 3. SİLME İŞLEMLERİ ---\n  const handleDeleteSingle = async id => {\n    if (window.confirm(\"Silmek istediğinize emin misiniz?\")) {\n      await deleteFile(currentProject.id, id);\n      setPreviewFile(null);\n      setRefreshTrigger(prev => prev + 1); // Listeyi yenile\n    }\n  };\n  const handleDeleteSelected = async () => {\n    if (window.confirm(`${selectedIds.length} dosyayı sil?`)) {\n      setLoading(true);\n      await Promise.all(selectedIds.map(id => deleteFile(currentProject.id, id)));\n      setSelectedIds([]);\n      setRefreshTrigger(prev => prev + 1); // Listeyi yenile\n      setLoading(false);\n    }\n  };\n\n  // --- YARDIMCI FONKSİYONLAR ---\n  const toggleSelect = (id, e) => {\n    e.stopPropagation();\n    selectedIds.includes(id) ? setSelectedIds(selectedIds.filter(itemId => itemId !== id)) : setSelectedIds([...selectedIds, id]);\n  };\n  const toggleSelectAll = () => {\n    selectedIds.length === files.length ? setSelectedIds([]) : setSelectedIds(files.map(f => f.id));\n  };\n  const getFileUrl = filePath => `http://localhost:5000/${filePath.replace(/\\\\/g, '/')}`;\n  const getFileType = filename => {\n    if (!filename) return 'other';\n    const ext = filename.split('.').pop().toLowerCase();\n    if (['jpg', 'jpeg', 'png', 'gif', 'svg'].includes(ext)) return 'image';\n    if (ext === 'pdf') return 'pdf';\n    if (['doc', 'docx'].includes(ext)) return 'word';\n    if (['ppt', 'pptx'].includes(ext)) return 'powerpoint';\n    if (['txt', 'md', 'json', 'js', 'css', 'html'].includes(ext)) return 'text';\n    return 'other';\n  };\n  const handleNextPrev = direction => {\n    if (!previewFile) return;\n    const currentIdx = files.findIndex(f => f.id === previewFile.id);\n    const newIdx = direction === 'next' ? (currentIdx + 1) % files.length : (currentIdx - 1 + files.length) % files.length;\n    setPreviewFile(files[newIdx]);\n  };\n\n  // --- MODAL İÇERİĞİ (REACT PORTAL İLE BODY'YE BASILACAK) ---\n  const ModalContent = () => {\n    if (!previewFile) return null;\n    const type = getFileType(previewFile.filename);\n    const fileUrl = getFileUrl(previewFile.file_path);\n    const viewerUrl = `https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(fileUrl)}`;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 z-[99999] bg-black/95 w-screen h-screen flex flex-col overflow-hidden animate-fade-in\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-none flex items-center justify-between px-6 py-4 bg-zinc-900 border-b border-white/10\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-4 text-white\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setPreviewFile(null),\n            className: \"p-2 hover:bg-white/10 rounded-full text-white cursor-pointer border-none bg-transparent\",\n            children: /*#__PURE__*/_jsxDEV(FiX, {\n              size: 24\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-bold\",\n            children: previewFile.filename\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2\",\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: fileUrl,\n            download: true,\n            className: \"px-4 py-2 bg-primary text-white rounded-lg flex items-center gap-2 no-underline text-sm font-bold\",\n            children: [/*#__PURE__*/_jsxDEV(FiDownload, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 16\n            }, this), \" \\u0130ndir\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 relative flex items-center justify-center p-4 overflow-hidden\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleNextPrev('prev'),\n          className: \"absolute left-4 p-4 text-white/50 hover:text-white z-50 cursor-pointer border-none bg-transparent\",\n          children: /*#__PURE__*/_jsxDEV(FiChevronLeft, {\n            size: 48\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 168\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleNextPrev('next'),\n          className: \"absolute right-4 p-4 text-white/50 hover:text-white z-50 cursor-pointer border-none bg-transparent\",\n          children: /*#__PURE__*/_jsxDEV(FiChevronRight, {\n            size: 48\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 169\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full h-full flex items-center justify-center\",\n          children: [type === 'image' && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: fileUrl,\n            alt: \"Preview\",\n            className: \"max-w-full max-h-full object-contain\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 15\n          }, this), (type === 'pdf' || type === 'text') && /*#__PURE__*/_jsxDEV(\"iframe\", {\n            src: fileUrl,\n            className: \"w-full h-full bg-white border-none\",\n            title: \"PDF/Text Viewer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 15\n          }, this), (type === 'word' || type === 'powerpoint') && (isLocalhost ?\n          /*#__PURE__*/\n          // LOCALHOST İSE UYARI GÖSTER (ÇÜNKÜ OFFICE VIEWER ÇALIŞMAZ)\n          _jsxDEV(\"div\", {\n            className: \"text-center text-white max-w-md p-8 border border-white/10 rounded-2xl bg-zinc-900\",\n            children: [/*#__PURE__*/_jsxDEV(FiAlertCircle, {\n              size: 48,\n              className: \"mx-auto mb-4 text-yellow-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-bold mb-2\",\n              children: \"\\xD6nizleme Localhost'ta \\xC7al\\u0131\\u015Fmaz\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-400 mb-6 text-sm\",\n              children: \"Microsoft Office dosyalar\\u0131 g\\xFCvenlik nedeniyle localhost \\xFCzerinden \\xF6nizlenemez. Siteyi yay\\u0131na ald\\u0131\\u011F\\u0131nda buras\\u0131 otomatik \\xE7al\\u0131\\u015Facakt\\u0131r.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: fileUrl,\n              download: true,\n              className: \"inline-flex items-center px-6 py-3 bg-white text-black rounded-xl font-bold gap-2 no-underline\",\n              children: [/*#__PURE__*/_jsxDEV(FiDownload, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 21\n              }, this), \" Dosyay\\u0131 \\u0130ndirip A\\xE7\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 17\n          }, this) :\n          /*#__PURE__*/\n          // CANLI SİTE İSE VIEWER'I AÇ\n          _jsxDEV(\"iframe\", {\n            src: viewerUrl,\n            className: \"w-full h-full bg-white border-none\",\n            title: \"Office Viewer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 17\n          }, this)), type === 'other' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-white text-center\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Bu dosya format\\u0131 \\xF6nizlenemiyor.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this);\n  };\n\n  // --- ANA RENDER ---\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-8 w-full\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-black text-text-main\",\n        children: \"Project Overview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), canEdit && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          multiple: true,\n          onChange: handleFileUpload,\n          className: \"absolute inset-0 opacity-0 cursor-pointer w-full h-full\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"px-6 py-2 bg-primary text-white rounded-xl font-bold flex items-center gap-2\",\n          children: [uploading ? /*#__PURE__*/_jsxDEV(FiLoader, {\n            className: \"animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 28\n          }, this) : /*#__PURE__*/_jsxDEV(FiUpload, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 67\n          }, this), \" \", uploading ? 'Yükleniyor...' : 'Dosya Yükle']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-surface rounded-2xl border border-border overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-app/50 px-5 py-3 border-b border-border flex items-center gap-2 text-text-secondary font-bold text-xs uppercase tracking-widest\",\n        children: [/*#__PURE__*/_jsxDEV(FiFileText, {\n          className: \"text-primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 12\n        }, this), \" README\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-6 text-text-main whitespace-pre-wrap max-h-60 overflow-y-auto\",\n        children: (currentProject === null || currentProject === void 0 ? void 0 : currentProject.long_description) || \"Dokümantasyon yok.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-surface rounded-2xl border border-border overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex bg-app/50 p-4 text-[10px] font-black text-text-secondary uppercase tracking-widest border-b border-border\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-10 text-center\",\n          children: canEdit && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: toggleSelectAll,\n            className: \"bg-transparent border-none cursor-pointer\",\n            children: /*#__PURE__*/_jsxDEV(FiSquare, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 114\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 26\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 px-4\",\n          children: \"Dosya Ad\\u0131\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-32 hidden sm:block\",\n          children: \"Y\\xFCkleyen\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-32 text-right hidden sm:block\",\n          children: \"Tarih\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-16 text-center\",\n          children: \"G\\xF6r\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"divide-y divide-border m-0 p-0\",\n        children: [files.map(file => /*#__PURE__*/_jsxDEV(\"li\", {\n          onClick: () => setPreviewFile(file),\n          className: \"flex items-center p-4 hover:bg-app/50 cursor-pointer transition-colors group\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-10 text-center\",\n            onClick: e => e.stopPropagation(),\n            children: canEdit && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: e => toggleSelect(file.id, e),\n              className: \"bg-transparent border-none cursor-pointer text-text-secondary\",\n              children: selectedIds.includes(file.id) ? /*#__PURE__*/_jsxDEV(FiCheckSquare, {\n                className: \"text-primary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 187\n              }, this) : /*#__PURE__*/_jsxDEV(FiSquare, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 231\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 30\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 px-4 flex items-center gap-3 overflow-hidden\",\n            children: [/*#__PURE__*/_jsxDEV(FiFile, {\n              className: \"text-text-secondary flex-shrink-0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"truncate font-bold text-text-main text-sm\",\n              children: file.filename\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 18\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-32 text-xs font-bold text-text-secondary hidden sm:block truncate\",\n            children: file.uploader_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-32 text-right text-xs font-mono text-text-secondary hidden sm:block opacity-60\",\n            children: new Date(file.created_at).toLocaleDateString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-16 text-center\",\n            children: /*#__PURE__*/_jsxDEV(FiEye, {\n              className: \"text-text-secondary group-hover:text-primary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 49\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 15\n          }, this)]\n        }, file.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 13\n        }, this)), files.length === 0 && !loading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-8 text-center text-text-secondary\",\n          children: \"Dosya yok.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 46\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this), previewFile && /*#__PURE__*/ReactDOM.createPortal(/*#__PURE__*/_jsxDEV(ModalContent, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 45\n    }, this), document.body)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 5\n  }, this);\n}\n_s(ProjectFiles, \"8iHjyHF5fwMiX50is3NRdFl2i2c=\", false, function () {\n  return [useProjectContext];\n});\n_c = ProjectFiles;\nvar _c;\n$RefreshReg$(_c, \"ProjectFiles\");","map":{"version":3,"names":["React","useState","useEffect","ReactDOM","useProjectContext","FiFile","FiDownload","FiTrash2","FiUpload","FiLoader","FiFileText","FiX","FiEye","FiCheckSquare","FiSquare","FiChevronLeft","FiChevronRight","FiExternalLink","FiAirplay","FiAlertCircle","jsxDEV","_jsxDEV","ProjectFiles","_s","currentProject","fetchFiles","uploadFile","deleteFile","files","setFiles","loading","setLoading","uploading","setUploading","selectedIds","setSelectedIds","previewFile","setPreviewFile","refreshTrigger","setRefreshTrigger","userRole","currentUserRole","canEdit","isLocalhost","window","location","hostname","id","then","data","Array","isArray","catch","err","console","error","finally","handleFileUpload","e","selectedFiles","from","target","length","file","prev","alert","value","handleDeleteSingle","confirm","handleDeleteSelected","Promise","all","map","toggleSelect","stopPropagation","includes","filter","itemId","toggleSelectAll","f","getFileUrl","filePath","replace","getFileType","filename","ext","split","pop","toLowerCase","handleNextPrev","direction","currentIdx","findIndex","newIdx","ModalContent","type","fileUrl","file_path","viewerUrl","encodeURIComponent","className","children","onClick","size","fileName","_jsxFileName","lineNumber","columnNumber","href","download","src","alt","title","multiple","onChange","long_description","uploader_name","Date","created_at","toLocaleDateString","createPortal","document","body","_c","$RefreshReg$"],"sources":["C:/Users/Kaan/OneDrive/Belgeler/GitHub/GazozCollaboration/frontend/src/components/projects/ProjectFiles.js"],"sourcesContent":["// src/components/projects/ProjectFiles.js\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom'; // PORTAL İÇİN GEREKLİ\r\nimport { useProjectContext } from '../../context/ProjectContext';\r\nimport { \r\n  FiFile, FiDownload, FiTrash2, FiUpload, FiLoader, \r\n  FiFileText, FiX, FiEye, FiCheckSquare, FiSquare, FiChevronLeft, FiChevronRight, FiExternalLink, FiAirplay, FiAlertCircle\r\n} from 'react-icons/fi';\r\n\r\nexport default function ProjectFiles() {\r\n  const { currentProject, fetchFiles, uploadFile, deleteFile } = useProjectContext();\r\n  \r\n  const [files, setFiles] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [selectedIds, setSelectedIds] = useState([]);\r\n  const [previewFile, setPreviewFile] = useState(null);\r\n  \r\n  // Listeyi yenilemek için tetikleyici\r\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\r\n\r\n  const userRole = currentProject?.currentUserRole;\r\n  const canEdit = userRole === 'owner' || userRole === 'editor';\r\n  \r\n  // Localhost kontrolü (Office viewer için)\r\n  const isLocalhost = typeof window !== 'undefined' && (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1');\r\n\r\n  // --- 1. LİSTE YÜKLEME (RefreshTrigger her değiştiğinde çalışır) ---\r\n  useEffect(() => {\r\n    if (currentProject?.id) {\r\n      setLoading(true);\r\n      fetchFiles(currentProject.id)\r\n        .then(data => {\r\n          setFiles(Array.isArray(data) ? data : []);\r\n        })\r\n        .catch(err => console.error(\"Liste hatası:\", err))\r\n        .finally(() => setLoading(false));\r\n    }\r\n  }, [currentProject, refreshTrigger]); // refreshTrigger değişince liste yenilenir\r\n\r\n  // --- 2. DOSYA YÜKLEME ---\r\n  const handleFileUpload = async (e) => {\r\n    const selectedFiles = Array.from(e.target.files);\r\n    if (selectedFiles.length === 0) return;\r\n\r\n    setUploading(true);\r\n    try {\r\n      for (const file of selectedFiles) {\r\n        await uploadFile(currentProject.id, file);\r\n      }\r\n      // Yükleme bitince tetikleyiciyi değiştir -> useEffect çalışır -> Liste güncellenir\r\n      setRefreshTrigger(prev => prev + 1);\r\n    } catch (error) {\r\n      alert(\"Yükleme sırasında hata oluştu.\");\r\n    } finally {\r\n      setUploading(false);\r\n      e.target.value = null; \r\n    }\r\n  };\r\n\r\n  // --- 3. SİLME İŞLEMLERİ ---\r\n  const handleDeleteSingle = async (id) => {\r\n    if (window.confirm(\"Silmek istediğinize emin misiniz?\")) {\r\n      await deleteFile(currentProject.id, id);\r\n      setPreviewFile(null);\r\n      setRefreshTrigger(prev => prev + 1); // Listeyi yenile\r\n    }\r\n  };\r\n\r\n  const handleDeleteSelected = async () => {\r\n    if (window.confirm(`${selectedIds.length} dosyayı sil?`)) {\r\n      setLoading(true);\r\n      await Promise.all(selectedIds.map(id => deleteFile(currentProject.id, id)));\r\n      setSelectedIds([]);\r\n      setRefreshTrigger(prev => prev + 1); // Listeyi yenile\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- YARDIMCI FONKSİYONLAR ---\r\n  const toggleSelect = (id, e) => {\r\n    e.stopPropagation();\r\n    selectedIds.includes(id) \r\n      ? setSelectedIds(selectedIds.filter(itemId => itemId !== id))\r\n      : setSelectedIds([...selectedIds, id]);\r\n  };\r\n\r\n  const toggleSelectAll = () => {\r\n    selectedIds.length === files.length ? setSelectedIds([]) : setSelectedIds(files.map(f => f.id));\r\n  };\r\n\r\n  const getFileUrl = (filePath) => `http://localhost:5000/${filePath.replace(/\\\\/g, '/')}`;\r\n\r\n  const getFileType = (filename) => {\r\n    if (!filename) return 'other';\r\n    const ext = filename.split('.').pop().toLowerCase();\r\n    if (['jpg', 'jpeg', 'png', 'gif', 'svg'].includes(ext)) return 'image';\r\n    if (ext === 'pdf') return 'pdf';\r\n    if (['doc', 'docx'].includes(ext)) return 'word';\r\n    if (['ppt', 'pptx'].includes(ext)) return 'powerpoint';\r\n    if (['txt', 'md', 'json', 'js', 'css', 'html'].includes(ext)) return 'text';\r\n    return 'other';\r\n  };\r\n\r\n  const handleNextPrev = (direction) => {\r\n    if (!previewFile) return;\r\n    const currentIdx = files.findIndex(f => f.id === previewFile.id);\r\n    const newIdx = direction === 'next' \r\n      ? (currentIdx + 1) % files.length \r\n      : (currentIdx - 1 + files.length) % files.length;\r\n    setPreviewFile(files[newIdx]);\r\n  };\r\n\r\n  // --- MODAL İÇERİĞİ (REACT PORTAL İLE BODY'YE BASILACAK) ---\r\n  const ModalContent = () => {\r\n    if (!previewFile) return null;\r\n    \r\n    const type = getFileType(previewFile.filename);\r\n    const fileUrl = getFileUrl(previewFile.file_path);\r\n    const viewerUrl = `https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(fileUrl)}`;\r\n\r\n    return (\r\n      <div className=\"fixed inset-0 z-[99999] bg-black/95 w-screen h-screen flex flex-col overflow-hidden animate-fade-in\">\r\n        {/* HEADER */}\r\n        <div className=\"flex-none flex items-center justify-between px-6 py-4 bg-zinc-900 border-b border-white/10\">\r\n          <div className=\"flex items-center gap-4 text-white\">\r\n            <button onClick={() => setPreviewFile(null)} className=\"p-2 hover:bg-white/10 rounded-full text-white cursor-pointer border-none bg-transparent\">\r\n              <FiX size={24} />\r\n            </button>\r\n            <span className=\"font-bold\">{previewFile.filename}</span>\r\n          </div>\r\n          <div className=\"flex gap-2\">\r\n             <a href={fileUrl} download className=\"px-4 py-2 bg-primary text-white rounded-lg flex items-center gap-2 no-underline text-sm font-bold\">\r\n               <FiDownload /> İndir\r\n             </a>\r\n          </div>\r\n        </div>\r\n\r\n        {/* MAIN DISPLAY */}\r\n        <div className=\"flex-1 relative flex items-center justify-center p-4 overflow-hidden\">\r\n          {/* ARROWS */}\r\n          <button onClick={() => handleNextPrev('prev')} className=\"absolute left-4 p-4 text-white/50 hover:text-white z-50 cursor-pointer border-none bg-transparent\"><FiChevronLeft size={48}/></button>\r\n          <button onClick={() => handleNextPrev('next')} className=\"absolute right-4 p-4 text-white/50 hover:text-white z-50 cursor-pointer border-none bg-transparent\"><FiChevronRight size={48}/></button>\r\n\r\n          {/* CONTENT SWITCHER */}\r\n          <div className=\"w-full h-full flex items-center justify-center\">\r\n            {type === 'image' && (\r\n              <img src={fileUrl} alt=\"Preview\" className=\"max-w-full max-h-full object-contain\" />\r\n            )}\r\n            \r\n            {(type === 'pdf' || type === 'text') && (\r\n              <iframe src={fileUrl} className=\"w-full h-full bg-white border-none\" title=\"PDF/Text Viewer\" />\r\n            )}\r\n\r\n            {(type === 'word' || type === 'powerpoint') && (\r\n              isLocalhost ? (\r\n                // LOCALHOST İSE UYARI GÖSTER (ÇÜNKÜ OFFICE VIEWER ÇALIŞMAZ)\r\n                <div className=\"text-center text-white max-w-md p-8 border border-white/10 rounded-2xl bg-zinc-900\">\r\n                  <FiAlertCircle size={48} className=\"mx-auto mb-4 text-yellow-500\"/>\r\n                  <h3 className=\"text-xl font-bold mb-2\">Önizleme Localhost'ta Çalışmaz</h3>\r\n                  <p className=\"text-gray-400 mb-6 text-sm\">Microsoft Office dosyaları güvenlik nedeniyle localhost üzerinden önizlenemez. Siteyi yayına aldığında burası otomatik çalışacaktır.</p>\r\n                  <a href={fileUrl} download className=\"inline-flex items-center px-6 py-3 bg-white text-black rounded-xl font-bold gap-2 no-underline\">\r\n                    <FiDownload/> Dosyayı İndirip Aç\r\n                  </a>\r\n                </div>\r\n              ) : (\r\n                // CANLI SİTE İSE VIEWER'I AÇ\r\n                <iframe src={viewerUrl} className=\"w-full h-full bg-white border-none\" title=\"Office Viewer\" />\r\n              )\r\n            )}\r\n            \r\n            {type === 'other' && (\r\n              <div className=\"text-white text-center\">\r\n                <p>Bu dosya formatı önizlenemiyor.</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // --- ANA RENDER ---\r\n  return (\r\n    <div className=\"space-y-8 w-full\">\r\n      {/* HEADER & UPLOAD */}\r\n      <div className=\"flex justify-between items-center mb-4\">\r\n        <h2 className=\"text-2xl font-black text-text-main\">Project Overview</h2>\r\n        {canEdit && (\r\n          <div className=\"relative\">\r\n            <input type=\"file\" multiple onChange={handleFileUpload} className=\"absolute inset-0 opacity-0 cursor-pointer w-full h-full\" />\r\n            <button className=\"px-6 py-2 bg-primary text-white rounded-xl font-bold flex items-center gap-2\">\r\n              {uploading ? <FiLoader className=\"animate-spin\"/> : <FiUpload/>} {uploading ? 'Yükleniyor...' : 'Dosya Yükle'}\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* README KUTUSU */}\r\n      <div className=\"bg-surface rounded-2xl border border-border overflow-hidden\">\r\n        <div className=\"bg-app/50 px-5 py-3 border-b border-border flex items-center gap-2 text-text-secondary font-bold text-xs uppercase tracking-widest\">\r\n           <FiFileText className=\"text-primary\" /> README\r\n        </div>\r\n        <div className=\"p-6 text-text-main whitespace-pre-wrap max-h-60 overflow-y-auto\">\r\n          {currentProject?.long_description || \"Dokümantasyon yok.\"}\r\n        </div>\r\n      </div>\r\n\r\n      {/* DOSYA LİSTESİ */}\r\n      <div className=\"bg-surface rounded-2xl border border-border overflow-hidden\">\r\n        {/* Liste Başlıkları */}\r\n        <div className=\"flex bg-app/50 p-4 text-[10px] font-black text-text-secondary uppercase tracking-widest border-b border-border\">\r\n          <div className=\"w-10 text-center\">\r\n             {canEdit && <button onClick={toggleSelectAll} className=\"bg-transparent border-none cursor-pointer\"><FiSquare size={16}/></button>}\r\n          </div>\r\n          <div className=\"flex-1 px-4\">Dosya Adı</div>\r\n          <div className=\"w-32 hidden sm:block\">Yükleyen</div>\r\n          <div className=\"w-32 text-right hidden sm:block\">Tarih</div>\r\n          <div className=\"w-16 text-center\">Gör</div>\r\n        </div>\r\n\r\n        {/* Liste Elemanları */}\r\n        <ul className=\"divide-y divide-border m-0 p-0\">\r\n          {files.map((file) => (\r\n            <li key={file.id} onClick={() => setPreviewFile(file)} className=\"flex items-center p-4 hover:bg-app/50 cursor-pointer transition-colors group\">\r\n              <div className=\"w-10 text-center\" onClick={(e) => e.stopPropagation()}>\r\n                 {canEdit && <button onClick={(e) => toggleSelect(file.id, e)} className=\"bg-transparent border-none cursor-pointer text-text-secondary\">{selectedIds.includes(file.id) ? <FiCheckSquare className=\"text-primary\"/> : <FiSquare/>}</button>}\r\n              </div>\r\n              <div className=\"flex-1 px-4 flex items-center gap-3 overflow-hidden\">\r\n                 <FiFile className=\"text-text-secondary flex-shrink-0\"/>\r\n                 <span className=\"truncate font-bold text-text-main text-sm\">{file.filename}</span>\r\n              </div>\r\n              <div className=\"w-32 text-xs font-bold text-text-secondary hidden sm:block truncate\">{file.uploader_name}</div>\r\n              <div className=\"w-32 text-right text-xs font-mono text-text-secondary hidden sm:block opacity-60\">{new Date(file.created_at).toLocaleDateString()}</div>\r\n              <div className=\"w-16 text-center\"><FiEye className=\"text-text-secondary group-hover:text-primary\"/></div>\r\n            </li>\r\n          ))}\r\n          {files.length === 0 && !loading && <div className=\"p-8 text-center text-text-secondary\">Dosya yok.</div>}\r\n        </ul>\r\n      </div>\r\n\r\n      {/* PORTAL KULLANIMI: MODAL DOM AĞACININ DIŞINA, BODY'YE BASILIR */}\r\n      {previewFile && ReactDOM.createPortal(<ModalContent />, document.body)}\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}