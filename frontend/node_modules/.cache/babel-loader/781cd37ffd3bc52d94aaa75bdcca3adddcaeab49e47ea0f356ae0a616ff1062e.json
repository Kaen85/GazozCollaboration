{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kaan\\\\OneDrive\\\\Belgeler\\\\GitHub\\\\GazozCollaboration\\\\frontend\\\\src\\\\components\\\\projects\\\\ProjectIssues.js\",\n  _s = $RefreshSig$();\n// src/components/projects/ProjectIssues.js\n\nimport React, { useState, useEffect } from 'react';\nimport { useProjectContext } from '../../context/ProjectContext';\nimport { useAuth } from '../../context/AuthContext';\nimport { FiLoader, FiPlus } from 'react-icons/fi';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ProjectIssues({\n  projectId\n}) {\n  _s();\n  const [issues, setIssues] = useState([]);\n  const [newIssueText, setNewIssueText] = useState('');\n\n  // Context'ten issue'ları çeken ve oluşturan fonksiyonları al\n  const {\n    fetchIssues,\n    createIssue,\n    loading\n  } = useProjectContext();\n  const {\n    user\n  } = useAuth(); // Yorumu kimin attığını bilmek için\n\n  // 1. Sayfa yüklendiğinde issue'ları çek\n  useEffect(() => {\n    const loadIssues = async () => {\n      try {\n        const fetchedIssues = await fetchIssues(projectId);\n        setIssues(fetchedIssues);\n      } catch (error) {\n        console.error(\"Failed to fetch issues:\", error);\n      }\n    };\n    if (projectId) {\n      loadIssues();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [projectId]); // projectId değişirse tekrar çek\n\n  // 2. Yeni issue oluşturma formu\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!newIssueText.trim()) return; // Boş issue gönderme\n\n    try {\n      const newIssue = await createIssue(projectId, newIssueText);\n      // Backend'den dönen yeni issue'yu, yazar adıyla birlikte listeye ekle\n      setIssues([{\n        ...newIssue,\n        created_by_name: user.username\n      }, ...issues]);\n      setNewIssueText(''); // Formu temizle\n    } catch (error) {\n      console.error(\"Failed to create issue:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gray-800 p-4 rounded-lg shadow-lg\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-xl font-semibold text-white mb-4\",\n      children: \"Project Issues\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"flex mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: newIssueText,\n        onChange: e => setNewIssueText(e.target.value),\n        className: \"flex-grow py-2 px-3 text-gray-200 bg-gray-700 border border-gray-600 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n        placeholder: \"New issue title...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading,\n        className: \"flex items-center bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-3 rounded-r-lg transition-colors disabled:opacity-50\",\n        children: loading ? /*#__PURE__*/_jsxDEV(FiLoader, {\n          className: \"animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 22\n        }, this) : /*#__PURE__*/_jsxDEV(FiPlus, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 62\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-3\",\n      children: loading && issues.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-400\",\n        children: \"Loading issues...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this) : issues.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-400\",\n        children: \"No issues found for this project.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this) : issues.map(issue => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-700 p-3 rounded-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-white\",\n          children: issue.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xs text-gray-400\",\n          children: [\"Opened by \", issue.created_by_name || '...']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 15\n        }, this)]\n      }, issue.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n_s(ProjectIssues, \"7mCbL6bSxKs3FKlNTqPYYUz2oXI=\", false, function () {\n  return [useProjectContext, useAuth];\n});\n_c = ProjectIssues;\nexport default ProjectIssues;\nvar _c;\n$RefreshReg$(_c, \"ProjectIssues\");","map":{"version":3,"names":["React","useState","useEffect","useProjectContext","useAuth","FiLoader","FiPlus","jsxDEV","_jsxDEV","ProjectIssues","projectId","_s","issues","setIssues","newIssueText","setNewIssueText","fetchIssues","createIssue","loading","user","loadIssues","fetchedIssues","error","console","handleSubmit","e","preventDefault","trim","newIssue","created_by_name","username","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","value","onChange","target","placeholder","disabled","length","map","issue","text","id","_c","$RefreshReg$"],"sources":["C:/Users/Kaan/OneDrive/Belgeler/GitHub/GazozCollaboration/frontend/src/components/projects/ProjectIssues.js"],"sourcesContent":["// src/components/projects/ProjectIssues.js\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useProjectContext } from '../../context/ProjectContext';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { FiLoader, FiPlus } from 'react-icons/fi';\r\n\r\nfunction ProjectIssues({ projectId }) {\r\n  const [issues, setIssues] = useState([]);\r\n  const [newIssueText, setNewIssueText] = useState('');\r\n  \r\n  // Context'ten issue'ları çeken ve oluşturan fonksiyonları al\r\n  const { fetchIssues, createIssue, loading } = useProjectContext();\r\n  const { user } = useAuth(); // Yorumu kimin attığını bilmek için\r\n\r\n  // 1. Sayfa yüklendiğinde issue'ları çek\r\n  useEffect(() => {\r\n    const loadIssues = async () => {\r\n      try {\r\n        const fetchedIssues = await fetchIssues(projectId);\r\n        setIssues(fetchedIssues);\r\n      } catch (error) {\r\n        console.error(\"Failed to fetch issues:\", error);\r\n      }\r\n    };\r\n    \r\n    if (projectId) {\r\n      loadIssues();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [projectId]); // projectId değişirse tekrar çek\r\n\r\n  // 2. Yeni issue oluşturma formu\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!newIssueText.trim()) return; // Boş issue gönderme\r\n\r\n    try {\r\n      const newIssue = await createIssue(projectId, newIssueText);\r\n      // Backend'den dönen yeni issue'yu, yazar adıyla birlikte listeye ekle\r\n      setIssues([{ ...newIssue, created_by_name: user.username }, ...issues]);\r\n      setNewIssueText(''); // Formu temizle\r\n    } catch (error) {\r\n      console.error(\"Failed to create issue:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-gray-800 p-4 rounded-lg shadow-lg\">\r\n      <h3 className=\"text-xl font-semibold text-white mb-4\">Project Issues</h3>\r\n      \r\n      {/* Yeni Issue Ekleme Formu */}\r\n      <form onSubmit={handleSubmit} className=\"flex mb-4\">\r\n        <input \r\n          type=\"text\"\r\n          value={newIssueText}\r\n          onChange={(e) => setNewIssueText(e.target.value)}\r\n          className=\"flex-grow py-2 px-3 text-gray-200 bg-gray-700 border border-gray-600 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          placeholder=\"New issue title...\"\r\n        />\r\n        <button \r\n          type=\"submit\" \r\n          disabled={loading}\r\n          className=\"flex items-center bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-3 rounded-r-lg transition-colors disabled:opacity-50\"\r\n        >\r\n          {loading ? <FiLoader className=\"animate-spin\" /> : <FiPlus />}\r\n        </button>\r\n      </form>\r\n\r\n      {/* Issue Listesi */}\r\n      <div className=\"space-y-3\">\r\n        {loading && issues.length === 0 ? (\r\n          <p className=\"text-gray-400\">Loading issues...</p>\r\n        ) : issues.length === 0 ? (\r\n          <p className=\"text-gray-400\">No issues found for this project.</p>\r\n        ) : (\r\n          issues.map(issue => (\r\n            <div key={issue.id} className=\"bg-gray-700 p-3 rounded-md\">\r\n              <p className=\"text-white\">{issue.text}</p>\r\n              <span className=\"text-xs text-gray-400\">\r\n                Opened by {issue.created_by_name || '...'}\r\n              </span>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProjectIssues;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}