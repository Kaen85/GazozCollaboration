{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kaan\\\\OneDrive\\\\Belgeler\\\\GitHub\\\\GazozCollaboration\\\\frontend\\\\src\\\\components\\\\projects\\\\Comment.js\",\n  _s = $RefreshSig$();\n// src/components/projects/Comment.js\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useAuth } from '../../context/AuthContext';\nimport { useProjectContext } from '../../context/ProjectContext';\nimport { FiUser, FiHeart, FiCopy, FiMoreVertical, FiEdit, FiTrash, FiLoader, FiCheck } from 'react-icons/fi';\n\n// Yeni proplar alıyoruz: projectId, onCommentUpdated, onCommentDeleted\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Comment({\n  comment,\n  projectId,\n  onCommentUpdated,\n  onCommentDeleted\n}) {\n  _s();\n  var _localComment$likes_u, _localComment$likes_u2;\n  const {\n    user\n  } = useAuth();\n  // Mevcut giriş yapmış kullanıcı\n  const {\n    likeComment,\n    editComment,\n    deleteComment,\n    currentProject // Proje sahibini kontrol etmek için\n  } = useProjectContext();\n\n  // 'comment' prop'unu yerel state'e alıyoruz\n  const [localComment, setLocalComment] = useState(comment);\n\n  // State'ler\n  const [isEditing, setIsEditing] = useState(false);\n  const [editText, setEditText] = useState(comment.text);\n  const [isSaving, setIsSaving] = useState(false);\n\n  // 3-nokta menü state'i\n  const [isMenuOpen, setMenuOpen] = useState(false);\n  const menuRef = useRef(null);\n\n  // Diğer state'ler\n  const [copied, setCopied] = useState(false);\n  const [isLiking, setIsLiking] = useState(false);\n\n  // === GÜVENLİK KONTROLLERİ ===\n  const authorId = localComment === null || localComment === void 0 ? void 0 : localComment.author_id;\n  const currentUserId = user === null || user === void 0 ? void 0 : user.id;\n  const projectOwnerId = currentProject === null || currentProject === void 0 ? void 0 : currentProject.owner_id;\n  const isOwner = currentUserId === authorId;\n  const isProjectOwner = currentUserId === projectOwnerId;\n  const hasLiked = localComment === null || localComment === void 0 ? void 0 : (_localComment$likes_u = localComment.likes_user_ids) === null || _localComment$likes_u === void 0 ? void 0 : _localComment$likes_u.includes(currentUserId);\n  const likeCount = (localComment === null || localComment === void 0 ? void 0 : (_localComment$likes_u2 = localComment.likes_user_ids) === null || _localComment$likes_u2 === void 0 ? void 0 : _localComment$likes_u2.length) || 0;\n\n  // Prop değişirse state güncelle\n  useEffect(() => {\n    setLocalComment(comment);\n  }, [comment]);\n\n  // --- KOPYALA FONKSİYONU ---\n  const handleCopy = () => {\n    const el = document.createElement('textarea');\n    el.value = localComment.text;\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand('copy');\n    document.body.removeChild(el);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  // --- BEĞEN (LIKE) FONKSİYONU ---\n  const handleLike = async () => {\n    if (isLiking) return;\n    setIsLiking(true);\n    try {\n      const updatedLikes = await likeComment(projectId, localComment.id);\n      setLocalComment(prev => ({\n        ...prev,\n        likes_user_ids: updatedLikes.likes_user_ids\n      }));\n    } catch (error) {\n      console.error(\"Failed to like comment:\", error);\n    } finally {\n      setIsLiking(false);\n    }\n  };\n\n  // --- DÜZENLE (EDIT) FONKSİYONLARI ---\n  const handleEdit = () => {\n    setIsEditing(true);\n    setMenuOpen(false);\n  };\n  const handleCancelEdit = () => {\n    setIsEditing(false);\n    setEditText(localComment.text); // Değişiklikleri iptal et\n  };\n  const handleSaveEdit = async () => {\n    if (editText.trim() === '' || editText === localComment.text) {\n      return handleCancelEdit();\n    }\n    setIsSaving(true);\n    try {\n      const updatedComment = await editComment(projectId, localComment.id, editText);\n      setLocalComment(updatedComment);\n      setIsEditing(false);\n      if (onCommentUpdated) {\n        onCommentUpdated(updatedComment);\n      }\n    } catch (error) {\n      console.error(\"Failed to save edit:\", error);\n      alert(\"Hata: \" + error.message);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  // --- SİL (DELETE) FONKSİYONU ---\n  const handleDelete = async () => {\n    if (window.confirm('Are you sure you want to delete this comment?')) {\n      try {\n        await deleteComment(projectId, localComment.id);\n        if (onCommentDeleted) {\n          onCommentDeleted(localComment.id);\n        }\n      } catch (error) {\n        console.error(\"Failed to delete comment:\", error);\n        alert(\"Hata: \" + error.message);\n      }\n    }\n    setMenuOpen(false);\n  };\n\n  // Menü dışına tıklamayı dinle\n  useEffect(() => {\n    function handleClickOutside(event) {\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\n        setMenuOpen(false);\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [menuRef]);\n  return (\n    /*#__PURE__*/\n    // Yorumları ayırmak için üst çizgi: border-gray-600 -> border-border\n    _jsxDEV(\"div\", {\n      className: \"flex space-x-3 pt-4 border-t border-border/50 first:pt-0 first:border-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-shrink-0\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-8 h-8 rounded-full bg-app flex items-center justify-center border border-border\",\n          children: /*#__PURE__*/_jsxDEV(FiUser, {\n            className: \"w-5 h-5 text-text-secondary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1\",\n        children: isEditing ?\n        /*#__PURE__*/\n        // --- DÜZENLEME MODU ---\n        _jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: editText,\n            onChange: e => setEditText(e.target.value),\n            className: \"w-full py-2 px-3 text-text-main bg-surface border border-primary rounded-lg focus:outline-none focus:ring-1 focus:ring-primary shadow-sm\",\n            rows: \"3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleCancelEdit,\n              className: \"text-text-secondary hover:text-text-main text-sm transition-colors\",\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSaveEdit,\n              disabled: isSaving,\n              className: \"flex items-center bg-primary hover:bg-primary-hover text-white font-semibold py-1 px-3 rounded-lg text-sm transition-colors disabled:opacity-50\",\n              children: isSaving ? /*#__PURE__*/_jsxDEV(FiLoader, {\n                className: \"animate-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 29\n              }, this) : 'Save'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this) :\n        /*#__PURE__*/\n        // --- NORMAL GÖRÜNÜM MODU ---\n        // bg-gray-700 -> bg-surface, border ekledik\n        _jsxDEV(\"div\", {\n          className: \"bg-surface border border-border rounded-lg p-3 shadow-sm hover:shadow-md transition-shadow\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold text-text-main text-sm\",\n              children: localComment.author_name || 'User'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs text-text-secondary\",\n              children: new Date(localComment.created_at).toLocaleString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-text-main text-sm break-words leading-relaxed\",\n            children: localComment.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-3 mt-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleLike,\n              disabled: isLiking,\n              className: `flex items-center text-xs transition-colors ${hasLiked ? 'text-red-500' : 'text-text-secondary hover:text-red-500'}`,\n              children: [/*#__PURE__*/_jsxDEV(FiHeart, {\n                fill: hasLiked ? 'currentColor' : 'none',\n                size: 14,\n                className: \"mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 17\n              }, this), likeCount]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleCopy,\n              className: \"text-xs text-text-secondary hover:text-text-main transition-colors\",\n              children: copied ? /*#__PURE__*/_jsxDEV(FiCheck, {\n                size: 14,\n                className: \"text-green-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 27\n              }, this) : /*#__PURE__*/_jsxDEV(FiCopy, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 78\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 15\n            }, this), (isOwner || isProjectOwner) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative\",\n              ref: menuRef,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setMenuOpen(p => !p),\n                className: \"text-xs text-text-secondary hover:text-text-main transition-colors\",\n                children: /*#__PURE__*/_jsxDEV(FiMoreVertical, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 19\n              }, this), isMenuOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute right-0 top-6 w-36 bg-surface border border-border rounded-md shadow-xl z-20 overflow-hidden\",\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"py-1\",\n                  children: [isOwner && /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: handleEdit,\n                      className: \"w-full text-left flex items-center px-4 py-2 text-sm text-text-main hover:bg-surface-hover transition-colors\",\n                      children: [/*#__PURE__*/_jsxDEV(FiEdit, {\n                        size: 14,\n                        className: \"mr-2 text-text-secondary\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 225,\n                        columnNumber: 31\n                      }, this), \"Edit\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 221,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: handleDelete,\n                      className: \"w-full text-left flex items-center px-4 py-2 text-sm text-red-500 hover:bg-surface-hover transition-colors\",\n                      children: [/*#__PURE__*/_jsxDEV(FiTrash, {\n                        size: 14,\n                        className: \"mr-2\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 236,\n                        columnNumber: 29\n                      }, this), \"Delete\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 232,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 231,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 5\n    }, this)\n  );\n}\n_s(Comment, \"CBYCuzfcWs3MwN65mbO8v7DNjwI=\", false, function () {\n  return [useAuth, useProjectContext];\n});\n_c = Comment;\nexport default Comment;\nvar _c;\n$RefreshReg$(_c, \"Comment\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useAuth","useProjectContext","FiUser","FiHeart","FiCopy","FiMoreVertical","FiEdit","FiTrash","FiLoader","FiCheck","jsxDEV","_jsxDEV","Comment","comment","projectId","onCommentUpdated","onCommentDeleted","_s","_localComment$likes_u","_localComment$likes_u2","user","likeComment","editComment","deleteComment","currentProject","localComment","setLocalComment","isEditing","setIsEditing","editText","setEditText","text","isSaving","setIsSaving","isMenuOpen","setMenuOpen","menuRef","copied","setCopied","isLiking","setIsLiking","authorId","author_id","currentUserId","id","projectOwnerId","owner_id","isOwner","isProjectOwner","hasLiked","likes_user_ids","includes","likeCount","length","handleCopy","el","document","createElement","value","body","appendChild","select","execCommand","removeChild","setTimeout","handleLike","updatedLikes","prev","error","console","handleEdit","handleCancelEdit","handleSaveEdit","trim","updatedComment","alert","message","handleDelete","window","confirm","handleClickOutside","event","current","contains","target","addEventListener","removeEventListener","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","e","rows","onClick","disabled","author_name","Date","created_at","toLocaleString","fill","size","ref","p","_c","$RefreshReg$"],"sources":["C:/Users/Kaan/OneDrive/Belgeler/GitHub/GazozCollaboration/frontend/src/components/projects/Comment.js"],"sourcesContent":["// src/components/projects/Comment.js\r\n\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { useProjectContext } from '../../context/ProjectContext';\r\nimport { \r\n  FiUser, FiHeart, FiCopy, FiMoreVertical, FiEdit, FiTrash, \r\n    FiLoader, FiCheck,\r\n} from 'react-icons/fi';\r\n\r\n// Yeni proplar alıyoruz: projectId, onCommentUpdated, onCommentDeleted\r\nfunction Comment({ comment, projectId, onCommentUpdated, onCommentDeleted }) {\r\n  \r\n  const { user } = useAuth();\r\n  // Mevcut giriş yapmış kullanıcı\r\n  const { \r\n    likeComment, \r\n    editComment, \r\n    deleteComment, \r\n    currentProject // Proje sahibini kontrol etmek için\r\n  } = useProjectContext();\r\n\r\n  // 'comment' prop'unu yerel state'e alıyoruz\r\n  const [localComment, setLocalComment] = useState(comment);\r\n  \r\n  // State'ler\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editText, setEditText] = useState(comment.text);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n\r\n  // 3-nokta menü state'i\r\n  const [isMenuOpen, setMenuOpen] = useState(false);\r\n  const menuRef = useRef(null);\r\n  \r\n  // Diğer state'ler\r\n  const [copied, setCopied] = useState(false);\r\n  const [isLiking, setIsLiking] = useState(false);\r\n\r\n  // === GÜVENLİK KONTROLLERİ ===\r\n  const authorId = localComment?.author_id;\r\n  const currentUserId = user?.id;\r\n  const projectOwnerId = currentProject?.owner_id;\r\n\r\n  const isOwner = currentUserId === authorId;\r\n  const isProjectOwner = currentUserId === projectOwnerId;\r\n  const hasLiked = localComment?.likes_user_ids?.includes(currentUserId);\r\n  const likeCount = localComment?.likes_user_ids?.length || 0;\r\n\r\n  // Prop değişirse state güncelle\r\n  useEffect(() => {\r\n    setLocalComment(comment);\r\n  }, [comment]);\r\n\r\n  // --- KOPYALA FONKSİYONU ---\r\n  const handleCopy = () => {\r\n    const el = document.createElement('textarea');\r\n    el.value = localComment.text;\r\n    document.body.appendChild(el);\r\n    el.select();\r\n    document.execCommand('copy');\r\n    document.body.removeChild(el);\r\n    setCopied(true);\r\n    setTimeout(() => setCopied(false), 2000); \r\n  };\r\n\r\n  // --- BEĞEN (LIKE) FONKSİYONU ---\r\n  const handleLike = async () => {\r\n    if (isLiking) return;\r\n    setIsLiking(true);\r\n    try {\r\n      const updatedLikes = await likeComment(projectId, localComment.id);\r\n      setLocalComment(prev => ({ ...prev, likes_user_ids: updatedLikes.likes_user_ids }));\r\n    } catch (error) {\r\n      console.error(\"Failed to like comment:\", error);\r\n    } finally {\r\n      setIsLiking(false);\r\n    }\r\n  };\r\n\r\n  // --- DÜZENLE (EDIT) FONKSİYONLARI ---\r\n  const handleEdit = () => {\r\n    setIsEditing(true);\r\n    setMenuOpen(false);\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setIsEditing(false);\r\n    setEditText(localComment.text); // Değişiklikleri iptal et\r\n  };\r\n\r\n  const handleSaveEdit = async () => {\r\n    if (editText.trim() === '' || editText === localComment.text) {\r\n      return handleCancelEdit();\r\n    }\r\n    setIsSaving(true);\r\n    try {\r\n      const updatedComment = await editComment(projectId, localComment.id, editText);\r\n      setLocalComment(updatedComment);\r\n      setIsEditing(false);\r\n      if (onCommentUpdated) {\r\n        onCommentUpdated(updatedComment);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to save edit:\", error);\r\n      alert(\"Hata: \" + error.message);\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  // --- SİL (DELETE) FONKSİYONU ---\r\n  const handleDelete = async () => {\r\n    if (window.confirm('Are you sure you want to delete this comment?')) {\r\n      try {\r\n        await deleteComment(projectId, localComment.id);\r\n        if (onCommentDeleted) {\r\n          onCommentDeleted(localComment.id);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Failed to delete comment:\", error);\r\n        alert(\"Hata: \" + error.message);\r\n      }\r\n    }\r\n    setMenuOpen(false);\r\n  };\r\n  \r\n  // Menü dışına tıklamayı dinle\r\n  useEffect(() => {\r\n    function handleClickOutside(event) {\r\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\r\n        setMenuOpen(false);\r\n      }\r\n    }\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, [menuRef]);\r\n\r\n  return (\r\n    // Yorumları ayırmak için üst çizgi: border-gray-600 -> border-border\r\n    <div className=\"flex space-x-3 pt-4 border-t border-border/50 first:pt-0 first:border-0\">\r\n      {/* Avatar/İkon */}\r\n      <div className=\"flex-shrink-0\">\r\n        {/* bg-gray-700 -> bg-app, text-gray-400 -> text-text-secondary */}\r\n        <div className=\"w-8 h-8 rounded-full bg-app flex items-center justify-center border border-border\">\r\n            <FiUser className=\"w-5 h-5 text-text-secondary\" />\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Yorum İçeriği */}\r\n      <div className=\"flex-1\">\r\n        \r\n        {isEditing ? (\r\n          // --- DÜZENLEME MODU ---\r\n          <div className=\"space-y-2\">\r\n            <textarea\r\n              value={editText}\r\n              onChange={(e) => setEditText(e.target.value)}\r\n              className=\"w-full py-2 px-3 text-text-main bg-surface border border-primary rounded-lg focus:outline-none focus:ring-1 focus:ring-primary shadow-sm\"\r\n              rows=\"3\"\r\n            />\r\n            <div className=\"flex justify-end space-x-2\">\r\n              <button onClick={handleCancelEdit} className=\"text-text-secondary hover:text-text-main text-sm transition-colors\">Cancel</button>\r\n              <button \r\n                onClick={handleSaveEdit} \r\n                disabled={isSaving}\r\n                className=\"flex items-center bg-primary hover:bg-primary-hover text-white font-semibold py-1 px-3 rounded-lg text-sm transition-colors disabled:opacity-50\"\r\n              >\r\n                {isSaving ? <FiLoader className=\"animate-spin\" /> : 'Save'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          // --- NORMAL GÖRÜNÜM MODU ---\r\n          // bg-gray-700 -> bg-surface, border ekledik\r\n          <div className=\"bg-surface border border-border rounded-lg p-3 shadow-sm hover:shadow-md transition-shadow\">\r\n            <div className=\"flex items-center justify-between mb-1\">\r\n              <span className=\"font-semibold text-text-main text-sm\">\r\n                {localComment.author_name || 'User'} \r\n              </span>\r\n              <span className=\"text-xs text-text-secondary\">\r\n                {new Date(localComment.created_at).toLocaleString()}\r\n              </span>\r\n            </div>\r\n            <p className=\"text-text-main text-sm break-words leading-relaxed\">\r\n              {localComment.text}\r\n            </p>\r\n            \r\n            {/* YORUM ALTINDAKİ BUTONLAR */}\r\n            <div className=\"flex items-center space-x-3 mt-3\">\r\n              \r\n              {/* BEĞEN BUTONU */}\r\n              <button \r\n                onClick={handleLike} \r\n                disabled={isLiking}\r\n                className={`flex items-center text-xs transition-colors ${hasLiked ? 'text-red-500' : 'text-text-secondary hover:text-red-500'}`}\r\n              >\r\n                <FiHeart fill={hasLiked ? 'currentColor' : 'none'} size={14} className=\"mr-1\" />\r\n                {likeCount}\r\n              </button>\r\n              \r\n              {/* KOPYALA BUTONU */}\r\n              <button onClick={handleCopy} className=\"text-xs text-text-secondary hover:text-text-main transition-colors\">\r\n                {copied ? <FiCheck size={14} className=\"text-green-500\" /> : <FiCopy size={14} />}\r\n              </button>\r\n              \r\n              {/* 3-NOKTA MENÜ */}\r\n              {(isOwner || isProjectOwner) && (\r\n                <div className=\"relative\" ref={menuRef}>\r\n                  <button onClick={() => setMenuOpen(p => !p)} className=\"text-xs text-text-secondary hover:text-text-main transition-colors\">\r\n                    <FiMoreVertical size={14} />\r\n                  </button>\r\n                  \r\n                  {isMenuOpen && (\r\n                    <div className=\"absolute right-0 top-6 w-36 bg-surface border border-border rounded-md shadow-xl z-20 overflow-hidden\">\r\n                      <ul className=\"py-1\">\r\n                        {/* EDIT */}\r\n                        {isOwner && (\r\n                          <li>\r\n                            <button\r\n                              onClick={handleEdit}\r\n                              className=\"w-full text-left flex items-center px-4 py-2 text-sm text-text-main hover:bg-surface-hover transition-colors\"\r\n                            >\r\n                              <FiEdit size={14} className=\"mr-2 text-text-secondary\" />\r\n                              Edit\r\n                            </button>\r\n                          </li>\r\n                        )}\r\n                        {/* DELETE */}\r\n                        <li>\r\n                          <button\r\n                            onClick={handleDelete}\r\n                            className=\"w-full text-left flex items-center px-4 py-2 text-sm text-red-500 hover:bg-surface-hover transition-colors\"\r\n                          >\r\n                            <FiTrash size={14} className=\"mr-2\" />\r\n                            Delete\r\n                          </button>\r\n                        </li>\r\n                      </ul>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Comment;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}